{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\nnode \"Cloud-init Host\\n(YAML, cloud-init)\" as cloudinit {\n  artifact \"user-data\" as userdata\n}\n\nnode \"Ansible Controller\\n(YAML, Ansible)\" as ansible {\n  artifact \"ansible.cfg\"\n  artifact \"requirements.yml\"\n  artifact \"clients.yml\"\n  artifact \"servers.yml\"\n  artifact \"cluster.yml\"\n  artifact \"hosts.ini\"\n}\n\nnode \"Nomad Cluster\\n(HCL, Nomad)\" as nomad {\n  node \"Nomad Servers\" as nomad_servers\n  node \"Nomad Clients\" as nomad_clients\n}\n\nnode \"Consul Cluster\\n(Consul)\" as consul {\n  node \"Consul Servers\" as consul_servers\n  node \"Consul Clients\" as consul_clients\n}\n\nnode \"Docker Hosts\" as docker {\n  artifact \"Docker Runtime\"\n}\n\npackage \"Nomad Jobs (HCL)\" as jobs {\n  artifact \"CoreDNS (coredns/coredns:1.10.0)\"\n  artifact \"iperf3 (taoyou/iperf3-alpine:v3.11)\"\n  artifact \"Pi-hole (pihole/pihole:2023.03.1)\"\n  artifact \"Prometheus (prom/prometheus:v2.40.3)\"\n  artifact \"Traefik (traefik:v2.9.4)\"\n}\n\ncloudinit --> ansible : Provision hosts\nansible --> nomad_servers : Configure Nomad servers\nansible --> nomad_clients : Configure Nomad clients\nansible --> consul_servers : Configure Consul servers\nansible --> consul_clients : Configure Consul clients\nansible --> docker : Install Docker\nnomad_servers --> consul_servers : Service discovery\nnomad_clients --> consul_clients : Service discovery\nnomad_clients --> docker : Run jobs\njobs --> nomad_clients : Deploy via Nomad\njobs --> consul_clients : Register services\n\n@enduml",
  "svg_diagram": "<?plantuml 1.2026.1beta5?><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"708px\" preserveAspectRatio=\"none\" style=\"width:2320px;height:708px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 2320 708\" width=\"2320px\" zoomAndPan=\"magnify\"><defs/><g><!--cluster cloudinit--><g class=\"cluster\" data-qualified-name=\"cloudinit\" data-source-line=\"4\" id=\"ent0002\"><polygon fill=\"#FFFFFF\" points=\"1612,16,1622,6,1829,6,1829,123.29,1819,133.29,1612,133.29,1612,16\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1819\" x2=\"1829\" y1=\"16\" y2=\"6\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1612\" x2=\"1819\" y1=\"16\" y2=\"16\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1819\" x2=\"1819\" y1=\"16\" y2=\"133.29\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"117.9814\" x=\"1657.5093\" y=\"31.9951\">Cloud-init Host</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"141.5859\" x=\"1645.707\" y=\"48.292\">(YAML, cloud-init)</text></g><!--cluster ansible--><g class=\"cluster\" data-qualified-name=\"ansible\" data-source-line=\"8\" id=\"ent0004\"><polygon fill=\"#FFFFFF\" points=\"1800,206.29,1810,196.29,2303,196.29,2303,495.53,2293,505.53,1800,505.53,1800,206.29\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"2293\" x2=\"2303\" y1=\"206.29\" y2=\"196.29\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1800\" x2=\"2293\" y1=\"206.29\" y2=\"206.29\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"2293\" x2=\"2293\" y1=\"206.29\" y2=\"505.53\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"142.1943\" x=\"1976.4028\" y=\"222.2851\">Ansible Controller</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"125.0635\" x=\"1984.9683\" y=\"238.582\">(YAML, Ansible)</text></g><!--cluster nomad--><g class=\"cluster\" data-qualified-name=\"nomad\" data-source-line=\"17\" id=\"ent0011\"><polygon fill=\"#FFFFFF\" points=\"1150,392.74,1160,382.74,1507,382.74,1507,491.03,1497,501.03,1150,501.03,1150,392.74\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1497\" x2=\"1507\" y1=\"392.74\" y2=\"382.74\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1150\" x2=\"1497\" y1=\"392.74\" y2=\"392.74\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1497\" x2=\"1497\" y1=\"392.74\" y2=\"501.03\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"116.7305\" x=\"1266.1348\" y=\"408.7351\">Nomad Cluster</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"109.293\" x=\"1269.8535\" y=\"425.032\">(HCL, Nomad)</text></g><!--cluster consul--><g class=\"cluster\" data-qualified-name=\"consul\" data-source-line=\"22\" id=\"ent0014\"><polygon fill=\"#FFFFFF\" points=\"1149,578.68,1159,568.68,1500,568.68,1500,676.98,1490,686.98,1149,686.98,1149,578.68\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1490\" x2=\"1500\" y1=\"578.68\" y2=\"568.68\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1149\" x2=\"1490\" y1=\"578.68\" y2=\"578.68\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1490\" x2=\"1490\" y1=\"578.68\" y2=\"686.98\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"114.2969\" x=\"1263.3516\" y=\"594.6751\">Consul Cluster</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"65.7549\" x=\"1287.6226\" y=\"610.972\">(Consul)</text></g><!--cluster docker--><g class=\"cluster\" data-qualified-name=\"docker\" data-source-line=\"27\" id=\"ent0017\"><polygon fill=\"#FFFFFF\" points=\"1532,590.18,1542,580.18,1743,580.18,1743,681.48,1733,691.48,1532,691.48,1532,590.18\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1733\" x2=\"1743\" y1=\"590.18\" y2=\"580.18\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1532\" x2=\"1733\" y1=\"590.18\" y2=\"590.18\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1733\" x2=\"1733\" y1=\"590.18\" y2=\"691.48\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"104.8154\" x=\"1581.0923\" y=\"606.1751\">Docker Hosts</text></g><!--cluster jobs--><g class=\"cluster\" data-qualified-name=\"jobs\" data-source-line=\"31\" id=\"ent0019\"><polygon fill=\"#FFFFFF\" points=\"16,209.14,164.0303,209.14,171.0303,231.4369,794,231.4369,794,513.68,16,513.68,16,209.14\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"16\" x2=\"171.0303\" y1=\"231.4369\" y2=\"231.4369\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"142.0303\" x=\"20\" y=\"224.1351\">Nomad Jobs (HCL)</text></g><!--entity userdata--><g class=\"entity\" data-qualified-name=\"cloudinit.userdata\" data-source-line=\"5\" id=\"ent0003\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"97.1221\" x=\"1662.44\" y=\"70\"/><polygon fill=\"#FFFFFF\" points=\"1742.5621,75,1742.5621,89,1754.5621,89,1754.5621,81,1748.5621,75,1742.5621,75\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1748.5621\" x2=\"1748.5621\" y1=\"75\" y2=\"81\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1754.5621\" x2=\"1748.5621\" y1=\"81\" y2=\"81\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"67.1221\" x=\"1672.44\" y=\"95.9951\">user-data</text></g><!--entity ansible.cfg--><g class=\"entity\" data-qualified-name=\"ansible.ansible.cfg\" data-source-line=\"9\" id=\"ent0005\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"105.9883\" x=\"1843.01\" y=\"260.29\"/><polygon fill=\"#FFFFFF\" points=\"1931.9983,265.29,1931.9983,279.29,1943.9983,279.29,1943.9983,271.29,1937.9983,265.29,1931.9983,265.29\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1937.9983\" x2=\"1937.9983\" y1=\"265.29\" y2=\"271.29\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1943.9983\" x2=\"1937.9983\" y1=\"271.29\" y2=\"271.29\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"75.9883\" x=\"1853.01\" y=\"286.2851\">ansible.cfg</text></g><!--entity requirements.yml--><g class=\"entity\" data-qualified-name=\"ansible.requirements.yml\" data-source-line=\"10\" id=\"ent0006\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"154.5576\" x=\"1983.72\" y=\"260.29\"/><polygon fill=\"#FFFFFF\" points=\"2121.2776,265.29,2121.2776,279.29,2133.2776,279.29,2133.2776,271.29,2127.2776,265.29,2121.2776,265.29\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"2127.2776\" x2=\"2127.2776\" y1=\"265.29\" y2=\"271.29\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"2133.2776\" x2=\"2127.2776\" y1=\"271.29\" y2=\"271.29\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"124.5576\" x=\"1993.72\" y=\"286.2851\">requirements.yml</text></g><!--entity clients.yml--><g class=\"entity\" data-qualified-name=\"ansible.clients.yml\" data-source-line=\"11\" id=\"ent0007\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"106.0088\" x=\"2173\" y=\"260.29\"/><polygon fill=\"#FFFFFF\" points=\"2262.0088,265.29,2262.0088,279.29,2274.0088,279.29,2274.0088,271.29,2268.0088,265.29,2262.0088,265.29\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"2268.0088\" x2=\"2268.0088\" y1=\"265.29\" y2=\"271.29\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"2274.0088\" x2=\"2268.0088\" y1=\"271.29\" y2=\"271.29\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"76.0088\" x=\"2183\" y=\"286.2851\">clients.yml</text></g><!--entity servers.yml--><g class=\"entity\" data-qualified-name=\"ansible.servers.yml\" data-source-line=\"12\" id=\"ent0008\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"111.874\" x=\"1854.06\" y=\"442.24\"/><polygon fill=\"#FFFFFF\" points=\"1948.934,447.24,1948.934,461.24,1960.934,461.24,1960.934,453.24,1954.934,447.24,1948.934,447.24\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1954.934\" x2=\"1954.934\" y1=\"447.24\" y2=\"453.24\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1960.934\" x2=\"1954.934\" y1=\"453.24\" y2=\"453.24\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"81.874\" x=\"1864.06\" y=\"468.2351\">servers.yml</text></g><!--entity cluster.yml--><g class=\"entity\" data-qualified-name=\"ansible.cluster.yml\" data-source-line=\"13\" id=\"ent0009\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"107.875\" x=\"2001.06\" y=\"442.24\"/><polygon fill=\"#FFFFFF\" points=\"2091.935,447.24,2091.935,461.24,2103.935,461.24,2103.935,453.24,2097.935,447.24,2091.935,447.24\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"2097.935\" x2=\"2097.935\" y1=\"447.24\" y2=\"453.24\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"2103.935\" x2=\"2097.935\" y1=\"453.24\" y2=\"453.24\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"77.875\" x=\"2011.06\" y=\"468.2351\">cluster.yml</text></g><!--entity hosts.ini--><g class=\"entity\" data-qualified-name=\"ansible.hosts.ini\" data-source-line=\"14\" id=\"ent0010\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"88.6182\" x=\"2143.69\" y=\"442.24\"/><polygon fill=\"#FFFFFF\" points=\"2215.3082,447.24,2215.3082,461.24,2227.3082,461.24,2227.3082,453.24,2221.3082,447.24,2215.3082,447.24\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"2221.3082\" x2=\"2221.3082\" y1=\"447.24\" y2=\"453.24\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"2227.3082\" x2=\"2221.3082\" y1=\"453.24\" y2=\"453.24\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"58.6182\" x=\"2153.69\" y=\"468.2351\">hosts.ini</text></g><!--entity nomad_servers--><g class=\"entity\" data-qualified-name=\"nomad.nomad_servers\" data-source-line=\"18\" id=\"ent0012\"><polygon fill=\"#FFFFFF\" points=\"1343.1,448.74,1353.1,438.74,1490.8959,438.74,1490.8959,475.0369,1480.8959,485.0369,1343.1,485.0369,1343.1,448.74\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1480.8959\" x2=\"1490.8959\" y1=\"448.74\" y2=\"438.74\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1343.1\" x2=\"1480.8959\" y1=\"448.74\" y2=\"448.74\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1480.8959\" x2=\"1480.8959\" y1=\"448.74\" y2=\"485.0369\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"50.1416\" x=\"1358.1\" y=\"471.7351\">Nomad</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1408.2416\" y=\"471.7351\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"53.2041\" x=\"1412.6918\" y=\"471.7351\">Servers</text></g><!--entity nomad_clients--><g class=\"entity\" data-qualified-name=\"nomad.nomad_clients\" data-source-line=\"19\" id=\"ent0013\"><polygon fill=\"#FFFFFF\" points=\"1165.79,448.74,1175.79,438.74,1308.206,438.74,1308.206,475.0369,1298.206,485.0369,1165.79,485.0369,1165.79,448.74\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1298.206\" x2=\"1308.206\" y1=\"448.74\" y2=\"438.74\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1165.79\" x2=\"1298.206\" y1=\"448.74\" y2=\"448.74\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1298.206\" x2=\"1298.206\" y1=\"448.74\" y2=\"485.0369\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"50.1416\" x=\"1180.79\" y=\"471.7351\">Nomad</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1230.9316\" y=\"471.7351\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"47.8242\" x=\"1235.3818\" y=\"471.7351\">Clients</text></g><!--entity consul_servers--><g class=\"entity\" data-qualified-name=\"consul.consul_servers\" data-source-line=\"23\" id=\"ent0015\"><polygon fill=\"#FFFFFF\" points=\"1339.54,634.68,1349.54,624.68,1484.4648,624.68,1484.4648,660.9769,1474.4648,670.9769,1339.54,670.9769,1339.54,634.68\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1474.4648\" x2=\"1484.4648\" y1=\"634.68\" y2=\"624.68\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1339.54\" x2=\"1474.4648\" y1=\"634.68\" y2=\"634.68\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1474.4648\" x2=\"1474.4648\" y1=\"634.68\" y2=\"670.9769\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"47.2705\" x=\"1354.54\" y=\"657.6751\">Consul</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1401.8105\" y=\"657.6751\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"53.2041\" x=\"1406.2607\" y=\"657.6751\">Servers</text></g><!--entity consul_clients--><g class=\"entity\" data-qualified-name=\"consul.consul_clients\" data-source-line=\"24\" id=\"ent0016\"><polygon fill=\"#FFFFFF\" points=\"1165.23,634.68,1175.23,624.68,1304.7749,624.68,1304.7749,660.9769,1294.7749,670.9769,1165.23,670.9769,1165.23,634.68\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1294.7749\" x2=\"1304.7749\" y1=\"634.68\" y2=\"624.68\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1165.23\" x2=\"1294.7749\" y1=\"634.68\" y2=\"634.68\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1294.7749\" x2=\"1294.7749\" y1=\"634.68\" y2=\"670.9769\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"47.2705\" x=\"1180.23\" y=\"657.6751\">Consul</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1227.5005\" y=\"657.6751\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"47.8242\" x=\"1231.9507\" y=\"657.6751\">Clients</text></g><!--entity Docker Runtime--><g class=\"entity\" data-qualified-name=\"docker.Docker Runtime\" data-source-line=\"28\" id=\"ent0018\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"143.0732\" x=\"1556.46\" y=\"628.18\"/><polygon fill=\"#FFFFFF\" points=\"1682.5332,633.18,1682.5332,647.18,1694.5332,647.18,1694.5332,639.18,1688.5332,633.18,1682.5332,633.18\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1688.5332\" x2=\"1688.5332\" y1=\"633.18\" y2=\"639.18\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1694.5332\" x2=\"1688.5332\" y1=\"639.18\" y2=\"639.18\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"49.5195\" x=\"1566.46\" y=\"654.1751\">Docker</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1615.9795\" y=\"654.1751\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"59.1035\" x=\"1620.4297\" y=\"654.1751\">Runtime</text></g><!--entity CoreDNS (coredns/coredns:1.10.0)--><g class=\"entity\" data-qualified-name=\"jobs.CoreDNS .coredns.coredns.1.10.0.\" data-source-line=\"32\" id=\"ent0020\"><rect fill=\"#FFFFFF\" height=\"55.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"206.2578\" x=\"39.87\" y=\"252.14\"/><polygon fill=\"#FFFFFF\" points=\"229.1278,257.14,229.1278,271.14,241.1278,271.14,241.1278,263.14,235.1278,257.14,229.1278,257.14\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"235.1278\" x2=\"235.1278\" y1=\"257.14\" y2=\"263.14\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"241.1278\" x2=\"235.1278\" y1=\"263.14\" y2=\"263.14\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"62.8496\" x=\"106.5741\" y=\"278.1351\">CoreDNS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"176.2578\" x=\"49.87\" y=\"294.432\">(coredns/coredns:1.10.0)</text></g><!--entity iperf3 (taoyou/iperf3-alpine:v3.11)--><g class=\"entity\" data-qualified-name=\"jobs.iperf3 .taoyou.iperf3-alpine.v3.11.\" data-source-line=\"33\" id=\"ent0021\"><rect fill=\"#FFFFFF\" height=\"55.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"226.9365\" x=\"281.53\" y=\"252.14\"/><polygon fill=\"#FFFFFF\" points=\"491.4665,257.14,491.4665,271.14,503.4665,271.14,503.4665,263.14,497.4665,257.14,491.4665,257.14\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"497.4665\" x2=\"497.4665\" y1=\"257.14\" y2=\"263.14\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"503.4665\" x2=\"497.4665\" y1=\"263.14\" y2=\"263.14\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"40.9814\" x=\"369.5075\" y=\"278.1351\">iperf3</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"196.9365\" x=\"291.53\" y=\"294.432\">(taoyou/iperf3-alpine:v3.11)</text></g><!--entity Pi-hole (pihole/pihole:2023.03.1)--><g class=\"entity\" data-qualified-name=\"jobs.Pi-hole .pihole.pihole.2023.03.1.\" data-source-line=\"34\" id=\"ent0022\"><rect fill=\"#FFFFFF\" height=\"55.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"207.0439\" x=\"543.48\" y=\"252.14\"/><polygon fill=\"#FFFFFF\" points=\"733.5239,257.14,733.5239,271.14,745.5239,271.14,745.5239,263.14,739.5239,257.14,733.5239,257.14\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"739.5239\" x2=\"739.5239\" y1=\"257.14\" y2=\"263.14\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"745.5239\" x2=\"739.5239\" y1=\"263.14\" y2=\"263.14\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"47.3252\" x=\"618.3394\" y=\"278.1351\">Pi-hole</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"177.0439\" x=\"553.48\" y=\"294.432\">(pihole/pihole:2023.03.1)</text></g><!--entity Prometheus (prom/prometheus:v2.40.3)--><g class=\"entity\" data-qualified-name=\"jobs.Prometheus .prom.prometheus.v2.40.3.\" data-source-line=\"35\" id=\"ent0023\"><rect fill=\"#FFFFFF\" height=\"55.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"224.6191\" x=\"39.69\" y=\"434.09\"/><polygon fill=\"#FFFFFF\" points=\"247.3091,439.09,247.3091,453.09,259.3091,453.09,259.3091,445.09,253.3091,439.09,247.3091,439.09\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"253.3091\" x2=\"253.3091\" y1=\"439.09\" y2=\"445.09\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"259.3091\" x2=\"253.3091\" y1=\"445.09\" y2=\"445.09\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"84.1572\" x=\"104.921\" y=\"460.0851\">Prometheus</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"194.6191\" x=\"49.69\" y=\"476.382\">(prom/prometheus:v2.40.3)</text></g><!--entity Traefik (traefik:v2.9.4)--><g class=\"entity\" data-qualified-name=\"jobs.Traefik .traefik.v2.9.4.\" data-source-line=\"36\" id=\"ent0024\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"187.7871\" x=\"299.11\" y=\"442.24\"/><polygon fill=\"#FFFFFF\" points=\"469.8971,447.24,469.8971,461.24,481.8971,461.24,481.8971,453.24,475.8971,447.24,469.8971,447.24\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"475.8971\" x2=\"475.8971\" y1=\"447.24\" y2=\"453.24\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"481.8971\" x2=\"475.8971\" y1=\"453.24\" y2=\"453.24\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"48.4258\" x=\"309.11\" y=\"468.2351\">Traefik</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"357.5358\" y=\"468.2351\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"104.9111\" x=\"361.986\" y=\"468.2351\">(traefik:v2.9.4)</text></g><!--link cloudinit to ansible--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0004\" data-link-type=\"dependency\" data-source-line=\"39\" id=\"lnk25\"><path d=\"M1808,133.9182 C1808,134.529 1808,135.1438 1808,135.7625 C1808,140.7125 1808,145.9132 1808,151.2811 C1808,162.0169 1808,173.4213 1808,184.825 C1808,187.6759 1808,190.5268 1808,193.3672 C1808,194.0773 1808,194.7868 1808,195.4954 C1808,195.6726 1808,189.8497 1808,190.0267\" fill=\"none\" id=\"cloudinit-to-ansible\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1808,196.0267,1812,187.0267,1808,191.0267,1804,187.0267,1808,196.0267\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"54.4805\" x=\"1809\" y=\"169.4287\">Provision</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1863.4805\" y=\"169.4287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"32.1563\" x=\"1867.2949\" y=\"169.4287\">hosts</text></g><!--link ansible to nomad_servers--><g class=\"link\" data-entity-1=\"ent0004\" data-entity-2=\"ent0012\" data-link-type=\"dependency\" data-source-line=\"40\" id=\"lnk26\"><path d=\"M1799.4659,280.8564 C1799.2456,280.8551 1799.0213,280.8537 1798.7931,280.8524 C1796.9674,280.842 1794.8893,280.8335 1792.5763,280.829 C1783.3241,280.8114 1770.3126,280.8593 1754.6564,281.1117 C1723.3441,281.6166 1681.4531,282.9394 1637.9013,286.1913 C1550.7975,292.695 1457.05,306.915 1428,337.74 C1402.68,364.61 1405.3105,405.0635 1410.4905,432.5935\" fill=\"none\" id=\"ansible-to-nomad_servers\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1411.6,438.49,1413.8668,428.9056,1410.6754,433.5762,1406.0048,430.3849,1411.6,438.49\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"58.4238\" x=\"1429\" y=\"349.8787\">Configure</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1487.4238\" y=\"349.8787\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"42.9785\" x=\"1491.2383\" y=\"349.8787\">Nomad</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"44.2383\" x=\"1459.4893\" y=\"363.8474\">servers</text></g><!--link ansible to nomad_clients--><g class=\"link\" data-entity-1=\"ent0004\" data-entity-2=\"ent0013\" data-link-type=\"dependency\" data-source-line=\"41\" id=\"lnk27\"><path d=\"M1799.2594,281.195 C1798.6922,281.2123 1798.0988,281.2306 1797.4798,281.2498 C1796.2419,281.2881 1794.9015,281.3301 1793.4623,281.3757 C1790.5838,281.4671 1787.31,281.5732 1783.6699,281.6945 C1769.1095,282.1797 1748.6884,282.9085 1724.2655,283.9102 C1675.4197,285.9134 1610.5669,289.0081 1544.5788,293.4288 C1412.6025,302.27 1276.085,316.415 1254,337.74 C1227.14,363.67 1227.9849,404.8584 1231.8949,432.6784\" fill=\"none\" id=\"ansible-to-nomad_clients\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1232.73,438.62,1235.4385,429.1509,1232.0341,433.6687,1227.5163,430.2643,1232.73,438.62\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"58.4238\" x=\"1255\" y=\"356.8787\">Configure</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1313.4238\" y=\"356.8787\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"42.9785\" x=\"1317.2383\" y=\"356.8787\">Nomad</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1360.2168\" y=\"356.8787\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"39.2109\" x=\"1364.0313\" y=\"356.8787\">clients</text></g><!--link ansible to consul_servers--><g class=\"link\" data-entity-1=\"ent0004\" data-entity-2=\"ent0015\" data-link-type=\"dependency\" data-source-line=\"42\" id=\"lnk28\"><path d=\"M1799.9231,282.6869 C1799.7907,282.7172 1799.6568,282.748 1799.5214,282.7791 C1798.9799,282.9038 1798.4148,283.035 1797.8268,283.1728 C1796.6509,283.4485 1795.3834,283.7507 1794.0299,284.0801 C1791.3229,284.7389 1788.2718,285.5063 1784.9208,286.3867 C1771.5166,289.9084 1753.3131,295.2394 1733.1363,302.6688 C1692.7825,317.5275 1644.535,340.78 1611,374.74 C1549.81,436.7 1582.56,484.02 1529,552.68 C1506.47,581.57 1478.3903,603.7243 1453.1603,620.8943\" fill=\"none\" id=\"ansible-to-consul_servers\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1448.2,624.27,1457.8909,622.5133,1452.3336,621.4569,1453.39,615.8996,1448.2,624.27\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"58.4238\" x=\"1612\" y=\"459.5287\">Configure</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1670.4238\" y=\"459.5287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"40.5176\" x=\"1674.2383\" y=\"459.5287\">Consul</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"44.2383\" x=\"1641.2588\" y=\"473.4974\">servers</text></g><!--link ansible to consul_clients--><g class=\"link\" data-entity-1=\"ent0004\" data-entity-2=\"ent0016\" data-link-type=\"dependency\" data-source-line=\"43\" id=\"lnk29\"><path d=\"M1799.8051,280.8889 C1799.1366,280.8853 1798.429,280.8817 1797.6829,280.878 C1791.7145,280.8482 1783.2858,280.8152 1772.7338,280.7971 C1751.6298,280.7607 1722.0327,280.7832 1686.6391,281.0077 C1615.8519,281.4566 1521.8787,282.7131 1426.2925,285.9213 C1235.12,292.3375 1037.495,306.56 1006,337.74 C975.38,368.05 915.12,386.86 1003,529.68 C1038.05,586.65 1104.5349,615.3028 1159.1549,630.6928\" fill=\"none\" id=\"ansible-to-consul_clients\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1164.93,632.32,1157.3521,626.0291,1160.1174,630.964,1155.1825,633.7292,1164.93,632.32\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"58.4238\" x=\"1004\" y=\"466.5287\">Configure</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1062.4238\" y=\"466.5287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"40.5176\" x=\"1066.2383\" y=\"466.5287\">Consul</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1106.7559\" y=\"466.5287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"39.2109\" x=\"1110.5703\" y=\"466.5287\">clients</text></g><!--link ansible to docker--><g class=\"link\" data-entity-1=\"ent0004\" data-entity-2=\"ent0017\" data-link-type=\"dependency\" data-source-line=\"44\" id=\"lnk30\"><path d=\"M1799.8076,289.0924 C1799.7331,289.1697 1799.6582,289.2475 1799.583,289.3258 C1799.2819,289.639 1798.9744,289.9602 1798.6608,290.2891 C1793.6434,295.5513 1787.0656,302.7988 1780.0987,311.42 C1766.165,328.6625 1750.675,351.4 1743,374.74 C1724.4,431.305 1722.1725,498.1025 1724.7063,551.3575 C1725.023,558.0144 1725.4141,564.4596 1725.8569,570.6469 C1726.0783,573.7405 1725.8187,570.79 1726.0631,573.7488\" fill=\"none\" id=\"ansible-to-docker\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1726.5571,579.7284,1729.8025,570.4296,1726.1454,574.7454,1721.8297,571.0883,1726.5571,579.7284\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"36.123\" x=\"1744\" y=\"466.5287\">Install</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1780.123\" y=\"466.5287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"42.4453\" x=\"1783.9375\" y=\"466.5287\">Docker</text></g><!--link nomad_servers to consul_servers--><g class=\"link\" data-entity-1=\"ent0012\" data-entity-2=\"ent0015\" data-link-type=\"dependency\" data-source-line=\"45\" id=\"lnk31\"><path d=\"M1416.39,485.44 C1415.42,520.84 1413.7329,583.0422 1412.7729,618.3822\" fill=\"none\" id=\"nomad_servers-to-consul_servers\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1412.61,624.38,1416.8529,615.4919,1412.7458,619.3818,1408.8559,615.2747,1412.61,624.38\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"44.3496\" x=\"1415\" y=\"549.8187\">Service</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1459.3496\" y=\"549.8187\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"57.6621\" x=\"1463.1641\" y=\"549.8187\">discovery</text></g><!--link nomad_clients to consul_clients--><g class=\"link\" data-entity-1=\"ent0013\" data-entity-2=\"ent0016\" data-link-type=\"dependency\" data-source-line=\"46\" id=\"lnk32\"><path d=\"M1236.75,485.44 C1236.37,520.84 1235.6962,583.0404 1235.3062,618.3804\" fill=\"none\" id=\"nomad_clients-to-consul_clients\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1235.24,624.38,1239.3391,615.4247,1235.2952,619.3803,1231.3396,615.3364,1235.24,624.38\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"44.3496\" x=\"1237\" y=\"549.8187\">Service</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1281.3496\" y=\"549.8187\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"57.6621\" x=\"1285.1641\" y=\"549.8187\">discovery</text></g><!--link nomad_clients to docker--><g class=\"link\" data-entity-1=\"ent0013\" data-entity-2=\"ent0017\" data-link-type=\"dependency\" data-source-line=\"47\" id=\"lnk33\"><path d=\"M1258.85,485.36 C1275.6,500.95 1300.15,520.49 1326,529.68 C1347.27,537.25 1506.5,535.86 1529,537.68 C1530.3,537.79 1715.03,559.8 1716,560.68 C1719.5688,563.9263 1722.5469,567.678 1725.0257,571.7616 C1726.2651,573.8034 1727.3797,575.9283 1728.3809,578.1144 C1728.6312,578.6609 1726.5198,573.6925 1726.7561,574.2464\" fill=\"none\" id=\"nomad_clients-to-docker\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1729.1107,579.7651,1729.258,569.9173,1727.1486,575.1662,1721.8997,573.0567,1729.1107,579.7651\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"23.5488\" x=\"1651\" y=\"549.8187\">Run</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1674.5488\" y=\"549.8187\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"24.5449\" x=\"1678.3633\" y=\"549.8187\">jobs</text></g><!--link jobs to nomad_clients--><g class=\"link\" data-entity-1=\"ent0019\" data-entity-2=\"ent0013\" data-link-type=\"dependency\" data-source-line=\"48\" id=\"lnk34\"><path d=\"M794.4047,283.8355 C794.56,283.8886 794.7174,283.9424 794.8767,283.9969 C799.9759,285.739 807.1369,288.1649 816.0038,291.1161 C833.7375,297.0184 858.295,305.0219 886.83,313.8588 C943.9,331.5325 1016.88,352.54 1083,366.74 C1107.58,372.02 1116.16,364.22 1139,374.74 C1171.1,389.52 1196.4732,413.805 1214.5232,434.015\" fill=\"none\" id=\"jobs-to-nomad_clients\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1218.52,438.49,1215.5082,429.1129,1215.1894,434.7608,1209.5415,434.4419,1218.52,438.49\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"42.0176\" x=\"1084\" y=\"356.8787\">Deploy</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1126.0176\" y=\"356.8787\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"17.7891\" x=\"1129.832\" y=\"356.8787\">via</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1147.6211\" y=\"356.8787\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"42.9785\" x=\"1151.4355\" y=\"356.8787\">Nomad</text></g><!--link jobs to consul_clients--><g class=\"link\" data-entity-1=\"ent0019\" data-entity-2=\"ent0016\" data-link-type=\"dependency\" data-source-line=\"49\" id=\"lnk35\"><path d=\"M794.2653,446.9567 C795.1813,450.3336 796.1604,453.6975 797.2061,457.0409 C805.5719,483.7888 818.205,509.235 837,529.68 C921.82,621.95 1069.2059,642.645 1158.7659,646.605\" fill=\"none\" id=\"jobs-to-consul_clients\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1164.76,646.87,1155.9455,642.4763,1159.7649,646.6491,1155.5921,650.4685,1164.76,646.87\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"49.9453\" x=\"838\" y=\"466.5287\">Register</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"887.9453\" y=\"466.5287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"49.2363\" x=\"891.7598\" y=\"466.5287\">services</text></g><?plantuml-src ZLHDYzim4BtxLsXpIg2Myx6N-b08pc5RscNP54gXK1HPJjJ8agkFBA7qltTiANQK-D2Jh9atCszcdlnGiefBXjRVjY-k5kXWRMFoBDFa3U-vFRYTCqnJ9IsJ5bDLP-JD2B8pxPboS9YqKZfj194M4cIdvHpFiv8RcpnmIOKh--GPd8MgQoLn0zSaaGgSaq8eLwPSSekUbB4_vFJx-ildTuZszja44UFl7UnFWX3HbbU4MZHf2QObiQH3jRVsalozv5zBmtU2eGAQq4e8fliImUNpau2BimShfjL-4Zaq--suPZNCnU1pBM8l5NpS0VHEJ8z6E6EPldSSO2W6G-EJeQTdLPCI5Ju4sdage9lEw7kHdR_jv1g_zRK7nC_0vWPNUF9NkD3EG026QPouOk0DOLFUEPGFwElw7dD7eCyxC0Z8EmeRHOzCTvhnmD8Rulq5rAkJbjUi6s53w97i-su_gPr1xGGz-L_jDSvHACqspriqfV1HIfE5Cr_W1QXz5k-BDqnNApIrH9sLo_mr9QA1TvQVLdYnk0buuUb1WV2c3M_Fp1_vShvSuJdWR-5QrSmUc0FM3NndJM_8JqlyECUhcuYlci0hFm8b_z72tkF7MJUDuLcbwOV-4UG8ofouuKgYJe39nTEY8l405hPMyRtJp6iGNRPw7nEsE19psUzrJ2oIA2W8PQnIB9YngB5QGJqv-YYD9K8WhvmaxdMKLQjhJXc2lnvLO3idSREZfFudgES4yks4cNJg71ldXZL2dT694p_F0NbN-PNjUVjgk-411VCF?></svg>",
  "architecture_description": "This architecture automates the provisioning and deployment of a Nomad/Consul cluster with Dockerized services using Ansible and cloud-init. \n\n**Components:**\n\n1. **Cloud-init Host (YAML, cloud-init):**\n   - Used for initial provisioning of VMs or Raspberry Pis, providing the base OS and configuration via `user-data`.\n\n2. **Ansible Controller (YAML, Ansible):**\n   - Manages cluster configuration and orchestration.\n   - Installs and configures Nomad (servers/clients), Consul (servers/clients), and Docker on target hosts.\n   - Uses playbooks and inventory files for automation.\n\n3. **Nomad Cluster (HCL, Nomad):**\n   - Composed of Nomad servers and clients.\n   - Orchestrates deployment of containerized jobs.\n   - Relies on Consul for service discovery.\n\n4. **Consul Cluster (Consul):**\n   - Provides service discovery for Nomad servers and clients.\n\n5. **Docker Hosts:**\n   - Hosts Docker runtime for running all Nomad jobs.\n\n6. **Nomad Jobs (HCL):**\n   - Defines jobs for CoreDNS, iperf3, Pi-hole, Prometheus, and Traefik, each as a Docker container.\n   - Jobs are deployed to Nomad clients, which run them via Docker and register services with Consul.\n\n**Relationships:**\n- Cloud-init provisions hosts for Ansible to manage.\n- Ansible configures all cluster components and installs Docker.\n- Nomad and Consul clusters are tightly integrated for orchestration and service discovery.\n- Nomad jobs are deployed as Docker containers and registered with Consul for discovery.\n\nThis architecture enables fully automated, repeatable infrastructure and service deployment for a containerized, service-discovered cluster environment."
}