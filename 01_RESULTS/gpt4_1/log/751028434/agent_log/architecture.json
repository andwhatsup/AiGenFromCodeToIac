{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\nnode \"Nebari Plugin System\\n(Python)\" as NebariPlugin {\n  artifact \"Plugin Codebase\\n(Python, pytest, mypy, ruff, black)\" as PluginCode\n}\n\nnode \"Kubernetes Cluster\\n(metrics-server namespace)\" as K8s {\n  artifact \"Kubernetes Resources\" as K8sResources\n}\n\ncloud \"Nebari Platform\" as NebariPlatform\n\nNebariPlugin --> NebariPlatform : Plugin Integration\nNebariPlugin --> K8s : Deploys/Manages\nK8s --> K8sResources : Hosts\n\n@enduml",
  "svg_diagram": "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"455px\" preserveAspectRatio=\"none\" style=\"width:628px;height:455px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 628 455\" width=\"628px\" zoomAndPan=\"magnify\"><defs/><g><!--cluster NebariPlugin--><g class=\"cluster\" data-qualified-name=\"NebariPlugin\" data-source-line=\"4\" id=\"ent0002\"><polygon fill=\"#FFFFFF\" points=\"16,16,26,6,306,6,306,155.89,296,165.89,16,165.89,16,16\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"296\" x2=\"306\" y1=\"16\" y2=\"6\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"16\" x2=\"296\" y1=\"16\" y2=\"16\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"296\" x2=\"296\" y1=\"16\" y2=\"165.89\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"170.2627\" x=\"71.8687\" y=\"31.9951\">Nebari Plugin System</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"68.4277\" x=\"122.7861\" y=\"48.292\">(Python)</text></g><!--cluster K8s--><g class=\"cluster\" data-qualified-name=\"K8s\" data-source-line=\"8\" id=\"ent0004\"><polygon fill=\"#FFFFFF\" points=\"314,238.89,324,228.89,611,228.89,611,428.7,601,438.7,314,438.7,314,238.89\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"601\" x2=\"611\" y1=\"238.89\" y2=\"228.89\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"314\" x2=\"601\" y1=\"238.89\" y2=\"238.89\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"601\" x2=\"601\" y1=\"238.89\" y2=\"438.7\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"152.5576\" x=\"382.2212\" y=\"254.8851\">Kubernetes Cluster</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"221.9424\" x=\"347.5288\" y=\"271.182\">(metrics-server namespace)</text></g><!--entity PluginCode--><g class=\"entity\" data-qualified-name=\"NebariPlugin.PluginCode\" data-source-line=\"5\" id=\"ent0003\"><rect fill=\"#FFFFFF\" height=\"71.8906\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"222.7803\" x=\"39.61\" y=\"70\"/><polygon fill=\"#FFFFFF\" points=\"245.3903,75,245.3903,89,257.3903,89,257.3903,81,251.3903,75,245.3903,75\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"251.3903\" x2=\"251.3903\" y1=\"75\" y2=\"81\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"257.3903\" x2=\"251.3903\" y1=\"81\" y2=\"81\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"42.8545\" x=\"87.7409\" y=\"95.9951\">Plugin</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"130.5954\" y=\"95.9951\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"69.2139\" x=\"135.0455\" y=\"95.9951\">Codebase</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"58.4404\" x=\"49.61\" y=\"112.292\">(Python,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"108.0504\" y=\"112.292\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"48.5078\" x=\"112.5006\" y=\"112.292\">pytest,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"161.0084\" y=\"112.292\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"43.5449\" x=\"165.4586\" y=\"112.292\">mypy,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"209.0036\" y=\"112.292\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"28.9365\" x=\"213.4538\" y=\"112.292\">ruff,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"42.6221\" x=\"124.6891\" y=\"128.5889\">black)</text></g><!--entity K8sResources--><g class=\"entity\" data-qualified-name=\"K8s.K8sResources\" data-source-line=\"9\" id=\"ent0005\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"187.0762\" x=\"338.46\" y=\"375.4\"/><polygon fill=\"#FFFFFF\" points=\"508.5362,380.4,508.5362,394.4,520.5362,394.4,520.5362,386.4,514.5362,380.4,508.5362,380.4\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"514.5362\" x2=\"514.5362\" y1=\"380.4\" y2=\"386.4\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"520.5362\" x2=\"514.5362\" y1=\"386.4\" y2=\"386.4\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"80.1924\" x=\"348.46\" y=\"401.3951\">Kubernetes</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"428.6524\" y=\"401.3951\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"72.4336\" x=\"433.1026\" y=\"401.3951\">Resources</text></g><!--entity NebariPlatform--><g class=\"entity\" data-qualified-name=\"NebariPlatform\" data-source-line=\"12\" id=\"ent0006\"><path d=\"M158.4997,262.6116 C161.9239,256.3567 167.8936,254.6024 172.1341,261.7833 C176.6244,256.107 180.5703,255.335 184.9257,261.9239 C187.9859,255.4709 193.3153,256.0243 197.1814,261.0644 C200.9174,254.872 204.8734,253.5997 209.6626,260.0225 C213.7333,254.1461 217.7233,254.2076 222.0769,259.714 C226.1156,253.8952 230.7856,254.2812 234.043,260.4912 C236.9804,254.9301 242.2086,254.7984 245.188,260.4494 C249.0278,254.7793 254.3568,254.6356 257.6056,261.0564 C262.1627,256.672 267.8194,257.2594 270.1125,263.6776 C274.4038,258.0686 279.4586,258.0888 283.8458,263.5589 C291.2235,266.5503 292.2078,273.8458 285.4718,278.3851 C291.1168,284.6392 290.2918,289.4779 282.6556,293.2088 C280.3637,299.1935 275.4481,300.5608 270.8124,295.7895 C267.3379,302.2359 263.1527,302.3854 258.5555,296.9472 C255.5605,304.2427 249.4204,303.7897 245.3695,298.0122 C241.4076,303.4961 237.1223,303.0692 233.4779,297.6654 C231.1975,303.3558 225.8811,305.7906 221.3069,300.1236 C216.9648,304.758 212.8313,304.1824 209.7617,298.6751 C205.0596,304.3164 200.9264,303.9057 197.1454,297.6946 C192.2453,303.7456 187.6579,301.6173 184.6762,295.6966 C180.9552,302.1292 175.661,302.0807 171.8416,295.796 C166.5659,301.5941 161.6007,301.0621 158.7653,293.4214 C149.8105,292.7912 146.6333,285.0092 151.5919,277.9344 C146.2373,269.3611 148.3002,264.1729 158.4997,262.6116\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"46.1973\" x=\"165.03\" y=\"282.1051\">Nebari</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"211.2273\" y=\"282.1051\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"59.2881\" x=\"215.6775\" y=\"282.1051\">Platform</text></g><!--link NebariPlugin to NebariPlatform--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0006\" data-link-type=\"dependency\" data-source-line=\"14\" id=\"lnk7\"><path d=\"M289.6357,165.9295 C289.5791,166.0473 289.5221,166.165 289.4648,166.2825 C289.3502,166.5175 289.2341,166.7517 289.1167,166.9851 C288.1773,168.8521 287.1475,170.6668 286.0191,172.4112 C283.7623,175.9 281.1113,179.1075 278,181.89 C260.25,197.78 241.05,172.29 225,189.89 C209.52,206.87 209.6823,228.4958 213.1923,247.9058\" fill=\"none\" id=\"NebariPlugin-to-NebariPlatform\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"214.26,253.81,216.5946,244.2418,213.3703,248.8898,208.7223,245.6654,214.26,253.81\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"36.7324\" x=\"226\" y=\"202.0287\">Plugin</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"262.7324\" y=\"202.0287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"66.123\" x=\"266.5469\" y=\"202.0287\">Integration</text></g><!--link NebariPlugin to K8s--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0004\" data-link-type=\"dependency\" data-source-line=\"15\" id=\"lnk8\"><path d=\"M306.1141,122.9218 C306.3143,123.3159 306.5176,123.716 306.7238,124.122 C308.3739,127.3701 310.2149,130.9941 312.2086,134.9188 C320.1834,150.6175 330.6019,171.1275 341.0187,191.635 C346.2272,201.8888 351.4352,212.1419 356.3372,221.7927 C356.95,222.999 357.558,224.1959 358.1606,225.3823 C358.4619,225.9755 358.7618,226.566 359.0603,227.1537 C359.2096,227.4476 359.3585,227.7408 359.5071,228.0332 C359.5813,228.1794 356.9383,222.976 357.0124,223.1219\" fill=\"none\" id=\"NebariPlugin-to-K8s\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"359.7296,228.4714,359.2201,218.6357,357.4653,224.0135,352.0875,222.2586,359.7296,228.4714\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"106.2305\" x=\"347\" y=\"202.0287\">Deploys/Manages</text></g><!--link K8s to K8sResources--><g class=\"link\" data-entity-1=\"ent0004\" data-entity-2=\"ent0005\" data-link-type=\"dependency\" data-source-line=\"16\" id=\"lnk9\"><path d=\"M384.03,278.34 C385.11,280.93 408.4429,337.2171 421.7829,369.4071\" fill=\"none\" id=\"K8s-to-K8sResources\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"424.08,374.95,424.3297,365.1043,422.1658,370.3309,416.9392,368.167,424.08,374.95\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"33.5742\" x=\"411\" y=\"342.5387\">Hosts</text></g><!--SRC=[PL7BJiCm4BpdAvQUG6gIYXFg0GcL0wW2LVJ0XSl6sQGMVaJUTQi8yUyuIXkrvMHvTcOyExwfgT6EuEbpkudMm4wausLP1ZmKhPPTh29JKDu9EIcKjoKUs635mvdhDE2yyI7l33f91kN-Vb4iobgpP3VQAHFhoRnCvyfRwrtHfMkMEP-6itUgC6ZOcDXg1zkUXUoNkztqilFkRWR8C5AEZ9yC08Fe1fN0x0YkabM5J9Dm3bqln387stVz749icZbK1jNtw3aA1rtsUugoZXK5Hqa7AnDJa93yB4dGYlFKmvu2EBJ47IeQRTOFV9NepEI3sCUWY4_K2HZULCR7-cn_bDIalLXuXBBiee0yVxmYmF9Ktslwg3QWQE_-YuQiItYcplYUopTqsAOa0tgSJl4IxSMpy1y0]--></g></svg>",
  "architecture_description": "This architecture represents a Python-based plugin system built for the Nebari platform, leveraging Kubernetes for deployment and resource management.\n\n**Components:**\n\n1. **Nebari Plugin System (Python):**\n   - Contains the plugin codebase, developed in Python and utilizing tools such as pytest (testing), mypy (type checking), ruff and black (linting/formatting).\n   - Integrates with the Nebari platform as a plugin, extending its capabilities.\n\n2. **Nebari Platform (Cloud):**\n   - The main platform that hosts and manages plugins, providing a cloud-based environment for extensibility.\n   - The plugin system connects to this platform for integration and management.\n\n3. **Kubernetes Cluster (metrics-server namespace):**\n   - The deployment target for the plugin system, where it manages and deploys resources within a specific namespace (metrics-server).\n   - Hosts the Kubernetes resources required by the plugin, such as deployments, services, and other objects defined in the codebase.\n\n**Relationships:**\n- The Nebari Plugin System integrates with the Nebari Platform as a plugin.\n- The Plugin System also manages and deploys resources to the Kubernetes cluster, specifically within the metrics-server namespace.\n- The Kubernetes cluster hosts the actual resources required for the plugin's operation.\n\nThis high-level architecture ensures modularity, cloud extensibility, and scalable deployment using Kubernetes, while leveraging Python's ecosystem for development and testing."
}