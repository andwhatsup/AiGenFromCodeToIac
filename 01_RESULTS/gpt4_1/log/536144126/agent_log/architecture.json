{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\nnode \"Python Notebook\\n(Folium, python-dotenv)\" as Notebook {\n  artifact \"Data Analysis & Visualization\"\n}\n\nnode \"Aiven for Clickhouse\\n(Cloud DB, clickhouse_driver)\" as Clickhouse {\n  database \"Clickhouse DB\"\n}\n\nnode \"PostgreSQL\\n(Cloud DB)\" as Postgres {\n  database \"PostgreSQL DB\"\n}\n\nnode \"Apache Kafka\\n(Message Queue)\" as Kafka {\n  queue \"Kafka Topic\"\n}\n\nnode \"Apache Flink\\n(Stream Processing)\" as Flink {\n  component \"Flink Job\"\n}\n\nnode \"Public Dataset\\n(digitransit_operators.csv)\" as Dataset {\n  artifact \"CSV File\"\n}\n\nNotebook --> Clickhouse : Query/Analyze Data\nNotebook --> Postgres : Query Reference Data\nNotebook --> Dataset : Load Data\nFlink --> Kafka : Consume/Produce Streams\nFlink --> Clickhouse : Write Aggregated Data\nKafka --> Clickhouse : Integration (via script)\nPostgres --> Flink : Provide Reference Data\n\n@enduml",
  "svg_diagram": "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"947px\" preserveAspectRatio=\"none\" style=\"width:813px;height:947px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 813 947\" width=\"813px\" zoomAndPan=\"magnify\"><defs/><g><!--cluster Notebook--><g class=\"cluster\" data-qualified-name=\"Notebook\" data-source-line=\"4\" id=\"ent0002\"><polygon fill=\"#FFFFFF\" points=\"217,16,227,6,485,6,485,139.59,475,149.59,217,149.59,217,16\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"475\" x2=\"485\" y1=\"16\" y2=\"6\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"217\" x2=\"475\" y1=\"16\" y2=\"16\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"475\" x2=\"475\" y1=\"16\" y2=\"149.59\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"136.5957\" x=\"278.7021\" y=\"31.9951\">Python Notebook</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"192.4453\" x=\"250.7773\" y=\"48.292\">(Folium, python-dotenv)</text></g><!--cluster Clickhouse--><g class=\"cluster\" data-qualified-name=\"Clickhouse\" data-source-line=\"8\" id=\"ent0004\"><polygon fill=\"#FFFFFF\" points=\"16,807.48,26,797.48,323,797.48,323,920.78,313,930.78,16,930.78,16,807.48\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"313\" x2=\"323\" y1=\"807.48\" y2=\"797.48\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"16\" x2=\"313\" y1=\"807.48\" y2=\"807.48\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"313\" x2=\"313\" y1=\"807.48\" y2=\"930.78\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"161.4443\" x=\"84.7778\" y=\"823.4751\">Aiven for Clickhouse</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"231.9707\" x=\"49.5146\" y=\"839.772\">(Cloud DB, clickhouse_driver)</text></g><!--cluster Postgres--><g class=\"cluster\" data-qualified-name=\"Postgres\" data-source-line=\"12\" id=\"ent0006\"><polygon fill=\"#FFFFFF\" points=\"277,222.59,287,212.59,470,212.59,470,335.89,460,345.89,277,345.89,277,222.59\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"460\" x2=\"470\" y1=\"222.59\" y2=\"212.59\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"277\" x2=\"460\" y1=\"222.59\" y2=\"222.59\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"460\" x2=\"460\" y1=\"222.59\" y2=\"345.89\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"92.2305\" x=\"323.3848\" y=\"238.5851\">PostgreSQL</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"84.6426\" x=\"327.1787\" y=\"254.882\">(Cloud DB)</text></g><!--cluster Kafka--><g class=\"cluster\" data-qualified-name=\"Kafka\" data-source-line=\"16\" id=\"ent0008\"><polygon fill=\"#FFFFFF\" points=\"449,630.19,459,620.19,662,620.19,662,724.48,652,734.48,449,734.48,449,630.19\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"652\" x2=\"662\" y1=\"630.19\" y2=\"620.19\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"449\" x2=\"652\" y1=\"630.19\" y2=\"630.19\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"652\" x2=\"652\" y1=\"630.19\" y2=\"734.48\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"108.083\" x=\"497.4585\" y=\"646.1851\">Apache Kafka</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"137.5527\" x=\"482.7236\" y=\"662.482\">(Message Queue)</text></g><!--cluster Flink--><g class=\"cluster\" data-qualified-name=\"Flink\" data-source-line=\"20\" id=\"ent0010\"><polygon fill=\"#FFFFFF\" points=\"343,418.89,353,408.89,579,408.89,579,533.19,569,543.19,343,543.19,343,418.89\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"569\" x2=\"579\" y1=\"418.89\" y2=\"408.89\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"343\" x2=\"569\" y1=\"418.89\" y2=\"418.89\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"569\" x2=\"569\" y1=\"418.89\" y2=\"543.19\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"101.377\" x=\"406.3115\" y=\"434.8851\">Apache Flink</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"160.9111\" x=\"376.5444\" y=\"451.182\">(Stream Processing)</text></g><!--cluster Dataset--><g class=\"cluster\" data-qualified-name=\"Dataset\" data-source-line=\"24\" id=\"ent0012\"><polygon fill=\"#FFFFFF\" points=\"510,225.59,520,215.59,796,215.59,796,332.89,786,342.89,510,342.89,510,225.59\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"786\" x2=\"796\" y1=\"225.59\" y2=\"215.59\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"510\" x2=\"786\" y1=\"225.59\" y2=\"225.59\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"786\" x2=\"786\" y1=\"225.59\" y2=\"342.89\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"114.748\" x=\"591.626\" y=\"241.5851\">Public Dataset</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"210.3828\" x=\"543.8086\" y=\"257.882\">(digitransit_operators.csv)</text></g><!--entity Data Analysis & Visualization--><g class=\"entity\" data-qualified-name=\"Notebook.Data Analysis . Visualization\" data-source-line=\"5\" id=\"ent0003\"><rect fill=\"#FFFFFF\" height=\"55.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"140.9268\" x=\"270.54\" y=\"70\"/><polygon fill=\"#FFFFFF\" points=\"394.4668,75,394.4668,89,406.4668,89,406.4668,81,400.4668,75,394.4668,75\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"400.4668\" x2=\"400.4668\" y1=\"75\" y2=\"81\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"406.4668\" x2=\"400.4668\" y1=\"81\" y2=\"81\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"33.4277\" x=\"280.54\" y=\"95.9951\">Data</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"313.9677\" y=\"95.9951\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"57.6816\" x=\"318.4179\" y=\"95.9951\">Analysis</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"376.0996\" y=\"95.9951\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"10.917\" x=\"380.5498\" y=\"95.9951\">&amp;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"88.7373\" x=\"291.6347\" y=\"112.292\">Visualization</text></g><!--entity Clickhouse DB--><g class=\"entity\" data-qualified-name=\"Clickhouse.Clickhouse DB\" data-source-line=\"9\" id=\"ent0005\"><path d=\"M98.79,871.48 C98.79,861.48 158.9965,861.48 158.9965,861.48 C158.9965,861.48 219.2031,861.48 219.2031,871.48 L219.2031,896.7769 C219.2031,906.7769 158.9965,906.7769 158.9965,906.7769 C158.9965,906.7769 98.79,906.7769 98.79,896.7769 L98.79,871.48\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M98.79,871.48 C98.79,881.48 158.9965,881.48 158.9965,881.48 C158.9965,881.48 219.2031,881.48 219.2031,871.48\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"75.5781\" x=\"108.79\" y=\"898.4751\">Clickhouse</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"184.3681\" y=\"898.4751\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"20.3848\" x=\"188.8183\" y=\"898.4751\">DB</text></g><!--entity PostgreSQL DB--><g class=\"entity\" data-qualified-name=\"Postgres.PostgreSQL DB\" data-source-line=\"13\" id=\"ent0007\"><path d=\"M301.21,286.59 C301.21,276.59 364.0039,276.59 364.0039,276.59 C364.0039,276.59 426.7979,276.59 426.7979,286.59 L426.7979,311.8869 C426.7979,321.8869 364.0039,321.8869 364.0039,321.8869 C364.0039,321.8869 301.21,321.8869 301.21,311.8869 L301.21,286.59\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M301.21,286.59 C301.21,296.59 364.0039,296.59 364.0039,296.59 C364.0039,296.59 426.7979,296.59 426.7979,286.59\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"80.7529\" x=\"311.21\" y=\"313.5851\">PostgreSQL</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"391.9629\" y=\"313.5851\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"20.3848\" x=\"396.4131\" y=\"313.5851\">DB</text></g><!--entity Kafka Topic--><g class=\"entity\" data-qualified-name=\"Kafka.Kafka Topic\" data-source-line=\"17\" id=\"ent0009\"><path d=\"M478.29,684.19 L569.706,684.19 C574.706,684.19 574.706,697.3384 574.706,697.3384 C574.706,697.3384 574.706,710.4869 569.706,710.4869 L478.29,710.4869 C473.29,710.4869 473.29,697.3384 473.29,697.3384 C473.29,697.3384 473.29,684.19 478.29,684.19\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M569.706,684.19 C564.706,684.19 564.706,697.3384 564.706,697.3384 C564.706,710.4869 569.706,710.4869 569.706,710.4869\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"39.375\" x=\"478.29\" y=\"702.1851\">Kafka</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"517.665\" y=\"702.1851\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.5908\" x=\"522.1152\" y=\"702.1851\">Topic</text></g><!--entity Flink Job--><g class=\"entity\" data-qualified-name=\"Flink.Flink Job\" data-source-line=\"21\" id=\"ent0011\"><rect fill=\"#FFFFFF\" height=\"46.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"98.8438\" x=\"366.58\" y=\"472.89\"/><rect fill=\"#FFFFFF\" height=\"10\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"15\" x=\"445.4238\" y=\"477.89\"/><rect fill=\"#FFFFFF\" height=\"2\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"4\" x=\"443.4238\" y=\"479.89\"/><rect fill=\"#FFFFFF\" height=\"2\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"4\" x=\"443.4238\" y=\"483.89\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"32.8125\" x=\"381.58\" y=\"505.8851\">Flink</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"414.3925\" y=\"505.8851\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"21.5811\" x=\"418.8427\" y=\"505.8851\">Job</text></g><!--entity CSV File--><g class=\"entity\" data-qualified-name=\"Dataset.CSV File\" data-source-line=\"25\" id=\"ent0013\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"87.1348\" x=\"534.43\" y=\"279.59\"/><polygon fill=\"#FFFFFF\" points=\"604.5648,284.59,604.5648,298.59,616.5648,298.59,616.5648,290.59,610.5648,284.59,604.5648,284.59\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"610.5648\" x2=\"610.5648\" y1=\"284.59\" y2=\"290.59\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"616.5648\" x2=\"610.5648\" y1=\"290.59\" y2=\"290.59\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"28.2393\" x=\"544.43\" y=\"305.5851\">CSV</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"572.6693\" y=\"305.5851\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"24.4453\" x=\"577.1195\" y=\"305.5851\">File</text></g><!--link Notebook to Clickhouse--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0004\" data-link-type=\"dependency\" data-source-line=\"28\" id=\"lnk14\"><path d=\"M441.5729,149.8368 C440.9874,150.6889 440.387,151.5311 439.7715,152.3614 C438.5405,154.0221 437.249,155.6353 435.8949,157.1849 C433.1866,160.2841 430.2275,163.1287 427,165.59 C375.64,204.77 340.54,163.6 285,196.59 C233.63,227.11 197,238.49 197,298.24 C197,298.24 197,298.24 197,698.33 C197,701.13 218.3175,745.9425 239.9688,790.7325 C240.6454,792.1322 241.3223,793.5319 241.9989,794.9302 C242.3372,795.6294 240.0611,790.9277 240.3992,791.6261\" fill=\"none\" id=\"Notebook-to-Clickhouse\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"243.0135,797.0266,242.6924,787.183,240.8349,792.5262,235.4917,790.6687,243.0135,797.0266\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"87.7969\" x=\"198\" y=\"500.6787\">Query/Analyze</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"285.7969\" y=\"500.6787\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"28.6523\" x=\"289.6113\" y=\"500.6787\">Data</text></g><!--link Notebook to Postgres--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0006\" data-link-type=\"dependency\" data-source-line=\"29\" id=\"lnk15\"><path d=\"M462,150.5709 C462,151.9135 462,153.2713 462,154.643 C462,157.3862 462,160.1849 462,163.0277 C462,174.3992 462,186.4788 462,198.5575 C462,201.5772 462,204.5968 462,207.6053 C462,209.1096 462,204.6111 462,206.1084\" fill=\"none\" id=\"Notebook-to-Postgres\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"462,212.1084,466,203.1084,462,207.1084,458,203.1084,462,212.1084\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"36.4688\" x=\"463\" y=\"185.7287\">Query</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"499.4688\" y=\"185.7287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"61.2305\" x=\"503.2832\" y=\"185.7287\">Reference</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"564.5137\" y=\"185.7287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"28.6523\" x=\"568.3281\" y=\"185.7287\">Data</text></g><!--link Notebook to Dataset--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0012\" data-link-type=\"dependency\" data-source-line=\"30\" id=\"lnk16\"><path d=\"M485.0979,104.143 C485.3022,104.1973 485.5077,104.2521 485.7141,104.3073 C486.1271,104.4178 486.5443,104.5301 486.9656,104.6442 C487.8083,104.8724 488.6677,105.1079 489.5429,105.3508 C491.2933,105.8367 493.1072,106.3522 494.9786,106.8983 C498.7214,107.9905 502.6942,109.2049 506.8488,110.5485 C515.1581,113.2357 524.195,116.4397 533.575,120.2162 C571.095,135.3225 614.105,159.59 638,196.59 C641.0675,201.3412 643.6678,206.4623 645.8695,211.7903 C646.1447,212.4563 646.4136,213.1256 646.6765,213.7977 C646.808,214.1338 646.9379,214.4706 647.0663,214.8081 C647.1305,214.9768 645.0862,209.5283 645.1497,209.6974\" fill=\"none\" id=\"Notebook-to-Dataset\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"647.2578,215.3148,647.8406,205.4832,645.501,210.6336,640.3506,208.294,647.2578,215.3148\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"28.998\" x=\"632\" y=\"185.7287\">Load</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"660.998\" y=\"185.7287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"28.6523\" x=\"664.8125\" y=\"185.7287\">Data</text></g><!--link Flink to Kafka--><g class=\"link\" data-entity-1=\"ent0010\" data-entity-2=\"ent0008\" data-link-type=\"dependency\" data-source-line=\"31\" id=\"lnk17\"><path d=\"M548.5465,543.3412 C548.8541,543.6878 549.1618,544.0358 549.4697,544.3852 C550.0855,545.0839 550.7018,545.7879 551.3183,546.4972 C556.2499,552.1711 561.1912,558.1769 565.9583,564.4281 C575.4925,576.9306 584.33,590.415 591,604.19 C593.2075,608.7475 595.1589,613.5523 596.8839,618.4778 C596.9917,618.7857 597.0986,619.094 597.2047,619.4027 C597.2577,619.5571 595.3782,614.0312 595.4308,614.1858\" fill=\"none\" id=\"Flink-to-Kafka\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"597.3631,619.8662,598.2516,610.0575,595.7529,615.1326,590.6778,612.6338,597.3631,619.8662\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"109.0137\" x=\"586\" y=\"579.3287\">Consume/Produce</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"49.9336\" x=\"615.54\" y=\"593.2974\">Streams</text></g><!--link Flink to Clickhouse--><g class=\"link\" data-entity-1=\"ent0010\" data-entity-2=\"ent0004\" data-link-type=\"dependency\" data-source-line=\"32\" id=\"lnk18\"><path d=\"M491.8732,543.4731 C491.7791,543.6747 491.684,543.8759 491.5879,544.0766 C491.2036,544.8794 490.8036,545.6745 490.3873,546.4601 C489.5548,548.0313 488.6571,549.5645 487.6893,551.0454 C485.7538,554.0072 483.5375,556.76 481,559.19 C426.4,611.46 366.19,546.8 317,604.19 C277.03,650.82 268.6525,719.1225 270.4512,776.4675 C270.6761,783.6356 270.6166,784.6489 271.1176,791.4109\" fill=\"none\" id=\"Flink-to-Clickhouse\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"271.561,797.3945,274.885,788.1235,271.1915,792.4082,266.9069,788.7147,271.561,797.3945\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"32.2207\" x=\"318\" y=\"701.9687\">Write</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"350.2207\" y=\"701.9687\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"70.4355\" x=\"354.0352\" y=\"701.9687\">Aggregated</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"424.4707\" y=\"701.9687\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"28.6523\" x=\"428.2852\" y=\"701.9687\">Data</text></g><!--link Kafka to Clickhouse--><g class=\"link\" data-entity-1=\"ent0008\" data-entity-2=\"ent0004\" data-link-type=\"dependency\" data-source-line=\"33\" id=\"lnk19\"><path d=\"M601.2159,734.5162 C601.1772,734.6031 601.1384,734.6898 601.0994,734.7766 C601.0214,734.95 600.9428,735.1232 600.8634,735.2963 C598.325,740.8325 595.0975,746.1325 591,750.48 C540.975,803.585 466.065,836.55 402.885,856.335 C387.09,861.2813 372.0281,865.4038 358.2715,868.8113 C351.3932,870.515 344.8412,872.04 338.687,873.3998 C335.6099,874.0798 332.6322,874.7184 329.763,875.3174 C328.3284,875.617 326.9208,875.9066 325.5415,876.1865 C324.8519,876.3265 330.0526,875.2867 329.3772,875.4219\" fill=\"none\" id=\"Kafka-to-Clickhouse\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"323.4939,876.5992,333.1038,878.7555,328.3967,875.6181,331.534,870.911,323.4939,876.5992\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"66.123\" x=\"579\" y=\"770.6187\">Integration</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"645.123\" y=\"770.6187\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"22.4707\" x=\"648.9375\" y=\"770.6187\">(via</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"671.4082\" y=\"770.6187\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.1211\" x=\"675.2227\" y=\"770.6187\">script)</text></g><!--link Postgres to Flink--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0010\" data-link-type=\"dependency\" data-source-line=\"34\" id=\"lnk20\"><path d=\"M470.0781,339.233 C470.1082,339.3794 470.1384,339.526 470.1686,339.6728 C470.6523,342.0221 471.1473,344.4297 471.6509,346.8819 C472.658,351.7864 473.6992,356.8695 474.7509,362.0217 C476.8544,372.3262 479,382.9075 481,392.89 C481.5506,395.6363 482.1079,398.4244 482.669,401.2393 C482.9495,402.6468 483.231,404.061 483.5131,405.4799 C483.6542,406.1894 483.7954,406.9001 483.9367,407.6117 C484.0073,407.9676 482.9101,402.4384 482.9808,402.7947\" fill=\"none\" id=\"Postgres-to-Flink\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"484.1487,408.6799,486.3203,399.0734,483.1755,403.7755,478.4734,400.6306,484.1487,408.6799\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"44.9473\" x=\"479\" y=\"382.0287\">Provide</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"523.9473\" y=\"382.0287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"61.2305\" x=\"527.7617\" y=\"382.0287\">Reference</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"588.9922\" y=\"382.0287\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"28.6523\" x=\"592.8066\" y=\"382.0287\">Data</text></g><!--SRC=[RPDDJzj048Rl_XM33nL8E4Ozvb0f98e4fLLeAhXKGkFrnXd5td7t8oXK_UyTUuDne2ThztttcK-VbNf3HiFiSRqAJGrRxritpNEBpvEA_3OKmMchs7Xj_4Hna-Epgx5mtJSZ4LosOPkrDHelW7p_-MfobPVaV796HjMX7E2vVEVSD6mchHoJnB28wUhWjspWEtjTCEz-cVCbrnIQIsXx9Ij5CVkB5D0DBlYJ0A3rj47b8LsWHvWPh0-E77o21t81Qtf1JspIvEzhh1djjG596EOrgTsMfJe9EAyvbB2ulWGrN3-LLimsXdrpzu5B2LUW7DAHiBWU1LgnyvNLw_kx4JwoZf9xHtfxSKgQjQYs6hxYPeV2-gQTmqh3VT11Hs0lzRJVtIMayU8djwG-WfOrcQx9QsyrDh2oh0H9fegmNkvXCkoMZOmTqdXvoyMumb18xT1rtcalm99aOImQH_w9MstHitKJvOwJEnhV3Mw-Ve0brRe73yFDiY_Zba-xQkqXxmVyedlKgNdewT4AF_H6MstK_yolcKpXZh6CXbXXfyRcJM4kgnqQdKk3oY2Ss2ytSfva-6Z9owPNaaM5NX-n4VR1V2E_KsNxvOJpFI4uPQdr5ybGH_SaHffs8zgJjFoqfdy0]--></g></svg>",
  "architecture_description": "This architecture represents a data analytics and stream processing platform leveraging cloud-managed services and open-source technologies:\n\n- **Python Notebook Environment**: Used for data analysis and visualization, utilizing libraries such as Folium and python-dotenv. It interacts with both the Clickhouse and PostgreSQL databases for querying and analysis, and loads data from a public dataset (CSV file).\n\n- **Aiven for Clickhouse (Cloud Database)**: Serves as the main analytical database, storing processed and raw data. It is accessed by the Python notebook for analytics and receives data from Apache Flink and Kafka integrations.\n\n- **PostgreSQL (Cloud Database)**: Stores reference data, which is queried by the Python notebook and provided to Apache Flink for stream enrichment.\n\n- **Apache Kafka (Message Queue)**: Acts as the central message bus for streaming data, facilitating communication between producers (e.g., Flink jobs) and consumers (e.g., Clickhouse integration).\n\n- **Apache Flink (Stream Processing)**: Consumes data from Kafka, processes and aggregates it, and writes the results to Clickhouse. It also uses reference data from PostgreSQL for enrichment.\n\n- **Public Dataset (CSV)**: External data source loaded into the system for analysis and reference.\n\n**Key Relationships:**\n- The Python notebook loads data from the public dataset and queries both Clickhouse and PostgreSQL.\n- Flink jobs consume/produce streams via Kafka, enrich streams with PostgreSQL data, and write results to Clickhouse.\n- Kafka integrates with Clickhouse via a script for direct ingestion.\n\nThis architecture supports scalable, cloud-based analytics and real-time data processing, with clear separation of concerns between data ingestion, processing, storage, and analysis."
}