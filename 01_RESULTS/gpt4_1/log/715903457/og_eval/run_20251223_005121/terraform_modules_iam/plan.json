{"format_version":"1.2","terraform_version":"1.13.5","variables":{"assume_role_policy_identifiers":{"value":["ecs-tasks.amazonaws.com"]},"aws_managed_policy_arns":{"value":[]},"customized_policies":{"value":{}},"environment":{"value":"dev"},"has_iam_instance_profile":{"value":false},"role_description":{"value":"iam"},"role_name":{"value":"iam"},"tags":{"value":{}}},"planned_values":{"outputs":{"role":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_iam_role.this","mode":"managed","type":"aws_iam_role","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":"iam","force_detach_policies":false,"max_session_duration":3600,"name":"iam","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null}}]}},"resource_changes":[{"address":"aws_iam_role.this","mode":"managed","type":"aws_iam_role","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":"iam","force_detach_policies":false,"max_session_duration":3600,"name":"iam","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"after_identity":{"account_id":null,"name":null}}}],"output_changes":{"role":{"actions":["create"],"before":null,"after":{},"after_unknown":{"arn":true,"id":true},"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.5","values":{"root_module":{"resources":[{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"000000000000","arn":"arn:aws:iam::000000000000:root","id":"000000000000","user_id":"AKIAIOSFODNN7EXAMPLE"},"sensitive_values":{}},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1077804475","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ecs-tasks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dns_suffix":"amazonaws.com","id":"aws","partition":"aws","reverse_dns_prefix":"com.amazonaws"},"sensitive_values":{}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1","region":"us-east-1"},"sensitive_values":{}}]}}},"configuration":{"provider_config":{"archive":{"name":"archive","full_name":"registry.terraform.io/hashicorp/archive","version_constraint":"\u003e= 2.0.0"},"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 6.27.0","expressions":{"access_key":{"constant_value":"mock"},"endpoints":[{"apigateway":{"constant_value":"http://localhost:4566"},"apigatewayv2":{"constant_value":"http://localhost:4566"},"cloudwatch":{"constant_value":"http://localhost:4566"},"cloudwatchevents":{"constant_value":"http://localhost:4566"},"dynamodb":{"constant_value":"http://localhost:4566"},"ec2":{"constant_value":"http://localhost:4566"},"ecr":{"constant_value":"http://localhost:4566"},"ecrpublic":{"constant_value":"http://localhost:4566"},"ecs":{"constant_value":"http://localhost:4566"},"efs":{"constant_value":"http://localhost:4566"},"iam":{"constant_value":"http://localhost:4566"},"kinesis":{"constant_value":"http://localhost:4566"},"kms":{"constant_value":"http://localhost:4566"},"lambda":{"constant_value":"http://localhost:4566"},"logs":{"constant_value":"http://localhost:4566"},"route53":{"constant_value":"http://localhost:4566"},"s3":{"constant_value":"http://localhost:4566"},"s3control":{"constant_value":"http://localhost:4566"},"secretsmanager":{"constant_value":"http://localhost:4566"},"sns":{"constant_value":"http://localhost:4566"},"sqs":{"constant_value":"http://localhost:4566"},"ssm":{"constant_value":"http://localhost:4566"},"sts":{"constant_value":"http://localhost:4566"}}],"region":{"constant_value":"us-east-1"},"s3_use_path_style":{"constant_value":true},"secret_key":{"constant_value":"mock"},"skip_credentials_validation":{"constant_value":true},"skip_metadata_api_check":{"constant_value":true},"skip_region_validation":{"constant_value":true},"skip_requesting_account_id":{"constant_value":true}}}},"root_module":{"outputs":{"role":{"expression":{"references":["aws_iam_role.this.arn","aws_iam_role.this","aws_iam_role.this.id","aws_iam_role.this"]}}},"resources":[{"address":"aws_iam_instance_profile.this","mode":"managed","type":"aws_iam_instance_profile","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["aws_iam_role.this.name","aws_iam_role.this"]},"role":{"references":["aws_iam_role.this.name","aws_iam_role.this"]}},"schema_version":0,"count_expression":{"references":["var.has_iam_instance_profile"]}},{"address":"aws_iam_policy.customized_policies","mode":"managed","type":"aws_iam_policy","name":"customized_policies","provider_config_key":"aws","expressions":{"name":{"references":["aws_iam_role.this.name","aws_iam_role.this","each.key"]},"policy":{"references":["each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.customized_policies"]}},{"address":"aws_iam_role.this","mode":"managed","type":"aws_iam_role","name":"this","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume_role_policy.json","data.aws_iam_policy_document.assume_role_policy"]},"description":{"references":["var.role_description"]},"name":{"references":["var.role_name"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.customized","mode":"managed","type":"aws_iam_role_policy_attachment","name":"customized","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.value.arn","each.value"]},"role":{"references":["aws_iam_role.this.name","aws_iam_role.this"]}},"schema_version":0,"for_each_expression":{"references":["aws_iam_policy.customized_policies"]}},{"address":"aws_iam_role_policy_attachment.managed","mode":"managed","type":"aws_iam_role_policy_attachment","name":"managed","provider_config_key":"aws","expressions":{"policy_arn":{"references":["each.key"]},"role":{"references":["aws_iam_role.this.name","aws_iam_role.this"]}},"schema_version":0,"for_each_expression":{"references":["var.aws_managed_policy_arns"]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"references":["var.assume_role_policy_identifiers"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"assume_role_policy_identifiers":{"default":["ecs-tasks.amazonaws.com"],"description":"The AWS service identitifers that are allowed to assume the role"},"aws_managed_policy_arns":{"default":[],"description":"A list of AWS managed policy ARN"},"customized_policies":{"default":{},"description":"A list of JSON format of IAM policy"},"environment":{"description":"The environment of application"},"has_iam_instance_profile":{"default":false,"description":"If to create instance profile for the role"},"role_description":{"description":"The description of IAM role"},"role_name":{"description":"The name of IAM role"},"tags":{"default":{},"description":"The key value pairs we want to apply as tags to the resources contained in this module"}}}},"relevant_attributes":[{"resource":"aws_iam_role.this","attribute":["arn"]},{"resource":"data.aws_iam_policy_document.assume_role_policy","attribute":["json"]},{"resource":"aws_iam_role.this","attribute":["id"]}],"timestamp":"2025-12-22T23:51:45Z","applyable":true,"complete":true,"errored":false}
