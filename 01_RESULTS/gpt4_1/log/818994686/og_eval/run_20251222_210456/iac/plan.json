{"format_version":"1.2","terraform_version":"1.13.5","planned_values":{"root_module":{"resources":[{"address":"aws_ecr_repository.natanaelvuch-ci-api","mode":"managed","type":"aws_ecr_repository","name":"natanaelvuch-ci-api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"natanaelvich-ci","tags":{"IAC":"True"},"tags_all":{"IAC":"True"},"timeouts":null},"sensitive_values":{"encryption_configuration":[],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}},{"address":"aws_iam_openid_connect_provider.oidc-git","mode":"managed","type":"aws_iam_openid_connect_provider","name":"oidc-git","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"client_id_list":["sts.amazonaws.com"],"tags":{"IAC":"True"},"tags_all":{"IAC":"True"},"thumbprint_list":["1b511abead59c6ce207077c0bf0e0043b1382612"],"url":"https://token.actions.githubusercontent.com"},"sensitive_values":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]}},{"address":"aws_iam_role.app-runner-role","mode":"managed","type":"aws_iam_role","name":"app-runner-role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"build.apprunner.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"managed_policy_arns":["arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"],"max_session_duration":3600,"name":"app-runner-role","path":"/","permissions_boundary":null,"tags":{"IAC":"True"},"tags_all":{"IAC":"True"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}}},{"address":"aws_iam_role.ecr-role","mode":"managed","type":"aws_iam_role","name":"ecr-role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRoleWithWebIdentity\",\"Condition\":{\"StringEquals\":{\"token.actions.githubusercontent.com:aud\":\"sts.amazonaws.com\",\"token.actions.githubusercontent.com:sub\":\"repo:Natanaelvich/devops-ci-cd_nlw-rocketseat-24:ref:refs/heads/main\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::867118092958:oidc-provider/token.actions.githubusercontent.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"inline_policy":[{"name":"ecr-app-permissions","policy":"{\"Statement\":[{\"Action\":\"apprunner:*\",\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"Statement1\"},{\"Action\":[\"iam:PassRole\",\"iam:CreateServiceLinkedRole\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"Statement2\"},{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\",\"ecr:PutImage\",\"ecr:InitiateLayerUpload\",\"ecr:UploadLayerPart\",\"ecr:CompleteLayerUpload\",\"ecr:GetAuthorizationToken\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"Statement3\"}]}"}],"max_session_duration":3600,"name":"ecr-role","path":"/","permissions_boundary":null,"tags":{"IAC":"True"},"tags_all":{"IAC":"True"}},"sensitive_values":{"inline_policy":[{}],"managed_policy_arns":[],"tags":{},"tags_all":{}}}]}},"resource_changes":[{"address":"aws_ecr_repository.natanaelvuch-ci-api","mode":"managed","type":"aws_ecr_repository","name":"natanaelvuch-ci-api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"natanaelvich-ci","tags":{"IAC":"True"},"tags_all":{"IAC":"True"},"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[],"id":true,"image_scanning_configuration":[{}],"registry_id":true,"repository_url":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}}},{"address":"aws_iam_openid_connect_provider.oidc-git","mode":"managed","type":"aws_iam_openid_connect_provider","name":"oidc-git","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"client_id_list":["sts.amazonaws.com"],"tags":{"IAC":"True"},"tags_all":{"IAC":"True"},"thumbprint_list":["1b511abead59c6ce207077c0bf0e0043b1382612"],"url":"https://token.actions.githubusercontent.com"},"after_unknown":{"arn":true,"client_id_list":[false],"id":true,"tags":{},"tags_all":{},"thumbprint_list":[false]},"before_sensitive":false,"after_sensitive":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[false]}}},{"address":"aws_iam_role.app-runner-role","mode":"managed","type":"aws_iam_role","name":"app-runner-role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"build.apprunner.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"managed_policy_arns":["arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"],"max_session_duration":3600,"name":"app-runner-role","path":"/","permissions_boundary":null,"tags":{"IAC":"True"},"tags_all":{"IAC":"True"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":[false],"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}}}},{"address":"aws_iam_role.ecr-role","mode":"managed","type":"aws_iam_role","name":"ecr-role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRoleWithWebIdentity\",\"Condition\":{\"StringEquals\":{\"token.actions.githubusercontent.com:aud\":\"sts.amazonaws.com\",\"token.actions.githubusercontent.com:sub\":\"repo:Natanaelvich/devops-ci-cd_nlw-rocketseat-24:ref:refs/heads/main\"}},\"Effect\":\"Allow\",\"Principal\":{\"Federated\":\"arn:aws:iam::867118092958:oidc-provider/token.actions.githubusercontent.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"inline_policy":[{"name":"ecr-app-permissions","policy":"{\"Statement\":[{\"Action\":\"apprunner:*\",\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"Statement1\"},{\"Action\":[\"iam:PassRole\",\"iam:CreateServiceLinkedRole\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"Statement2\"},{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\",\"ecr:PutImage\",\"ecr:InitiateLayerUpload\",\"ecr:UploadLayerPart\",\"ecr:CompleteLayerUpload\",\"ecr:GetAuthorizationToken\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"Statement3\"}]}"}],"max_session_duration":3600,"name":"ecr-role","path":"/","permissions_boundary":null,"tags":{"IAC":"True"},"tags_all":{"IAC":"True"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":[{}],"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[{}],"managed_policy_arns":[],"tags":{},"tags_all":{}}}}],"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"5.49.0","expressions":{"region":{"constant_value":"us-east-2"}}}},"root_module":{"resources":[{"address":"aws_ecr_repository.natanaelvuch-ci-api","mode":"managed","type":"aws_ecr_repository","name":"natanaelvuch-ci-api","provider_config_key":"aws","expressions":{"image_scanning_configuration":[{"scan_on_push":{"constant_value":true}}],"image_tag_mutability":{"constant_value":"MUTABLE"},"name":{"constant_value":"natanaelvich-ci"},"tags":{"constant_value":{"IAC":"True"}}},"schema_version":0},{"address":"aws_iam_openid_connect_provider.oidc-git","mode":"managed","type":"aws_iam_openid_connect_provider","name":"oidc-git","provider_config_key":"aws","expressions":{"client_id_list":{"constant_value":["sts.amazonaws.com"]},"tags":{"constant_value":{"IAC":"True"}},"thumbprint_list":{"constant_value":["1b511abead59c6ce207077c0bf0e0043b1382612"]},"url":{"constant_value":"https://token.actions.githubusercontent.com"}},"schema_version":0},{"address":"aws_iam_role.app-runner-role","mode":"managed","type":"aws_iam_role","name":"app-runner-role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"managed_policy_arns":{"constant_value":["arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"]},"name":{"constant_value":"app-runner-role"},"tags":{"constant_value":{"IAC":"True"}}},"schema_version":0},{"address":"aws_iam_role.ecr-role","mode":"managed","type":"aws_iam_role","name":"ecr-role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"inline_policy":[{"name":{"constant_value":"ecr-app-permissions"},"policy":{}}],"name":{"constant_value":"ecr-role"},"tags":{"constant_value":{"IAC":"True"}}},"schema_version":0}]}},"timestamp":"2025-12-22T20:05:13Z","applyable":true,"complete":true,"errored":false}
