{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\n' Deployment diagram for Go API with Fuego, OpenTelemetry, Kubernetes, Istio, and Docker\nnode \"Kubernetes Cluster\" as k8s {\n  node \"API Service\\nGo + Fuego\" as api {\n    artifact \"Docker Container\" as docker\n  }\n  node \"Istio Ingress Gateway\" as istio {\n    artifact \"Istio VirtualService\" as virtualservice\n  }\n  node \"OpenTelemetry Collector\" as otel\n}\n\nactor \"User\" as user\n\nuser --> istio : HTTPS Request\nistio --> virtualservice : Route Traffic\nvirtualservice --> api : Forward to API\napi --> otel : Export Traces\n\n@enduml",
  "svg_diagram": "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"709px\" preserveAspectRatio=\"none\" style=\"width:344px;height:709px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 344 709\" width=\"344px\" zoomAndPan=\"magnify\"><defs/><g><!--cluster k8s--><g class=\"cluster\" data-qualified-name=\"k8s\" data-source-line=\"5\" id=\"ent0002\"><polygon fill=\"#FFFFFF\" points=\"16,153.55,26,143.55,327,143.55,327,682.16,317,692.16,16,692.16,16,153.55\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"317\" x2=\"327\" y1=\"153.55\" y2=\"143.55\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"16\" x2=\"317\" y1=\"153.55\" y2=\"153.55\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"317\" x2=\"317\" y1=\"153.55\" y2=\"692.16\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"152.5576\" x=\"91.2212\" y=\"169.5451\">Kubernetes Cluster</text></g><!--cluster api--><g class=\"cluster\" data-qualified-name=\"k8s.api\" data-source-line=\"6\" id=\"ent0003\"><polygon fill=\"#FFFFFF\" points=\"48,443.57,58,433.57,268,433.57,268,550.86,258,560.86,48,560.86,48,443.57\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"258\" x2=\"268\" y1=\"443.57\" y2=\"433.57\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"48\" x2=\"258\" y1=\"443.57\" y2=\"443.57\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"258\" x2=\"258\" y1=\"443.57\" y2=\"560.86\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"89.3799\" x=\"109.3101\" y=\"459.5651\">API Service</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"91.2529\" x=\"108.3735\" y=\"475.862\">Go + Fuego</text></g><!--cluster istio--><g class=\"cluster\" data-qualified-name=\"k8s.istio\" data-source-line=\"9\" id=\"ent0005\"><polygon fill=\"#FFFFFF\" points=\"48,209.55,58,199.55,295,199.55,295,360.57,285,370.57,48,370.57,48,209.55\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"285\" x2=\"295\" y1=\"209.55\" y2=\"199.55\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"48\" x2=\"285\" y1=\"209.55\" y2=\"209.55\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"285\" x2=\"285\" y1=\"209.55\" y2=\"370.57\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"171.2949\" x=\"81.8525\" y=\"225.5451\">Istio Ingress Gateway</text></g><!--entity otel--><g class=\"entity\" data-qualified-name=\"k8s.otel\" data-source-line=\"12\" id=\"ent0007\"><polygon fill=\"#FFFFFF\" points=\"95.23,639.86,105.23,629.86,310.7632,629.86,310.7632,666.1569,300.7632,676.1569,95.23,676.1569,95.23,639.86\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"300.7632\" x2=\"310.7632\" y1=\"639.86\" y2=\"629.86\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"95.23\" x2=\"300.7632\" y1=\"639.86\" y2=\"639.86\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"300.7632\" x2=\"300.7632\" y1=\"639.86\" y2=\"676.1569\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"108.8418\" x=\"110.23\" y=\"662.8551\">OpenTelemetry</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"219.0718\" y=\"662.8551\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"62.2412\" x=\"223.522\" y=\"662.8551\">Collector</text></g><!--entity docker--><g class=\"entity\" data-qualified-name=\"k8s.api.docker\" data-source-line=\"7\" id=\"ent0004\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"152.3838\" x=\"71.81\" y=\"497.57\"/><polygon fill=\"#FFFFFF\" points=\"207.1938,502.57,207.1938,516.57,219.1938,516.57,219.1938,508.57,213.1938,502.57,207.1938,502.57\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"213.1938\" x2=\"213.1938\" y1=\"502.57\" y2=\"508.57\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"219.1938\" x2=\"213.1938\" y1=\"508.57\" y2=\"508.57\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"49.5195\" x=\"81.81\" y=\"523.5651\">Docker</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"131.3295\" y=\"523.5651\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"68.4141\" x=\"135.7797\" y=\"523.5651\">Container</text></g><!--entity virtualservice--><g class=\"entity\" data-qualified-name=\"k8s.istio.virtualservice\" data-source-line=\"10\" id=\"ent0006\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"161.6123\" x=\"109.19\" y=\"307.27\"/><polygon fill=\"#FFFFFF\" points=\"253.8023,312.27,253.8023,326.27,265.8023,326.27,265.8023,318.27,259.8023,312.27,253.8023,312.27\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"259.8023\" x2=\"259.8023\" y1=\"312.27\" y2=\"318.27\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"265.8023\" x2=\"259.8023\" y1=\"318.27\" y2=\"318.27\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"29.3672\" x=\"119.19\" y=\"333.2651\">Istio</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"148.5572\" y=\"333.2651\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"97.7949\" x=\"153.0074\" y=\"333.2651\">VirtualService</text></g><!--entity user--><g class=\"entity\" data-qualified-name=\"user\" data-source-line=\"15\" id=\"ent0008\"><ellipse cx=\"189.9951\" cy=\"14\" fill=\"#FFFFFF\" rx=\"8\" ry=\"8\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M189.9951,22 L189.9951,49 M176.9951,30 L202.9951,30 M189.9951,49 L176.9951,64 M189.9951,49 L202.9951,64\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"31.9102\" x=\"174.04\" y=\"79.2451\">User</text></g><!--link user to istio--><g class=\"link\" data-entity-1=\"ent0008\" data-entity-2=\"ent0005\" data-link-type=\"dependency\" data-source-line=\"17\" id=\"lnk9\"><path d=\"M190,82.79 C190,109.61 190,145.91 190,175.8612 C190,183.3491 190,190.4401 190,196.887 C190,197.6928 190,192.4886 190,193.2739\" fill=\"none\" id=\"user-to-istio\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"190,199.2739,194,190.2739,190,194.2739,186,190.2739,190,199.2739\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.5371\" x=\"191\" y=\"124.6887\">HTTPS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"229.5371\" y=\"124.6887\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"49.2832\" x=\"233.3516\" y=\"124.6887\">Request</text></g><!--link istio to virtualservice--><g class=\"link\" data-entity-1=\"ent0005\" data-entity-2=\"ent0006\" data-link-type=\"dependency\" data-source-line=\"18\" id=\"lnk10\"><path d=\"M190,232.54 C190,236.4 190,275 190,301.14\" fill=\"none\" id=\"istio-to-virtualservice\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"190,307.14,194,298.14,190,302.14,186,298.14,190,307.14\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"35.373\" x=\"191\" y=\"274.4087\">Route</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"226.373\" y=\"274.4087\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"37.998\" x=\"230.1875\" y=\"274.4087\">Traffic</text></g><!--link virtualservice to api--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0003\" data-link-type=\"dependency\" data-source-line=\"19\" id=\"lnk11\"><path d=\"M202.95,347.01 C214.32,364.61 230.48,391.83 240,417.57 C241.88,422.65 241.9211,422.1853 243.4887,427.571\" fill=\"none\" id=\"virtualservice-to-api\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"245.1656,433.3319,246.4909,423.5726,243.7682,428.5311,238.8097,425.8084,245.1656,433.3319\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"48.8965\" x=\"236\" y=\"406.7087\">Forward</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"284.8965\" y=\"406.7087\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"12.0469\" x=\"288.7109\" y=\"406.7087\">to</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"300.7578\" y=\"406.7087\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"18.9844\" x=\"304.5723\" y=\"406.7087\">API</text></g><!--link api to otel--><g class=\"link\" data-entity-1=\"ent0003\" data-entity-2=\"ent0007\" data-link-type=\"dependency\" data-source-line=\"20\" id=\"lnk12\"><path d=\"M246.1477,560.9483 C246.1107,561.0501 246.0737,561.1519 246.0366,561.2538 C245.8884,561.6611 245.7395,562.0685 245.59,562.4758 C244.9921,564.105 244.3846,565.7329 243.7694,567.3506 C242.5389,570.5859 241.2775,573.78 240,576.86 C232.48,595 225.3623,609.5737 217.7023,624.3437\" fill=\"none\" id=\"api-to-otel\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"214.94,629.67,222.6344,623.5221,217.2419,625.2314,215.5326,619.839,214.94,629.67\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"39.2813\" x=\"237\" y=\"596.9987\">Export</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"276.2813\" y=\"596.9987\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"39.8496\" x=\"280.0957\" y=\"596.9987\">Traces</text></g><?plantuml-src NL6nRjim5Dpv5HSl6MfPGQV2Gu70QHAZGutORPSkpzAJGuGYLVBHgb7atqkAHWfd8S6xuztXlQkMEsqPjp-tczWRF8iCOLdNdiR5GSjptCV0ld5MsCgYSNrDOp2q3_ckT292rJbV3OQi98Fw-F5cSLEtEeYwqhOniNqphzEzSdtlx698JwMkSSU3SQS-UQFLTF3K8xdXmU5siyQO2k0-yi7DyMrWksF3FOi_pV4rxjbR5Wvph8Fef23RuiurB-oLTIbrzb-3bOb1sCz00I-V0luge8XopfRzKJVyowRS3oLmKjAW9oL0NdH7ZM1M4h1A4w4qk6BPbbZWzSrtAeMrFNWE0GyaFD9f4kk9UUzRz3-qbqZcN6YI7miK2dIHSJ6JLCaORiILIaxOg5UbA2EOVG_dgdcTIkKJLVNvN6Q9nzrkiyKJ_uwSDbVGp5-c9-6JYyBOUUewtQXtTFwHXxR4lVCZ-HOoRL9bC9EvLMA__1cSb-pISFW7?</g></svg>",
  "architecture_description": "This architecture represents a Go-based API service using the Fuego framework, instrumented with OpenTelemetry for tracing, and deployed in a Kubernetes cluster. The deployment leverages Docker for containerization, Istio for ingress and traffic management, and an OpenTelemetry Collector for trace export.\n\n**Components:**\n- **User**: Initiates HTTPS requests to the service.\n- **Istio Ingress Gateway**: Handles incoming HTTPS traffic and routes it according to defined rules.\n- **Istio VirtualService**: Defines routing rules for the API service within the cluster.\n- **API Service (Go + Fuego)**: The main application, packaged as a Docker container, running inside Kubernetes. It exposes the API endpoints and is instrumented with OpenTelemetry for distributed tracing.\n- **OpenTelemetry Collector**: Receives and processes trace data exported from the API service.\n\n**Relationships:**\n- Users send HTTPS requests to the Istio Ingress Gateway.\n- The Ingress Gateway uses the VirtualService to route traffic to the API service.\n- The API service runs in a Docker container within Kubernetes.\n- The API service exports trace data to the OpenTelemetry Collector for observability.\n\nThis setup ensures scalable, observable, and manageable deployment of the Go API, with modern cloud-native best practices."
}