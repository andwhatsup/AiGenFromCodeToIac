{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\nnode \"Reverse Proxy\\n(Nginx/Apache)\" as reverse_proxy {\n}\n\nnode \"SonarQube Service\\n(Docker, SonarQube 10.4.1)\" as sonarqube {\n}\n\nnode \"PostgreSQL DB\" as postgres {\n}\n\nnode \"Shared CA Certificates\\n(Custom, install-overlay.sh)\" as ca_certs {\n}\n\nreverse_proxy --> sonarqube : HTTP/HTTPS\nsonarqube --> postgres : JDBC\nsonarqube --> ca_certs : Mount/Read\nreverse_proxy --> ca_certs : Mount/Read\n\n@enduml",
  "svg_diagram": "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"CLASS\" height=\"360px\" preserveAspectRatio=\"none\" style=\"width:455px;height:360px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 455 360\" width=\"455px\" zoomAndPan=\"magnify\"><defs/><g><!--entity reverse_proxy--><g class=\"entity\" data-qualified-name=\"reverse_proxy\" data-source-line=\"4\" id=\"ent0002\"><polygon fill=\"#FFFFFF\" points=\"199.05,16,209.05,6,347.3244,6,347.3244,58.5938,337.3244,68.5938,199.05,68.5938,199.05,16\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"337.3244\" x2=\"347.3244\" y1=\"16\" y2=\"6\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"199.05\" x2=\"337.3244\" y1=\"16\" y2=\"16\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"337.3244\" x2=\"337.3244\" y1=\"16\" y2=\"68.5938\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.9023\" x=\"217.8439\" y=\"38.9951\">Reverse</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"274.7463\" y=\"38.9951\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"39.334\" x=\"279.1965\" y=\"38.9951\">Proxy</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"108.2744\" x=\"214.05\" y=\"55.292\">(Nginx/Apache)</text></g><!--entity sonarqube--><g class=\"entity\" data-qualified-name=\"sonarqube\" data-source-line=\"7\" id=\"ent0003\"><polygon fill=\"#FFFFFF\" points=\"16,153.59,26,143.59,252.376,143.59,252.376,196.1837,242.376,206.1837,16,206.1837,16,153.59\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"242.376\" x2=\"252.376\" y1=\"153.59\" y2=\"143.59\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"16\" x2=\"242.376\" y1=\"153.59\" y2=\"153.59\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"242.376\" x2=\"242.376\" y1=\"153.59\" y2=\"206.1837\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"78.0527\" x=\"62.0659\" y=\"176.5851\">SonarQube</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"140.1187\" y=\"176.5851\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"51.7412\" x=\"144.5688\" y=\"176.5851\">Service</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"59.4316\" x=\"31\" y=\"192.882\">(Docker,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"90.4316\" y=\"192.882\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"78.0527\" x=\"94.8818\" y=\"192.882\">SonarQube</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"172.9346\" y=\"192.882\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"49.9912\" x=\"177.3848\" y=\"192.882\">10.4.1)</text></g><!--entity postgres--><g class=\"entity\" data-qualified-name=\"postgres\" data-source-line=\"10\" id=\"ent0004\"><polygon fill=\"#FFFFFF\" points=\"25.39,299.33,35.39,289.33,170.9779,289.33,170.9779,325.6269,160.9779,335.6269,25.39,335.6269,25.39,299.33\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"160.9779\" x2=\"170.9779\" y1=\"299.33\" y2=\"289.33\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"25.39\" x2=\"160.9779\" y1=\"299.33\" y2=\"299.33\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"160.9779\" x2=\"160.9779\" y1=\"299.33\" y2=\"335.6269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"80.7529\" x=\"40.39\" y=\"322.3251\">PostgreSQL</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"121.1429\" y=\"322.3251\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"20.3848\" x=\"125.5931\" y=\"322.3251\">DB</text></g><!--entity ca_certs--><g class=\"entity\" data-qualified-name=\"ca_certs\" data-source-line=\"13\" id=\"ent0005\"><polygon fill=\"#FFFFFF\" points=\"205.69,291.19,215.69,281.19,438.6959,281.19,438.6959,333.7837,428.6959,343.7837,205.69,343.7837,205.69,291.19\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"428.6959\" x2=\"438.6959\" y1=\"291.19\" y2=\"281.19\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"205.69\" x2=\"428.6959\" y1=\"291.19\" y2=\"291.19\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"428.6959\" x2=\"428.6959\" y1=\"291.19\" y2=\"343.7837\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"49.5947\" x=\"238.2618\" y=\"314.1851\">Shared</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"287.8565\" y=\"314.1851\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"19.3525\" x=\"292.3067\" y=\"314.1851\">CA</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"311.6592\" y=\"314.1851\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"80.0146\" x=\"316.1094\" y=\"314.1851\">Certificates</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"63.5469\" x=\"220.69\" y=\"330.482\">(Custom,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"284.2369\" y=\"330.482\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"125.0088\" x=\"288.6871\" y=\"330.482\">install-overlay.sh)</text></g><!--link reverse_proxy to sonarqube--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0003\" data-link-type=\"dependency\" data-source-line=\"16\" id=\"lnk6\"><path codeLine=\"16\" d=\"M241.65,69.06 C218.9,91.25 192.6152,116.8906 169.8952,139.0506\" fill=\"none\" id=\"reverse_proxy-to-sonarqube\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"165.6,143.24,174.8358,139.8194,169.1794,139.7489,169.2499,134.0924,165.6,143.24\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"73.5\" x=\"209.19\" y=\"110.7287\">HTTP/HTTPS</text></g><!--link sonarqube to postgres--><g class=\"link\" data-entity-1=\"ent0003\" data-entity-2=\"ent0004\" data-link-type=\"dependency\" data-source-line=\"17\" id=\"lnk7\"><path codeLine=\"17\" d=\"M126.02,206.66 C119.38,231.66 111.7112,260.5613 105.7312,283.0613\" fill=\"none\" id=\"sonarqube-to-postgres\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"104.19,288.86,110.3675,281.1894,105.4743,284.0278,102.636,279.1345,104.19,288.86\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"29.3906\" x=\"119.19\" y=\"248.3287\">JDBC</text></g><!--link sonarqube to ca_certs--><g class=\"link\" data-entity-1=\"ent0003\" data-entity-2=\"ent0005\" data-link-type=\"dependency\" data-source-line=\"18\" id=\"lnk8\"><path codeLine=\"18\" d=\"M167.39,206.57 C183.43,220.8 203.28,237.54 222.19,251.19 C236.49,261.51 247.4787,268.687 262.5387,277.747\" fill=\"none\" id=\"sonarqube-to-ca_certs\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"267.68,280.84,262.03,272.7729,263.3956,278.2625,257.906,279.6281,267.68,280.84\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"72.3457\" x=\"223.19\" y=\"248.3287\">Mount/Read</text></g><!--link reverse_proxy to ca_certs--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0005\" data-link-type=\"dependency\" data-source-line=\"19\" id=\"lnk9\"><path codeLine=\"19\" d=\"M283.31,69.05 C286.15,78.46 289.04,88.88 291.19,98.59 C305.36,162.78 314.0615,233.3641 318.5115,274.9441\" fill=\"none\" id=\"reverse_proxy-to-ca_certs\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"319.15,280.91,322.1696,271.5354,318.6179,275.9384,314.215,272.3868,319.15,280.91\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"72.3457\" x=\"310.19\" y=\"179.5287\">Mount/Read</text></g><!--SRC=[RK_BJiCm4BpdAxOzWKJi5d7A0QbD3mW1IfjAN90grzas5eaTl7OVGlmx3e4-K2zUUMPsPhPNu4ffXD5hdlcwWjAvXXBEhTYojNAbNtf2Aursg1sJfkPYIvLOKZjZ5GYALyR6JIMq2mPySpjW0rueSb5FQLdvuc3EmqnDNHlDcl2D8cq2sP_X1YqXPDRizc_wwcMjz8wF6Y5BlEw38B2TOj6q2lYCllvMSwE5dVebGevseoI6zOcHxsXluCWD1-oE3JihQj6F5ZsnoGovjSLy-WIJyO-iwH0w2ok5nGBI4QHedLefAHnII4mzELFVWDBaH5N59hIjn9vHsMLAiP1XuzVi_9WulZ_fbC33V9xnzicZ8zoA3eqIU9oCqt_i8IA1P-ErupCKnOMeYxfl]--></g></svg>",
  "architecture_description": "This high-level deployment architecture is designed for a containerized SonarQube service with supporting infrastructure and security resources:\n\n- **Reverse Proxy (Nginx/Apache):** Handles incoming HTTP/HTTPS traffic and forwards it to the SonarQube service. It also mounts and uses custom CA certificates for secure communication.\n- **SonarQube Service (Docker, SonarQube 10.4.1):** The main application, running as a containerized service. It is built using a Dockerfile and depends on the SonarQube 10.4.1 community Docker image. The service communicates with the PostgreSQL database for data storage and mounts custom CA certificates for secure operations.\n- **PostgreSQL Database:** Provides persistent storage for SonarQube data. The SonarQube service connects to this database using JDBC.\n- **Shared CA Certificates (Custom, install-overlay.sh):** Custom certificate authority certificates are managed and mounted by both the SonarQube service and the reverse proxy, ensuring trusted internal and external communications.\n\n**Relationships:**\n- The reverse proxy forwards HTTP/HTTPS requests to the SonarQube service.\n- SonarQube connects to PostgreSQL via JDBC for data storage.\n- Both the reverse proxy and SonarQube mount/read the shared CA certificates for secure communication.\n\nThis architecture ensures secure, scalable, and maintainable deployment of the SonarQube service with all required dependencies and resources."
}