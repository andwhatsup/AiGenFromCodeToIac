{"format_version":"1.2","terraform_version":"1.13.5","variables":{"aws_region":{"value":"eu-central-1"},"az_count":{"value":2},"backup_bucket_force_destroy":{"value":false},"backup_bucket_name":{"value":"ai-tf"},"backup_image":{"value":""},"cron_schedule":{"value":"0 2 * * *"},"cronjob_namespace":{"value":"nextcloud-backup"},"db_allocated_storage":{"value":20},"db_backup_retention_period":{"value":7},"db_deletion_protection":{"value":true},"db_engine":{"value":"mariadb"},"db_engine_version":{"value":"10.11"},"db_instance_class":{"value":"db.t3.micro"},"db_multi_az":{"value":false},"db_name":{"value":"nextcloud"},"db_username":{"value":"nextcloud"},"ecr_repository_name":{"value":"nextcloud-backup"},"efs_performance_mode":{"value":"generalPurpose"},"efs_throughput_mode":{"value":"bursting"},"eks_cluster_version":{"value":"1.29"},"environment":{"value":"dev"},"nextcloud_efs_access_point_path":{"value":"/nextcloud"},"node_desired_size":{"value":2},"node_instance_types":{"value":["t3.medium"]},"node_max_size":{"value":3},"node_min_size":{"value":1},"project_name":{"value":"nextcloud-backup"},"vpc_cidr":{"value":"10.20.0.0/16"}},"planned_values":{"outputs":{"backup_bucket_name":{"sensitive":false,"type":"string","value":"ai-tf"},"backup_irsa_role_arn":{"sensitive":false},"db_secret_arn":{"sensitive":false},"ecr_repository_url":{"sensitive":false},"efs_access_point_id":{"sensitive":false},"efs_file_system_id":{"sensitive":false},"eks_cluster_endpoint":{"sensitive":false},"eks_cluster_name":{"sensitive":false,"type":"string","value":"nextcloud-backup-dev-eks"},"rds_endpoint":{"sensitive":false},"vpc_id":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_db_instance.this","mode":"managed","type":"aws_db_instance","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":true,"auto_minor_version_upgrade":true,"backup_retention_period":7,"blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_name":"nextcloud","db_subnet_group_name":"nextcloud-backup-dev-db-subnets","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":true,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":null,"engine":"mariadb","engine_version":"10.11","final_snapshot_identifier":"nextcloud-backup-dev-final","iam_database_authentication_enabled":null,"identifier":"nextcloud-backup-dev-db","instance_class":"db.t3.micro","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"parameter_group_name":"nextcloud-backup-dev-mariadb-params","password_wo":null,"password_wo_version":null,"performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":false,"storage_encrypted":true,"tags":{"Name":"nextcloud-backup-dev-db"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-db","Project":"nextcloud-backup"},"timeouts":null,"upgrade_storage_config":null,"username":"nextcloud"},"sensitive_values":{"blue_green_update":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"password_wo":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"aws_db_parameter_group.this","mode":"managed","type":"aws_db_parameter_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","family":"mariadb10.11","name":"nextcloud-backup-dev-mariadb-params","parameter":[{"apply_method":"immediate","name":"character_set_server","value":"utf8mb4"},{"apply_method":"immediate","name":"collation_server","value":"utf8mb4_unicode_ci"}],"skip_destroy":false,"tags":{"Name":"nextcloud-backup-dev-db-params"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-db-params","Project":"nextcloud-backup"}},"sensitive_values":{"parameter":[{},{}],"tags":{},"tags_all":{}}},{"address":"aws_db_subnet_group.this","mode":"managed","type":"aws_db_subnet_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","name":"nextcloud-backup-dev-db-subnets","tags":{"Name":"nextcloud-backup-dev-db-subnets"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-db-subnets","Project":"nextcloud-backup"}},"sensitive_values":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}},{"address":"aws_ecr_lifecycle_policy.backup","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"backup","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire untagged images older than 14 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":14,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}}]}","repository":"nextcloud-backup"},"sensitive_values":{}},{"address":"aws_ecr_repository.backup","mode":"managed","type":"aws_ecr_repository","name":"backup","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[{"encryption_type":"KMS"}],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"nextcloud-backup","tags":{"Name":"nextcloud-backup-dev-ecr"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-ecr","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"encryption_configuration":[{}],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}},{"address":"aws_efs_access_point.nextcloud","mode":"managed","type":"aws_efs_access_point","name":"nextcloud","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"posix_user":[{"gid":33,"secondary_gids":null,"uid":33}],"root_directory":[{"creation_info":[{"owner_gid":33,"owner_uid":33,"permissions":"0750"}],"path":"/nextcloud"}],"tags":{"Name":"nextcloud-backup-dev-efs-ap-nextcloud"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-efs-ap-nextcloud","Project":"nextcloud-backup"}},"sensitive_values":{"posix_user":[{}],"root_directory":[{"creation_info":[{}]}],"tags":{},"tags_all":{}}},{"address":"aws_efs_file_system.this","mode":"managed","type":"aws_efs_file_system","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encrypted":true,"lifecycle_policy":[],"performance_mode":"generalPurpose","provisioned_throughput_in_mibps":null,"tags":{"Name":"nextcloud-backup-dev-efs"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-efs","Project":"nextcloud-backup"},"throughput_mode":"bursting"},"sensitive_values":{"lifecycle_policy":[],"protection":[],"size_in_bytes":[],"tags":{},"tags_all":{}}},{"address":"aws_efs_mount_target.this[\"eu-central-1a\"]","mode":"managed","type":"aws_efs_mount_target","name":"this","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"timeouts":null},"sensitive_values":{"security_groups":[]}},{"address":"aws_efs_mount_target.this[\"eu-central-1b\"]","mode":"managed","type":"aws_efs_mount_target","name":"this","index":"eu-central-1b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"timeouts":null},"sensitive_values":{"security_groups":[]}},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Name":"nextcloud-backup-dev-nat-eip"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-nat-eip","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_eks_addon.coredns","mode":"managed","type":"aws_eks_addon","name":"coredns","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"addon_name":"coredns","cluster_name":"nextcloud-backup-dev-eks","pod_identity_association":[],"preserve":null,"resolve_conflicts":null,"resolve_conflicts_on_create":null,"resolve_conflicts_on_update":null,"service_account_role_arn":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"pod_identity_association":[],"tags_all":{}}},{"address":"aws_eks_addon.kube_proxy","mode":"managed","type":"aws_eks_addon","name":"kube_proxy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"addon_name":"kube-proxy","cluster_name":"nextcloud-backup-dev-eks","pod_identity_association":[],"preserve":null,"resolve_conflicts":null,"resolve_conflicts_on_create":null,"resolve_conflicts_on_update":null,"service_account_role_arn":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"pod_identity_association":[],"tags_all":{}}},{"address":"aws_eks_addon.vpc_cni","mode":"managed","type":"aws_eks_addon","name":"vpc_cni","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"addon_name":"vpc-cni","cluster_name":"nextcloud-backup-dev-eks","pod_identity_association":[],"preserve":null,"resolve_conflicts":null,"resolve_conflicts_on_create":null,"resolve_conflicts_on_update":null,"service_account_role_arn":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"pod_identity_association":[],"tags_all":{}}},{"address":"aws_eks_cluster.this","mode":"managed","type":"aws_eks_cluster","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"bootstrap_self_managed_addons":true,"compute_config":[],"enabled_cluster_log_types":null,"encryption_config":[],"force_update_version":null,"name":"nextcloud-backup-dev-eks","outpost_config":[],"remote_network_config":[],"storage_config":[],"tags":{"Name":"nextcloud-backup-dev-eks"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-eks","Project":"nextcloud-backup"},"timeouts":null,"version":"1.29","vpc_config":[{"endpoint_private_access":true,"endpoint_public_access":true}],"zonal_shift_config":[]},"sensitive_values":{"access_config":[],"certificate_authority":[],"compute_config":[],"encryption_config":[],"identity":[],"kubernetes_network_config":[],"outpost_config":[],"remote_network_config":[],"storage_config":[],"tags":{},"tags_all":{},"upgrade_policy":[],"vpc_config":[{"public_access_cidrs":[],"security_group_ids":[],"subnet_ids":[]}],"zonal_shift_config":[]}},{"address":"aws_eks_node_group.default","mode":"managed","type":"aws_eks_node_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cluster_name":"nextcloud-backup-dev-eks","force_update_version":null,"instance_types":["t3.medium"],"labels":null,"launch_template":[],"node_group_name":"nextcloud-backup-dev-ng","remote_access":[],"scaling_config":[{"desired_size":2,"max_size":3,"min_size":1}],"tags":{"Name":"nextcloud-backup-dev-ng"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-ng","Project":"nextcloud-backup"},"taint":[],"timeouts":null,"update_config":[{"max_unavailable":1,"max_unavailable_percentage":null}]},"sensitive_values":{"instance_types":[false],"launch_template":[],"node_repair_config":[],"remote_access":[],"resources":[],"scaling_config":[{}],"subnet_ids":[],"tags":{},"tags_all":{},"taint":[],"update_config":[{}]}},{"address":"aws_iam_instance_profile.eks_node","mode":"managed","type":"aws_iam_instance_profile","name":"eks_node","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"nextcloud-backup-dev-eks-node-profile","path":"/","role":"nextcloud-backup-dev-eks-node-role","tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"sensitive_values":{"tags_all":{}}},{"address":"aws_iam_openid_connect_provider.eks","mode":"managed","type":"aws_iam_openid_connect_provider","name":"eks","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"client_id_list":["sts.amazonaws.com"],"tags":{"Name":"nextcloud-backup-dev-eks-oidc"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-eks-oidc","Project":"nextcloud-backup"}},"sensitive_values":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[]}},{"address":"aws_iam_policy.backup","mode":"managed","type":"aws_iam_policy","name":"backup","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Allow backup job to write to S3 and read DB secret","name":"nextcloud-backup-dev-backup-policy","path":"/","tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"sensitive_values":{"tags_all":{}}},{"address":"aws_iam_role.backup_sa","mode":"managed","type":"aws_iam_role","name":"backup_sa","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"nextcloud-backup-dev-backup-irsa","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role.eks_cluster","mode":"managed","type":"aws_iam_role","name":"eks_cluster","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"eks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"nextcloud-backup-dev-eks-cluster-role","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role.eks_node","mode":"managed","type":"aws_iam_role","name":"eks_node","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"nextcloud-backup-dev-eks-node-role","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role_policy_attachment.backup","mode":"managed","type":"aws_iam_role_policy_attachment","name":"backup","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"nextcloud-backup-dev-backup-irsa"},"sensitive_values":{}},{"address":"aws_iam_role_policy_attachment.eks_cluster_AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_cluster_AmazonEKSClusterPolicy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"nextcloud-backup-dev-eks-cluster-role"},"sensitive_values":{}},{"address":"aws_iam_role_policy_attachment.eks_node_AmazonEC2ContainerRegistryReadOnly","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_node_AmazonEC2ContainerRegistryReadOnly","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","role":"nextcloud-backup-dev-eks-node-role"},"sensitive_values":{}},{"address":"aws_iam_role_policy_attachment.eks_node_AmazonEKSWorkerNodePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_node_AmazonEKSWorkerNodePolicy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","role":"nextcloud-backup-dev-eks-node-role"},"sensitive_values":{}},{"address":"aws_iam_role_policy_attachment.eks_node_AmazonEKS_CNI_Policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_node_AmazonEKS_CNI_Policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","role":"nextcloud-backup-dev-eks-node-role"},"sensitive_values":{}},{"address":"aws_internet_gateway.this","mode":"managed","type":"aws_internet_gateway","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"nextcloud-backup-dev-igw"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-igw","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_kms_alias.main","mode":"managed","type":"aws_kms_alias","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"alias/nextcloud-backup-dev"},"sensitive_values":{}},{"address":"aws_kms_key.main","mode":"managed","type":"aws_kms_key","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":30,"description":"nextcloud-backup-dev encryption key (S3 backups, Secrets Manager)","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::000000000000:root\"},\"Resource\":\"*\",\"Sid\":\"EnableRootPermissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Name":"nextcloud-backup-dev-kms"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-kms","Project":"nextcloud-backup"},"timeouts":null,"xks_key_id":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_nat_gateway.this","mode":"managed","type":"aws_nat_gateway","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"nextcloud-backup-dev-nat"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-nat","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"aws_route.private_nat","mode":"managed","type":"aws_route","name":"private_nat","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"aws_route.public_internet","mode":"managed","type":"aws_route","name":"public_internet","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"nextcloud-backup-dev-private-rt"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-private-rt","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"nextcloud-backup-dev-public-rt"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-public-rt","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"aws_route_table_association.private[\"eu-central-1a\"]","mode":"managed","type":"aws_route_table_association","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.private[\"eu-central-1b\"]","mode":"managed","type":"aws_route_table_association","name":"private","index":"eu-central-1b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.public[\"eu-central-1a\"]","mode":"managed","type":"aws_route_table_association","name":"public","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"aws_route_table_association.public[\"eu-central-1b\"]","mode":"managed","type":"aws_route_table_association","name":"public","index":"eu-central-1b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"aws_s3_bucket.backups","mode":"managed","type":"aws_s3_bucket","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"ai-tf","force_destroy":false,"tags":{"Name":"nextcloud-backup-dev-backups"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-backups","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}},{"address":"aws_s3_bucket_lifecycle_configuration.backups","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"rule":[{"abort_incomplete_multipart_upload":[],"expiration":[{"date":null,"days":365,"expired_object_delete_marker":false}],"filter":[{"and":[],"object_size_greater_than":null,"object_size_less_than":null,"prefix":"","tag":[]}],"id":"transition-and-expire","noncurrent_version_expiration":[{"newer_noncurrent_versions":null,"noncurrent_days":90}],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[{"date":null,"days":30,"storage_class":"GLACIER"}]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"sensitive_values":{"rule":[{"abort_incomplete_multipart_upload":[],"expiration":[{}],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[{}],"noncurrent_version_transition":[],"transition":[{}]}]}},{"address":"aws_s3_bucket_policy.backups","mode":"managed","type":"aws_s3_bucket_policy","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"aws_s3_bucket_public_access_block.backups","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"aws_s3_bucket_server_side_encryption_configuration.backups","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":"aws:kms"}],"bucket_key_enabled":null}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"aws_s3_bucket_versioning.backups","mode":"managed","type":"aws_s3_bucket_versioning","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}},{"address":"aws_secretsmanager_secret.db","mode":"managed","type":"aws_secretsmanager_secret","name":"db","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"force_overwrite_replica_secret":false,"name":"nextcloud-backup-dev/rds","recovery_window_in_days":7,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"sensitive_values":{"replica":[],"tags_all":{}}},{"address":"aws_secretsmanager_secret_version.db","mode":"managed","type":"aws_secretsmanager_secret_version","name":"db","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"secret_binary":null,"secret_string_wo":null,"secret_string_wo_version":null},"sensitive_values":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}},{"address":"aws_security_group.efs","mode":"managed","type":"aws_security_group","name":"efs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"EFS security group","name":"nextcloud-backup-dev-efs","revoke_rules_on_delete":false,"tags":{"Name":"nextcloud-backup-dev-efs"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-efs","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"aws_security_group.eks_nodes","mode":"managed","type":"aws_security_group","name":"eks_nodes","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for EKS worker nodes","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"nextcloud-backup-dev-eks-nodes","revoke_rules_on_delete":false,"tags":{"Name":"nextcloud-backup-dev-eks-nodes"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-eks-nodes","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[],"tags":{},"tags_all":{}}},{"address":"aws_security_group.rds","mode":"managed","type":"aws_security_group","name":"rds","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"RDS security group","name":"nextcloud-backup-dev-rds","revoke_rules_on_delete":false,"tags":{"Name":"nextcloud-backup-dev-rds"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-rds","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"aws_security_group.vpce","mode":"managed","type":"aws_security_group","name":"vpce","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for interface VPC endpoints","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["10.20.0.0/16"],"description":"HTTPS from VPC","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"nextcloud-backup-dev-vpce","revoke_rules_on_delete":false,"tags":{"Name":"nextcloud-backup-dev-vpce"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-vpce","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"aws_security_group_rule.efs_egress","mode":"managed","type":"aws_security_group_rule","name":"efs_egress","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"aws_security_group_rule.efs_from_eks","mode":"managed","type":"aws_security_group_rule","name":"efs_from_eks","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"NFS from EKS nodes","from_port":2049,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":2049,"type":"ingress"},"sensitive_values":{}},{"address":"aws_security_group_rule.rds_egress","mode":"managed","type":"aws_security_group_rule","name":"rds_egress","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"aws_security_group_rule.rds_from_eks","mode":"managed","type":"aws_security_group_rule","name":"rds_from_eks","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"MySQL from EKS nodes","from_port":3306,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":3306,"type":"ingress"},"sensitive_values":{}},{"address":"aws_subnet.private[\"eu-central-1a\"]","mode":"managed","type":"aws_subnet","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.20.10.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"nextcloud-backup-dev-private-eu-central-1a"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-private-eu-central-1a","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_subnet.private[\"eu-central-1b\"]","mode":"managed","type":"aws_subnet","name":"private","index":"eu-central-1b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1b","cidr_block":"10.20.11.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"nextcloud-backup-dev-private-eu-central-1b"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-private-eu-central-1b","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_subnet.public[\"eu-central-1a\"]","mode":"managed","type":"aws_subnet","name":"public","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.20.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"nextcloud-backup-dev-public-eu-central-1a"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-public-eu-central-1a","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_subnet.public[\"eu-central-1b\"]","mode":"managed","type":"aws_subnet","name":"public","index":"eu-central-1b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1b","cidr_block":"10.20.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"nextcloud-backup-dev-public-eu-central-1b"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-public-eu-central-1b","Project":"nextcloud-backup"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_vpc.this","mode":"managed","type":"aws_vpc","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.20.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"nextcloud-backup-dev-vpc"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-vpc","Project":"nextcloud-backup"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_vpc_endpoint.ecr_api","mode":"managed","type":"aws_vpc_endpoint","name":"ecr_api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.ecr.api","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-ecr-api"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-ecr-api","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"aws_vpc_endpoint.ecr_dkr","mode":"managed","type":"aws_vpc_endpoint","name":"ecr_dkr","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.ecr.dkr","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-ecr-dkr"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-ecr-dkr","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"aws_vpc_endpoint.logs","mode":"managed","type":"aws_vpc_endpoint","name":"logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.logs","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-logs"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-logs","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"aws_vpc_endpoint.s3","mode":"managed","type":"aws_vpc_endpoint","name":"s3","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.s3","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-s3-endpoint"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-s3-endpoint","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Gateway"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"aws_vpc_endpoint.secretsmanager","mode":"managed","type":"aws_vpc_endpoint","name":"secretsmanager","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.secretsmanager","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-secretsmanager"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-secretsmanager","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"aws_vpc_endpoint.sts","mode":"managed","type":"aws_vpc_endpoint","name":"sts","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.sts","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-sts"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-sts","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"data.tls_certificate.oidc","mode":"data","type":"tls_certificate","name":"oidc","provider_name":"registry.terraform.io/hashicorp/tls","schema_version":0,"values":{"content":null,"verify_chain":null},"sensitive_values":{"certificates":[]}},{"address":"random_password.db","mode":"managed","type":"random_password","name":"db","provider_name":"registry.terraform.io/hashicorp/random","schema_version":3,"values":{"keepers":null,"length":24,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":true,"upper":true},"sensitive_values":{"bcrypt_hash":true,"result":true}}]}},"resource_changes":[{"address":"data.tls_certificate.oidc","mode":"data","type":"tls_certificate","name":"oidc","provider_name":"registry.terraform.io/hashicorp/tls","change":{"actions":["read"],"before":null,"after":{"content":null,"verify_chain":null},"after_unknown":{"certificates":true,"id":true,"url":true},"before_sensitive":false,"after_sensitive":{"certificates":[]}},"action_reason":"read_because_config_unknown"},{"address":"aws_db_instance.this","mode":"managed","type":"aws_db_instance","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":true,"auto_minor_version_upgrade":true,"backup_retention_period":7,"blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_name":"nextcloud","db_subnet_group_name":"nextcloud-backup-dev-db-subnets","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":true,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":null,"engine":"mariadb","engine_version":"10.11","final_snapshot_identifier":"nextcloud-backup-dev-final","iam_database_authentication_enabled":null,"identifier":"nextcloud-backup-dev-db","instance_class":"db.t3.micro","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"parameter_group_name":"nextcloud-backup-dev-mariadb-params","password_wo":null,"password_wo_version":null,"performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":false,"storage_encrypted":true,"tags":{"Name":"nextcloud-backup-dev-db"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-db","Project":"nextcloud-backup"},"timeouts":null,"upgrade_storage_config":null,"username":"nextcloud"},"after_unknown":{"address":true,"arn":true,"availability_zone":true,"backup_target":true,"backup_window":true,"blue_green_update":[],"ca_cert_identifier":true,"character_set_name":true,"database_insights_mode":true,"domain_fqdn":true,"endpoint":true,"engine_lifecycle_support":true,"engine_version_actual":true,"hosted_zone_id":true,"id":true,"identifier_prefix":true,"iops":true,"kms_key_id":true,"latest_restorable_time":true,"license_model":true,"listener_endpoint":true,"maintenance_window":true,"master_user_secret":true,"master_user_secret_kms_key_id":true,"monitoring_role_arn":true,"nchar_character_set_name":true,"network_type":true,"option_group_name":true,"password":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"replica_mode":true,"replicas":true,"resource_id":true,"restore_to_point_in_time":[],"s3_import":[],"snapshot_identifier":true,"status":true,"storage_throughput":true,"storage_type":true,"tags":{},"tags_all":{},"timezone":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"blue_green_update":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"password_wo":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"aws_db_parameter_group.this","mode":"managed","type":"aws_db_parameter_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","family":"mariadb10.11","name":"nextcloud-backup-dev-mariadb-params","parameter":[{"apply_method":"immediate","name":"character_set_server","value":"utf8mb4"},{"apply_method":"immediate","name":"collation_server","value":"utf8mb4_unicode_ci"}],"skip_destroy":false,"tags":{"Name":"nextcloud-backup-dev-db-params"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-db-params","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"parameter":[{},{}],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"parameter":[{},{}],"tags":{},"tags_all":{}}}},{"address":"aws_db_subnet_group.this","mode":"managed","type":"aws_db_subnet_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"nextcloud-backup-dev-db-subnets","tags":{"Name":"nextcloud-backup-dev-db-subnets"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-db-subnets","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":true,"supported_network_types":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}}},{"address":"aws_ecr_lifecycle_policy.backup","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"backup","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy":"{\"rules\":[{\"action\":{\"type\":\"expire\"},\"description\":\"Expire untagged images older than 14 days\",\"rulePriority\":1,\"selection\":{\"countNumber\":14,\"countType\":\"sinceImagePushed\",\"countUnit\":\"days\",\"tagStatus\":\"untagged\"}}]}","repository":"nextcloud-backup"},"after_unknown":{"id":true,"registry_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_ecr_repository.backup","mode":"managed","type":"aws_ecr_repository","name":"backup","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[{"encryption_type":"KMS"}],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","name":"nextcloud-backup","tags":{"Name":"nextcloud-backup-dev-ecr"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-ecr","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[{"kms_key":true}],"id":true,"image_scanning_configuration":[{}],"registry_id":true,"repository_url":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[{}],"image_scanning_configuration":[{}],"tags":{},"tags_all":{}}}},{"address":"aws_efs_access_point.nextcloud","mode":"managed","type":"aws_efs_access_point","name":"nextcloud","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"posix_user":[{"gid":33,"secondary_gids":null,"uid":33}],"root_directory":[{"creation_info":[{"owner_gid":33,"owner_uid":33,"permissions":"0750"}],"path":"/nextcloud"}],"tags":{"Name":"nextcloud-backup-dev-efs-ap-nextcloud"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-efs-ap-nextcloud","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"file_system_arn":true,"file_system_id":true,"id":true,"owner_id":true,"posix_user":[{}],"root_directory":[{"creation_info":[{}]}],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"posix_user":[{}],"root_directory":[{"creation_info":[{}]}],"tags":{},"tags_all":{}}}},{"address":"aws_efs_file_system.this","mode":"managed","type":"aws_efs_file_system","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encrypted":true,"lifecycle_policy":[],"performance_mode":"generalPurpose","provisioned_throughput_in_mibps":null,"tags":{"Name":"nextcloud-backup-dev-efs"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-efs","Project":"nextcloud-backup"},"throughput_mode":"bursting"},"after_unknown":{"arn":true,"availability_zone_id":true,"availability_zone_name":true,"creation_token":true,"dns_name":true,"id":true,"kms_key_id":true,"lifecycle_policy":[],"name":true,"number_of_mount_targets":true,"owner_id":true,"protection":true,"size_in_bytes":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"lifecycle_policy":[],"protection":[],"size_in_bytes":[],"tags":{},"tags_all":{}}}},{"address":"aws_efs_mount_target.this[\"eu-central-1a\"]","mode":"managed","type":"aws_efs_mount_target","name":"this","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"availability_zone_id":true,"availability_zone_name":true,"dns_name":true,"file_system_arn":true,"file_system_id":true,"id":true,"ip_address":true,"mount_target_dns_name":true,"network_interface_id":true,"owner_id":true,"security_groups":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{"security_groups":[]}}},{"address":"aws_efs_mount_target.this[\"eu-central-1b\"]","mode":"managed","type":"aws_efs_mount_target","name":"this","index":"eu-central-1b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"timeouts":null},"after_unknown":{"availability_zone_id":true,"availability_zone_name":true,"dns_name":true,"file_system_arn":true,"file_system_id":true,"id":true,"ip_address":true,"mount_target_dns_name":true,"network_interface_id":true,"owner_id":true,"security_groups":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{"security_groups":[]}}},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"domain":"vpc","tags":{"Name":"nextcloud-backup-dev-nat-eip"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-nat-eip","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"id":true,"instance":true,"ipam_pool_id":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{},"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_eks_addon.coredns","mode":"managed","type":"aws_eks_addon","name":"coredns","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"addon_name":"coredns","cluster_name":"nextcloud-backup-dev-eks","pod_identity_association":[],"preserve":null,"resolve_conflicts":null,"resolve_conflicts_on_create":null,"resolve_conflicts_on_update":null,"service_account_role_arn":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"addon_version":true,"arn":true,"configuration_values":true,"created_at":true,"id":true,"modified_at":true,"pod_identity_association":[],"tags_all":{}},"before_sensitive":false,"after_sensitive":{"pod_identity_association":[],"tags_all":{}}}},{"address":"aws_eks_addon.kube_proxy","mode":"managed","type":"aws_eks_addon","name":"kube_proxy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"addon_name":"kube-proxy","cluster_name":"nextcloud-backup-dev-eks","pod_identity_association":[],"preserve":null,"resolve_conflicts":null,"resolve_conflicts_on_create":null,"resolve_conflicts_on_update":null,"service_account_role_arn":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"addon_version":true,"arn":true,"configuration_values":true,"created_at":true,"id":true,"modified_at":true,"pod_identity_association":[],"tags_all":{}},"before_sensitive":false,"after_sensitive":{"pod_identity_association":[],"tags_all":{}}}},{"address":"aws_eks_addon.vpc_cni","mode":"managed","type":"aws_eks_addon","name":"vpc_cni","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"addon_name":"vpc-cni","cluster_name":"nextcloud-backup-dev-eks","pod_identity_association":[],"preserve":null,"resolve_conflicts":null,"resolve_conflicts_on_create":null,"resolve_conflicts_on_update":null,"service_account_role_arn":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"addon_version":true,"arn":true,"configuration_values":true,"created_at":true,"id":true,"modified_at":true,"pod_identity_association":[],"tags_all":{}},"before_sensitive":false,"after_sensitive":{"pod_identity_association":[],"tags_all":{}}}},{"address":"aws_eks_cluster.this","mode":"managed","type":"aws_eks_cluster","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bootstrap_self_managed_addons":true,"compute_config":[],"enabled_cluster_log_types":null,"encryption_config":[],"force_update_version":null,"name":"nextcloud-backup-dev-eks","outpost_config":[],"remote_network_config":[],"storage_config":[],"tags":{"Name":"nextcloud-backup-dev-eks"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-eks","Project":"nextcloud-backup"},"timeouts":null,"version":"1.29","vpc_config":[{"endpoint_private_access":true,"endpoint_public_access":true}],"zonal_shift_config":[]},"after_unknown":{"access_config":true,"arn":true,"certificate_authority":true,"cluster_id":true,"compute_config":[],"created_at":true,"encryption_config":[],"endpoint":true,"id":true,"identity":true,"kubernetes_network_config":true,"outpost_config":[],"platform_version":true,"remote_network_config":[],"role_arn":true,"status":true,"storage_config":[],"tags":{},"tags_all":{},"upgrade_policy":true,"vpc_config":[{"cluster_security_group_id":true,"public_access_cidrs":true,"security_group_ids":true,"subnet_ids":true,"vpc_id":true}],"zonal_shift_config":[]},"before_sensitive":false,"after_sensitive":{"access_config":[],"certificate_authority":[],"compute_config":[],"encryption_config":[],"identity":[],"kubernetes_network_config":[],"outpost_config":[],"remote_network_config":[],"storage_config":[],"tags":{},"tags_all":{},"upgrade_policy":[],"vpc_config":[{"public_access_cidrs":[],"security_group_ids":[],"subnet_ids":[]}],"zonal_shift_config":[]}}},{"address":"aws_eks_node_group.default","mode":"managed","type":"aws_eks_node_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cluster_name":"nextcloud-backup-dev-eks","force_update_version":null,"instance_types":["t3.medium"],"labels":null,"launch_template":[],"node_group_name":"nextcloud-backup-dev-ng","remote_access":[],"scaling_config":[{"desired_size":2,"max_size":3,"min_size":1}],"tags":{"Name":"nextcloud-backup-dev-ng"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-ng","Project":"nextcloud-backup"},"taint":[],"timeouts":null,"update_config":[{"max_unavailable":1,"max_unavailable_percentage":null}]},"after_unknown":{"ami_type":true,"arn":true,"capacity_type":true,"disk_size":true,"id":true,"instance_types":[false],"launch_template":[],"node_group_name_prefix":true,"node_repair_config":true,"node_role_arn":true,"release_version":true,"remote_access":[],"resources":true,"scaling_config":[{}],"status":true,"subnet_ids":true,"tags":{},"tags_all":{},"taint":[],"update_config":[{}],"version":true},"before_sensitive":false,"after_sensitive":{"instance_types":[false],"launch_template":[],"node_repair_config":[],"remote_access":[],"resources":[],"scaling_config":[{}],"subnet_ids":[],"tags":{},"tags_all":{},"taint":[],"update_config":[{}]}}},{"address":"aws_iam_instance_profile.eks_node","mode":"managed","type":"aws_iam_instance_profile","name":"eks_node","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"nextcloud-backup-dev-eks-node-profile","path":"/","role":"nextcloud-backup-dev-eks-node-role","tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"name_prefix":true,"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_iam_openid_connect_provider.eks","mode":"managed","type":"aws_iam_openid_connect_provider","name":"eks","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"client_id_list":["sts.amazonaws.com"],"tags":{"Name":"nextcloud-backup-dev-eks-oidc"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-eks-oidc","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"client_id_list":[false],"id":true,"tags":{},"tags_all":{},"thumbprint_list":true,"url":true},"before_sensitive":false,"after_sensitive":{"client_id_list":[false],"tags":{},"tags_all":{},"thumbprint_list":[]}}},{"address":"aws_iam_policy.backup","mode":"managed","type":"aws_iam_policy","name":"backup","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Allow backup job to write to S3 and read DB secret","name":"nextcloud-backup-dev-backup-policy","path":"/","tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy":true,"policy_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_iam_role.backup_sa","mode":"managed","type":"aws_iam_role","name":"backup_sa","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"nextcloud-backup-dev-backup-irsa","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"assume_role_policy":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role.eks_cluster","mode":"managed","type":"aws_iam_role","name":"eks_cluster","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"eks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"nextcloud-backup-dev-eks-cluster-role","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role.eks_node","mode":"managed","type":"aws_iam_role","name":"eks_node","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"nextcloud-backup-dev-eks-node-role","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role_policy_attachment.backup","mode":"managed","type":"aws_iam_role_policy_attachment","name":"backup","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"nextcloud-backup-dev-backup-irsa"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.eks_cluster_AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_cluster_AmazonEKSClusterPolicy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSClusterPolicy","role":"nextcloud-backup-dev-eks-cluster-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.eks_node_AmazonEC2ContainerRegistryReadOnly","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_node_AmazonEC2ContainerRegistryReadOnly","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly","role":"nextcloud-backup-dev-eks-node-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.eks_node_AmazonEKSWorkerNodePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_node_AmazonEKSWorkerNodePolicy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy","role":"nextcloud-backup-dev-eks-node-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.eks_node_AmazonEKS_CNI_Policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_node_AmazonEKS_CNI_Policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy","role":"nextcloud-backup-dev-eks-node-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_internet_gateway.this","mode":"managed","type":"aws_internet_gateway","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"nextcloud-backup-dev-igw"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-igw","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_kms_alias.main","mode":"managed","type":"aws_kms_alias","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"alias/nextcloud-backup-dev"},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"target_key_arn":true,"target_key_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_kms_key.main","mode":"managed","type":"aws_kms_key","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":30,"description":"nextcloud-backup-dev encryption key (S3 backups, Secrets Manager)","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::000000000000:root\"},\"Resource\":\"*\",\"Sid\":\"EnableRootPermissions\"}],\"Version\":\"2012-10-17\"}","tags":{"Name":"nextcloud-backup-dev-kms"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-kms","Project":"nextcloud-backup"},"timeouts":null,"xks_key_id":null},"after_unknown":{"arn":true,"id":true,"key_id":true,"multi_region":true,"rotation_period_in_days":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_nat_gateway.this","mode":"managed","type":"aws_nat_gateway","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"nextcloud-backup-dev-nat"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-nat","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"aws_route.private_nat","mode":"managed","type":"aws_route","name":"private_nat","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route.public_internet","mode":"managed","type":"aws_route","name":"public_internet","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"gateway_id":true,"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"nextcloud-backup-dev-private-rt"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-private-rt","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"nextcloud-backup-dev-public-rt"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-public-rt","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"aws_route_table_association.private[\"eu-central-1a\"]","mode":"managed","type":"aws_route_table_association","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.private[\"eu-central-1b\"]","mode":"managed","type":"aws_route_table_association","name":"private","index":"eu-central-1b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.public[\"eu-central-1a\"]","mode":"managed","type":"aws_route_table_association","name":"public","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_route_table_association.public[\"eu-central-1b\"]","mode":"managed","type":"aws_route_table_association","name":"public","index":"eu-central-1b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_s3_bucket.backups","mode":"managed","type":"aws_s3_bucket","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"ai-tf","force_destroy":false,"tags":{"Name":"nextcloud-backup-dev-backups"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-backups","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags":{},"tags_all":{},"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags":{},"tags_all":{},"versioning":[],"website":[]}}},{"address":"aws_s3_bucket_lifecycle_configuration.backups","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"rule":[{"abort_incomplete_multipart_upload":[],"expiration":[{"date":null,"days":365,"expired_object_delete_marker":false}],"filter":[{"and":[],"object_size_greater_than":null,"object_size_less_than":null,"prefix":"","tag":[]}],"id":"transition-and-expire","noncurrent_version_expiration":[{"newer_noncurrent_versions":null,"noncurrent_days":90}],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[{"date":null,"days":30,"storage_class":"GLACIER"}]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"after_unknown":{"bucket":true,"expected_bucket_owner":true,"id":true,"rule":[{"abort_incomplete_multipart_upload":[],"expiration":[{}],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[{}],"noncurrent_version_transition":[],"transition":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"abort_incomplete_multipart_upload":[],"expiration":[{}],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[{}],"noncurrent_version_transition":[],"transition":[{}]}]}}},{"address":"aws_s3_bucket_policy.backups","mode":"managed","type":"aws_s3_bucket_policy","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"bucket":true,"id":true,"policy":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_s3_bucket_public_access_block.backups","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_s3_bucket_server_side_encryption_configuration.backups","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":"aws:kms"}],"bucket_key_enabled":null}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":true}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"aws_s3_bucket_versioning.backups","mode":"managed","type":"aws_s3_bucket_versioning","name":"backups","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"aws_secretsmanager_secret.db","mode":"managed","type":"aws_secretsmanager_secret","name":"db","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"force_overwrite_replica_secret":false,"name":"nextcloud-backup-dev/rds","recovery_window_in_days":7,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"id":true,"kms_key_id":true,"name_prefix":true,"policy":true,"replica":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"replica":[],"tags_all":{}}}},{"address":"aws_secretsmanager_secret_version.db","mode":"managed","type":"aws_secretsmanager_secret_version","name":"db","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"secret_binary":null,"secret_string_wo":null,"secret_string_wo_version":null},"after_unknown":{"arn":true,"has_secret_string_wo":true,"id":true,"secret_id":true,"secret_string":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}}},{"address":"aws_security_group.efs","mode":"managed","type":"aws_security_group","name":"efs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"EFS security group","name":"nextcloud-backup-dev-efs","revoke_rules_on_delete":false,"tags":{"Name":"nextcloud-backup-dev-efs"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-efs","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.eks_nodes","mode":"managed","type":"aws_security_group","name":"eks_nodes","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for EKS worker nodes","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"nextcloud-backup-dev-eks-nodes","revoke_rules_on_delete":false,"tags":{"Name":"nextcloud-backup-dev-eks-nodes"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-eks-nodes","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.rds","mode":"managed","type":"aws_security_group","name":"rds","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"RDS security group","name":"nextcloud-backup-dev-rds","revoke_rules_on_delete":false,"tags":{"Name":"nextcloud-backup-dev-rds"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-rds","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.vpce","mode":"managed","type":"aws_security_group","name":"vpce","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for interface VPC endpoints","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"All egress","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["10.20.0.0/16"],"description":"HTTPS from VPC","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"nextcloud-backup-dev-vpce","revoke_rules_on_delete":false,"tags":{"Name":"nextcloud-backup-dev-vpce"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-vpce","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_security_group_rule.efs_egress","mode":"managed","type":"aws_security_group_rule","name":"efs_egress","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false]}}},{"address":"aws_security_group_rule.efs_from_eks","mode":"managed","type":"aws_security_group_rule","name":"efs_from_eks","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"NFS from EKS nodes","from_port":2049,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":2049,"type":"ingress"},"after_unknown":{"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_security_group_rule.rds_egress","mode":"managed","type":"aws_security_group_rule","name":"rds_egress","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false]}}},{"address":"aws_security_group_rule.rds_from_eks","mode":"managed","type":"aws_security_group_rule","name":"rds_from_eks","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"MySQL from EKS nodes","from_port":3306,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":3306,"type":"ingress"},"after_unknown":{"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_subnet.private[\"eu-central-1a\"]","mode":"managed","type":"aws_subnet","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.20.10.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"nextcloud-backup-dev-private-eu-central-1a"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-private-eu-central-1a","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.private[\"eu-central-1b\"]","mode":"managed","type":"aws_subnet","name":"private","index":"eu-central-1b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1b","cidr_block":"10.20.11.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"nextcloud-backup-dev-private-eu-central-1b"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-private-eu-central-1b","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.public[\"eu-central-1a\"]","mode":"managed","type":"aws_subnet","name":"public","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.20.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"nextcloud-backup-dev-public-eu-central-1a"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-public-eu-central-1a","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_subnet.public[\"eu-central-1b\"]","mode":"managed","type":"aws_subnet","name":"public","index":"eu-central-1b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1b","cidr_block":"10.20.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"nextcloud-backup-dev-public-eu-central-1b"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-public-eu-central-1b","Project":"nextcloud-backup"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_vpc.this","mode":"managed","type":"aws_vpc","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.20.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"nextcloud-backup-dev-vpc"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-vpc","Project":"nextcloud-backup"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_vpc_endpoint.ecr_api","mode":"managed","type":"aws_vpc_endpoint","name":"ecr_api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.ecr.api","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-ecr-api"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-ecr-api","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"aws_vpc_endpoint.ecr_dkr","mode":"managed","type":"aws_vpc_endpoint","name":"ecr_dkr","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.ecr.dkr","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-ecr-dkr"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-ecr-dkr","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"aws_vpc_endpoint.logs","mode":"managed","type":"aws_vpc_endpoint","name":"logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.logs","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-logs"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-logs","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"aws_vpc_endpoint.s3","mode":"managed","type":"aws_vpc_endpoint","name":"s3","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.s3","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-s3-endpoint"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-s3-endpoint","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Gateway"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"private_dns_enabled":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"aws_vpc_endpoint.secretsmanager","mode":"managed","type":"aws_vpc_endpoint","name":"secretsmanager","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.secretsmanager","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-secretsmanager"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-secretsmanager","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"aws_vpc_endpoint.sts","mode":"managed","type":"aws_vpc_endpoint","name":"sts","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"resource_configuration_arn":null,"service_name":"com.amazonaws.eu-central-1.sts","service_network_arn":null,"tags":{"Name":"nextcloud-backup-dev-sts"},"tags_all":{"Environment":"dev","ManagedBy":"terraform","Name":"nextcloud-backup-dev-sts","Project":"nextcloud-backup"},"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"service_region":true,"state":true,"subnet_configuration":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_configuration":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"random_password.db","mode":"managed","type":"random_password","name":"db","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":24,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":true,"upper":true},"after_unknown":{"bcrypt_hash":true,"id":true,"result":true},"before_sensitive":false,"after_sensitive":{"bcrypt_hash":true,"result":true}}}],"output_changes":{"backup_bucket_name":{"actions":["create"],"before":null,"after":"ai-tf","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"backup_irsa_role_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"db_secret_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ecr_repository_url":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"efs_access_point_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"efs_file_system_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"eks_cluster_endpoint":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"eks_cluster_name":{"actions":["create"],"before":null,"after":"nextcloud-backup-dev-eks","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"rds_endpoint":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"vpc_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.5","values":{"outputs":{"backup_bucket_name":{"sensitive":false,"value":"ai-tf","type":"string"},"eks_cluster_name":{"sensitive":false,"value":"nextcloud-backup-dev-eks","type":"string"}},"root_module":{"resources":[{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":[""],"id":"eu-central-1","names":["eu-central-1a","eu-central-1b","eu-central-1c"],"state":"available","timeouts":null,"zone_ids":["euc1-az1","euc1-az2","euc1-az3"]},"sensitive_values":{"group_names":[false],"names":[false,false,false],"zone_ids":[false,false,false]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"000000000000","arn":"arn:aws:iam::000000000000:root","id":"000000000000","user_id":"AKIAIOSFODNN7EXAMPLE"},"sensitive_values":{}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dns_suffix":"amazonaws.com","id":"aws","partition":"aws","reverse_dns_prefix":"com.amazonaws"},"sensitive_values":{}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.0","expressions":{"default_tags":[{"tags":{"references":["var.project_name","var.environment"]}}],"region":{"references":["var.aws_region"]}}},"random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","version_constraint":"~\u003e 3.6"},"tls":{"name":"tls","full_name":"registry.terraform.io/hashicorp/tls","version_constraint":"~\u003e 4.0"}},"root_module":{"outputs":{"backup_bucket_name":{"expression":{"references":["aws_s3_bucket.backups.bucket","aws_s3_bucket.backups"]}},"backup_irsa_role_arn":{"expression":{"references":["aws_iam_role.backup_sa.arn","aws_iam_role.backup_sa"]}},"db_secret_arn":{"expression":{"references":["aws_secretsmanager_secret.db.arn","aws_secretsmanager_secret.db"]}},"ecr_repository_url":{"expression":{"references":["aws_ecr_repository.backup.repository_url","aws_ecr_repository.backup"]}},"efs_access_point_id":{"expression":{"references":["aws_efs_access_point.nextcloud.id","aws_efs_access_point.nextcloud"]}},"efs_file_system_id":{"expression":{"references":["aws_efs_file_system.this.id","aws_efs_file_system.this"]}},"eks_cluster_endpoint":{"expression":{"references":["aws_eks_cluster.this.endpoint","aws_eks_cluster.this"]}},"eks_cluster_name":{"expression":{"references":["aws_eks_cluster.this.name","aws_eks_cluster.this"]}},"rds_endpoint":{"expression":{"references":["aws_db_instance.this.address","aws_db_instance.this"]}},"vpc_id":{"expression":{"references":["aws_vpc.this.id","aws_vpc.this"]}}},"resources":[{"address":"aws_db_instance.this","mode":"managed","type":"aws_db_instance","name":"this","provider_config_key":"aws","expressions":{"allocated_storage":{"references":["var.db_allocated_storage"]},"apply_immediately":{"constant_value":true},"auto_minor_version_upgrade":{"constant_value":true},"backup_retention_period":{"references":["var.db_backup_retention_period"]},"db_name":{"references":["var.db_name"]},"db_subnet_group_name":{"references":["aws_db_subnet_group.this.name","aws_db_subnet_group.this"]},"deletion_protection":{"references":["var.db_deletion_protection"]},"engine":{"references":["var.db_engine"]},"engine_version":{"references":["var.db_engine_version"]},"final_snapshot_identifier":{"references":["local.name_prefix"]},"identifier":{"references":["local.name_prefix"]},"instance_class":{"references":["var.db_instance_class"]},"kms_key_id":{"references":["aws_kms_key.main.arn","aws_kms_key.main"]},"multi_az":{"references":["var.db_multi_az"]},"parameter_group_name":{"references":["aws_db_parameter_group.this.name","aws_db_parameter_group.this"]},"password":{"references":["random_password.db.result","random_password.db"]},"publicly_accessible":{"constant_value":false},"skip_final_snapshot":{"constant_value":false},"storage_encrypted":{"constant_value":true},"tags":{"references":["local.name_prefix"]},"username":{"references":["var.db_username"]},"vpc_security_group_ids":{"references":["aws_security_group.rds.id","aws_security_group.rds"]}},"schema_version":2},{"address":"aws_db_parameter_group.this","mode":"managed","type":"aws_db_parameter_group","name":"this","provider_config_key":"aws","expressions":{"family":{"references":["var.db_engine"]},"name":{"references":["local.name_prefix","var.db_engine"]},"parameter":[{"name":{"constant_value":"character_set_server"},"value":{"constant_value":"utf8mb4"}},{"name":{"constant_value":"collation_server"},"value":{"constant_value":"utf8mb4_unicode_ci"}}],"tags":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_db_subnet_group.this","mode":"managed","type":"aws_db_subnet_group","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_ecr_lifecycle_policy.backup","mode":"managed","type":"aws_ecr_lifecycle_policy","name":"backup","provider_config_key":"aws","expressions":{"policy":{},"repository":{"references":["aws_ecr_repository.backup.name","aws_ecr_repository.backup"]}},"schema_version":0},{"address":"aws_ecr_repository.backup","mode":"managed","type":"aws_ecr_repository","name":"backup","provider_config_key":"aws","expressions":{"encryption_configuration":[{"encryption_type":{"constant_value":"KMS"},"kms_key":{"references":["aws_kms_key.main.arn","aws_kms_key.main"]}}],"image_scanning_configuration":[{"scan_on_push":{"constant_value":true}}],"image_tag_mutability":{"constant_value":"MUTABLE"},"name":{"references":["var.ecr_repository_name"]},"tags":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_efs_access_point.nextcloud","mode":"managed","type":"aws_efs_access_point","name":"nextcloud","provider_config_key":"aws","expressions":{"file_system_id":{"references":["aws_efs_file_system.this.id","aws_efs_file_system.this"]},"posix_user":[{"gid":{"constant_value":33},"uid":{"constant_value":33}}],"root_directory":[{"creation_info":[{"owner_gid":{"constant_value":33},"owner_uid":{"constant_value":33},"permissions":{"constant_value":"0750"}}],"path":{"references":["var.nextcloud_efs_access_point_path"]}}],"tags":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_efs_file_system.this","mode":"managed","type":"aws_efs_file_system","name":"this","provider_config_key":"aws","expressions":{"encrypted":{"constant_value":true},"kms_key_id":{"references":["aws_kms_key.main.arn","aws_kms_key.main"]},"performance_mode":{"references":["var.efs_performance_mode"]},"tags":{"references":["local.name_prefix"]},"throughput_mode":{"references":["var.efs_throughput_mode"]}},"schema_version":0},{"address":"aws_efs_mount_target.this","mode":"managed","type":"aws_efs_mount_target","name":"this","provider_config_key":"aws","expressions":{"file_system_id":{"references":["aws_efs_file_system.this.id","aws_efs_file_system.this"]},"security_groups":{"references":["aws_security_group.efs.id","aws_security_group.efs"]},"subnet_id":{"references":["each.value.id","each.value"]}},"schema_version":0,"for_each_expression":{"references":["aws_subnet.private"]}},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"aws","expressions":{"domain":{"constant_value":"vpc"},"tags":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_eks_addon.coredns","mode":"managed","type":"aws_eks_addon","name":"coredns","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"coredns"},"cluster_name":{"references":["aws_eks_cluster.this.name","aws_eks_cluster.this"]}},"schema_version":0,"depends_on":["aws_eks_node_group.default"]},{"address":"aws_eks_addon.kube_proxy","mode":"managed","type":"aws_eks_addon","name":"kube_proxy","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"kube-proxy"},"cluster_name":{"references":["aws_eks_cluster.this.name","aws_eks_cluster.this"]}},"schema_version":0,"depends_on":["aws_eks_node_group.default"]},{"address":"aws_eks_addon.vpc_cni","mode":"managed","type":"aws_eks_addon","name":"vpc_cni","provider_config_key":"aws","expressions":{"addon_name":{"constant_value":"vpc-cni"},"cluster_name":{"references":["aws_eks_cluster.this.name","aws_eks_cluster.this"]}},"schema_version":0,"depends_on":["aws_eks_node_group.default"]},{"address":"aws_eks_cluster.this","mode":"managed","type":"aws_eks_cluster","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"role_arn":{"references":["aws_iam_role.eks_cluster.arn","aws_iam_role.eks_cluster"]},"tags":{"references":["local.name_prefix"]},"version":{"references":["var.eks_cluster_version"]},"vpc_config":[{"endpoint_private_access":{"constant_value":true},"endpoint_public_access":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.eks_nodes.id","aws_security_group.eks_nodes"]},"subnet_ids":{"references":["aws_subnet.public","aws_subnet.private"]}}]},"schema_version":1,"depends_on":["aws_iam_role_policy_attachment.eks_cluster_AmazonEKSClusterPolicy"]},{"address":"aws_eks_node_group.default","mode":"managed","type":"aws_eks_node_group","name":"default","provider_config_key":"aws","expressions":{"cluster_name":{"references":["aws_eks_cluster.this.name","aws_eks_cluster.this"]},"instance_types":{"references":["var.node_instance_types"]},"node_group_name":{"references":["local.name_prefix"]},"node_role_arn":{"references":["aws_iam_role.eks_node.arn","aws_iam_role.eks_node"]},"scaling_config":[{"desired_size":{"references":["var.node_desired_size"]},"max_size":{"references":["var.node_max_size"]},"min_size":{"references":["var.node_min_size"]}}],"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["local.name_prefix"]},"update_config":[{"max_unavailable":{"constant_value":1}}]},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.eks_node_AmazonEKSWorkerNodePolicy","aws_iam_role_policy_attachment.eks_node_AmazonEKS_CNI_Policy","aws_iam_role_policy_attachment.eks_node_AmazonEC2ContainerRegistryReadOnly"]},{"address":"aws_iam_instance_profile.eks_node","mode":"managed","type":"aws_iam_instance_profile","name":"eks_node","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"role":{"references":["aws_iam_role.eks_node.name","aws_iam_role.eks_node"]}},"schema_version":0},{"address":"aws_iam_openid_connect_provider.eks","mode":"managed","type":"aws_iam_openid_connect_provider","name":"eks","provider_config_key":"aws","expressions":{"client_id_list":{"constant_value":["sts.amazonaws.com"]},"tags":{"references":["local.name_prefix"]},"thumbprint_list":{"references":["data.tls_certificate.oidc.certificates[0].sha1_fingerprint","data.tls_certificate.oidc.certificates[0]","data.tls_certificate.oidc.certificates","data.tls_certificate.oidc"]},"url":{"references":["aws_eks_cluster.this.identity[0].oidc[0].issuer","aws_eks_cluster.this.identity[0].oidc[0]","aws_eks_cluster.this.identity[0].oidc","aws_eks_cluster.this.identity[0]","aws_eks_cluster.this.identity","aws_eks_cluster.this"]}},"schema_version":0},{"address":"aws_iam_policy.backup","mode":"managed","type":"aws_iam_policy","name":"backup","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow backup job to write to S3 and read DB secret"},"name":{"references":["local.name_prefix"]},"policy":{"references":["aws_s3_bucket.backups.arn","aws_s3_bucket.backups","aws_s3_bucket.backups.arn","aws_s3_bucket.backups","aws_secretsmanager_secret.db.arn","aws_secretsmanager_secret.db","aws_kms_key.main.arn","aws_kms_key.main"]}},"schema_version":0},{"address":"aws_iam_role.backup_sa","mode":"managed","type":"aws_iam_role","name":"backup_sa","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["aws_iam_openid_connect_provider.eks.arn","aws_iam_openid_connect_provider.eks","aws_eks_cluster.this.identity[0].oidc[0].issuer","aws_eks_cluster.this.identity[0].oidc[0]","aws_eks_cluster.this.identity[0].oidc","aws_eks_cluster.this.identity[0]","aws_eks_cluster.this.identity","aws_eks_cluster.this","var.cronjob_namespace"]},"name":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_iam_role.eks_cluster","mode":"managed","type":"aws_iam_role","name":"eks_cluster","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_iam_role.eks_node","mode":"managed","type":"aws_iam_role","name":"eks_node","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.backup","mode":"managed","type":"aws_iam_role_policy_attachment","name":"backup","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.backup.arn","aws_iam_policy.backup"]},"role":{"references":["aws_iam_role.backup_sa.name","aws_iam_role.backup_sa"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.eks_cluster_AmazonEKSClusterPolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_cluster_AmazonEKSClusterPolicy","provider_config_key":"aws","expressions":{"policy_arn":{"references":["data.aws_partition.current.partition","data.aws_partition.current"]},"role":{"references":["aws_iam_role.eks_cluster.name","aws_iam_role.eks_cluster"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.eks_node_AmazonEC2ContainerRegistryReadOnly","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_node_AmazonEC2ContainerRegistryReadOnly","provider_config_key":"aws","expressions":{"policy_arn":{"references":["data.aws_partition.current.partition","data.aws_partition.current"]},"role":{"references":["aws_iam_role.eks_node.name","aws_iam_role.eks_node"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.eks_node_AmazonEKSWorkerNodePolicy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_node_AmazonEKSWorkerNodePolicy","provider_config_key":"aws","expressions":{"policy_arn":{"references":["data.aws_partition.current.partition","data.aws_partition.current"]},"role":{"references":["aws_iam_role.eks_node.name","aws_iam_role.eks_node"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.eks_node_AmazonEKS_CNI_Policy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"eks_node_AmazonEKS_CNI_Policy","provider_config_key":"aws","expressions":{"policy_arn":{"references":["data.aws_partition.current.partition","data.aws_partition.current"]},"role":{"references":["aws_iam_role.eks_node.name","aws_iam_role.eks_node"]}},"schema_version":0},{"address":"aws_internet_gateway.this","mode":"managed","type":"aws_internet_gateway","name":"this","provider_config_key":"aws","expressions":{"tags":{"references":["local.name_prefix"]},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":0},{"address":"aws_kms_alias.main","mode":"managed","type":"aws_kms_alias","name":"main","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"target_key_id":{"references":["aws_kms_key.main.key_id","aws_kms_key.main"]}},"schema_version":0},{"address":"aws_kms_key.main","mode":"managed","type":"aws_kms_key","name":"main","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"constant_value":30},"description":{"references":["local.name_prefix"]},"enable_key_rotation":{"constant_value":true},"policy":{"references":["data.aws_partition.current.partition","data.aws_partition.current","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"tags":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_nat_gateway.this","mode":"managed","type":"aws_nat_gateway","name":"this","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.nat.id","aws_eip.nat"]},"subnet_id":{"references":["aws_subnet.public"]},"tags":{"references":["local.name_prefix"]}},"schema_version":0,"depends_on":["aws_internet_gateway.this"]},{"address":"aws_route.private_nat","mode":"managed","type":"aws_route","name":"private_nat","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.this.id","aws_nat_gateway.this"]},"route_table_id":{"references":["aws_route_table.private.id","aws_route_table.private"]}},"schema_version":0},{"address":"aws_route.public_internet","mode":"managed","type":"aws_route","name":"public_internet","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.this.id","aws_internet_gateway.this"]},"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]}},"schema_version":0},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"aws","expressions":{"tags":{"references":["local.name_prefix"]},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":0},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"aws","expressions":{"tags":{"references":["local.name_prefix"]},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":0},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private.id","aws_route_table.private"]},"subnet_id":{"references":["each.value.id","each.value"]}},"schema_version":0,"for_each_expression":{"references":["aws_subnet.private"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"subnet_id":{"references":["each.value.id","each.value"]}},"schema_version":0,"for_each_expression":{"references":["aws_subnet.public"]}},{"address":"aws_s3_bucket.backups","mode":"managed","type":"aws_s3_bucket","name":"backups","provider_config_key":"aws","expressions":{"bucket":{"references":["var.backup_bucket_name"]},"force_destroy":{"references":["var.backup_bucket_force_destroy"]},"tags":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_s3_bucket_lifecycle_configuration.backups","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"backups","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.backups.id","aws_s3_bucket.backups"]},"rule":[{"expiration":[{"days":{"constant_value":365}}],"filter":[{}],"id":{"constant_value":"transition-and-expire"},"noncurrent_version_expiration":[{"noncurrent_days":{"constant_value":90}}],"status":{"constant_value":"Enabled"},"transition":[{"days":{"constant_value":30},"storage_class":{"constant_value":"GLACIER"}}]}]},"schema_version":1},{"address":"aws_s3_bucket_policy.backups","mode":"managed","type":"aws_s3_bucket_policy","name":"backups","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.backups.id","aws_s3_bucket.backups"]},"policy":{"references":["aws_s3_bucket.backups.arn","aws_s3_bucket.backups","aws_s3_bucket.backups.arn","aws_s3_bucket.backups"]}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.backups","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"backups","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.backups.id","aws_s3_bucket.backups"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.backups","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"backups","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.backups.id","aws_s3_bucket.backups"]},"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["aws_kms_key.main.arn","aws_kms_key.main"]},"sse_algorithm":{"constant_value":"aws:kms"}}]}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.backups","mode":"managed","type":"aws_s3_bucket_versioning","name":"backups","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.backups.id","aws_s3_bucket.backups"]},"versioning_configuration":[{"status":{"constant_value":"Enabled"}}]},"schema_version":0},{"address":"aws_secretsmanager_secret.db","mode":"managed","type":"aws_secretsmanager_secret","name":"db","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["aws_kms_key.main.arn","aws_kms_key.main"]},"name":{"references":["local.name_prefix"]},"recovery_window_in_days":{"constant_value":7}},"schema_version":0},{"address":"aws_secretsmanager_secret_version.db","mode":"managed","type":"aws_secretsmanager_secret_version","name":"db","provider_config_key":"aws","expressions":{"secret_id":{"references":["aws_secretsmanager_secret.db.id","aws_secretsmanager_secret.db"]},"secret_string":{"references":["var.db_username","random_password.db.result","random_password.db","aws_db_instance.this.address","aws_db_instance.this","aws_db_instance.this.port","aws_db_instance.this","var.db_name"]}},"schema_version":0},{"address":"aws_security_group.efs","mode":"managed","type":"aws_security_group","name":"efs","provider_config_key":"aws","expressions":{"description":{"constant_value":"EFS security group"},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.name_prefix"]},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":1},{"address":"aws_security_group.eks_nodes","mode":"managed","type":"aws_security_group","name":"eks_nodes","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for EKS worker nodes"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.name_prefix"]},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":1},{"address":"aws_security_group.rds","mode":"managed","type":"aws_security_group","name":"rds","provider_config_key":"aws","expressions":{"description":{"constant_value":"RDS security group"},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.name_prefix"]},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":1},{"address":"aws_security_group.vpce","mode":"managed","type":"aws_security_group","name":"vpce","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for interface VPC endpoints"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":"All egress","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["aws_vpc.this.cidr_block","aws_vpc.this"]},"name":{"references":["local.name_prefix"]},"tags":{"references":["local.name_prefix"]},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":1},{"address":"aws_security_group_rule.efs_egress","mode":"managed","type":"aws_security_group_rule","name":"efs_egress","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"description":{"constant_value":"Allow all egress"},"from_port":{"constant_value":0},"protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.efs.id","aws_security_group.efs"]},"to_port":{"constant_value":0},"type":{"constant_value":"egress"}},"schema_version":2},{"address":"aws_security_group_rule.efs_from_eks","mode":"managed","type":"aws_security_group_rule","name":"efs_from_eks","provider_config_key":"aws","expressions":{"description":{"constant_value":"NFS from EKS nodes"},"from_port":{"constant_value":2049},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.efs.id","aws_security_group.efs"]},"source_security_group_id":{"references":["aws_security_group.eks_nodes.id","aws_security_group.eks_nodes"]},"to_port":{"constant_value":2049},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.rds_egress","mode":"managed","type":"aws_security_group_rule","name":"rds_egress","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"description":{"constant_value":"Allow all egress"},"from_port":{"constant_value":0},"protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.rds.id","aws_security_group.rds"]},"to_port":{"constant_value":0},"type":{"constant_value":"egress"}},"schema_version":2},{"address":"aws_security_group_rule.rds_from_eks","mode":"managed","type":"aws_security_group_rule","name":"rds_from_eks","provider_config_key":"aws","expressions":{"description":{"constant_value":"MySQL from EKS nodes"},"from_port":{"constant_value":3306},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.rds.id","aws_security_group.rds"]},"source_security_group_id":{"references":["aws_security_group.eks_nodes.id","aws_security_group.eks_nodes"]},"to_port":{"constant_value":3306},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"aws","expressions":{"availability_zone":{"references":["each.value.az","each.value"]},"cidr_block":{"references":["each.value.cidr","each.value"]},"tags":{"references":["local.name_prefix","each.value.az","each.value"]},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":1,"for_each_expression":{"references":["local.azs","local.private_subnet_cidrs"]}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"aws","expressions":{"availability_zone":{"references":["each.value.az","each.value"]},"cidr_block":{"references":["each.value.cidr","each.value"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["local.name_prefix","each.value.az","each.value"]},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":1,"for_each_expression":{"references":["local.azs","local.public_subnet_cidrs"]}},{"address":"aws_vpc.this","mode":"managed","type":"aws_vpc","name":"this","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.vpc_cidr"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["local.name_prefix"]}},"schema_version":1},{"address":"aws_vpc_endpoint.ecr_api","mode":"managed","type":"aws_vpc_endpoint","name":"ecr_api","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.vpce.id","aws_security_group.vpce"]},"service_name":{"references":["var.aws_region"]},"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["local.name_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":0},{"address":"aws_vpc_endpoint.ecr_dkr","mode":"managed","type":"aws_vpc_endpoint","name":"ecr_dkr","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.vpce.id","aws_security_group.vpce"]},"service_name":{"references":["var.aws_region"]},"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["local.name_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":0},{"address":"aws_vpc_endpoint.logs","mode":"managed","type":"aws_vpc_endpoint","name":"logs","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.vpce.id","aws_security_group.vpce"]},"service_name":{"references":["var.aws_region"]},"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["local.name_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":0},{"address":"aws_vpc_endpoint.s3","mode":"managed","type":"aws_vpc_endpoint","name":"s3","provider_config_key":"aws","expressions":{"route_table_ids":{"references":["aws_route_table.private.id","aws_route_table.private"]},"service_name":{"references":["var.aws_region"]},"tags":{"references":["local.name_prefix"]},"vpc_endpoint_type":{"constant_value":"Gateway"},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":0},{"address":"aws_vpc_endpoint.secretsmanager","mode":"managed","type":"aws_vpc_endpoint","name":"secretsmanager","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.vpce.id","aws_security_group.vpce"]},"service_name":{"references":["var.aws_region"]},"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["local.name_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":0},{"address":"aws_vpc_endpoint.sts","mode":"managed","type":"aws_vpc_endpoint","name":"sts","provider_config_key":"aws","expressions":{"private_dns_enabled":{"constant_value":true},"security_group_ids":{"references":["aws_security_group.vpce.id","aws_security_group.vpce"]},"service_name":{"references":["var.aws_region"]},"subnet_ids":{"references":["aws_subnet.private"]},"tags":{"references":["local.name_prefix"]},"vpc_endpoint_type":{"constant_value":"Interface"},"vpc_id":{"references":["aws_vpc.this.id","aws_vpc.this"]}},"schema_version":0},{"address":"random_password.db","mode":"managed","type":"random_password","name":"db","provider_config_key":"random","expressions":{"length":{"constant_value":24},"special":{"constant_value":true}},"schema_version":3},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"aws","expressions":{"state":{"constant_value":"available"}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.tls_certificate.oidc","mode":"data","type":"tls_certificate","name":"oidc","provider_config_key":"tls","expressions":{"url":{"references":["aws_eks_cluster.this.identity[0].oidc[0].issuer","aws_eks_cluster.this.identity[0].oidc[0]","aws_eks_cluster.this.identity[0].oidc","aws_eks_cluster.this.identity[0]","aws_eks_cluster.this.identity","aws_eks_cluster.this"]}},"schema_version":0}],"variables":{"aws_region":{"default":"eu-central-1","description":"AWS region."},"az_count":{"default":2,"description":"Number of AZs to use (2 recommended)."},"backup_bucket_force_destroy":{"default":false,"description":"If true, allow Terraform to delete the bucket even if it contains objects (NOT recommended for prod)."},"backup_bucket_name":{"description":"S3 bucket name for backups. Must be globally unique."},"backup_image":{"default":"","description":"Container image to run. Typically the ECR image URL with tag."},"cron_schedule":{"default":"0 2 * * *","description":"Cron schedule for the backup job."},"cronjob_namespace":{"default":"nextcloud-backup","description":"Kubernetes namespace for the backup CronJob."},"db_allocated_storage":{"default":20,"description":"RDS allocated storage (GiB)."},"db_backup_retention_period":{"default":7,"description":"RDS backup retention in days."},"db_deletion_protection":{"default":true,"description":"Enable deletion protection for RDS."},"db_engine":{"default":"mariadb","description":"Database engine. Use 'mysql' or 'mariadb'."},"db_engine_version":{"default":"10.11","description":"DB engine version. Leave default unless you need a specific version."},"db_instance_class":{"default":"db.t3.micro","description":"RDS instance class."},"db_multi_az":{"default":false,"description":"Enable Multi-AZ for RDS."},"db_name":{"default":"nextcloud","description":"RDS initial database name."},"db_username":{"default":"nextcloud","description":"RDS master username."},"ecr_repository_name":{"default":"nextcloud-backup","description":"ECR repository name for the backup image."},"efs_performance_mode":{"default":"generalPurpose","description":"EFS performance mode."},"efs_throughput_mode":{"default":"bursting","description":"EFS throughput mode."},"eks_cluster_version":{"default":"1.29","description":"EKS Kubernetes version."},"environment":{"default":"dev","description":"Environment name (e.g., dev, staging, prod)."},"nextcloud_efs_access_point_path":{"default":"/nextcloud","description":"Path used by the EFS access point for Nextcloud data (mounted into the backup job)."},"node_desired_size":{"default":2,"description":"Desired node count."},"node_instance_types":{"default":["t3.medium"],"description":"EKS managed node group instance types."},"node_max_size":{"default":3,"description":"Maximum node count."},"node_min_size":{"default":1,"description":"Minimum node count."},"project_name":{"default":"nextcloud-backup","description":"Project/name prefix used for resource naming."},"vpc_cidr":{"default":"10.20.0.0/16","description":"CIDR block for the VPC."}}}},"relevant_attributes":[{"resource":"aws_iam_role.eks_node","attribute":["name"]},{"resource":"aws_s3_bucket.backups","attribute":["id"]},{"resource":"aws_vpc.this","attribute":["id"]},{"resource":"data.tls_certificate.oidc","attribute":["certificates",0,"sha1_fingerprint"]},{"resource":"aws_security_group.rds","attribute":["id"]},{"resource":"aws_db_parameter_group.this","attribute":["name"]},{"resource":"aws_db_instance.this","attribute":["address"]},{"resource":"aws_db_subnet_group.this","attribute":["name"]},{"resource":"aws_kms_key.main","attribute":["key_id"]},{"resource":"data.aws_availability_zones.available","attribute":["names"]},{"resource":"aws_secretsmanager_secret.db","attribute":["arn"]},{"resource":"data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"aws_s3_bucket.backups","attribute":["arn"]},{"resource":"aws_eks_cluster.this","attribute":["identity",0,"oidc",0,"issuer"]},{"resource":"aws_iam_role.eks_cluster","attribute":["arn"]},{"resource":"aws_eks_cluster.this","attribute":["endpoint"]},{"resource":"aws_iam_role.backup_sa","attribute":["arn"]},{"resource":"aws_eks_cluster.this","attribute":["name"]},{"resource":"aws_secretsmanager_secret.db","attribute":["id"]},{"resource":"data.aws_partition.current","attribute":["partition"]},{"resource":"aws_iam_role.backup_sa","attribute":["name"]},{"resource":"aws_subnet.public","attribute":[]},{"resource":"aws_internet_gateway.this","attribute":["id"]},{"resource":"aws_vpc.this","attribute":["cidr_block"]},{"resource":"aws_kms_key.main","attribute":["arn"]},{"resource":"aws_route_table.private","attribute":["id"]},{"resource":"aws_nat_gateway.this","attribute":["id"]},{"resource":"aws_db_instance.this","attribute":["port"]},{"resource":"random_password.db","attribute":["result"]},{"resource":"aws_iam_policy.backup","attribute":["arn"]},{"resource":"aws_ecr_repository.backup","attribute":["repository_url"]},{"resource":"aws_iam_openid_connect_provider.eks","attribute":["arn"]},{"resource":"aws_iam_role.eks_node","attribute":["arn"]},{"resource":"aws_security_group.vpce","attribute":["id"]},{"resource":"aws_ecr_repository.backup","attribute":["name"]},{"resource":"aws_subnet.private","attribute":[]},{"resource":"aws_efs_file_system.this","attribute":["id"]},{"resource":"aws_eip.nat","attribute":["id"]},{"resource":"aws_efs_access_point.nextcloud","attribute":["id"]},{"resource":"aws_s3_bucket.backups","attribute":["bucket"]},{"resource":"aws_iam_role.eks_cluster","attribute":["name"]},{"resource":"aws_security_group.efs","attribute":["id"]},{"resource":"aws_route_table.public","attribute":["id"]},{"resource":"aws_security_group.eks_nodes","attribute":["id"]}],"checks":[{"address":{"kind":"var","name":"db_engine","to_display":"var.db_engine"},"status":"pass","instances":[{"address":{"to_display":"var.db_engine"},"status":"pass"}]}],"timestamp":"2026-01-27T05:20:00Z","applyable":true,"complete":true,"errored":false}
