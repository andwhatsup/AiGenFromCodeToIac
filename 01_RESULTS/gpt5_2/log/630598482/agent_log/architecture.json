{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\nskinparam shadowing false\nskinparam componentStyle rectangle\nskinparam wrapWidth 200\nskinparam maxMessageSize 200\n\ntitle Pynecone Web App with SQLite and Google OAuth/Gmail API (High-Level Deployment)\n\nnode \"User Device\" as user {\n  artifact \"Browser\" as browser\n}\n\nnode \"Application Host\" as host {\n  node \"Pynecone Runtime\" as runtime {\n    component \"Web Application\\nPython + Pynecone (pc)\" as webapp\n    component \"OAuth Handler\\ngoogle-auth-oauthlib\" as oauth\n    component \"Gmail Client\\ngoogle-api-python-client\" as gmailclient\n  }\n\n  database \"SQLite DB\\npynecone.db\" as sqlite\n  artifact \"OAuth Client Secrets\\nclient_secret.json\" as secrets\n}\n\ncloud \"Google APIs\" as google {\n  component \"Google OAuth 2.0 Authorization Server\" as googleoauth\n  component \"Gmail API\" as gmailapi\n}\n\nbrowser --> webapp : HTTPS\nwebapp --> sqlite : SQL (local file)\nwebapp --> oauth : initiate auth flow\noauth --> secrets : read client_id/client_secret\noauth --> googleoauth : OAuth 2.0 (Auth Code)\noauth --> webapp : access/refresh tokens\nwebapp --> gmailclient : call Gmail operations\ngmailclient --> gmailapi : HTTPS (REST)\n\n@enduml",
  "svg_diagram": "<?plantuml 1.2026.2beta1?><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"645px\" preserveAspectRatio=\"none\" style=\"width:1057px;height:645px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 1057 645\" width=\"1057px\" zoomAndPan=\"magnify\"><title>Pynecone Web App with SQLite and Google OAuth/Gmail API (High-Level Deployment)</title><defs/><g><g class=\"title\" data-source-line=\"9\"><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"679.8408\" x=\"181.6458\" y=\"22.9951\">Pynecone Web App with SQLite and Google OAuth/Gmail API (High-Level Deployment)</text></g><!--cluster user--><g class=\"cluster\" data-qualified-name=\"user\" data-source-line=\"11\" id=\"ent0002\"><polygon fill=\"#FFFFFF\" points=\"236,53.2969,246,43.2969,405,43.2969,405,128.5969,395,138.5969,236,138.5969,236,53.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"395\" x2=\"405\" y1=\"53.2969\" y2=\"43.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"236\" x2=\"395\" y1=\"53.2969\" y2=\"53.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"395\" x2=\"395\" y1=\"53.2969\" y2=\"138.5969\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"93.8096\" x=\"269.5952\" y=\"69.292\">User Device</text></g><!--cluster host--><g class=\"cluster\" data-qualified-name=\"host\" data-source-line=\"15\" id=\"ent0004\"><polygon fill=\"#FFFFFF\" points=\"16,195.5969,26,185.5969,694,185.5969,694,618.8769,684,628.8769,16,628.8769,16,195.5969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"684\" x2=\"694\" y1=\"195.5969\" y2=\"185.5969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"16\" x2=\"684\" y1=\"195.5969\" y2=\"195.5969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"684\" x2=\"684\" y1=\"195.5969\" y2=\"628.8769\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"130.5322\" x=\"285.7339\" y=\"211.592\">Application Host</text></g><!--cluster runtime--><g class=\"cluster\" data-qualified-name=\"host.runtime\" data-source-line=\"16\" id=\"ent0005\"><polygon fill=\"#FFFFFF\" points=\"40,243.5969,50,233.5969,552,233.5969,552,464.2869,542,474.2869,40,474.2869,40,243.5969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"542\" x2=\"552\" y1=\"243.5969\" y2=\"233.5969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"40\" x2=\"542\" y1=\"243.5969\" y2=\"243.5969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"542\" x2=\"542\" y1=\"243.5969\" y2=\"474.2869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"147.3896\" x=\"218.3052\" y=\"259.592\">Pynecone Runtime</text></g><!--cluster google--><g class=\"cluster\" data-qualified-name=\"google\" data-source-line=\"26\" id=\"ent0011\"><path d=\"M735.7291,534.887 C740.2362,526.2969 748.0232,524.6561 754.9256,532.0014 C761.5873,521.6569 771.7449,522.7597 777.005,533.4711 C780.8124,524.1154 788.6596,523.7901 794.9417,530.7506 C801.5255,521.0136 808.0969,519.8366 815.6058,529.7791 C823.1571,518.3828 831.9623,519.4481 838.8143,530.502 C844.5367,519.8759 852.9285,519.7813 859.1658,529.9992 C864.8184,518.7466 873.3055,519.6686 880.5921,528.2324 C887.1004,517.4662 893.614,516.7707 901.4717,526.8829 C906.7777,519.3721 915.5146,519.6991 919.2067,528.6244 C927.6364,518.6354 936.8628,517.2789 942.9937,530.9367 C949.3606,520.1514 958.2827,521.7461 963.9472,531.6482 C968.7248,522.946 977.1323,525.0113 981.1256,532.4814 C986.4621,519.9169 998.1654,522.0437 1004.4701,531.4528 C1014.8072,522.9794 1025.4911,524.4225 1029,538.7869 C1031.1019,539.0791 1031.8626,540.5741 1030.8749,542.4484 C1048.5189,550.4923 1047.3693,565.9088 1032.9883,575.9716 C1050.1323,593.677 1048.1681,612.6362 1022,619.3769 C1023.1267,619.389 1023.6592,619.857 1023.3148,621.0353 C1017.1413,630.1456 1011.1446,632.5506 1003.1489,623.005 C995.6943,631.3738 989.1438,631.5988 982.6338,621.9305 C977.6708,630.7266 968.4,633.1513 962.4565,622.9732 C957.481,633.7543 948.2338,634.247 941.073,625.3475 C935.0994,634.115 926.5247,633.1347 921.1794,624.6241 C915.4797,635.692 905.0732,634.6591 898.559,625.5367 C892.9047,634.8451 886.4199,634.2607 879.5447,626.9321 C871.6563,636.4292 863.1308,633.3217 858.6599,623.2793 C853.0132,634.5136 844.3726,634.8071 837.869,624.091 C832.3687,634.3179 825.2394,634.3033 818.3939,625.465 C810.965,633.5715 801.0119,632.9929 797.4139,621.3876 C791.4449,631.4081 781.4756,631.9159 775.8295,621.0538 C771.6515,631.6747 761.7459,631.3953 755.2733,623.6174 C742.2487,632.8853 729.7041,627.3821 726,612.3769 C727.1812,611.8009 728.2541,612.2003 728.334,613.6474 C710.0662,604.2302 707.0761,592.074 722.1243,577.01 C700.8342,557.2033 706.8165,540.1766 733,531.7869 C735.2691,531.6285 736.4558,532.4081 735.7291,534.887\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"94.5547\" x=\"830.2227\" y=\"549.782\">Google APIs</text></g><!--entity browser--><g class=\"entity\" data-qualified-name=\"user.browser\" data-source-line=\"12\" id=\"ent0003\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"87.0391\" x=\"276.48\" y=\"83.2969\"/><polygon fill=\"#FFFFFF\" points=\"346.5191,88.2969,346.5191,102.2969,358.5191,102.2969,358.5191,94.2969,352.5191,88.2969,346.5191,88.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"352.5191\" x2=\"352.5191\" y1=\"88.2969\" y2=\"94.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"358.5191\" x2=\"352.5191\" y1=\"94.2969\" y2=\"94.2969\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"57.0391\" x=\"286.48\" y=\"109.292\">Browser</text></g><!--entity sqlite--><g class=\"entity\" data-qualified-name=\"host.sqlite\" data-source-line=\"22\" id=\"ent0009\"><path d=\"M567.68,411.1869 C567.68,401.1869 622.9954,401.1869 622.9954,401.1869 C622.9954,401.1869 678.3109,401.1869 678.3109,411.1869 L678.3109,452.7806 C678.3109,462.7806 622.9954,462.7806 622.9954,462.7806 C622.9954,462.7806 567.68,462.7806 567.68,452.7806 L567.68,411.1869\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M567.68,411.1869 C567.68,421.1869 622.9954,421.1869 622.9954,421.1869 C622.9954,421.1869 678.3109,421.1869 678.3109,411.1869\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"45.6982\" x=\"587.7288\" y=\"438.182\">SQLite</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"633.4271\" y=\"438.182\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"20.3848\" x=\"637.8773\" y=\"438.182\">DB</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"90.6309\" x=\"577.68\" y=\"454.4789\">pynecone.db</text></g><!--entity secrets--><g class=\"entity\" data-qualified-name=\"host.secrets\" data-source-line=\"23\" id=\"ent0010\"><rect fill=\"#FFFFFF\" height=\"55.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"175.6123\" x=\"135.19\" y=\"557.2869\"/><polygon fill=\"#FFFFFF\" points=\"293.8023,562.2869,293.8023,576.2869,305.8023,576.2869,305.8023,568.2869,299.8023,562.2869,293.8023,562.2869\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"299.8023\" x2=\"299.8023\" y1=\"562.2869\" y2=\"568.2869\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"305.8023\" x2=\"299.8023\" y1=\"568.2869\" y2=\"568.2869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"43.832\" x=\"145.19\" y=\"583.282\">OAuth</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"189.022\" y=\"583.282\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"40.5303\" x=\"193.4722\" y=\"583.282\">Client</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"234.0025\" y=\"583.282\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"52.3496\" x=\"238.4527\" y=\"583.282\">Secrets</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"121.9873\" x=\"157.0025\" y=\"599.5789\">client_secret.json</text></g><!--entity webapp--><g class=\"entity\" data-qualified-name=\"host.runtime.webapp\" data-source-line=\"17\" id=\"ent0006\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"189.0801\" x=\"225.46\" y=\"273.5969\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"31.3428\" x=\"262.9917\" y=\"296.592\">Web</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"294.3345\" y=\"296.592\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"78.2236\" x=\"298.7847\" y=\"296.592\">Application</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"48.5283\" x=\"235.46\" y=\"312.8889\">Python</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"283.9883\" y=\"312.8889\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"288.4385\" y=\"312.8889\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"300.169\" y=\"312.8889\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"67.9629\" x=\"304.6192\" y=\"312.8889\">Pynecone</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"372.5821\" y=\"312.8889\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"27.5078\" x=\"377.0323\" y=\"312.8889\">(pc)</text></g><!--entity oauth--><g class=\"entity\" data-qualified-name=\"host.runtime.oauth\" data-source-line=\"18\" id=\"ent0007\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"166.3711\" x=\"139.81\" y=\"405.6869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"43.832\" x=\"171.2919\" y=\"428.682\">OAuth</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"215.124\" y=\"428.682\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"55.125\" x=\"219.5742\" y=\"428.682\">Handler</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"146.3711\" x=\"149.81\" y=\"444.9789\">google-auth-oauthlib</text></g><!--entity gmailclient--><g class=\"entity\" data-qualified-name=\"host.runtime.gmailclient\" data-source-line=\"19\" id=\"ent0008\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"191.3428\" x=\"341.33\" y=\"405.6869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"40.8447\" x=\"394.0888\" y=\"428.682\">Gmail</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"434.9335\" y=\"428.682\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"40.5303\" x=\"439.3837\" y=\"428.682\">Client</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"171.3428\" x=\"351.33\" y=\"444.9789\">google-api-python-client</text></g><!--entity googleoauth--><g class=\"entity\" data-qualified-name=\"google.googleoauth\" data-source-line=\"27\" id=\"ent0012\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"164.1289\" x=\"733.94\" y=\"558.7869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"49.3691\" x=\"753.8213\" y=\"581.782\">Google</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"803.1905\" y=\"581.782\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"43.832\" x=\"807.6407\" y=\"581.782\">OAuth</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"851.4727\" y=\"581.782\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"22.2646\" x=\"855.9229\" y=\"581.782\">2.0</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"93.7686\" x=\"743.94\" y=\"598.0789\">Authorization</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"837.7086\" y=\"598.0789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"45.9102\" x=\"842.1588\" y=\"598.0789\">Server</text></g><!--entity gmailapi--><g class=\"entity\" data-qualified-name=\"google.gmailapi\" data-source-line=\"28\" id=\"ent0013\"><rect fill=\"#FFFFFF\" height=\"36.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"87.4434\" x=\"933.28\" y=\"566.9269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"40.8447\" x=\"943.28\" y=\"589.922\">Gmail</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"984.1247\" y=\"589.922\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"22.1484\" x=\"988.5749\" y=\"589.922\">API</text></g><!--link browser to webapp--><g class=\"link\" data-entity-1=\"ent0003\" data-entity-2=\"ent0006\" data-link-type=\"dependency\" data-source-line=\"31\" id=\"lnk14\"><path d=\"M320,122.9969 C320,158.2469 320,227.6969 320,267.3469\" fill=\"none\" id=\"browser-to-webapp\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"320,273.3469,324,264.3469,320,268.3469,316,264.3469,320,273.3469\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.5371\" x=\"321\" y=\"166.7355\">HTTPS</text></g><!--link webapp to sqlite--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0009\" data-link-type=\"dependency\" data-source-line=\"32\" id=\"lnk15\"><path d=\"M414.87,319.7269 C448.99,328.3969 487.14,340.3569 520,356.1869 C544.49,367.9869 564.5298,381.975 583.6198,397.205\" fill=\"none\" id=\"webapp-to-sqlite\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"588.31,400.9469,583.7692,392.2072,584.4015,397.8286,578.7801,398.4609,588.31,400.9469\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"23.748\" x=\"545\" y=\"368.3255\">SQL</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"568.748\" y=\"368.3255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"32.6426\" x=\"572.5625\" y=\"368.3255\">(local</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"605.2051\" y=\"368.3255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"22.957\" x=\"609.0195\" y=\"368.3255\">file)</text></g><!--link webapp to oauth--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0007\" data-link-type=\"dependency\" data-source-line=\"33\" id=\"lnk16\"><path d=\"M225.11,311.5769 C168.89,320.0769 105.32,334.2569 88,356.1869 C66.74,383.1069 94.7532,400.0493 133.8232,412.0193\" fill=\"none\" id=\"webapp-to-oauth\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"139.56,413.7769,132.1265,407.3159,134.7793,412.3122,129.7831,414.965,139.56,413.7769\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"41.7539\" x=\"89\" y=\"368.3255\">initiate</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"130.7539\" y=\"368.3255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"27.2695\" x=\"134.5684\" y=\"368.3255\">auth</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"161.8379\" y=\"368.3255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"24.7148\" x=\"165.6523\" y=\"368.3255\">flow</text></g><!--link oauth to webapp--><g class=\"link\" data-entity-1=\"ent0007\" data-entity-2=\"ent0006\" data-link-type=\"dependency\" data-source-line=\"36\" id=\"lnk19\"><path d=\"M220.35,405.2669 C220.02,389.9269 221.9,370.6769 231,356.1869 C238.55,344.1769 244.7484,337.646 256.6884,329.786\" fill=\"none\" id=\"oauth-to-webapp\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"261.7,326.4869,251.9832,328.0944,257.5237,329.2361,256.382,334.7766,261.7,326.4869\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"87.1934\" x=\"232\" y=\"368.3255\">access/refresh</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"319.1934\" y=\"368.3255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"40.2363\" x=\"323.0078\" y=\"368.3255\">tokens</text></g><!--link oauth to secrets--><g class=\"link\" data-entity-1=\"ent0007\" data-entity-2=\"ent0010\" data-link-type=\"dependency\" data-source-line=\"34\" id=\"lnk17\"><path d=\"M223,458.6169 C223,485.8969 223,522.8969 223,550.7869\" fill=\"none\" id=\"oauth-to-secrets\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"223,556.7869,227,547.7869,223,551.7869,219,547.7869,223,556.7869\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"27.2871\" x=\"224\" y=\"504.9255\">read</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"251.2871\" y=\"504.9255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"130.166\" x=\"255.1016\" y=\"504.9255\">client_id/client_secret</text></g><!--link oauth to googleoauth--><g class=\"link\" data-entity-1=\"ent0007\" data-entity-2=\"ent0012\" data-link-type=\"dependency\" data-source-line=\"35\" id=\"lnk18\"><path d=\"M265.74,458.6969 C283.19,467.8769 303.95,477.2069 324,482.2869 C377.69,495.8869 518.29,484.1469 573,492.7869 C597.6,496.6669 602.56,502.9569 627,507.7869 C656.42,513.5869 665.48,506.5069 694,515.7869 C724.35,525.6569 750.6563,540.1727 773.9863,555.1027\" fill=\"none\" id=\"oauth-to-googleoauth\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"779.04,558.3369,773.6155,550.1165,774.8285,555.6418,769.3033,556.8548,779.04,558.3369\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"37.5703\" x=\"628\" y=\"504.9255\">OAuth</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"665.5703\" y=\"504.9255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"19.084\" x=\"669.3848\" y=\"504.9255\">2.0</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"688.4688\" y=\"504.9255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"32.8066\" x=\"692.2832\" y=\"504.9255\">(Auth</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"725.0898\" y=\"504.9255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"35.4023\" x=\"728.9043\" y=\"504.9255\">Code)</text></g><!--link webapp to gmailclient--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0008\" data-link-type=\"dependency\" data-source-line=\"37\" id=\"lnk20\"><path d=\"M343.12,326.5969 C363.63,349.4069 389.4285,378.0851 409.9185,400.8751\" fill=\"none\" id=\"webapp-to-gmailclient\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"413.93,405.3369,410.8873,395.9698,410.5871,401.6187,404.9382,401.3185,413.93,405.3369\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"20.6191\" x=\"384\" y=\"368.3255\">call</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"404.6191\" y=\"368.3255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"35.0098\" x=\"408.4336\" y=\"368.3255\">Gmail</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"443.4434\" y=\"368.3255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"63.8672\" x=\"447.2578\" y=\"368.3255\">operations</text></g><!--link gmailclient to gmailapi--><g class=\"link\" data-entity-1=\"ent0008\" data-entity-2=\"ent0013\" data-link-type=\"dependency\" data-source-line=\"38\" id=\"lnk21\"><path d=\"M479.3,458.6469 C496.58,467.8169 517.13,477.1569 537,482.2869 C618.86,503.4269 841.52,475.7569 916,515.7869 C937.99,527.5969 952.6406,545.6021 963.2406,561.6321\" fill=\"none\" id=\"gmailclient-to-gmailapi\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"966.55,566.6369,964.9223,556.9234,963.7921,562.4662,958.2493,561.336,966.55,566.6369\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.5371\" x=\"896\" y=\"504.9255\">HTTPS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"934.5371\" y=\"504.9255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"40.2305\" x=\"938.3516\" y=\"504.9255\">(REST)</text></g><?plantuml-src PPDDRzim38Rl_XLiJWa6sq6FFGn8sw4Pq65PtI6N08CYqxPMMT8aELuwxB-Fbfp4xIwnABxyUgXSbLW9XR3Q5fkkbT1uRznDdblMPxNmJRVl75gkbKVbCwxRdFLEihqRlgaWXqihRLCZcVAK83zSBxDbNWhdaokXkEpAS_ASldUwRRNA39b9ubw4Cioo5bp3IjqBLKF5fCE9XqeQhQXuuOyImIBtJDLoAkajCrjH-WQkbyl9VSj-Vq7dM8s5UCNWJBpmb6LpL4Yj8snn3ojZeATHeVZsA3m2KoKyQ4qruEkgyqt-q38XORNv3FErg9lq4GyeuHwDrCUMEbiaYT8qvkmxeQBxW-0u0-PWG0T_4W1clQWOzp2xjRgds-3UntFoznHFdKZ1cHTQmLex7rGD7KAIg3ct_jGfBzfOoCPpaC456Sp6-KvPTsfpz0rb_t11C3Ty4PBqk6V6lCyG4C2Qe4YqErK7C2cZorGFlrBiGtGmtWT7SdTIa7M9DI8reOsK1q-8hmTfj2aB8G4ecMTxvcZeSJFtjpjbnhwpCjPrloIvtZ2EBSUgK22twDrEnTm_NB2pdqwh61_zmnAur5r9JSVTqxvTx2pQ0zlfQ9CN0jVP4eQ3jk8rhgz0UnZN7EDFVFwZGtKk08ZDqCduCY1DFuvhWHjOFpzlYcGq1qySdJo41-PISoQX4X8NKr6eIngXX1TiUDw3NKdT9z4LCaK89BF8IXXHYJ9_0sqIC9c9WYuGvX4zlTJ5H7qUWN5EVyZSOcNHDU3r2oetxNRo2aXE0qc8bBH16yYwPAevnn2u4oAOFtqgdXV_0000?></g></svg>",
  "architecture_description": "## High-level architecture\n\n### Components\n- **User Device (Browser)**: End-user accesses the application over HTTPS.\n- **Application Host** (single deployable unit)\n  - **Pynecone Web Application (Python + Pynecone/pc)**: Serves the UI and orchestrates authentication and Gmail operations.\n  - **OAuth Handler (google-auth-oauthlib)**: Implements the Google OAuth 2.0 authorization-code flow.\n  - **Gmail Client (google-api-python-client)**: Calls Gmail API endpoints using the obtained OAuth tokens.\n  - **SQLite Database (pynecone.db)**: Local file-based database configured via `pcconfig.py` (`sqlite:///pynecone.db`) for app persistence.\n  - **OAuth Client Secrets (client_secret.json)**: Local credential file required to start the OAuth flow (`Flow.from_client_secrets_file`).\n- **Google APIs (external)**\n  - **Google OAuth 2.0 Authorization Server**: Issues authorization codes and tokens.\n  - **Gmail API**: Provides Gmail read/modify capabilities (scopes include `gmail.readonly` and `gmail.modify`).\n\n### Key relationships / data flows\n1. **Browser → Web Application (HTTPS)**: User interacts with the Pynecone app.\n2. **Web Application → SQLite (local SQL/file access)**: App reads/writes state to `pynecone.db`.\n3. **Web Application → OAuth Handler**: App initiates login/consent.\n4. **OAuth Handler → client_secret.json**: Reads OAuth client credentials.\n5. **OAuth Handler ↔ Google OAuth Server**: Completes OAuth 2.0 authorization-code flow and returns tokens to the app.\n6. **Web Application → Gmail Client → Gmail API (HTTPS/REST)**: App performs Gmail operations using the Google API client library.\n\n### Deployment notes (implied by codebase)\n- This is effectively a **single-host deployment**: app runtime + SQLite DB + secrets file are co-located.\n- `google-auth-oauthlib` is used but not declared in `requirements.txt` (should be added for reproducible deployments)."
}