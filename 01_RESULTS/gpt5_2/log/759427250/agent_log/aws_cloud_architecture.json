{
  "aws_architecture_description": "### Target outcome\nYour current stack is **LocalStack (emulated AWS APIs + DynamoDB)** plus **dynamodb-admin (a web UI)**. In real AWS, you don’t deploy LocalStack; you replace it with **managed AWS services**. The only “app” you’d deploy is the **DynamoDB Admin UI** (or an equivalent internal admin UI), and it should be protected because it can expose/modify data.\n\n---\n\n## High-level AWS architecture (lean, production-appropriate)\n\n### 1) Networking & access model\n- Create a **VPC** spanning **2 Availability Zones**.\n- Put compute in **private subnets**.\n- Put an **Application Load Balancer (ALB)** in **public subnets**.\n- Use **AWS WAF** on the ALB and restrict access to the admin UI (recommended options):\n  - **Best**: expose the UI only via **VPN (AWS Client VPN)** or **AWS Verified Access**.\n  - **Lean alternative**: ALB public + WAF IP allowlist (office/VPN egress IPs).\n\n### 2) Data layer (replaces LocalStack DynamoDB)\n- Use **Amazon DynamoDB** (real service) for tables.\n- Enable:\n  - **Point-in-time recovery (PITR)** for accidental deletes/overwrites.\n  - **KMS encryption** (default is already encrypted; use CMK if you need key control).\n  - **Auto scaling / on-demand capacity** depending on workload.\n\n### 3) Admin UI (replaces the dynamodb-admin container)\n- Package and run `aaronshaf/dynamodb-admin` as a container on **Amazon ECS with Fargate**.\n- The ECS service runs in private subnets and is fronted by the ALB.\n- The container uses **IAM task role** permissions to call DynamoDB (no static AWS keys).\n- Configure environment variables for region and any table allowlist you want.\n\n### 4) Container image & deployment\n- Store the container image in **Amazon ECR**.\n- Use a CI/CD pipeline (minimal):\n  - Build/push image to ECR.\n  - Update ECS service (rolling deploy).\n\n### 5) Observability & security\n- **CloudWatch Logs** for container logs.\n- **CloudWatch Alarms** for ALB 5xx, ECS task health, and DynamoDB throttles.\n- **AWS CloudTrail** enabled for auditing API calls.\n- **AWS Secrets Manager** only if you introduce secrets (dynamodb-admin typically doesn’t need DB creds, but may need basic auth/session secrets if you add them).\n\n---\n\n## AWS resources to provision\n\n### Core networking\n- VPC\n- Internet Gateway\n- 2× Public Subnets (multi-AZ)\n- 2× Private Subnets (multi-AZ)\n- 2× NAT Gateways (or 1× NAT Gateway for lower cost, reduced AZ resilience)\n- Route Tables (public + private) and routes\n- Security Groups:\n  - ALB security group\n  - ECS service security group\n- (Optional but recommended) VPC Endpoints:\n  - DynamoDB Gateway Endpoint\n  - ECR (api + dkr) Interface Endpoints\n  - CloudWatch Logs Interface Endpoint\n  - SSM Interface Endpoint (if you use ECS Exec)\n\n### Load balancing & edge protection\n- Application Load Balancer (ALB)\n- ALB Target Group\n- ALB Listener (HTTPS :443)\n- ACM Certificate (for TLS)\n- AWS WAF Web ACL + association to ALB\n\n### Compute (admin UI)\n- Amazon ECS Cluster\n- ECS Task Definition (for dynamodb-admin container)\n- ECS Service (Fargate)\n- IAM Roles:\n  - ECS Task Execution Role (pull from ECR, write logs)\n  - ECS Task Role (DynamoDB permissions)\n- CloudWatch Log Group (for container logs)\n- (Optional) AWS Cloud Map service discovery (usually not needed with single service behind ALB)\n\n### Data layer\n- DynamoDB Table(s)\n- DynamoDB PITR (table setting)\n- (Optional) AWS KMS CMK (if you require customer-managed keys)\n\n### Container registry & delivery\n- Amazon ECR Repository\n- (Optional) CI/CD:\n  - CodeBuild project\n  - CodePipeline pipeline\n  - IAM roles/policies for pipeline\n\n### Monitoring, audit, and ops\n- CloudWatch Alarms (ALB, ECS, DynamoDB)\n- CloudTrail Trail\n- AWS Config (optional, for compliance drift detection)\n\n### Access hardening (choose one approach)\n- AWS Client VPN endpoint (recommended for “internal admin tool” posture)\n  - Client VPN endpoint\n  - Authorization rules\n  - Associations to private subnets\n- OR AWS Verified Access (more modern zero-trust option)\n- OR WAF IP set allowlist (leanest, but depends on stable source IPs)\n\n---\n\n### Notes on what *not* to deploy\n- **LocalStack** itself is a local emulator; in AWS you replace it with real services (DynamoDB, IAM, etc.).\n- The local bind mount `./volume -> /var/lib/localstack` has no direct AWS equivalent; persistence is handled by DynamoDB and service configuration/state in AWS.\n\nIf you tell me whether this is meant to be **internal-only** (recommended) or **publicly accessible**, I can tighten the resource list (e.g., VPN vs WAF-only) and propose exact IAM policies for the ECS task role.",
  "aws_resources": [
    "VPC",
    "Internet Gateway",
    "Public Subnets (2, multi-AZ)",
    "Private Subnets (2, multi-AZ)",
    "NAT Gateway (1 or 2)",
    "Route Tables and Routes (public/private)",
    "Security Groups (ALB SG, ECS SG)",
    "VPC Gateway Endpoint for DynamoDB (optional)",
    "VPC Interface Endpoints for ECR (api,dkr) (optional)",
    "VPC Interface Endpoint for CloudWatch Logs (optional)",
    "VPC Interface Endpoint for SSM (optional, for ECS Exec)",
    "Application Load Balancer (ALB)",
    "ALB Target Group",
    "ALB HTTPS Listener (443)",
    "ACM Certificate",
    "AWS WAF Web ACL + ALB association",
    "Amazon ECS Cluster",
    "ECS Task Definition (Fargate)",
    "ECS Service (Fargate)",
    "IAM Role: ECS Task Execution Role",
    "IAM Role: ECS Task Role (DynamoDB access)",
    "CloudWatch Log Group",
    "Amazon DynamoDB Table(s)",
    "DynamoDB Point-in-Time Recovery (PITR) setting",
    "AWS KMS CMK (optional)",
    "Amazon ECR Repository",
    "CloudWatch Alarms (ALB/ECS/DynamoDB)",
    "AWS CloudTrail Trail",
    "AWS Config (optional)",
    "AWS Client VPN endpoint (optional)",
    "AWS Verified Access (optional)",
    "WAF IP Set allowlist (optional)"
  ]
}