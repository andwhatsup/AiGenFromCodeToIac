{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\ntitle Python Weather App on AWS EKS (High-level Deployment)\n\nskinparam shadowing false\nskinparam componentStyle rectangle\nskinparam wrapWidth 220\nskinparam maxMessageSize 120\n\nactor \"End User\" as user\ncloud \"Internet\" as internet\n\nnode \"AWS Cloud\" as aws {\n  node \"Amazon EKS Cluster\" as eks {\n    node \"Kubernetes Namespace: prod\" as ns {\n\n      node \"Ingress (class: alb)\\nAWS Load Balancer Controller\" as ingress\n\n      node \"Service: NodePort\\npython-weather-app-svc\" as svc\n\n      node \"Deployment: python-weather-app\\nreplicas=2\" as deploy {\n        node \"Pod (x2)\" as pod {\n          artifact \"Container Image\\nPython 3 + Flask 3.0.2\\nWaitress 3.0.0\" as image\n          component \"Flask Web App\\n(HTML via Jinja2)\" as app\n          component \"Secrets Store CSI Driver\\n(volume mount)\" as csi\n          component \"K8s ServiceAccount\\n(IRSA enabled)\" as sa\n        }\n      }\n\n      database \"Kubernetes Secret\\n(api-key materialized)\" as k8ssecret\n      component \"SecretProviderClass\\n(AWS provider)\" as spc\n    }\n  }\n\n  node \"Amazon ECR\\n(Container Registry)\" as ecr\n  node \"AWS Secrets Manager\\nSecret: /python-weather-app/api-key\" as secrets\n  node \"AWS IAM\\n(IRSA roles/policies)\" as iam\n  node \"AWS Application Load Balancer\" as alb\n}\n\nnode \"OpenWeatherMap API\\n(api.openweathermap.org)\" as owm\n\nuser --> internet\ninternet --> alb : HTTPS\nalb --> ingress : forwards\ningress --> svc : routes\nsvc --> app : HTTP\n\nimage ..> ecr : pulled by nodes\n\ncsi --> spc : uses\nspc --> secrets : fetch secret\nsa --> iam : assume role (IRSA)\nspc ..> iam : auth via IRSA\ncsi --> k8ssecret : sync/mount\napp --> k8ssecret : reads API key\n\napp --> owm : HTTPS requests\n\n@enduml",
  "svg_diagram": "<?plantuml 1.2026.2beta1?><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"1336px\" preserveAspectRatio=\"none\" style=\"width:1656px;height:1336px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 1656 1336\" width=\"1656px\" zoomAndPan=\"magnify\"><title>Python Weather App on AWS EKS (High-level Deployment)</title><defs/><g><g class=\"title\" data-source-line=\"4\"><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"462.7588\" x=\"590.0725\" y=\"22.9951\">Python Weather App on AWS EKS (High-level Deployment)</text></g><!--cluster aws--><g class=\"cluster\" data-qualified-name=\"aws\" data-source-line=\"14\" id=\"ent0004\"><polygon fill=\"#FFFFFF\" points=\"16,298.1369,26,288.1369,1393,288.1369,1393,1309.4969,1383,1319.4969,16,1319.4969,16,298.1369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1383\" x2=\"1393\" y1=\"298.1369\" y2=\"288.1369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"16\" x2=\"1383\" y1=\"298.1369\" y2=\"298.1369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1383\" x2=\"1383\" y1=\"298.1369\" y2=\"1319.4969\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"85.9141\" x=\"657.543\" y=\"314.132\">AWS Cloud</text></g><!--cluster eks--><g class=\"cluster\" data-qualified-name=\"aws.eks\" data-source-line=\"15\" id=\"ent0005\"><polygon fill=\"#FFFFFF\" points=\"40,445.4369,50,435.4369,993,435.4369,993,1153.6069,983,1163.6069,40,1163.6069,40,445.4369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"983\" x2=\"993\" y1=\"445.4369\" y2=\"435.4369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"40\" x2=\"983\" y1=\"445.4369\" y2=\"445.4369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"983\" x2=\"983\" y1=\"445.4369\" y2=\"1163.6069\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"159.3115\" x=\"432.8442\" y=\"461.432\">Amazon EKS Cluster</text></g><!--cluster ns--><g class=\"cluster\" data-qualified-name=\"aws.eks.ns\" data-source-line=\"16\" id=\"ent0006\"><polygon fill=\"#FFFFFF\" points=\"64,493.4369,74,483.4369,969,483.4369,969,1129.6069,959,1139.6069,64,1139.6069,64,493.4369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"959\" x2=\"969\" y1=\"493.4369\" y2=\"483.4369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"64\" x2=\"959\" y1=\"493.4369\" y2=\"493.4369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"959\" x2=\"959\" y1=\"493.4369\" y2=\"1139.6069\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"233.9736\" x=\"395.5132\" y=\"509.432\">Kubernetes Namespace: prod</text></g><!--cluster deploy--><g class=\"cluster\" data-qualified-name=\"aws.eks.ns.deploy\" data-source-line=\"22\" id=\"ent0009\"><polygon fill=\"#FFFFFF\" points=\"88,794.6169,98,784.6169,945,784.6169,945,990.5169,935,1000.5169,88,1000.5169,88,794.6169\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"935\" x2=\"945\" y1=\"794.6169\" y2=\"784.6169\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"88\" x2=\"935\" y1=\"794.6169\" y2=\"794.6169\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"935\" x2=\"935\" y1=\"794.6169\" y2=\"1000.5169\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"267.333\" x=\"378.8335\" y=\"810.612\">Deployment: python-weather-app</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"83.5693\" x=\"470.7153\" y=\"826.9089\">replicas=2</text></g><!--cluster pod--><g class=\"cluster\" data-qualified-name=\"aws.eks.ns.deploy.pod\" data-source-line=\"23\" id=\"ent0010\"><polygon fill=\"#FFFFFF\" points=\"112,858.6169,122,848.6169,921,848.6169,921,966.5169,911,976.5169,112,976.5169,112,858.6169\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"911\" x2=\"921\" y1=\"858.6169\" y2=\"848.6169\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"112\" x2=\"911\" y1=\"858.6169\" y2=\"858.6169\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"911\" x2=\"911\" y1=\"858.6169\" y2=\"976.5169\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"66.3428\" x=\"479.3286\" y=\"874.612\">Pod (x2)</text></g><!--entity ecr--><g class=\"entity\" data-qualified-name=\"aws.ecr\" data-source-line=\"36\" id=\"ent0017\"><polygon fill=\"#FFFFFF\" points=\"1009.14,1071.5169,1019.14,1061.5169,1190.8695,1061.5169,1190.8695,1114.1106,1180.8695,1124.1106,1009.14,1124.1106,1009.14,1071.5169\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1180.8695\" x2=\"1190.8695\" y1=\"1071.5169\" y2=\"1061.5169\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1009.14\" x2=\"1180.8695\" y1=\"1071.5169\" y2=\"1071.5169\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1180.8695\" x2=\"1180.8695\" y1=\"1071.5169\" y2=\"1124.1106\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.5811\" x=\"1050.3148\" y=\"1094.512\">Amazon</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1106.8959\" y=\"1094.512\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"28.3486\" x=\"1111.3461\" y=\"1094.512\">ECR</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"73.876\" x=\"1024.14\" y=\"1110.8089\">(Container</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1098.016\" y=\"1110.8089\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"63.4033\" x=\"1102.4662\" y=\"1110.8089\">Registry)</text></g><!--entity secrets--><g class=\"entity\" data-qualified-name=\"aws.secrets\" data-source-line=\"37\" id=\"ent0018\"><polygon fill=\"#FFFFFF\" points=\"99.18,1234.6069,109.18,1224.6069,342.8294,1224.6069,342.8294,1293.4975,332.8294,1303.4975,99.18,1303.4975,99.18,1234.6069\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"332.8294\" x2=\"342.8294\" y1=\"1234.6069\" y2=\"1224.6069\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"99.18\" x2=\"332.8294\" y1=\"1234.6069\" y2=\"1234.6069\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"332.8294\" x2=\"332.8294\" y1=\"1234.6069\" y2=\"1303.4975\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"32.3066\" x=\"138.5433\" y=\"1257.602\">AWS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"170.8499\" y=\"1257.602\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"52.3496\" x=\"175.3001\" y=\"1257.602\">Secrets</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"227.6497\" y=\"1257.602\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"61.3662\" x=\"232.0999\" y=\"1257.602\">Manager</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"49.7725\" x=\"191.1185\" y=\"1273.8989\">Secret:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"203.6494\" x=\"114.18\" y=\"1290.1957\">/python-weather-app/api-key</text></g><!--entity iam--><g class=\"entity\" data-qualified-name=\"aws.iam\" data-source-line=\"38\" id=\"ent0019\"><polygon fill=\"#FFFFFF\" points=\"917.37,1242.7569,927.37,1232.7569,1096.6249,1232.7569,1096.6249,1285.3506,1086.6249,1295.3506,917.37,1295.3506,917.37,1242.7569\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1086.6249\" x2=\"1096.6249\" y1=\"1242.7569\" y2=\"1232.7569\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"917.37\" x2=\"1086.6249\" y1=\"1242.7569\" y2=\"1242.7569\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1086.6249\" x2=\"1086.6249\" y1=\"1242.7569\" y2=\"1295.3506\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"32.3066\" x=\"970.7264\" y=\"1265.752\">AWS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1003.0331\" y=\"1265.752\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"25.7852\" x=\"1007.4833\" y=\"1265.752\">IAM</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.7822\" x=\"932.37\" y=\"1282.0489\">(IRSA</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"970.1522\" y=\"1282.0489\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"97.0225\" x=\"974.6024\" y=\"1282.0489\">roles/policies)</text></g><!--entity alb--><g class=\"entity\" data-qualified-name=\"aws.alb\" data-source-line=\"39\" id=\"ent0020\"><polygon fill=\"#FFFFFF\" points=\"290.35,338.1369,300.35,328.1369,549.6537,328.1369,549.6537,364.4338,539.6537,374.4338,290.35,374.4338,290.35,338.1369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"539.6537\" x2=\"549.6537\" y1=\"338.1369\" y2=\"328.1369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"290.35\" x2=\"539.6537\" y1=\"338.1369\" y2=\"338.1369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"539.6537\" x2=\"539.6537\" y1=\"338.1369\" y2=\"374.4338\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"32.3066\" x=\"305.35\" y=\"361.132\">AWS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"337.6566\" y=\"361.132\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"78.2236\" x=\"342.1068\" y=\"361.132\">Application</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"420.3305\" y=\"361.132\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"33.8311\" x=\"424.7807\" y=\"361.132\">Load</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"458.6117\" y=\"361.132\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"61.5918\" x=\"463.0619\" y=\"361.132\">Balancer</text></g><!--entity ingress--><g class=\"entity\" data-qualified-name=\"aws.eks.ns.ingress\" data-source-line=\"18\" id=\"ent0007\"><polygon fill=\"#FFFFFF\" points=\"294.87,533.4369,304.87,523.4369,545.1229,523.4369,545.1229,576.0306,535.1229,586.0306,294.87,586.0306,294.87,533.4369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"535.1229\" x2=\"545.1229\" y1=\"533.4369\" y2=\"523.4369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"294.87\" x2=\"535.1229\" y1=\"533.4369\" y2=\"533.4369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"535.1229\" x2=\"535.1229\" y1=\"533.4369\" y2=\"586.0306\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"50.8457\" x=\"349.2484\" y=\"556.432\">Ingress</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"400.0941\" y=\"556.432\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"44.9326\" x=\"404.5443\" y=\"556.432\">(class:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"449.4769\" y=\"556.432\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"26.8174\" x=\"453.9271\" y=\"556.432\">alb)</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"32.3066\" x=\"309.87\" y=\"572.7289\">AWS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"342.1766\" y=\"572.7289\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"33.8311\" x=\"346.6268\" y=\"572.7289\">Load</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"380.4579\" y=\"572.7289\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"61.5918\" x=\"384.9081\" y=\"572.7289\">Balancer</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"446.4999\" y=\"572.7289\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"69.1729\" x=\"450.9501\" y=\"572.7289\">Controller</text></g><!--entity svc--><g class=\"entity\" data-qualified-name=\"aws.eks.ns.svc\" data-source-line=\"20\" id=\"ent0008\"><polygon fill=\"#FFFFFF\" points=\"314.43,671.0269,324.43,661.0269,525.5609,661.0269,525.5609,713.6206,515.5609,723.6206,314.43,723.6206,314.43,671.0269\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"515.5609\" x2=\"525.5609\" y1=\"671.0269\" y2=\"661.0269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"314.43\" x2=\"515.5609\" y1=\"671.0269\" y2=\"671.0269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"515.5609\" x2=\"515.5609\" y1=\"671.0269\" y2=\"723.6206\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.458\" x=\"352.1458\" y=\"694.022\">Service:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"408.6038\" y=\"694.022\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"64.791\" x=\"413.054\" y=\"694.022\">NodePort</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"171.1309\" x=\"329.43\" y=\"710.3189\">python-weather-app-svc</text></g><!--entity k8ssecret--><g class=\"entity\" data-qualified-name=\"aws.eks.ns.k8ssecret\" data-source-line=\"31\" id=\"ent0015\"><path d=\"M336.02,1072.0169 C336.02,1062.0169 422.9995,1062.0169 422.9995,1062.0169 C422.9995,1062.0169 509.979,1062.0169 509.979,1072.0169 L509.979,1113.6106 C509.979,1123.6106 422.9995,1123.6106 422.9995,1123.6106 C422.9995,1123.6106 336.02,1123.6106 336.02,1113.6106 L336.02,1072.0169\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M336.02,1072.0169 C336.02,1082.0169 422.9995,1082.0169 422.9995,1082.0169 C422.9995,1082.0169 509.979,1082.0169 509.979,1072.0169\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"80.1924\" x=\"358.1504\" y=\"1099.012\">Kubernetes</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"438.3428\" y=\"1099.012\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"45.0557\" x=\"442.7929\" y=\"1099.012\">Secret</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.875\" x=\"346.02\" y=\"1115.3089\">(api-key</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"402.895\" y=\"1115.3089\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"92.6338\" x=\"407.3452\" y=\"1115.3089\">materialized)</text></g><!--entity spc--><g class=\"entity\" data-qualified-name=\"aws.eks.ns.spc\" data-source-line=\"32\" id=\"ent0016\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"160.082\" x=\"140.96\" y=\"1066.5169\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"140.082\" x=\"150.96\" y=\"1089.512\">SecretProviderClass</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.7686\" x=\"167.8413\" y=\"1105.8089\">(AWS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"205.6099\" y=\"1105.8089\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"64.1006\" x=\"210.0601\" y=\"1105.8089\">provider)</text></g><!--entity image--><g class=\"entity\" data-qualified-name=\"aws.eks.ns.deploy.pod.image\" data-source-line=\"24\" id=\"ent0011\"><rect fill=\"#FFFFFF\" height=\"71.8906\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"188.5117\" x=\"523.74\" y=\"888.6169\"/><polygon fill=\"#FFFFFF\" points=\"695.2517,893.6169,695.2517,907.6169,707.2517,907.6169,707.2517,899.6169,701.2517,893.6169,695.2517,893.6169\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"701.2517\" x2=\"701.2517\" y1=\"893.6169\" y2=\"899.6169\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"707.2517\" x2=\"701.2517\" y1=\"899.6169\" y2=\"899.6169\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"68.4141\" x=\"554.6409\" y=\"914.612\">Container</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"623.0549\" y=\"914.612\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"43.8457\" x=\"627.5051\" y=\"914.612\">Image</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"48.5283\" x=\"533.74\" y=\"930.9089\">Python</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"582.2683\" y=\"930.9089\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"8.9072\" x=\"586.7185\" y=\"930.9089\">3</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"595.6257\" y=\"930.9089\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"600.0759\" y=\"930.9089\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"611.8064\" y=\"930.9089\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"35.9229\" x=\"616.2566\" y=\"930.9089\">Flask</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"652.1795\" y=\"930.9089\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"35.6221\" x=\"656.6296\" y=\"930.9089\">3.0.2</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"60.7578\" x=\"562.5808\" y=\"947.2057\">Waitress</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"623.3386\" y=\"947.2057\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"35.6221\" x=\"627.7888\" y=\"947.2057\">3.0.0</text></g><!--entity app--><g class=\"entity\" data-qualified-name=\"aws.eks.ns.deploy.pod.app\" data-source-line=\"25\" id=\"ent0012\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"137.8037\" x=\"351.1\" y=\"898.2669\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"35.9229\" x=\"368.2436\" y=\"921.262\">Flask</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"404.1664\" y=\"921.262\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"31.3428\" x=\"408.6166\" y=\"921.262\">Web</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"439.9594\" y=\"921.262\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"27.3506\" x=\"444.4096\" y=\"921.262\">App</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"44.4199\" x=\"361.1\" y=\"937.5589\">(HTML</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"405.5199\" y=\"937.5589\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"20.7539\" x=\"409.9701\" y=\"937.5589\">via</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"430.724\" y=\"937.5589\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"43.7295\" x=\"435.1742\" y=\"937.5589\">Jinja2)</text></g><!--entity csi--><g class=\"entity\" data-qualified-name=\"aws.eks.ns.deploy.pod.csi\" data-source-line=\"26\" id=\"ent0013\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"188.8818\" x=\"127.56\" y=\"898.2669\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"52.3496\" x=\"137.56\" y=\"921.262\">Secrets</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"189.9096\" y=\"921.262\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.3105\" x=\"194.3598\" y=\"921.262\">Store</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"231.6704\" y=\"921.262\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"22.791\" x=\"236.1205\" y=\"921.262\">CSI</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"258.9116\" y=\"921.262\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"43.0801\" x=\"263.3618\" y=\"921.262\">Driver</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"57.3262\" x=\"165.6625\" y=\"937.5589\">(volume</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"222.9887\" y=\"937.5589\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"50.9004\" x=\"227.4389\" y=\"937.5589\">mount)</text></g><!--entity sa--><g class=\"entity\" data-qualified-name=\"aws.eks.ns.deploy.pod.sa\" data-source-line=\"27\" id=\"ent0014\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"158.3457\" x=\"746.83\" y=\"898.2669\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"25.3818\" x=\"756.83\" y=\"921.262\">K8s</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"782.2118\" y=\"921.262\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"108.5137\" x=\"786.662\" y=\"921.262\">ServiceAccount</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.7822\" x=\"773.9848\" y=\"937.5589\">(IRSA</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"811.767\" y=\"937.5589\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"61.8037\" x=\"816.2172\" y=\"937.5589\">enabled)</text></g><!--entity user--><g class=\"entity\" data-qualified-name=\"user\" data-source-line=\"11\" id=\"ent0002\"><ellipse cx=\"420.0029\" cy=\"51.2969\" fill=\"#FFFFFF\" rx=\"8\" ry=\"8\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M420.0029,59.2969 L420.0029,86.2969 M407.0029,67.2969 L433.0029,67.2969 M420.0029,86.2969 L407.0029,101.2969 M420.0029,86.2969 L433.0029,101.2969\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"26.6055\" x=\"388.52\" y=\"116.542\">End</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"415.1255\" y=\"116.542\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"31.9102\" x=\"419.5757\" y=\"116.542\">User</text></g><!--entity internet--><g class=\"entity\" data-qualified-name=\"internet\" data-source-line=\"12\" id=\"ent0003\"><path d=\"M386.8518,189.7175 C389.9475,184.6834 393.8761,184.4183 397.6835,188.9081 C400.7915,182.7362 405.1358,182.8369 409.3775,187.7076 C412.2935,182.385 416.5613,181.9076 420.1413,187.0229 C423.8898,182.0985 427.7467,180.9978 431.734,186.7639 C436.7772,181.5005 441.0082,181.6492 443.8507,188.8955 C447.9083,183.728 452.5661,184.0025 456.2525,189.334 C463.5904,192.1734 465.3277,199.5295 459.0129,204.8049 C464.8175,211.2065 464.663,216.2902 456.667,220.6484 C454.7128,226.809 449.179,227.2171 445.4302,222.5027 C442.4904,230.776 438.0231,231.818 431.8992,225.4443 C430.9668,231.1605 426.2734,233.3434 421.3854,230.071 C416.7873,234.2692 411.5043,233.7293 409.5421,227.1692 C403.0223,232.0047 399.7972,229.3706 397.5899,222.6924 C393.3816,227.148 388.3143,226.6796 385.6427,220.8989 C375.9847,219.9262 372.7638,212.7027 379.3599,205.2177 C373.2429,196.2354 376.3357,190.6604 386.8518,189.7175\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"55.8359\" x=\"392.08\" y=\"208.832\">Internet</text></g><!--entity owm--><g class=\"entity\" data-qualified-name=\"owm\" data-source-line=\"42\" id=\"ent0021\"><polygon fill=\"#FFFFFF\" points=\"1412.1,1071.5169,1422.1,1061.5169,1639.9037,1061.5169,1639.9037,1114.1106,1629.9037,1124.1106,1412.1,1124.1106,1412.1,1071.5169\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1629.9037\" x2=\"1639.9037\" y1=\"1071.5169\" y2=\"1061.5169\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1412.1\" x2=\"1629.9037\" y1=\"1071.5169\" y2=\"1071.5169\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1629.9037\" x2=\"1629.9037\" y1=\"1071.5169\" y2=\"1124.1106\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"126.7041\" x=\"1444.3505\" y=\"1094.512\">OpenWeatherMap</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1571.0546\" y=\"1094.512\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"22.1484\" x=\"1575.5048\" y=\"1094.512\">API</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"187.8037\" x=\"1427.1\" y=\"1110.8089\">(api.openweathermap.org)</text></g><!--link user to internet--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0003\" data-link-type=\"dependency\" data-source-line=\"44\" id=\"lnk22\"><path d=\"M420,120.2469 C420,140.0469 420,157.5469 420,174.4369\" fill=\"none\" id=\"user-to-internet\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"420,180.4369,424,171.4369,420,175.4369,416,171.4369,420,180.4369\" style=\"stroke:#000000;stroke-width:2;\"/></g><!--link internet to alb--><g class=\"link\" data-entity-1=\"ent0003\" data-entity-2=\"ent0020\" data-link-type=\"dependency\" data-source-line=\"45\" id=\"lnk23\"><path d=\"M420,227.3769 C420,254.7569 420,294.8269 420,322.1169\" fill=\"none\" id=\"internet-to-alb\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"420,328.1169,424,319.1169,420,323.1169,416,319.1169,420,328.1169\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.5371\" x=\"421\" y=\"269.2755\">HTTPS</text></g><!--link alb to ingress--><g class=\"link\" data-entity-1=\"ent0020\" data-entity-2=\"ent0007\" data-link-type=\"dependency\" data-source-line=\"46\" id=\"lnk24\"><path d=\"M420,374.6169 C420,410.7769 420,476.2169 420,517.0969\" fill=\"none\" id=\"alb-to-ingress\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"420,523.0969,424,514.0969,420,518.0969,416,514.0969,420,523.0969\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"52.4707\" x=\"421\" y=\"416.5755\">forwards</text></g><!--link ingress to svc--><g class=\"link\" data-entity-1=\"ent0007\" data-entity-2=\"ent0008\" data-link-type=\"dependency\" data-source-line=\"47\" id=\"lnk25\"><path d=\"M420,586.4969 C420,608.6869 420,632.5169 420,654.6769\" fill=\"none\" id=\"ingress-to-svc\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"420,660.6769,424,651.6769,420,655.6769,416,651.6769,420,660.6769\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.2207\" x=\"421\" y=\"628.1655\">routes</text></g><!--link svc to app--><g class=\"link\" data-entity-1=\"ent0008\" data-entity-2=\"ent0012\" data-link-type=\"dependency\" data-source-line=\"48\" id=\"lnk26\"><path d=\"M420,723.8969 C420,769.6469 420,849.0969 420,891.8369\" fill=\"none\" id=\"svc-to-app\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"420,897.8369,424,888.8369,420,892.8369,416,888.8369,420,897.8369\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"30.9199\" x=\"421\" y=\"765.7555\">HTTP</text></g><!--link image to ecr--><g class=\"link\" data-entity-1=\"ent0011\" data-entity-2=\"ent0017\" data-link-type=\"dependency\" data-source-line=\"50\" id=\"lnk27\"><path d=\"M654.37,960.9269 C674.65,978.3969 701.36,997.9569 729,1008.5169 C766.93,1022.9969 780.02,1009.4369 820,1016.5169 C883.94,1027.8269 948.7872,1045.1625 1003.0972,1061.2525\" fill=\"none\" id=\"image-to-ecr\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"1008.85,1062.9569,1001.357,1056.5651,1004.056,1061.5366,999.0845,1064.2356,1008.85,1062.9569\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"36.8906\" x=\"891\" y=\"1028.6555\">pulled</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"927.8906\" y=\"1028.6555\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"14.7188\" x=\"931.7051\" y=\"1028.6555\">by</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"946.4238\" y=\"1028.6555\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"36.1992\" x=\"950.2383\" y=\"1028.6555\">nodes</text></g><!--link csi to spc--><g class=\"link\" data-entity-1=\"ent0013\" data-entity-2=\"ent0016\" data-link-type=\"dependency\" data-source-line=\"52\" id=\"lnk28\"><path d=\"M221.85,951.1769 C221.66,982.4169 221.3765,1028.917 221.1865,1060.167\" fill=\"none\" id=\"csi-to-spc\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"221.15,1066.1669,225.2046,1057.1914,221.1804,1061.167,217.2048,1057.1427,221.15,1066.1669\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"27.4922\" x=\"223\" y=\"1028.6555\">uses</text></g><!--link spc to secrets--><g class=\"link\" data-entity-1=\"ent0016\" data-entity-2=\"ent0018\" data-link-type=\"dependency\" data-source-line=\"53\" id=\"lnk29\"><path d=\"M221,1119.5169 C221,1147.3469 221,1186.0669 221,1218.1969\" fill=\"none\" id=\"spc-to-secrets\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"221,1224.1969,225,1215.1969,221,1219.1969,217,1215.1969,221,1224.1969\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"30.5156\" x=\"222\" y=\"1191.7455\">fetch</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"252.5156\" y=\"1191.7455\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"37.2539\" x=\"256.3301\" y=\"1191.7455\">secret</text></g><!--link sa to iam--><g class=\"link\" data-entity-1=\"ent0014\" data-entity-2=\"ent0019\" data-link-type=\"dependency\" data-source-line=\"54\" id=\"lnk30\"><path d=\"M905.41,928.3869 C995.76,936.3669 1139.62,964.5969 1208,1061.5169 C1236.21,1101.4969 1234.48,1130.4669 1208,1171.6069 C1183.36,1209.8869 1144.0495,1230.5138 1102.8495,1243.5738\" fill=\"none\" id=\"sa-to-iam\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1097.13,1245.3869,1106.918,1246.4803,1101.8963,1243.876,1104.5006,1238.8543,1097.13,1245.3869\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"46.5352\" x=\"1229\" y=\"1097.4455\">assume</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1275.5352\" y=\"1097.4455\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"22.9922\" x=\"1279.3496\" y=\"1097.4455\">role</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1302.3418\" y=\"1097.4455\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"37.0664\" x=\"1306.1563\" y=\"1097.4455\">(IRSA)</text></g><!--link spc to iam--><g class=\"link\" data-entity-1=\"ent0016\" data-entity-2=\"ent0019\" data-link-type=\"dependency\" data-source-line=\"55\" id=\"lnk31\"><path d=\"M245.49,1119.5569 C263.94,1137.2469 290.81,1159.6369 319,1171.6069 C424.92,1216.5869 749.7858,1244.9121 910.9658,1256.6221\" fill=\"none\" id=\"spc-to-iam\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"916.95,1257.0569,908.2635,1252.4152,911.9631,1256.6946,907.6838,1260.3942,916.95,1257.0569\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"27.2695\" x=\"387\" y=\"1191.7455\">auth</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"414.2695\" y=\"1191.7455\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"17.7891\" x=\"418.084\" y=\"1191.7455\">via</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"435.873\" y=\"1191.7455\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"27.7031\" x=\"439.6875\" y=\"1191.7455\">IRSA</text></g><!--link csi to k8ssecret--><g class=\"link\" data-entity-1=\"ent0013\" data-entity-2=\"ent0015\" data-link-type=\"dependency\" data-source-line=\"56\" id=\"lnk32\"><path d=\"M249.25,951.1469 C272.97,973.0869 308.54,1005.2269 341,1031.5169 C353.5,1041.6369 362.6295,1048.6315 375.4495,1058.0215\" fill=\"none\" id=\"csi-to-k8ssecret\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"380.29,1061.5669,375.3929,1053.0218,376.2563,1058.6124,370.6657,1059.4758,380.29,1061.5669\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"70.5469\" x=\"342\" y=\"1028.6555\">sync/mount</text></g><!--link app to k8ssecret--><g class=\"link\" data-entity-1=\"ent0012\" data-entity-2=\"ent0015\" data-link-type=\"dependency\" data-source-line=\"57\" id=\"lnk33\"><path d=\"M420.07,951.2569 C420.17,972.7169 420.42,1004.1069 421,1031.5169 C421.21,1041.3569 421.3414,1046.1002 421.6614,1055.7602\" fill=\"none\" id=\"app-to-k8ssecret\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"421.86,1061.7569,425.5598,1052.6294,421.6945,1056.7596,417.5642,1052.8942,421.86,1061.7569\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"33.5391\" x=\"422\" y=\"1028.6555\">reads</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"455.5391\" y=\"1028.6555\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"18.9844\" x=\"459.3535\" y=\"1028.6555\">API</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"478.3379\" y=\"1028.6555\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"21.4336\" x=\"482.1523\" y=\"1028.6555\">key</text></g><!--link app to owm--><g class=\"link\" data-entity-1=\"ent0012\" data-entity-2=\"ent0021\" data-link-type=\"dependency\" data-source-line=\"59\" id=\"lnk34\"><path d=\"M437.83,951.1969 C453.28,970.9869 477.58,996.8969 506,1008.5169 C551.61,1027.1669 1345.4,1003.7469 1393,1016.5169 C1426.06,1025.3769 1454.5753,1041.1023 1479.6953,1057.8223\" fill=\"none\" id=\"app-to-owm\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1484.69,1061.1469,1479.4142,1052.8302,1480.5277,1058.3764,1474.9815,1059.4899,1484.69,1061.1469\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.5371\" x=\"1433\" y=\"1028.6555\">HTTPS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1471.5371\" y=\"1028.6555\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"52.1309\" x=\"1475.3516\" y=\"1028.6555\">requests</text></g></g></svg>",
  "architecture_description": "## High-level architecture (deployment)\n\n### Runtime / compute\n- **Python Weather Web App**: A containerized **Python** application using **Flask 3.0.2** (serves HTML via **Jinja2**) and **Waitress 3.0.0** as the WSGI server.\n- Deployed on **Amazon EKS** in Kubernetes **namespace `prod`** as a **Deployment (replicas=2)**.\n\n### Traffic ingress\n- External users access the app over the **Internet** via an **AWS Application Load Balancer (ALB)**.\n- The ALB is provisioned/managed by the **AWS Load Balancer Controller** based on a Kubernetes **Ingress** (`ingressClass: alb`).\n- The Ingress routes traffic to a Kubernetes **Service (NodePort)**, which forwards to the Flask pods.\n\n### Container image supply\n- The application image is stored in **Amazon ECR**.\n- EKS worker nodes **pull** the container image from ECR to run the pods.\n\n### Secrets management (API key)\n- The app requires an OpenWeatherMap API key stored in **AWS Secrets Manager** at **`/python-weather-app/api-key`**.\n- In-cluster, the **Secrets Store CSI Driver** + **AWS provider** uses a **SecretProviderClass** to fetch the secret from Secrets Manager.\n- Access to Secrets Manager is granted via **IRSA (IAM Roles for Service Accounts)**: the pod’s Kubernetes **ServiceAccount** assumes an **AWS IAM role**.\n- The secret is **mounted/synced** into the pod (and represented as a Kubernetes Secret in the diagram), and the Flask app reads it at runtime.\n\n### External dependency\n- The Flask app calls the **OpenWeatherMap API** (`https://api.openweathermap.org`) over **HTTPS** using the `requests` library.\n\n### Key relationships (end-to-end)\n1. End User → Internet → **ALB** → **K8s Ingress (alb)** → **Service** → **Flask pods**\n2. Pods pull image from **ECR**\n3. Pods obtain API key via **CSI Driver + SecretProviderClass** → **Secrets Manager**, authorized by **IRSA/IAM**\n4. App → **OpenWeatherMap API** over HTTPS"
}