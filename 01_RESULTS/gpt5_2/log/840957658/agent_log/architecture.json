{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\nskinparam shadowing false\nskinparam componentStyle rectangle\nskinparam wrapWidth 220\nskinparam maxMessageSize 120\n\ntitle High-level Deployment Architecture (Spring Boot + CI/CD)\n\nactor \"End User\" as user\nactor \"Developer\" as dev\n\nnode \"Client Device\" as client {\n  artifact \"Web Browser\" as browser\n}\n\ncloud \"Container Registry\\n(Docker Registry)\" as registry\n\nnode \"CI/CD\" as cicd {\n  node \"Jenkins Agent\" as jenkins {\n    artifact \"Pipeline\\n(build/test/sonar/docker push/trivy)\" as pipeline\n  }\n  node \"SonarQube Server\" as sonar\n  node \"Trivy Scanner\" as trivy\n}\n\nnode \"Runtime Environment\\n(Docker host / Kubernetes)\" as runtime {\n  node \"Spring Boot App Container\" as appc {\n    artifact \"helloapp-1.0.0.jar\\nJava 17 + Spring Boot 3.0.4\\nSpring MVC + Thymeleaf\\nPort 8080\" as app\n  }\n}\n\ndatabase \"Relational Database\" as db {\n  artifact \"Option A: Embedded H2\\n(runtime/in-memory)\" as h2\n  artifact \"Option B: External PostgreSQL\\n(via JDBC driver)\" as pg\n}\n\nuser --> browser : HTTP/HTTPS\nbrowser --> appc : HTTP :8080\\n(HTML via Thymeleaf)\napp --> db : JDBC\\n(Spring Data JDBC)\n\n' CI/CD flows\n\ndev --> jenkins : Git push / PR\njenkins --> sonar : Code analysis\njenkins --> trivy : Image scan\njenkins --> registry : Push container image\nregistry --> runtime : Pull image\n\n@enduml",
  "svg_diagram": "<?plantuml 1.2026.2beta3?><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"1149px\" preserveAspectRatio=\"none\" style=\"width:1107px;height:1149px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 1107 1149\" width=\"1107px\" zoomAndPan=\"magnify\"><title>High-level Deployment Architecture (Spring Boot + CI/CD)</title><defs/><g><g class=\"title\" data-source-line=\"9\"><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"458.459\" x=\"317.4\" y=\"22.9951\">High-level Deployment Architecture (Spring Boot + CI/CD)</text></g><!--cluster client--><g class=\"cluster\" data-qualified-name=\"client\" data-source-line=\"14\" id=\"ent0004\"><polygon fill=\"#FFFFFF\" points=\"342,459.7269,352,449.7269,521,449.7269,521,535.0269,511,545.0269,342,545.0269,342,459.7269\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"511\" x2=\"521\" y1=\"459.7269\" y2=\"449.7269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"342\" x2=\"511\" y1=\"459.7269\" y2=\"459.7269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"511\" x2=\"511\" y1=\"459.7269\" y2=\"545.0269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"103.7354\" x=\"375.6323\" y=\"475.722\">Client Device</text></g><!--cluster cicd--><g class=\"cluster\" data-qualified-name=\"cicd\" data-source-line=\"20\" id=\"ent0007\"><polygon fill=\"#FFFFFF\" points=\"545,190.8369,555,180.8369,916,180.8369,916,538.5269,906,548.5269,545,548.5269,545,190.8369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"906\" x2=\"916\" y1=\"190.8369\" y2=\"180.8369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"545\" x2=\"906\" y1=\"190.8369\" y2=\"190.8369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"906\" x2=\"906\" y1=\"190.8369\" y2=\"548.5269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"42.4922\" x=\"705.2539\" y=\"206.832\">CI/CD</text></g><!--cluster jenkins--><g class=\"cluster\" data-qualified-name=\"cicd.jenkins\" data-source-line=\"21\" id=\"ent0008\"><polygon fill=\"#FFFFFF\" points=\"577,246.8369,587,236.8369,842,236.8369,842,370.7269,832,380.7269,577,380.7269,577,246.8369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"832\" x2=\"842\" y1=\"246.8369\" y2=\"236.8369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"577\" x2=\"832\" y1=\"246.8369\" y2=\"246.8369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"832\" x2=\"832\" y1=\"246.8369\" y2=\"380.7269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"108.9648\" x=\"651.0176\" y=\"262.832\">Jenkins Agent</text></g><!--cluster runtime--><g class=\"cluster\" data-qualified-name=\"runtime\" data-source-line=\"28\" id=\"ent0012\"><polygon fill=\"#FFFFFF\" points=\"367,647.6769,377,637.6769,747,637.6769,747,907.8669,737,917.8669,367,917.8669,367,647.6769\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"737\" x2=\"747\" y1=\"647.6769\" y2=\"637.6769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"367\" x2=\"737\" y1=\"647.6769\" y2=\"647.6769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"737\" x2=\"737\" y1=\"647.6769\" y2=\"917.8669\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"171.8486\" x=\"467.0757\" y=\"663.672\">Runtime Environment</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"213.6094\" x=\"446.1953\" y=\"679.9689\">(Docker host / Kubernetes)</text></g><!--cluster appc--><g class=\"cluster\" data-qualified-name=\"runtime.appc\" data-source-line=\"29\" id=\"ent0013\"><polygon fill=\"#FFFFFF\" points=\"407,727.6769,417,717.6769,699,717.6769,699,867.8669,689,877.8669,407,877.8669,407,727.6769\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"689\" x2=\"699\" y1=\"727.6769\" y2=\"717.6769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"407\" x2=\"689\" y1=\"727.6769\" y2=\"727.6769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"689\" x2=\"689\" y1=\"727.6769\" y2=\"877.8669\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"211.0596\" x=\"443.4702\" y=\"743.672\">Spring Boot App Container</text></g><!--cluster db--><g class=\"cluster\" data-qualified-name=\"db\" data-source-line=\"34\" id=\"ent0015\"><path d=\"M6,1004.8669 C6,994.8669 278.5,994.8669 278.5,994.8669 C278.5,994.8669 551,994.8669 551,1004.8669 L551,1122.4569 C551,1132.4569 278.5,1132.4569 278.5,1132.4569 C278.5,1132.4569 6,1132.4569 6,1122.4569 L6,1004.8669\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M6,1004.8669 C6,1014.8669 278.5,1014.8669 278.5,1014.8669 C278.5,1014.8669 551,1014.8669 551,1004.8669\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"159.2227\" x=\"198.8887\" y=\"1029.862\">Relational Database</text></g><!--entity browser--><g class=\"entity\" data-qualified-name=\"client.browser\" data-source-line=\"15\" id=\"ent0005\"><rect fill=\"#FFFFFF\" height=\"39.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"122.832\" x=\"382.58\" y=\"489.7269\"/><polygon fill=\"#FFFFFF\" points=\"488.412,494.7269,488.412,508.7269,500.412,508.7269,500.412,500.7269,494.412,494.7269,488.412,494.7269\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"494.412\" x2=\"494.412\" y1=\"494.7269\" y2=\"500.7269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"500.412\" x2=\"494.412\" y1=\"500.7269\" y2=\"500.7269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"31.3428\" x=\"392.58\" y=\"515.722\">Web</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"423.9228\" y=\"515.722\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"57.0391\" x=\"428.373\" y=\"515.722\">Browser</text></g><!--entity sonar--><g class=\"entity\" data-qualified-name=\"cicd.sonar\" data-source-line=\"24\" id=\"ent0010\"><polygon fill=\"#FFFFFF\" points=\"560.79,496.2269,570.79,486.2269,729.2031,486.2269,729.2031,522.5238,719.2031,532.5238,560.79,532.5238,560.79,496.2269\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"719.2031\" x2=\"729.2031\" y1=\"496.2269\" y2=\"486.2269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"560.79\" x2=\"719.2031\" y1=\"496.2269\" y2=\"496.2269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"719.2031\" x2=\"719.2031\" y1=\"496.2269\" y2=\"532.5238\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"78.0527\" x=\"575.79\" y=\"519.222\">SonarQube</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"653.8427\" y=\"519.222\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"45.9102\" x=\"658.2929\" y=\"519.222\">Server</text></g><!--entity trivy--><g class=\"entity\" data-qualified-name=\"cicd.trivy\" data-source-line=\"25\" id=\"ent0011\"><polygon fill=\"#FFFFFF\" points=\"763.75,496.2269,773.75,486.2269,900.2461,486.2269,900.2461,522.5238,890.2461,532.5238,763.75,532.5238,763.75,496.2269\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"890.2461\" x2=\"900.2461\" y1=\"496.2269\" y2=\"486.2269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"763.75\" x2=\"890.2461\" y1=\"496.2269\" y2=\"496.2269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"890.2461\" x2=\"890.2461\" y1=\"496.2269\" y2=\"532.5238\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"34.7676\" x=\"778.75\" y=\"519.222\">Trivy</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"813.5176\" y=\"519.222\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"57.2783\" x=\"817.9678\" y=\"519.222\">Scanner</text></g><!--entity pipeline--><g class=\"entity\" data-qualified-name=\"cicd.jenkins.pipeline\" data-source-line=\"22\" id=\"ent0009\"><rect fill=\"#FFFFFF\" height=\"71.8906\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"197.6172\" x=\"601.19\" y=\"284.8369\"/><polygon fill=\"#FFFFFF\" points=\"781.8072,289.8369,781.8072,303.8369,793.8072,303.8369,793.8072,295.8369,787.8072,289.8369,781.8072,289.8369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"787.8072\" x2=\"787.8072\" y1=\"289.8369\" y2=\"295.8369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"793.8072\" x2=\"787.8072\" y1=\"295.8369\" y2=\"295.8369\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"55.0977\" x=\"667.4498\" y=\"310.832\">Pipeline</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"167.6172\" x=\"611.19\" y=\"327.1289\">(build/test/sonar/docker</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"75.8105\" x=\"657.0933\" y=\"343.4257\">push/trivy)</text></g><!--entity app--><g class=\"entity\" data-qualified-name=\"runtime.appc.app\" data-source-line=\"30\" id=\"ent0014\"><rect fill=\"#FFFFFF\" height=\"88.1875\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"224.3936\" x=\"430.8\" y=\"765.6769\"/><polygon fill=\"#FFFFFF\" points=\"638.1936,770.6769,638.1936,784.6769,650.1936,784.6769,650.1936,776.6769,644.1936,770.6769,638.1936,770.6769\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"644.1936\" x2=\"644.1936\" y1=\"770.6769\" y2=\"776.6769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"650.1936\" x2=\"644.1936\" y1=\"776.6769\" y2=\"776.6769\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"123.5322\" x=\"476.2307\" y=\"791.672\">helloapp-1.0.0.jar</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"29.5723\" x=\"440.8\" y=\"807.9689\">Java 17 + Spring Boot 3.0.4</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"170.0\" x=\"450.1652\" y=\"824.2657\">Spring MVC + Thymeleaf</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"70.0\" x=\"503.8308\" y=\"840.5626\">Port 8080</text></g></g></svg>",
  "architecture_description": "## High-level architecture\n\n### Runtime (application)\n- **Spring Boot web application (Java 17, Spring Boot 3.0.4)** packaged as `helloapp-1.0.0.jar` and deployed as a **Docker container** exposing **port 8080**.\n- Uses **Spring MVC** to serve HTTP endpoints and **Thymeleaf** to render server-side HTML (HTML/CSS templates).\n- Data access via **Spring Data JDBC**.\n\n### Data layer (relational database)\n- The codebase includes both:\n  - **H2** (runtime) for embedded/in-memory/local usage.\n  - **PostgreSQL JDBC driver** indicating support for an **external PostgreSQL** database in production.\n- The application connects to the database over **JDBC**.\n\n### CI/CD and supply chain\n- **Jenkins pipeline** (from `Jenkinsfile`) orchestrates:\n  - Build/test (Maven wrapper / Maven build)\n  - **SonarQube** code quality analysis\n  - Docker image build and **push to a container registry**\n  - **Trivy** container image vulnerability scanning\n- The **runtime environment** (Docker host or Kubernetes) **pulls the image** from the registry for deployment.\n\n### Primary flows\n- **End user → Browser → Spring Boot container** over HTTP/HTTPS (port 8080).\n- **Spring Boot container → Database** over JDBC.\n- **Developer → Jenkins → (SonarQube/Trivy/Registry) → Runtime** for build, scan, publish, and deploy."
}