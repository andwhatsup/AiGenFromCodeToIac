{
  "files": [
    {
      "name": "versions.tf",
      "content": "terraform {\n  required_version = \">= 1.5.0\"\n\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 5.0\"\n    }\n  }\n}\n"
    },
    {
      "name": "providers.tf",
      "content": "provider \"aws\" {\n  region = var.aws_region\n\n  default_tags {\n    tags = {\n      Project     = var.project_name\n      Environment = var.environment\n      ManagedBy   = \"terraform\"\n    }\n  }\n}\n\n# CloudFront requires ACM certificates in us-east-1\nprovider \"aws\" {\n  alias  = \"use1\"\n  region = \"us-east-1\"\n\n  default_tags {\n    tags = {\n      Project     = var.project_name\n      Environment = var.environment\n      ManagedBy   = \"terraform\"\n    }\n  }\n}\n"
    },
    {
      "name": "variables.tf",
      "content": "variable \"project_name\" {\n  description = \"Project/name prefix used for resource naming.\"\n  type        = string\n  default     = \"react-spa\"\n}\n\nvariable \"environment\" {\n  description = \"Environment name (e.g., dev, staging, prod).\"\n  type        = string\n  default     = \"dev\"\n}\n\nvariable \"aws_region\" {\n  description = \"AWS region for primary resources (S3, WAF, etc.).\"\n  type        = string\n  default     = \"eu-west-1\"\n}\n\nvariable \"domain_name\" {\n  description = \"Optional custom domain for the SPA (e.g., app.example.com). Leave empty to use the CloudFront domain.\"\n  type        = string\n  default     = \"\"\n}\n\nvariable \"hosted_zone_id\" {\n  description = \"Optional Route53 hosted zone ID for domain_name. Required if domain_name is set.\"\n  type        = string\n  default     = \"\"\n}\n\nvariable \"create_route53_records\" {\n  description = \"Whether to create Route53 alias records for domain_name.\"\n  type        = bool\n  default     = false\n}\n\nvariable \"enable_waf\" {\n  description = \"Attach an AWS WAFv2 Web ACL (managed rules) to CloudFront.\"\n  type        = bool\n  default     = true\n}\n\nvariable \"enable_cloudfront_logs\" {\n  description = \"Enable CloudFront access logs to a dedicated S3 bucket.\"\n  type        = bool\n  default     = false\n}\n\nvariable \"cloudfront_price_class\" {\n  description = \"CloudFront price class.\"\n  type        = string\n  default     = \"PriceClass_100\"\n  validation {\n    condition     = contains([\"PriceClass_100\", \"PriceClass_200\", \"PriceClass_All\"], var.cloudfront_price_class)\n    error_message = \"cloudfront_price_class must be one of PriceClass_100, PriceClass_200, PriceClass_All.\"\n  }\n}\n\nvariable \"react_app_env\" {\n  description = \"Map of build-time REACT_APP_* environment variables for CodeBuild (optional).\"\n  type        = map(string)\n  default     = {}\n}\n\nvariable \"enable_cicd\" {\n  description = \"Create CodeBuild project (and optional CodePipeline skeleton).\"\n  type        = bool\n  default     = false\n}\n\nvariable \"github_owner\" {\n  description = \"GitHub owner/org for CodePipeline source (only used if enable_cicd=true and enable_codepipeline=true).\"\n  type        = string\n  default     = \"\"\n}\n\nvariable \"github_repo\" {\n  description = \"GitHub repo name for CodePipeline source (only used if enable_cicd=true and enable_codepipeline=true).\"\n  type        = string\n  default     = \"\"\n}\n\nvariable \"github_branch\" {\n  description = \"GitHub branch for CodePipeline source.\"\n  type        = string\n  default     = \"main\"\n}\n\nvariable \"enable_codepipeline\" {\n  description = \"Create a CodePipeline (requires a GitHub token in Secrets Manager).\"\n  type        = bool\n  default     = false\n}\n\nvariable \"github_token_secret_arn\" {\n  description = \"ARN of a Secrets Manager secret containing a GitHub OAuth token (plaintext) for CodePipeline.\"\n  type        = string\n  default     = \"\"\n}\n"
    },
    {
      "name": "locals.tf",
      "content": "locals {\n  name_prefix = \"${var.project_name}-${var.environment}\"\n\n  use_custom_domain = length(trimspace(var.domain_name)) > 0\n\n  # S3 bucket names must be globally unique; we add account id.\n  # (Computed in data sources in main.tf)\n}\n"
    },
    {
      "name": "main.tf",
      "content": "data \"aws_caller_identity\" \"current\" {}\n\ndata \"aws_partition\" \"current\" {}\n\ndata \"aws_region\" \"current\" {}\n\n############################################\n# S3 bucket for SPA assets (private)\n############################################\nresource \"aws_s3_bucket\" \"spa\" {\n  bucket        = \"${local.name_prefix}-spa-${data.aws_caller_identity.current.account_id}\"\n  force_destroy = false\n}\n\nresource \"aws_s3_bucket_public_access_block\" \"spa\" {\n  bucket                  = aws_s3_bucket.spa.id\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\nresource \"aws_s3_bucket_versioning\" \"spa\" {\n  bucket = aws_s3_bucket.spa.id\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"spa\" {\n  bucket = aws_s3_bucket.spa.id\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_ownership_controls\" \"spa\" {\n  bucket = aws_s3_bucket.spa.id\n  rule {\n    object_ownership = \"BucketOwnerEnforced\"\n  }\n}\n\n############################################\n# Optional logs bucket (CloudFront)\n############################################\nresource \"aws_s3_bucket\" \"logs\" {\n  count         = var.enable_cloudfront_logs ? 1 : 0\n  bucket        = \"${local.name_prefix}-logs-${data.aws_caller_identity.current.account_id}\"\n  force_destroy = false\n}\n\nresource \"aws_s3_bucket_public_access_block\" \"logs\" {\n  count                   = var.enable_cloudfront_logs ? 1 : 0\n  bucket                  = aws_s3_bucket.logs[0].id\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"logs\" {\n  count  = var.enable_cloudfront_logs ? 1 : 0\n  bucket = aws_s3_bucket.logs[0].id\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n\nresource \"aws_s3_bucket_ownership_controls\" \"logs\" {\n  count  = var.enable_cloudfront_logs ? 1 : 0\n  bucket = aws_s3_bucket.logs[0].id\n  rule {\n    object_ownership = \"BucketOwnerEnforced\"\n  }\n}\n\n############################################\n# CloudFront Origin Access Control (OAC)\n############################################\nresource \"aws_cloudfront_origin_access_control\" \"spa\" {\n  name                              = \"${local.name_prefix}-oac\"\n  description                       = \"OAC for private S3 origin\"\n  origin_access_control_origin_type = \"s3\"\n  signing_behavior                  = \"always\"\n  signing_protocol                  = \"sigv4\"\n}\n\n############################################\n# ACM certificate (optional, us-east-1)\n############################################\nresource \"aws_acm_certificate\" \"this\" {\n  provider          = aws.use1\n  count             = local.use_custom_domain ? 1 : 0\n  domain_name       = var.domain_name\n  validation_method = \"DNS\"\n\n  lifecycle {\n    create_before_destroy = true\n  }\n}\n\nresource \"aws_route53_record\" \"cert_validation\" {\n  for_each = local.use_custom_domain && var.create_route53_records ? {\n    for dvo in aws_acm_certificate.this[0].domain_validation_options : dvo.domain_name => {\n      name   = dvo.resource_record_name\n      type   = dvo.resource_record_type\n      record = dvo.resource_record_value\n    }\n  } : {}\n\n  zone_id = var.hosted_zone_id\n  name    = each.value.name\n  type    = each.value.type\n  records = [each.value.record]\n  ttl     = 60\n}\n\nresource \"aws_acm_certificate_validation\" \"this\" {\n  provider        = aws.use1\n  count           = local.use_custom_domain && var.create_route53_records ? 1 : 0\n  certificate_arn = aws_acm_certificate.this[0].arn\n\n  validation_record_fqdns = [for r in aws_route53_record.cert_validation : r.fqdn]\n}\n\n############################################\n# WAFv2 (CloudFront scope) - optional\n############################################\nresource \"aws_wafv2_web_acl\" \"this\" {\n  count = var.enable_waf ? 1 : 0\n\n  name  = \"${local.name_prefix}-waf\"\n  scope = \"CLOUDFRONT\"\n\n  default_action {\n    allow {}\n  }\n\n  rule {\n    name     = \"AWSManagedRulesCommonRuleSet\"\n    priority = 1\n\n    override_action {\n      none {}\n    }\n\n    statement {\n      managed_rule_group_statement {\n        name        = \"AWSManagedRulesCommonRuleSet\"\n        vendor_name = \"AWS\"\n      }\n    }\n\n    visibility_config {\n      cloudwatch_metrics_enabled = true\n      metric_name                = \"AWSManagedRulesCommonRuleSet\"\n      sampled_requests_enabled   = true\n    }\n  }\n\n  visibility_config {\n    cloudwatch_metrics_enabled = true\n    metric_name                = \"${local.name_prefix}-waf\"\n    sampled_requests_enabled   = true\n  }\n}\n\n############################################\n# CloudFront distribution\n############################################\nresource \"aws_cloudfront_distribution\" \"spa\" {\n  enabled             = true\n  is_ipv6_enabled     = true\n  comment             = \"${local.name_prefix} SPA\"\n  default_root_object = \"index.html\"\n  price_class         = var.cloudfront_price_class\n\n  aliases = local.use_custom_domain ? [var.domain_name] : null\n\n  origin {\n    domain_name              = aws_s3_bucket.spa.bucket_regional_domain_name\n    origin_id                = \"s3-spa-origin\"\n    origin_access_control_id = aws_cloudfront_origin_access_control.spa.id\n  }\n\n  default_cache_behavior {\n    target_origin_id       = \"s3-spa-origin\"\n    viewer_protocol_policy = \"redirect-to-https\"\n\n    allowed_methods = [\"GET\", \"HEAD\", \"OPTIONS\"]\n    cached_methods  = [\"GET\", \"HEAD\", \"OPTIONS\"]\n\n    compress = true\n\n    # Use AWS managed policies for sane defaults\n    cache_policy_id          = data.aws_cloudfront_cache_policy.caching_optimized.id\n    origin_request_policy_id = data.aws_cloudfront_origin_request_policy.cors_s3origin.id\n\n    response_headers_policy_id = aws_cloudfront_response_headers_policy.security_headers.id\n  }\n\n  # SPA routing: return index.html for 403/404\n  custom_error_response {\n    error_code            = 403\n    response_code         = 200\n    response_page_path    = \"/index.html\"\n    error_caching_min_ttl = 0\n  }\n\n  custom_error_response {\n    error_code            = 404\n    response_code         = 200\n    response_page_path    = \"/index.html\"\n    error_caching_min_ttl = 0\n  }\n\n  restrictions {\n    geo_restriction {\n      restriction_type = \"none\"\n    }\n  }\n\n  viewer_certificate {\n    cloudfront_default_certificate = local.use_custom_domain ? false : true\n    acm_certificate_arn            = local.use_custom_domain ? aws_acm_certificate.this[0].arn : null\n    ssl_support_method             = local.use_custom_domain ? \"sni-only\" : null\n    minimum_protocol_version       = local.use_custom_domain ? \"TLSv1.2_2021\" : \"TLSv1.2_2021\"\n  }\n\n  web_acl_id = var.enable_waf ? aws_wafv2_web_acl.this[0].arn : null\n\n  dynamic \"logging_config\" {\n    for_each = var.enable_cloudfront_logs ? [1] : []\n    content {\n      bucket          = aws_s3_bucket.logs[0].bucket_domain_name\n      include_cookies = false\n      prefix          = \"cloudfront/\"\n    }\n  }\n\n  depends_on = [aws_s3_bucket_public_access_block.spa]\n}\n\ndata \"aws_cloudfront_cache_policy\" \"caching_optimized\" {\n  name = \"Managed-CachingOptimized\"\n}\n\ndata \"aws_cloudfront_origin_request_policy\" \"cors_s3origin\" {\n  name = \"Managed-CORS-S3Origin\"\n}\n\n############################################\n# Security headers (basic)\n############################################\nresource \"aws_cloudfront_response_headers_policy\" \"security_headers\" {\n  name = \"${local.name_prefix}-security-headers\"\n\n  security_headers_config {\n    content_type_options {\n      override = true\n    }\n\n    frame_options {\n      frame_option = \"DENY\"\n      override     = true\n    }\n\n    referrer_policy {\n      referrer_policy = \"strict-origin-when-cross-origin\"\n      override        = true\n    }\n\n    strict_transport_security {\n      access_control_max_age_sec = 63072000\n      include_subdomains         = true\n      preload                    = true\n      override                   = true\n    }\n\n    xss_protection {\n      protection = true\n      mode_block = true\n      override   = true\n    }\n  }\n}\n\n############################################\n# S3 bucket policy: allow CloudFront OAC only\n############################################\ndata \"aws_iam_policy_document\" \"spa_bucket\" {\n  statement {\n    sid = \"AllowCloudFrontServicePrincipalReadOnly\"\n\n    actions = [\"s3:GetObject\"]\n\n    resources = [\n      \"${aws_s3_bucket.spa.arn}/*\"\n    ]\n\n    principals {\n      type        = \"Service\"\n      identifiers = [\"cloudfront.amazonaws.com\"]\n    }\n\n    condition {\n      test     = \"StringEquals\"\n      variable = \"AWS:SourceArn\"\n      values   = [aws_cloudfront_distribution.spa.arn]\n    }\n  }\n}\n\nresource \"aws_s3_bucket_policy\" \"spa\" {\n  bucket = aws_s3_bucket.spa.id\n  policy = data.aws_iam_policy_document.spa_bucket.json\n}\n\n############################################\n# Optional Route53 alias records\n############################################\nresource \"aws_route53_record\" \"app_a\" {\n  count   = local.use_custom_domain && var.create_route53_records ? 1 : 0\n  zone_id = var.hosted_zone_id\n  name    = var.domain_name\n  type    = \"A\"\n\n  alias {\n    name                   = aws_cloudfront_distribution.spa.domain_name\n    zone_id                = aws_cloudfront_distribution.spa.hosted_zone_id\n    evaluate_target_health = false\n  }\n}\n\nresource \"aws_route53_record\" \"app_aaaa\" {\n  count   = local.use_custom_domain && var.create_route53_records ? 1 : 0\n  zone_id = var.hosted_zone_id\n  name    = var.domain_name\n  type    = \"AAAA\"\n\n  alias {\n    name                   = aws_cloudfront_distribution.spa.domain_name\n    zone_id                = aws_cloudfront_distribution.spa.hosted_zone_id\n    evaluate_target_health = false\n  }\n}\n"
    },
    {
      "name": "cicd.tf",
      "content": "############################################\n# Optional CI/CD (CodeBuild + optional CodePipeline)\n#\n# Note: CodePipeline GitHub (v1) source requires a GitHub OAuth token.\n# This configuration is provided as an optional skeleton.\n############################################\n\nresource \"aws_s3_bucket\" \"codepipeline_artifacts\" {\n  count         = var.enable_cicd ? 1 : 0\n  bucket        = \"${local.name_prefix}-cicd-artifacts-${data.aws_caller_identity.current.account_id}\"\n  force_destroy = false\n}\n\nresource \"aws_s3_bucket_public_access_block\" \"codepipeline_artifacts\" {\n  count                   = var.enable_cicd ? 1 : 0\n  bucket                  = aws_s3_bucket.codepipeline_artifacts[0].id\n  block_public_acls       = true\n  block_public_policy     = true\n  ignore_public_acls      = true\n  restrict_public_buckets = true\n}\n\nresource \"aws_s3_bucket_server_side_encryption_configuration\" \"codepipeline_artifacts\" {\n  count  = var.enable_cicd ? 1 : 0\n  bucket = aws_s3_bucket.codepipeline_artifacts[0].id\n  rule {\n    apply_server_side_encryption_by_default {\n      sse_algorithm = \"AES256\"\n    }\n  }\n}\n\nresource \"aws_iam_role\" \"codebuild\" {\n  count = var.enable_cicd ? 1 : 0\n  name  = \"${local.name_prefix}-codebuild-role\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Effect = \"Allow\"\n        Principal = {\n          Service = \"codebuild.amazonaws.com\"\n        }\n        Action = \"sts:AssumeRole\"\n      }\n    ]\n  })\n}\n\nresource \"aws_iam_role_policy\" \"codebuild\" {\n  count = var.enable_cicd ? 1 : 0\n  name  = \"${local.name_prefix}-codebuild-policy\"\n  role  = aws_iam_role.codebuild[0].id\n\n  policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Effect = \"Allow\"\n        Action = [\n          \"logs:CreateLogGroup\",\n          \"logs:CreateLogStream\",\n          \"logs:PutLogEvents\"\n        ]\n        Resource = \"*\"\n      },\n      {\n        Effect = \"Allow\"\n        Action = [\n          \"s3:PutObject\",\n          \"s3:PutObjectAcl\",\n          \"s3:GetObject\",\n          \"s3:ListBucket\",\n          \"s3:DeleteObject\"\n        ]\n        Resource = [\n          aws_s3_bucket.spa.arn,\n          \"${aws_s3_bucket.spa.arn}/*\",\n          aws_s3_bucket.codepipeline_artifacts[0].arn,\n          \"${aws_s3_bucket.codepipeline_artifacts[0].arn}/*\"\n        ]\n      },\n      {\n        Effect = \"Allow\"\n        Action = [\n          \"cloudfront:CreateInvalidation\"\n        ]\n        Resource = \"*\"\n      }\n    ]\n  })\n}\n\nresource \"aws_codebuild_project\" \"spa\" {\n  count        = var.enable_cicd ? 1 : 0\n  name         = \"${local.name_prefix}-spa-build\"\n  description  = \"Build CRA app and deploy to S3 + invalidate CloudFront\"\n  service_role = aws_iam_role.codebuild[0].arn\n\n  artifacts {\n    type = \"CODEPIPELINE\"\n  }\n\n  environment {\n    compute_type                = \"BUILD_GENERAL1_SMALL\"\n    image                       = \"aws/codebuild/standard:7.0\"\n    type                        = \"LINUX_CONTAINER\"\n    image_pull_credentials_type = \"CODEBUILD\"\n\n    dynamic \"environment_variable\" {\n      for_each = var.react_app_env\n      content {\n        name  = environment_variable.key\n        value = environment_variable.value\n        type  = \"PLAINTEXT\"\n      }\n    }\n\n    environment_variable {\n      name  = \"S3_BUCKET\"\n      value = aws_s3_bucket.spa.bucket\n    }\n\n    environment_variable {\n      name  = \"CLOUDFRONT_DISTRIBUTION_ID\"\n      value = aws_cloudfront_distribution.spa.id\n    }\n  }\n\n  source {\n    type      = \"CODEPIPELINE\"\n    buildspec = <<-YAML\n      version: 0.2\n      phases:\n        install:\n          runtime-versions:\n            nodejs: 18\n          commands:\n            - npm ci\n        build:\n          commands:\n            - npm run build\n        post_build:\n          commands:\n            - aws s3 sync build s3://$S3_BUCKET/ --delete\n            - aws cloudfront create-invalidation --distribution-id $CLOUDFRONT_DISTRIBUTION_ID --paths \"/index.html\" \"/asset-manifest.json\" \"/\"\n      artifacts:\n        files:\n          - '**/*'\n        base-directory: build\n    YAML\n  }\n}\n\n# Optional CodePipeline (skeleton)\nresource \"aws_iam_role\" \"codepipeline\" {\n  count = var.enable_cicd && var.enable_codepipeline ? 1 : 0\n  name  = \"${local.name_prefix}-codepipeline-role\"\n\n  assume_role_policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Effect = \"Allow\"\n        Principal = {\n          Service = \"codepipeline.amazonaws.com\"\n        }\n        Action = \"sts:AssumeRole\"\n      }\n    ]\n  })\n}\n\nresource \"aws_iam_role_policy\" \"codepipeline\" {\n  count = var.enable_cicd && var.enable_codepipeline ? 1 : 0\n  name  = \"${local.name_prefix}-codepipeline-policy\"\n  role  = aws_iam_role.codepipeline[0].id\n\n  policy = jsonencode({\n    Version = \"2012-10-17\"\n    Statement = [\n      {\n        Effect = \"Allow\"\n        Action = [\n          \"s3:GetObject\",\n          \"s3:GetObjectVersion\",\n          \"s3:PutObject\",\n          \"s3:ListBucket\"\n        ]\n        Resource = [\n          aws_s3_bucket.codepipeline_artifacts[0].arn,\n          \"${aws_s3_bucket.codepipeline_artifacts[0].arn}/*\"\n        ]\n      },\n      {\n        Effect = \"Allow\"\n        Action = [\n          \"codebuild:BatchGetBuilds\",\n          \"codebuild:StartBuild\"\n        ]\n        Resource = [aws_codebuild_project.spa[0].arn]\n      },\n      {\n        Effect = \"Allow\"\n        Action = [\n          \"secretsmanager:GetSecretValue\"\n        ]\n        Resource = [var.github_token_secret_arn]\n      }\n    ]\n  })\n}\n\nresource \"aws_codepipeline\" \"spa\" {\n  count    = var.enable_cicd && var.enable_codepipeline ? 1 : 0\n  name     = \"${local.name_prefix}-spa\"\n  role_arn = aws_iam_role.codepipeline[0].arn\n\n  artifact_store {\n    location = aws_s3_bucket.codepipeline_artifacts[0].bucket\n    type     = \"S3\"\n  }\n\n  stage {\n    name = \"Source\"\n\n    action {\n      name             = \"Source\"\n      category         = \"Source\"\n      owner            = \"ThirdParty\"\n      provider         = \"GitHub\"\n      version          = \"1\"\n      output_artifacts  = [\"source_output\"]\n      run_order        = 1\n\n      configuration = {\n        Owner      = var.github_owner\n        Repo       = var.github_repo\n        Branch     = var.github_branch\n        OAuthToken = \"#{SecretsManager:${var.github_token_secret_arn}}\"\n        PollForSourceChanges = \"false\"\n      }\n    }\n  }\n\n  stage {\n    name = \"BuildDeploy\"\n\n    action {\n      name            = \"BuildDeploy\"\n      category        = \"Build\"\n      owner           = \"AWS\"\n      provider        = \"CodeBuild\"\n      input_artifacts = [\"source_output\"]\n      version         = \"1\"\n\n      configuration = {\n        ProjectName = aws_codebuild_project.spa[0].name\n      }\n    }\n  }\n}\n"
    },
    {
      "name": "outputs.tf",
      "content": "output \"s3_bucket_name\" {\n  description = \"S3 bucket that stores the SPA assets (private).\"\n  value       = aws_s3_bucket.spa.bucket\n}\n\noutput \"cloudfront_distribution_id\" {\n  description = \"CloudFront distribution ID.\"\n  value       = aws_cloudfront_distribution.spa.id\n}\n\noutput \"cloudfront_domain_name\" {\n  description = \"CloudFront domain name (use this if you did not configure a custom domain).\"\n  value       = aws_cloudfront_distribution.spa.domain_name\n}\n\noutput \"site_url\" {\n  description = \"Primary URL for the site.\"\n  value       = local.use_custom_domain ? \"https://${var.domain_name}\" : \"https://${aws_cloudfront_distribution.spa.domain_name}\"\n}\n"
    },
    {
      "name": "terraform.tfvars",
      "content": "project_name = \"amazon-clone\"\nenvironment  = \"dev\"\naws_region   = \"eu-west-1\"\n\n# Optional custom domain\n# domain_name             = \"app.example.com\"\n# hosted_zone_id          = \"Z1234567890ABCDEFG\" # Route53 hosted zone id\n# create_route53_records  = true\n\nenable_waf             = true\nenable_cloudfront_logs = false\n\n# Optional CI/CD\nenable_cicd         = false\nenable_codepipeline = false\n# github_owner            = \"your-org\"\n# github_repo             = \"your-repo\"\n# github_branch           = \"main\"\n# github_token_secret_arn = \"arn:aws:secretsmanager:...:secret:github-token\"\n\n# Build-time env vars (must be REACT_APP_* for CRA)\n# react_app_env = {\n#   REACT_APP_API_BASE_URL = \"https://api.example.com\"\n# }\n"
    }
  ]
}