{
  "aws_architecture_description": "## Proposed high-level AWS architecture (lean, secure, and close to Docker Compose)\n\n### 1) Compute / container runtime\n**Single EC2 instance running Docker Engine + Docker Compose** (closest match to the current design).\n- Run the four containers on the instance:\n  - **proxy** (itzg/bungeecord) – public entrypoint for players on **TCP 25565**\n  - **lobby** (itzg/minecraft-server / Paper) – internal service; expose **25575** only to the admin UI container (and optionally to your admin IPs if you need direct RCON)\n  - **rcon** (itzg/rcon) – admin web UI; publish **HTTPS** publicly (recommended) and restrict by IP allowlist\n  - **backup** (itzg/mc-backup) – scheduled/periodic backups\n\nWhy EC2 (not ECS/Fargate) here: Minecraft servers typically need stable low-latency networking, persistent storage, and sometimes host-level tuning; the current Compose setup maps most directly to a single host.\n\n### 2) Networking\nCreate a dedicated **VPC** with public and private subnets across **2 Availability Zones**.\n- **EC2 instance in a public subnet** (simplest) with a public IP.\n- Lock down inbound traffic:\n  - Allow **TCP 25565** from the internet to the instance (players).\n  - Allow **HTTPS 443** to the admin UI (recommended) and restrict by **admin IP allowlist**.\n  - Allow **SSH 22** only from your admin IPs (or use SSM Session Manager and avoid opening 22).\n  - Do **not** expose **RCON 25575** publicly; keep it internal to the instance/containers.\n\nOptional hardening:\n- Put **AWS WAF** in front of the admin UI if you publish it via an ALB.\n\n### 3) Persistent storage (world data, plugins, proxy config, rcon state)\nUse **EBS** for low-latency local persistence on the EC2 host.\n- Attach a dedicated **EBS gp3** data volume (separate from root) and mount it at e.g. `/srv/minecraft`.\n- Map Docker bind mounts to that path:\n  - `/srv/minecraft/data/lobby`  ↔ `./data/lobby`\n  - `/srv/minecraft/plugins/lobby` ↔ `./plugins/lobby`\n  - `/srv/minecraft/data/proxy` ↔ `./data/proxy`\n  - `/srv/minecraft/plugins/proxy` ↔ `./plugins/proxy`\n  - `/srv/minecraft/data/rcon` ↔ `./data/rcon`\n  - `/srv/minecraft/mc-backups` ↔ `./mc-backups`\n\n### 4) Backups and disaster recovery\nUse **S3** as the durable backup destination.\n- The **backup container** writes archives to the mounted directory; a scheduled job then syncs to S3.\n- Two common patterns:\n  1) **S3 sync from the instance** (cron/systemd timer) to an S3 bucket.\n  2) **AWS Backup** for EBS snapshots (fast restore of the whole server state) + S3 for long-term world archives.\n\nRecommended:\n- **EBS snapshots via AWS Backup** (quick full restore)\n- **S3 lifecycle** to transition older backups to **S3 Glacier** for cost savings.\n\n### 5) Admin UI exposure (RCON Web)\nTwo options:\n- **Simplest**: expose the rcon container port via the instance and restrict by IP + TLS termination on-instance (e.g., Caddy/Nginx + Let’s Encrypt).\n- **More “AWS-native”**: put an **Application Load Balancer (ALB)** in front of the admin UI:\n  - ALB listener **443** with an **ACM** certificate\n  - Target group forwards to EC2 instance port (where rcon is published)\n  - Security group only allows 443 to ALB; instance only allows admin UI port from ALB SG\n\nGiven “lean” requirement: start with the simplest approach; add ALB/ACM if you want managed TLS and cleaner exposure.\n\n### 6) Observability and operations\n- **CloudWatch Agent** on EC2 for CPU/mem/disk metrics and log shipping (Docker logs / system logs).\n- **CloudWatch Alarms** for instance health, disk usage, and network.\n- **SSM** for patching, inventory, and remote access without SSH (recommended).\n\n### 7) DNS\n- **Route 53** record (e.g., `play.example.com`) pointing to the EC2 Elastic IP (or to the ALB if used).\n\n---\n\n## AWS resources to provision\n\n### Networking\n- Amazon **VPC**\n- **Internet Gateway (IGW)**\n- **Public Subnets** (2, across 2 AZs)\n- (Optional) **Private Subnets** (2, across 2 AZs)\n- **Route Tables** + routes (public route to IGW)\n- (Optional) **NAT Gateway** + Elastic IP (only if you place EC2 in private subnets)\n- **Security Groups**:\n  - SG for EC2 (allow 25565 from 0.0.0.0/0; allow 443 from admin IPs or from ALB SG; allow 22 from admin IPs if not using SSM)\n  - (Optional) SG for ALB (allow 443 from admin IPs or internet)\n- (Optional) **Network ACLs** (default is usually fine; SGs are primary control)\n\n### Compute\n- Amazon **EC2 Instance** (Linux) running Docker Engine + Docker Compose\n- **Elastic IP (EIP)** (recommended for stable IP if not using ALB)\n- **EBS Volumes**:\n  - Root volume\n  - Dedicated data volume (gp3) for `/srv/minecraft` (world/config/plugins/backups staging)\n\n### Identity & access\n- **IAM Role** for EC2 (instance profile) with least-privilege permissions for:\n  - SSM (if used)\n  - CloudWatch Agent (if used)\n  - S3 backup upload (PutObject, ListBucket, etc.)\n- **IAM Instance Profile** attached to EC2\n- (Optional) **KMS Key** for encrypting S3 bucket and/or EBS volumes (or use AWS-managed keys)\n\n### Storage / backups\n- Amazon **S3 Bucket** for backups (versioning recommended)\n- **S3 Lifecycle Policy** (transition older backups to Glacier / expire as desired)\n- (Optional) **AWS Backup**:\n  - Backup vault\n  - Backup plan + resource assignment (EBS volumes)\n\n### Load balancing / TLS (optional but recommended for admin UI)\n- (Optional) **Application Load Balancer (ALB)**\n- (Optional) **Target Group** (instance target)\n- (Optional) **ACM Certificate** (for admin domain)\n- (Optional) **AWS WAF Web ACL** (attach to ALB)\n\n### DNS\n- (Optional) **Route 53 Hosted Zone** (if you manage DNS in AWS)\n- **Route 53 Records**:\n  - `play.example.com` → EIP (A record) or ALB (Alias)\n  - `admin.example.com` → EIP/ALB (Alias)\n\n### Monitoring / logging / ops\n- **CloudWatch Log Groups** (system + docker/container logs)\n- **CloudWatch Alarms** (CPU, disk, status checks)\n- **AWS Systems Manager (SSM)**:\n  - SSM managed instance (via IAM role + agent)\n  - (Optional) Parameter Store for secrets/config (RCON password, etc.)\n\n---\n\nIf you tell me whether you want the admin UI publicly reachable (and from where), and whether you prefer “no SSH” (SSM-only), I can tighten the security group rules and choose between EIP-only vs ALB+ACM.",
  "aws_resources": [
    "Amazon VPC",
    "Internet Gateway (IGW)",
    "Public Subnets (2 across 2 AZs)",
    "(Optional) Private Subnets (2 across 2 AZs)",
    "Route Tables and Routes",
    "(Optional) NAT Gateway + Elastic IP (for private-subnet egress)",
    "Security Group - EC2",
    "(Optional) Security Group - ALB",
    "Amazon EC2 Instance",
    "Elastic IP (EIP)",
    "Amazon EBS Root Volume",
    "Amazon EBS Data Volume (gp3)",
    "IAM Role for EC2 (SSM/CloudWatch/S3 access)",
    "IAM Instance Profile",
    "(Optional) AWS KMS Key (S3/EBS encryption)",
    "Amazon S3 Bucket (backups)",
    "S3 Bucket Versioning",
    "S3 Lifecycle Policy",
    "(Optional) AWS Backup Vault",
    "(Optional) AWS Backup Plan + Assignment (EBS)",
    "(Optional) Application Load Balancer (ALB)",
    "(Optional) ALB Target Group",
    "(Optional) AWS Certificate Manager (ACM) Certificate",
    "(Optional) AWS WAF Web ACL",
    "(Optional) Amazon Route 53 Hosted Zone",
    "Route 53 DNS Records (A/Alias)",
    "Amazon CloudWatch Log Groups",
    "Amazon CloudWatch Alarms",
    "AWS Systems Manager (SSM)",
    "(Optional) SSM Parameter Store parameters (secrets/config)"
  ]
}