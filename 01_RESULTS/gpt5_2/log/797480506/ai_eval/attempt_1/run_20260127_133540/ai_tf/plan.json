{"format_version":"1.2","terraform_version":"1.13.5","variables":{"aws_region":{"value":"us-east-1"},"enable_sqs_sse":{"value":true},"environment":{"value":"dev"},"input_bucket_name":{"value":null},"lambda_batch_size":{"value":10},"lambda_maximum_batching_window_in_seconds":{"value":5},"lambda_reserved_concurrency":{"value":5},"output_bucket_name":{"value":null},"project_name":{"value":"rekognition-orchestrator"},"s3_results_prefix":{"value":"rekognition-results/"},"sqs_queue_name":{"value":null},"stepfunctions_log_level":{"value":"ALL"},"tags":{"value":{}}},"planned_values":{"outputs":{"dispatcher_lambda_name":{"sensitive":false,"type":"string","value":"rekognition-orchestrator-dev-dispatcher"},"input_bucket_name":{"sensitive":false,"type":"string","value":"rekognition-orchestrator-dev-input-000000000000"},"output_bucket_name":{"sensitive":false,"type":"string","value":"rekognition-orchestrator-dev-output-000000000000"},"parent_state_machine_arn":{"sensitive":false},"sqs_queue_url":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_cloudwatch_log_group.lambda","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"/aws/lambda/rekognition-orchestrator-dev-dispatcher","retention_in_days":14,"skip_destroy":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"}},"sensitive_values":{"tags_all":{}}},{"address":"aws_cloudwatch_log_group.sfn","mode":"managed","type":"aws_cloudwatch_log_group","name":"sfn","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"/aws/vendedlogs/states/rekognition-orchestrator-dev","retention_in_days":30,"skip_destroy":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"}},"sensitive_values":{"tags_all":{}}},{"address":"aws_iam_role.lambda","mode":"managed","type":"aws_iam_role","name":"lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"rekognition-orchestrator-dev-dispatcher-lambda","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role.sfn","mode":"managed","type":"aws_iam_role","name":"sfn","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"rekognition-orchestrator-dev-sfn-exec","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role_policy.lambda_inline","mode":"managed","type":"aws_iam_role_policy","name":"lambda_inline","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"rekognition-orchestrator-dev-dispatcher-inline"},"sensitive_values":{}},{"address":"aws_iam_role_policy.sfn_inline","mode":"managed","type":"aws_iam_role_policy","name":"sfn_inline","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"rekognition-orchestrator-dev-sfn-inline"},"sensitive_values":{}},{"address":"aws_iam_role_policy_attachment.lambda_basic","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_basic","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"rekognition-orchestrator-dev-dispatcher-lambda"},"sensitive_values":{}},{"address":"aws_lambda_event_source_mapping.sqs","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"batch_size":10,"bisect_batch_on_function_error":null,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"filter_criteria":[],"function_response_types":["ReportBatchItemFailures"],"kms_key_arn":null,"maximum_batching_window_in_seconds":5,"metrics_config":[],"provisioned_poller_config":[],"queues":null,"scaling_config":[],"self_managed_event_source":[],"source_access_configuration":[],"starting_position":null,"starting_position_timestamp":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"topics":null,"tumbling_window_in_seconds":null},"sensitive_values":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[false],"metrics_config":[],"provisioned_poller_config":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags_all":{}}},{"address":"aws_lambda_function.dispatcher","mode":"managed","type":"aws_lambda_function","name":"dispatcher","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[{}],"file_system_config":[],"filename":"./.build/dispatcher.zip","function_name":"rekognition-orchestrator-dev-dispatcher","handler":"lambda_dispatcher.handler","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":5,"runtime":"python3.12","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"zpUWGRH1/zQyqYc4Zqy041NkUbl77p7w6qLTIl7ve3c=","tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeout":30,"timeouts":null,"vpc_config":[]},"sensitive_values":{"architectures":[],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"logging_config":[],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[]}},{"address":"aws_s3_bucket.input","mode":"managed","type":"aws_s3_bucket","name":"input","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"rekognition-orchestrator-dev-input-000000000000","force_destroy":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"aws_s3_bucket.output","mode":"managed","type":"aws_s3_bucket","name":"output","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"rekognition-orchestrator-dev-output-000000000000","force_destroy":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"aws_s3_bucket_public_access_block.input","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"input","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"aws_s3_bucket_public_access_block.output","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"output","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"sensitive_values":{}},{"address":"aws_s3_bucket_server_side_encryption_configuration.input","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"input","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"aws_s3_bucket_server_side_encryption_configuration.output","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"output","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"aws_s3_bucket_versioning.input","mode":"managed","type":"aws_s3_bucket_versioning","name":"input","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}},{"address":"aws_s3_bucket_versioning.output","mode":"managed","type":"aws_s3_bucket_versioning","name":"output","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}},{"address":"aws_sfn_state_machine.detect_faces","mode":"managed","type":"aws_sfn_state_machine","name":"detect_faces","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"definition":"{\n    \"StartAt\": \"CheckInvoker\",\n    \"States\": {\n        \"CheckInvoker\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n                {\n                    \"Variable\": \"$.StatePayload\",\n                    \"IsPresent\": true,\n                    \"Next\": \"InvokerStateMachine\"\n                }\n            ],\n            \"Default\": \"Fail\"\n        },\n        \"InvokerStateMachine\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"ParallelCheckInput\",\n            \"InputPath\": \"$.StatePayload\"\n        },\n        \"Fail\": {\n            \"Type\": \"Fail\"\n        },\n        \"ParallelCheckInput\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckInputRekognition\",\n                    \"States\": {\n                        \"CheckInputRekognition\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.Rekognition\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.Rekognition\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"CheckInputDetectFaces\"\n                                }\n                            ],\n                            \"Default\": \"DefaultInputRekognition\"\n                        },\n                        \"DefaultInputRekognition\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Rekognition\": {}\n                            },\n                            \"Next\": \"CheckInputDetectFaces\"\n                        },\n                        \"CheckInputDetectFaces\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.DetectFaces\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.DetectFaces\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"ParallelCheckInputDetectFaces\"\n                                }\n                            ],\n                            \"InputPath\": \"$.Rekognition\",\n                            \"Default\": \"DefaultInputDetectFaces\"\n                        },\n                        \"DefaultInputDetectFaces\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"DetectFaces\": {}\n                            },\n                            \"Next\": \"ParallelCheckInputDetectFaces\"\n                        },\n                        \"ParallelCheckInputDetectFaces\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputAttributes\",\n                                    \"States\": {\n                                        \"CheckInputAttributes\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Attributes\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.Attributes\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"MapInputAttributes\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputAttributes\"\n                                        },\n                                        \"MapInputAttributes\": {\n                                            \"Type\": \"Map\",\n                                            \"ItemProcessor\": {\n                                                \"ProcessorConfig\": {\n                                                    \"Mode\": \"INLINE\"\n                                                },\n                                                \"StartAt\": \"CheckValueAttribute\",\n                                                \"States\": {\n                                                    \"CheckValueAttribute\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"And\": [\n                                                                    {\n                                                                        \"Variable\": \"$\",\n                                                                        \"IsString\": true\n                                                                    },\n                                                                    {\n                                                                        \"Or\": [\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"AGE_RANGE\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"ALL\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"BEARD\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"DEFAULT\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"EMOTIONS\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"EYEGLASSES\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"EYES_OPEN\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"EYE_DIRECTION\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"FACE_OCCLUDED\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"GENDER\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"MOUTH_OPEN\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"MUSTACHE\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"SMILE\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"SUNGLASSES\"\n                                                                            }\n                                                                        ]\n                                                                    }\n                                                                ],\n                                                                \"Next\": \"PassValueAttribute\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"FailCheckValueAttribute\"\n                                                    },\n                                                    \"PassValueAttribute\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true\n                                                    },\n                                                    \"FailCheckValueAttribute\": {\n                                                        \"Type\": \"Fail\"\n                                                    }\n                                                }\n                                            },\n                                            \"End\": true,\n                                            \"ItemsPath\": \"$.Attributes\"\n                                        },\n                                        \"DefaultInputAttributes\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"Attributes\": [\n                                                    \"ALL\"\n                                                ]\n                                            },\n                                            \"Next\": \"MapInputAttributes\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"DetectFaces\": {\n                                    \"Attributes.$\": \"$[0]\"\n                                }\n                            },\n                            \"InputPath\": \"$.DetectFaces\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckInputS3\",\n                    \"States\": {\n                        \"CheckInputS3\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.S3\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckInputS3\"\n                                }\n                            ],\n                            \"Default\": \"FailCheckS3Input\"\n                        },\n                        \"ParallelCheckInputS3\": {\n                            \"Type\": \"Parallel\",\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputBucket\",\n                                    \"States\": {\n                                        \"CheckInputBucket\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Bucket\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputBucketName\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucket\"\n                                        },\n                                        \"CheckInputBucketName\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"HeadBucket\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucketName\",\n                                            \"InputPath\": \"$.Bucket\"\n                                        },\n                                        \"HeadBucket\": {\n                                            \"Type\": \"Task\",\n                                            \"Parameters\": {\n                                                \"Bucket.$\": \"$.Name\"\n                                            },\n                                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headBucket\",\n                                            \"Catch\": [\n                                                {\n                                                    \"ErrorEquals\": [\n                                                        \"States.TaskFailed\"\n                                                    ],\n                                                    \"Next\": \"FailHeadBucket\"\n                                                }\n                                            ],\n                                            \"ResultPath\": \"$.Output\",\n                                            \"Next\": \"PassHeadBucket\"\n                                        },\n                                        \"PassHeadBucket\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"AccessPointAlias.$\": \"$.Output.AccessPointAlias\",\n                                                \"Name.$\": \"$.Name\",\n                                                \"Region.$\": \"$.Output.BucketRegion\"\n                                            }\n                                        },\n                                        \"FailHeadBucket\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucketName\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucket\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputObject\",\n                                    \"States\": {\n                                        \"CheckInputObject\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Object\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputObject\"\n                                        },\n                                        \"CheckInputKey\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputKey\",\n                                            \"InputPath\": \"$.Object\"\n                                        },\n                                        \"PassInputKey\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckInputKey\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputObject\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.S3\",\n                            \"ResultSelector\": {\n                                \"Bucket.$\": \"$[0]\",\n                                \"Object.$\": \"$[1]\"\n                            },\n                            \"Next\": \"HeadObject\"\n                        },\n                        \"HeadObject\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\"\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headObject\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailHeadObject\"\n                                }\n                            ],\n                            \"Next\": \"PassHeadObject\"\n                        },\n                        \"PassHeadObject\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            },\n                            \"Next\": \"GetObjectAttributes\"\n                        },\n                        \"GetObjectAttributes\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\",\n                                \"ObjectAttributes\": [\n                                    \"Checksum\",\n                                    \"ETag\",\n                                    \"ObjectParts\",\n                                    \"ObjectSize\",\n                                    \"StorageClass\"\n                                ]\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:getObjectAttributes\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailGetObjectAttributes\"\n                                }\n                            ],\n                            \"Next\": \"PassGetObjectAttributes\"\n                        },\n                        \"PassGetObjectAttributes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            }\n                        },\n                        \"FailGetObjectAttributes\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailHeadObject\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailCheckS3Input\": {\n                            \"Type\": \"Fail\"\n                        }\n                    }\n                }\n            ],\n            \"Next\": \"DetectFaces\",\n            \"ResultSelector\": {\n                \"Rekognition.$\": \"$[0]\",\n                \"S3.$\": \"$[1]\"\n            }\n        },\n        \"DetectFaces\": {\n            \"Type\": \"Task\",\n            \"Parameters\": {\n                \"Attributes.$\": \"$.Rekognition.DetectFaces.Attributes\",\n                \"Image\": {\n                    \"S3Object\": {\n                        \"Bucket.$\": \"$.S3.Bucket.Name\",\n                        \"Name.$\": \"$.S3.Object.Key\"\n                    }\n                }\n            },\n            \"Resource\": \"arn:aws:states:::aws-sdk:rekognition:detectFaces\",\n            \"Next\": \"ParallelCheckOutputDetectFaces\",\n            \"Catch\": [\n                {\n                    \"ErrorEquals\": [\n                        \"States.TaskFailed\"\n                    ],\n                    \"Next\": \"FailDetectFaces\"\n                }\n            ],\n            \"ResultPath\": \"$.Output\"\n        },\n        \"ParallelCheckOutputDetectFaces\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckOutputFaceDetails\",\n                    \"States\": {\n                        \"CheckOutputFaceDetails\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.FaceDetails\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"MapOutputFaceDetails\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputFaceDetails\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"MapOutputFaceDetails\": {\n                            \"Type\": \"Map\",\n                            \"ItemProcessor\": {\n                                \"ProcessorConfig\": {\n                                    \"Mode\": \"INLINE\"\n                                },\n                                \"StartAt\": \"CheckOutputFaceDetail\",\n                                \"States\": {\n                                    \"CheckOutputFaceDetail\": {\n                                        \"Type\": \"Parallel\",\n                                        \"End\": true,\n                                        \"Branches\": [\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailAgeRange\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailAgeRange\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.AgeRange\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailAgeRange\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailAgeRange\"\n                                                    },\n                                                    \"PassOutputFaceDetailAgeRange\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.AgeRange\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailAgeRange\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"Parameters\": {\n                                                            \"AgeRange\": null\n                                                        },\n                                                        \"End\": true,\n                                                        \"OutputPath\": \"$.AgeRange\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailBeard\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailBeard\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Beard\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailBeard\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailBeard\"\n                                                    },\n                                                    \"PassOutputFaceDetailBeard\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Beard\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailBeard\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Beard\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Beard\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailBoundingBox\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailBoundingBox\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.BoundingBox\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailBoundingBox\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailBoundingBox\"\n                                                    },\n                                                    \"PassOutputFaceDetailBoundingBox\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.BoundingBox\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailBoundingBox\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"BoundingBox\": null\n                                                        },\n                                                        \"OutputPath\": \"$.BoundingBox\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"PassOutputFaceDetailConfidence\",\n                                                \"States\": {\n                                                    \"PassOutputFaceDetailConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Confidence\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailEmotions\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailEmotions\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Emotions\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailEmotions\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailEmotions\"\n                                                    },\n                                                    \"PassOutputFaceDetailEmotions\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Emotions\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailEmotions\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Emotions\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Emotions\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailEyeDirection\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailEyeDirection\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.EyeDirection\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailEyeDirection\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailEyeDirection\"\n                                                    },\n                                                    \"PassOutputFaceDetailEyeDirection\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.EyeDirection\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailEyeDirection\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"EyeDirection\": null\n                                                        },\n                                                        \"OutputPath\": \"$.EyeDirection\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailEyeglasses\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailEyeglasses\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Eyeglasses\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailEyeglasses\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailEyeglasses\"\n                                                    },\n                                                    \"PassOutputFaceDetailEyeglasses\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Eyeglasses\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailEyeglasses\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Eyeglasses\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Eyeglasses\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailEyesOpen\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailEyesOpen\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.EyesOpen\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailEyesOpen\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailEyesOpen\"\n                                                    },\n                                                    \"PassOutputFaceDetailEyesOpen\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.EyesOpen\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailEyesOpen\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"EyesOpen\": null\n                                                        },\n                                                        \"OutputPath\": \"$.EyesOpen\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailFaceOccluded\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailFaceOccluded\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.FaceOccluded\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailFaceOccluded\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailFaceOccluded\"\n                                                    },\n                                                    \"PassOutputFaceDetailFaceOccluded\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.FaceOccluded\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailFaceOccluded\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"FaceOccluded\": null\n                                                        },\n                                                        \"OutputPath\": \"$.FaceOccluded\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailGender\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailGender\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Gender\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailGender\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailGender\"\n                                                    },\n                                                    \"PassOutputFaceDetailGender\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Gender\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailGender\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Gender\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Gender\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"PassOutputFaceDetailIdParameters\",\n                                                \"States\": {\n                                                    \"PassOutputFaceDetailIdParameters\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"Parameters\": {\n                                                            \"BoundingBox.$\": \"$.BoundingBox\",\n                                                            \"Confidence.$\": \"$.Confidence\",\n                                                            \"Pose.$\": \"$.Pose\",\n                                                            \"Quality.$\": \"$.Quality\",\n                                                            \"Landmarks.$\": \"$.Landmarks\"\n                                                        },\n                                                        \"Next\": \"DefaultOutputFaceDetailId\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Id.$\": \"States.Hash($, 'MD5')\"\n                                                        },\n                                                        \"OutputPath\": \"$.Id\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailLandmarks\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailLandmarks\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Landmarks\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailLandmarks\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailLandmarks\"\n                                                    },\n                                                    \"PassOutputFaceDetailLandmarks\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Landmarks\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailLandmarks\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Landmarks\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Landmarks\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailMouthOpen\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailMouthOpen\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.MouthOpen\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailMouthOpen\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailMouthOpen\"\n                                                    },\n                                                    \"PassOutputFaceDetailMouthOpen\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.MouthOpen\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailMouthOpen\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"MouthOpen\": null\n                                                        },\n                                                        \"OutputPath\": \"$.MouthOpen\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailMustache\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailMustache\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Mustache\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailMustache\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailMustache\"\n                                                    },\n                                                    \"PassOutputFaceDetailMustache\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Mustache\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailMustache\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Mustache\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Mustache\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailPose\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailPose\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Pose\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailPose\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailPose\"\n                                                    },\n                                                    \"PassOutputFaceDetailPose\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Pose\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailPose\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Pose\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Pose\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailQuality\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailQuality\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Quality\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailQuality\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailQuality\"\n                                                    },\n                                                    \"PassOutputFaceDetailQuality\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Quality\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailQuality\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Quality\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Quality\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailSmile\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailSmile\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Smile\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailSmile\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailSmile\"\n                                                    },\n                                                    \"PassOutputFaceDetailSmile\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Smile\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailSmile\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Smile\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Smile\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailSunglasses\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailSunglasses\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Sunglasses\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailSunglasses\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailSunglasses\"\n                                                    },\n                                                    \"PassOutputFaceDetailSunglasses\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Sunglasses\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailSunglasses\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Sunglasses\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Sunglasses\"\n                                                    }\n                                                }\n                                            }\n                                        ],\n                                        \"ResultSelector\": {\n                                            \"AgeRange.$\": \"$[0]\",\n                                            \"Beard.$\": \"$[1]\",\n                                            \"BoundingBox.$\": \"$[2]\",\n                                            \"Confidence.$\": \"$[3]\",\n                                            \"Emotions.$\": \"$[4]\",\n                                            \"EyeDirection.$\": \"$[5]\",\n                                            \"Eyeglasses.$\": \"$[6]\",\n                                            \"EyesOpen.$\": \"$[7]\",\n                                            \"FaceOccluded.$\": \"$[8]\",\n                                            \"Gender.$\": \"$[9]\",\n                                            \"Id.$\": \"$[10]\",\n                                            \"Landmarks.$\": \"$[11]\",\n                                            \"MouthOpen.$\": \"$[12]\",\n                                            \"Mustache.$\": \"$[13]\",\n                                            \"Pose.$\": \"$[14]\",\n                                            \"Quality.$\": \"$[15]\",\n                                            \"Smile.$\": \"$[16]\",\n                                            \"Sunglasses.$\": \"$[17]\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"End\": true,\n                            \"ItemsPath\": \"$.FaceDetails\"\n                        },\n                        \"DefaultOutputFaceDetails\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"FaceDetails\": []\n                            },\n                            \"Next\": \"MapOutputFaceDetails\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputOrientationCorrection\",\n                    \"States\": {\n                        \"CheckOutputOrientationCorrection\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.OrientationCorrection\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOrientationCorrection\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputOrientationCorrection\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.OrientationCorrection\"\n                        },\n                        \"DefaultOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"OrientationCorrection\": null\n                            },\n                            \"Next\": \"PassOrientationCorrection\"\n                        }\n                    }\n                }\n            ],\n            \"ResultSelector\": {\n                \"FaceDetails.$\": \"$[0]\",\n                \"OrientationCorrection.$\": \"$[1]\"\n            },\n            \"ResultPath\": \"$.Output\",\n            \"Next\": \"StateMachineOutput\"\n        },\n        \"StateMachineOutput\": {\n            \"Type\": \"Pass\",\n            \"Parameters\": {\n                \"DetectFaces\": {\n                    \"CreatedAt.$\": \"$$.Execution.StartTime\",\n                    \"FaceDetails.$\": \"$.Output.FaceDetails\",\n                    \"Id.$\": \"$.S3.Object.ETag\",\n                    \"OrientationCorrection.$\": \"$.Output.OrientationCorrection\"\n                },\n                \"Execution\": {\n                    \"Id.$\": \"$$.Execution.Id\",\n                    \"Name.$\": \"$$.Execution.Name\",\n                    \"StartTime.$\": \"$$.Execution.StartTime\"\n                },\n                \"S3.$\": \"$.S3\",\n                \"StateMachine.$\": \"$$.StateMachine\"\n            },\n            \"Next\": \"Success\"\n        },\n        \"Success\": {\n            \"Type\": \"Succeed\"\n        },\n        \"FailDetectFaces\": {\n            \"Type\": \"Fail\"\n        }\n    }\n}\n","logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-detect-faces","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"sensitive_values":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}},{"address":"aws_sfn_state_machine.detect_labels","mode":"managed","type":"aws_sfn_state_machine","name":"detect_labels","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"definition":"{\n    \"StartAt\": \"CheckInvoker\",\n    \"States\": {\n        \"CheckInvoker\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n                {\n                    \"Variable\": \"$.StatePayload\",\n                    \"IsPresent\": true,\n                    \"Next\": \"InvokerStateMachine\"\n                }\n            ],\n            \"Default\": \"Fail\"\n        },\n        \"InvokerStateMachine\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"ParallelCheckInput\",\n            \"InputPath\": \"$.StatePayload\"\n        },\n        \"Fail\": {\n            \"Type\": \"Fail\"\n        },\n        \"ParallelCheckInput\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckInputRekognition\",\n                    \"States\": {\n                        \"CheckInputRekognition\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.Rekognition\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.Rekognition\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"CheckInputDetectLabels\"\n                                }\n                            ],\n                            \"Default\": \"DefaultInputRekognition\"\n                        },\n                        \"DefaultInputRekognition\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Rekognition\": {}\n                            },\n                            \"Next\": \"CheckInputDetectLabels\"\n                        },\n                        \"CheckInputDetectLabels\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.DetectLabels\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.DetectLabels\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"ParallelCheckInputDetectLabels\"\n                                }\n                            ],\n                            \"InputPath\": \"$.Rekognition\",\n                            \"Default\": \"DefaultInputDetectLabels\"\n                        },\n                        \"DefaultInputDetectLabels\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"DetectFaces\": {}\n                            },\n                            \"Next\": \"ParallelCheckInputDetectLabels\"\n                        },\n                        \"ParallelCheckInputDetectLabels\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputFeatures\",\n                                    \"States\": {\n                                        \"CheckInputFeatures\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Features\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.Features\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"MapInputFeatures\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputFeatures\"\n                                        },\n                                        \"MapInputFeatures\": {\n                                            \"Type\": \"Map\",\n                                            \"ItemProcessor\": {\n                                                \"ProcessorConfig\": {\n                                                    \"Mode\": \"INLINE\"\n                                                },\n                                                \"StartAt\": \"CheckValueFeature\",\n                                                \"States\": {\n                                                    \"CheckValueFeature\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"And\": [\n                                                                    {\n                                                                        \"Variable\": \"$\",\n                                                                        \"IsString\": true\n                                                                    },\n                                                                    {\n                                                                        \"Or\": [\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"GENERAL_LABELS\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"IMAGE_PROPERTIES\"\n                                                                            }\n                                                                        ]\n                                                                    }\n                                                                ],\n                                                                \"Next\": \"PassValueFeature\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"FailCheckValueFeature\"\n                                                    },\n                                                    \"PassValueFeature\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true\n                                                    },\n                                                    \"FailCheckValueFeature\": {\n                                                        \"Type\": \"Fail\"\n                                                    }\n                                                }\n                                            },\n                                            \"End\": true,\n                                            \"ItemsPath\": \"$.Features\"\n                                        },\n                                        \"DefaultInputFeatures\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"Features\": [\n                                                    \"GENERAL_LABELS\",\n                                                    \"IMAGE_PROPERTIES\"\n                                                ]\n                                            },\n                                            \"Next\": \"MapInputFeatures\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputMaxLabels\",\n                                    \"States\": {\n                                        \"CheckInputMaxLabels\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.MaxLabels\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.MaxLabels\",\n                                                            \"IsNumeric\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"CheckValueMaxLabels\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputMaxLabels\"\n                                        },\n                                        \"CheckValueMaxLabels\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$\",\n                                                    \"NumericGreaterThanEquals\": 0,\n                                                    \"Next\": \"PassValueMaxLabels\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckValueMaxLabels\",\n                                            \"InputPath\": \"$.MaxLabels\"\n                                        },\n                                        \"PassValueMaxLabels\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckValueMaxLabels\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"DefaultInputMaxLabels\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"MaxLabels\": 0\n                                            },\n                                            \"Next\": \"CheckValueMaxLabels\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputMinConfidence\",\n                                    \"States\": {\n                                        \"CheckInputMinConfidence\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.MinConfidence\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.MinConfidence\",\n                                                            \"IsNumeric\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"CheckValueMinConfidence\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputMinConfidence\"\n                                        },\n                                        \"CheckValueMinConfidence\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$\",\n                                                            \"NumericGreaterThanEquals\": 0\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$\",\n                                                            \"NumericLessThanEquals\": 100\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassValueMinConfidence\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckValueMinConfidence\",\n                                            \"InputPath\": \"$.MinConfidence\"\n                                        },\n                                        \"PassValueMinConfidence\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckValueMinConfidence\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"DefaultInputMinConfidence\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"MinConfidence\": 50\n                                            },\n                                            \"Next\": \"CheckValueMinConfidence\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputSettings\",\n                                    \"States\": {\n                                        \"CheckInputSettings\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Settings\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.Settings\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"ParallelCheckInputSettings\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputSettings\"\n                                        },\n                                        \"ParallelCheckInputSettings\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckInputSettingsGeneralLabels\",\n                                                    \"States\": {\n                                                        \"CheckInputSettingsGeneralLabels\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.GeneralLabels\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Not\": {\n                                                                                \"Variable\": \"$.GeneralLabels\",\n                                                                                \"IsNull\": true\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"ParallelCheckInputSettingsGeneralLabels\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultInputSettingsGeneralLabels\"\n                                                        },\n                                                        \"ParallelCheckInputSettingsGeneralLabels\": {\n                                                            \"Type\": \"Parallel\",\n                                                            \"End\": true,\n                                                            \"Branches\": [\n                                                                {\n                                                                    \"StartAt\": \"CheckInputSettingsGeneralLabelsLabelCategoryExclusionFilters\",\n                                                                    \"States\": {\n                                                                        \"CheckInputSettingsGeneralLabelsLabelCategoryExclusionFilters\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.LabelCategoryExclusionFilters\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Not\": {\n                                                                                                \"Variable\": \"$.LabelCategoryExclusionFilters\",\n                                                                                                \"IsNull\": true\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"MapInputSettingsGeneralLabelsLabelCategoryExclusionFilters\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultInputSettingsGeneralLabelsLabelCategoryExclusionFilters\"\n                                                                        },\n                                                                        \"MapInputSettingsGeneralLabelsLabelCategoryExclusionFilters\": {\n                                                                            \"Type\": \"Map\",\n                                                                            \"ItemProcessor\": {\n                                                                                \"ProcessorConfig\": {\n                                                                                    \"Mode\": \"INLINE\"\n                                                                                },\n                                                                                \"StartAt\": \"CheckValueSettingsGeneralLabelsLabelCategoryExclusionFilter\",\n                                                                                \"States\": {\n                                                                                    \"CheckValueSettingsGeneralLabelsLabelCategoryExclusionFilter\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"And\": [\n                                                                                                    {\n                                                                                                        \"Variable\": \"$\",\n                                                                                                        \"IsString\": true\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"Next\": \"PassValueSettingsGeneralLabelsLabelCategoryExclusionFilter\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckValueSettingsGeneralLabelsLabelCategoryExclusionFilters\"\n                                                                                    },\n                                                                                    \"PassValueSettingsGeneralLabelsLabelCategoryExclusionFilter\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckValueSettingsGeneralLabelsLabelCategoryExclusionFilters\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            \"End\": true,\n                                                                            \"ItemsPath\": \"$.LabelCategoryExclusionFilters\"\n                                                                        },\n                                                                        \"DefaultInputSettingsGeneralLabelsLabelCategoryExclusionFilters\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Parameters\": {\n                                                                                \"LabelCategoryExclusionFilters\": []\n                                                                            },\n                                                                            \"Next\": \"MapInputSettingsGeneralLabelsLabelCategoryExclusionFilters\"\n                                                                        }\n                                                                    }\n                                                                },\n                                                                {\n                                                                    \"StartAt\": \"CheckInputSettingsGeneralLabelsLabelCategoryInclusionFilters\",\n                                                                    \"States\": {\n                                                                        \"CheckInputSettingsGeneralLabelsLabelCategoryInclusionFilters\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.LabelCategoryInclusionFilters\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Not\": {\n                                                                                                \"Variable\": \"$.LabelCategoryInclusionFilters\",\n                                                                                                \"IsNull\": true\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"MapInputSettingsGeneralLabelsLabelCategoryInclusionFilters\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultSettingsGeneralLabelsLabelCategoryInclusionFilters\"\n                                                                        },\n                                                                        \"MapInputSettingsGeneralLabelsLabelCategoryInclusionFilters\": {\n                                                                            \"Type\": \"Map\",\n                                                                            \"ItemProcessor\": {\n                                                                                \"ProcessorConfig\": {\n                                                                                    \"Mode\": \"INLINE\"\n                                                                                },\n                                                                                \"StartAt\": \"CheckValueSettingsGeneralLabelsLabelCategoryInclusionFilter\",\n                                                                                \"States\": {\n                                                                                    \"CheckValueSettingsGeneralLabelsLabelCategoryInclusionFilter\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"Variable\": \"$\",\n                                                                                                \"IsString\": true,\n                                                                                                \"Next\": \"PassValueSettingsGeneralLabelsLabelCategoryInclusionFilter\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckValueSettingsGeneralLabelsLabelCategoryInclusionFilter\"\n                                                                                    },\n                                                                                    \"PassValueSettingsGeneralLabelsLabelCategoryInclusionFilter\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckValueSettingsGeneralLabelsLabelCategoryInclusionFilter\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            \"End\": true,\n                                                                            \"ItemsPath\": \"$.LabelCategoryInclusionFilters\"\n                                                                        },\n                                                                        \"DefaultSettingsGeneralLabelsLabelCategoryInclusionFilters\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Parameters\": {\n                                                                                \"LabelCategoryInclusionFilters\": []\n                                                                            },\n                                                                            \"Next\": \"MapInputSettingsGeneralLabelsLabelCategoryInclusionFilters\"\n                                                                        }\n                                                                    }\n                                                                },\n                                                                {\n                                                                    \"StartAt\": \"CheckInputSettingsGeneralLabelsLabelExclusionFilters\",\n                                                                    \"States\": {\n                                                                        \"CheckInputSettingsGeneralLabelsLabelExclusionFilters\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.LabelExclusionFilters\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Not\": {\n                                                                                                \"Variable\": \"$.LabelExclusionFilters\",\n                                                                                                \"IsNull\": true\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"MapInputSettingsGeneralLabelsLabelExclusionFilters\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultInputSettingsGeneralLabelsLabelExclusionFilters\"\n                                                                        },\n                                                                        \"MapInputSettingsGeneralLabelsLabelExclusionFilters\": {\n                                                                            \"Type\": \"Map\",\n                                                                            \"ItemProcessor\": {\n                                                                                \"ProcessorConfig\": {\n                                                                                    \"Mode\": \"INLINE\"\n                                                                                },\n                                                                                \"StartAt\": \"CheckValueSettingsGeneralLabelsLabelExclusionFilter\",\n                                                                                \"States\": {\n                                                                                    \"CheckValueSettingsGeneralLabelsLabelExclusionFilter\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"Variable\": \"$\",\n                                                                                                \"IsString\": true,\n                                                                                                \"Next\": \"PassValueSettingsGeneralLabelsLabelExclusionFilter\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckValueSettingsGeneralLabelsLabelExclusionFilter\"\n                                                                                    },\n                                                                                    \"PassValueSettingsGeneralLabelsLabelExclusionFilter\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckValueSettingsGeneralLabelsLabelExclusionFilter\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            \"End\": true,\n                                                                            \"ItemsPath\": \"$.LabelExclusionFilters\"\n                                                                        },\n                                                                        \"DefaultInputSettingsGeneralLabelsLabelExclusionFilters\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Parameters\": {\n                                                                                \"LabelExclusionFilters\": []\n                                                                            },\n                                                                            \"Next\": \"MapInputSettingsGeneralLabelsLabelExclusionFilters\"\n                                                                        }\n                                                                    }\n                                                                },\n                                                                {\n                                                                    \"StartAt\": \"CheckInputSettingsGeneralLabelsLabelInclusionFilters\",\n                                                                    \"States\": {\n                                                                        \"CheckInputSettingsGeneralLabelsLabelInclusionFilters\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.LabelInclusionFilters\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Not\": {\n                                                                                                \"Variable\": \"$.LabelInclusionFilters\",\n                                                                                                \"IsNull\": true\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"MapInputSettingsGeneralLabelsLabelInclusionFilters\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultInputSettingsGeneralLabelsLabelInclusionFilters\"\n                                                                        },\n                                                                        \"MapInputSettingsGeneralLabelsLabelInclusionFilters\": {\n                                                                            \"Type\": \"Map\",\n                                                                            \"ItemProcessor\": {\n                                                                                \"ProcessorConfig\": {\n                                                                                    \"Mode\": \"INLINE\"\n                                                                                },\n                                                                                \"StartAt\": \"CheckValueSettingsGeneralLabelsLabelInclusionFilter\",\n                                                                                \"States\": {\n                                                                                    \"CheckValueSettingsGeneralLabelsLabelInclusionFilter\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"Variable\": \"$\",\n                                                                                                \"IsString\": true,\n                                                                                                \"Next\": \"PassValueSettingsGeneralLabelsLabelInclusionFilter\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckValueSettingsGeneralLabelsLabelInclusionFilter\"\n                                                                                    },\n                                                                                    \"PassValueSettingsGeneralLabelsLabelInclusionFilter\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckValueSettingsGeneralLabelsLabelInclusionFilter\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            \"End\": true,\n                                                                            \"ItemsPath\": \"$.LabelInclusionFilters\"\n                                                                        },\n                                                                        \"DefaultInputSettingsGeneralLabelsLabelInclusionFilters\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Parameters\": {\n                                                                                \"LabelInclusionFilters\": []\n                                                                            },\n                                                                            \"Next\": \"MapInputSettingsGeneralLabelsLabelInclusionFilters\"\n                                                                        }\n                                                                    }\n                                                                }\n                                                            ],\n                                                            \"InputPath\": \"$.GeneralLabels\",\n                                                            \"ResultSelector\": {\n                                                                \"LabelCategoryExclusionFilters.$\": \"$[0]\",\n                                                                \"LabelCategoryInclusionFilters.$\": \"$[1]\",\n                                                                \"LabelExclusionFilters.$\": \"$[2]\",\n                                                                \"LabelInclusionFilters.$\": \"$[3]\"\n                                                            }\n                                                        },\n                                                        \"DefaultInputSettingsGeneralLabels\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"Next\": \"ParallelCheckInputSettingsGeneralLabels\",\n                                                            \"Parameters\": {\n                                                                \"GeneralLabels\": {}\n                                                            }\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputSettingsImageProperties\",\n                                                    \"States\": {\n                                                        \"CheckInputSettingsImageProperties\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.ImageProperties\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Not\": {\n                                                                                \"Variable\": \"$.ImageProperties\",\n                                                                                \"IsNull\": true\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"ParallelCheckInputSettingsImageProperties\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultInputSettingsImageProperties\"\n                                                        },\n                                                        \"ParallelCheckInputSettingsImageProperties\": {\n                                                            \"Type\": \"Parallel\",\n                                                            \"End\": true,\n                                                            \"Branches\": [\n                                                                {\n                                                                    \"StartAt\": \"CheckInputSettingsImagePropertiesMaxDominantColors\",\n                                                                    \"States\": {\n                                                                        \"CheckInputSettingsImagePropertiesMaxDominantColors\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.MaxDominantColors\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Variable\": \"$.MaxDominantColors\",\n                                                                                            \"IsNumeric\": true\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"CheckValueSettingsImagePropertiesMaxDominantColor\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultInputSettingsImagePropertiesMaxDominantColors\"\n                                                                        },\n                                                                        \"CheckValueSettingsImagePropertiesMaxDominantColor\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$\",\n                                                                                            \"NumericGreaterThanEquals\": 0\n                                                                                        },\n                                                                                        {\n                                                                                            \"Variable\": \"$\",\n                                                                                            \"NumericLessThanEquals\": 100\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"PassValueSettingsImagePropertiesMaxDominantColor\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"FailCheckValueSettingsImagePropertiesMaxDominantColor\",\n                                                                            \"InputPath\": \"$.MaxDominantColors\"\n                                                                        },\n                                                                        \"PassValueSettingsImagePropertiesMaxDominantColor\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"End\": true\n                                                                        },\n                                                                        \"FailCheckValueSettingsImagePropertiesMaxDominantColor\": {\n                                                                            \"Type\": \"Fail\"\n                                                                        },\n                                                                        \"DefaultInputSettingsImagePropertiesMaxDominantColors\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Parameters\": {\n                                                                                \"MaxDominantColors\": 20\n                                                                            },\n                                                                            \"Next\": \"CheckValueSettingsImagePropertiesMaxDominantColor\"\n                                                                        }\n                                                                    }\n                                                                }\n                                                            ],\n                                                            \"InputPath\": \"$.ImageProperties\",\n                                                            \"ResultSelector\": {\n                                                                \"MaxDominantColors.$\": \"$[0]\"\n                                                            }\n                                                        },\n                                                        \"DefaultInputSettingsImageProperties\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"Parameters\": {\n                                                                \"ImageProperties\": {}\n                                                            },\n                                                            \"Next\": \"ParallelCheckInputSettingsImageProperties\"\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"InputPath\": \"$.Settings\",\n                                            \"ResultSelector\": {\n                                                \"GeneralLabels.$\": \"$[0]\",\n                                                \"ImageProperties.$\": \"$[1]\"\n                                            }\n                                        },\n                                        \"DefaultInputSettings\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"Settings\": {}\n                                            },\n                                            \"Next\": \"ParallelCheckInputSettings\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"DetectLabels\": {\n                                    \"Features.$\": \"$[0]\",\n                                    \"MaxLabels.$\": \"$[1]\",\n                                    \"MinConfidence.$\": \"$[2]\",\n                                    \"Settings.$\": \"$[3]\"\n                                }\n                            },\n                            \"InputPath\": \"$.DetectFaces\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckInputS3\",\n                    \"States\": {\n                        \"CheckInputS3\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.S3\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckInputS3\"\n                                }\n                            ],\n                            \"Default\": \"FailCheckS3Input\"\n                        },\n                        \"ParallelCheckInputS3\": {\n                            \"Type\": \"Parallel\",\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputBucket\",\n                                    \"States\": {\n                                        \"CheckInputBucket\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Bucket\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputBucketName\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucket\"\n                                        },\n                                        \"CheckInputBucketName\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"HeadBucket\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucketName\",\n                                            \"InputPath\": \"$.Bucket\"\n                                        },\n                                        \"HeadBucket\": {\n                                            \"Type\": \"Task\",\n                                            \"Parameters\": {\n                                                \"Bucket.$\": \"$.Name\"\n                                            },\n                                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headBucket\",\n                                            \"Catch\": [\n                                                {\n                                                    \"ErrorEquals\": [\n                                                        \"States.TaskFailed\"\n                                                    ],\n                                                    \"Next\": \"FailHeadBucket\"\n                                                }\n                                            ],\n                                            \"ResultPath\": \"$.Output\",\n                                            \"Next\": \"PassHeadBucket\"\n                                        },\n                                        \"PassHeadBucket\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"AccessPointAlias.$\": \"$.Output.AccessPointAlias\",\n                                                \"Name.$\": \"$.Name\",\n                                                \"Region.$\": \"$.Output.BucketRegion\"\n                                            }\n                                        },\n                                        \"FailHeadBucket\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucketName\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucket\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputObject\",\n                                    \"States\": {\n                                        \"CheckInputObject\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Object\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputObject\"\n                                        },\n                                        \"CheckInputKey\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputKey\",\n                                            \"InputPath\": \"$.Object\"\n                                        },\n                                        \"PassInputKey\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckInputKey\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputObject\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.S3\",\n                            \"ResultSelector\": {\n                                \"Bucket.$\": \"$[0]\",\n                                \"Object.$\": \"$[1]\"\n                            },\n                            \"Next\": \"HeadObject\"\n                        },\n                        \"HeadObject\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\"\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headObject\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailHeadObject\"\n                                }\n                            ],\n                            \"Next\": \"PassHeadObject\"\n                        },\n                        \"PassHeadObject\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            },\n                            \"Next\": \"GetObjectAttributes\"\n                        },\n                        \"GetObjectAttributes\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\",\n                                \"ObjectAttributes\": [\n                                    \"Checksum\",\n                                    \"ETag\",\n                                    \"ObjectParts\",\n                                    \"ObjectSize\",\n                                    \"StorageClass\"\n                                ]\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:getObjectAttributes\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailGetObjectAttributes\"\n                                }\n                            ],\n                            \"Next\": \"PassGetObjectAttributes\"\n                        },\n                        \"PassGetObjectAttributes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            }\n                        },\n                        \"FailGetObjectAttributes\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailHeadObject\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailCheckS3Input\": {\n                            \"Type\": \"Fail\"\n                        }\n                    }\n                }\n            ],\n            \"Next\": \"DetectLabels\",\n            \"ResultSelector\": {\n                \"Rekognition.$\": \"$[0]\",\n                \"S3.$\": \"$[1]\"\n            }\n        },\n        \"DetectLabels\": {\n            \"Type\": \"Task\",\n            \"Parameters\": {\n                \"Features.$\": \"$.Rekognition.DetectLabels.Features\",\n                \"Image\": {\n                    \"S3Object\": {\n                        \"Bucket.$\": \"$.S3.Bucket.Name\",\n                        \"Name.$\": \"$.S3.Object.Key\"\n                    }\n                },\n                \"MaxLabels.$\": \"$.Rekognition.DetectLabels.MinConfidence\",\n                \"Settings.$\": \"$.Rekognition.DetectLabels.Settings\"\n            },\n            \"Resource\": \"arn:aws:states:::aws-sdk:rekognition:detectLabels\",\n            \"Next\": \"ParallelCheckOutputDetectLabels\",\n            \"Catch\": [\n                {\n                    \"ErrorEquals\": [\n                        \"States.TaskFailed\"\n                    ],\n                    \"Next\": \"FailDetectLabels\"\n                }\n            ],\n            \"ResultPath\": \"$.Output\"\n        },\n        \"ParallelCheckOutputDetectLabels\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckOutputImageProperties\",\n                    \"States\": {\n                        \"CheckOutputImageProperties\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ImageProperties\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckOutputImageProperties\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputImageProperties\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"ParallelCheckOutputImageProperties\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckOutputImagePropertiesBackground\",\n                                    \"States\": {\n                                        \"CheckOutputImagePropertiesBackground\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Background\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"ParallelOutputImagePropertiesBackground\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputImagePropertiesBackground\"\n                                        },\n                                        \"ParallelOutputImagePropertiesBackground\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckOutputImagePropertiesBackgroundDominantColors\",\n                                                    \"States\": {\n                                                        \"CheckOutputImagePropertiesBackgroundDominantColors\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"Variable\": \"$.DominantColors\",\n                                                                    \"IsPresent\": true,\n                                                                    \"Next\": \"PassOutputImagePropertiesBackgroundDominantColors\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultOutputImagePropertiesBackgroundDominantColors\"\n                                                        },\n                                                        \"PassOutputImagePropertiesBackgroundDominantColors\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.DominantColors\"\n                                                        },\n                                                        \"DefaultOutputImagePropertiesBackgroundDominantColors\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"Parameters\": {\n                                                                \"DominantColors\": null\n                                                            },\n                                                            \"OutputPath\": \"$.DominantColors\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckOutputImagePropertiesBackgroundQuality\",\n                                                    \"States\": {\n                                                        \"CheckOutputImagePropertiesBackgroundQuality\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"Variable\": \"$.Quality\",\n                                                                    \"IsPresent\": true,\n                                                                    \"Next\": \"PassOutputImagePropertiesBackgroundQuality\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultOutputImagePropertiesBackgroundQuality\"\n                                                        },\n                                                        \"PassOutputImagePropertiesBackgroundQuality\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.Quality\"\n                                                        },\n                                                        \"DefaultOutputImagePropertiesBackgroundQuality\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"Parameters\": {\n                                                                \"Quality\": null\n                                                            },\n                                                            \"OutputPath\": \"$.Quality\"\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"InputPath\": \"$.Background\",\n                                            \"ResultSelector\": {\n                                                \"DominantColors.$\": \"$[0]\",\n                                                \"Quality.$\": \"$[1]\"\n                                            }\n                                        },\n                                        \"DefaultOutputImagePropertiesBackground\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"Background\": null\n                                            },\n                                            \"OutputPath\": \"$.Background\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckOutputImagePropertiesDominantColors\",\n                                    \"States\": {\n                                        \"CheckOutputImagePropertiesDominantColors\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.DominantColors\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassOutputImagePropertiesDominantColors\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputImagePropertiesDominantColors\"\n                                        },\n                                        \"PassOutputImagePropertiesDominantColors\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.DominantColors\"\n                                        },\n                                        \"DefaultOutputImagePropertiesDominantColors\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"DominantColors\": []\n                                            },\n                                            \"OutputPath\": \"$.DominantColors\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckOutputImagePropertiesForeground\",\n                                    \"States\": {\n                                        \"CheckOutputImagePropertiesForeground\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Foreground\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"ParallelCheckOutputImagePropertiesForeground\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputImagePropertiesForeground\"\n                                        },\n                                        \"ParallelCheckOutputImagePropertiesForeground\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckOutputImagePropertiesForegroundDominantColors\",\n                                                    \"States\": {\n                                                        \"CheckOutputImagePropertiesForegroundDominantColors\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"Variable\": \"$.DominatColors\",\n                                                                    \"IsPresent\": true,\n                                                                    \"Next\": \"PassOutputImagePropertiesForegroundDominantColors\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultOutputImagePropertiesForegroundDominantColors\"\n                                                        },\n                                                        \"PassOutputImagePropertiesForegroundDominantColors\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.DominantColors\"\n                                                        },\n                                                        \"DefaultOutputImagePropertiesForegroundDominantColors\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"Parameters\": {\n                                                                \"DominantColors\": null\n                                                            },\n                                                            \"OutputPath\": \"$.DominantColors\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckOutputImagePropertiesForegroundQuality\",\n                                                    \"States\": {\n                                                        \"CheckOutputImagePropertiesForegroundQuality\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"Variable\": \"$.Quality\",\n                                                                    \"IsPresent\": true,\n                                                                    \"Next\": \"PassCheckOutputImagePropertiesForegroundQuality\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultCheckOutputImagePropertiesForegroundQuality\"\n                                                        },\n                                                        \"PassCheckOutputImagePropertiesForegroundQuality\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.Quality\"\n                                                        },\n                                                        \"DefaultCheckOutputImagePropertiesForegroundQuality\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"Parameters\": {\n                                                                \"Quality\": null\n                                                            },\n                                                            \"OutputPath\": \"$.Quality\"\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"InputPath\": \"$.Foreground\",\n                                            \"ResultSelector\": {\n                                                \"DominantColors.$\": \"$[0]\",\n                                                \"Quality.$\": \"$[1]\"\n                                            }\n                                        },\n                                        \"DefaultOutputImagePropertiesForeground\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"Foreground\": null\n                                            },\n                                            \"OutputPath\": \"$.Foreground\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckOutputImagePropertiesQuality\",\n                                    \"States\": {\n                                        \"CheckOutputImagePropertiesQuality\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Quality\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassOutputImagePropertiesQuality\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputImagePropertiesQuality\"\n                                        },\n                                        \"PassOutputImagePropertiesQuality\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.Quality\"\n                                        },\n                                        \"DefaultOutputImagePropertiesQuality\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"Quality\": null\n                                            },\n                                            \"OutputPath\": \"$.Quality\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.ImageProperties\",\n                            \"ResultSelector\": {\n                                \"Background.$\": \"$[0]\",\n                                \"DominantColors.$\": \"$[1]\",\n                                \"Foreground.$\": \"$[2]\",\n                                \"Quality.$\": \"$[3]\"\n                            }\n                        },\n                        \"DefaultOutputImageProperties\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"ImageProperties\": {}\n                            },\n                            \"End\": true\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputLabelModelVersion\",\n                    \"States\": {\n                        \"CheckOutputLabelModelVersion\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.LabelModelVersion\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputLabelModelVersion\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputLabelModelVersion\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputLabelModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.LabelModelVersion\"\n                        },\n                        \"DefaultOutputLabelModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"LabelModelVersion\": null\n                            },\n                            \"OutputPath\": \"$.LabelModelVersion\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputLabels\",\n                    \"States\": {\n                        \"CheckOutputLabels\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.Labels\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"MapOutputLabels\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputLabels\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"MapOutputLabels\": {\n                            \"Type\": \"Map\",\n                            \"ItemProcessor\": {\n                                \"ProcessorConfig\": {\n                                    \"Mode\": \"INLINE\"\n                                },\n                                \"StartAt\": \"ParallelCheckOutputLabel\",\n                                \"States\": {\n                                    \"ParallelCheckOutputLabel\": {\n                                        \"Type\": \"Parallel\",\n                                        \"End\": true,\n                                        \"Branches\": [\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelAliases\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelAliases\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Aliases\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputLabelAliases\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelAliases\"\n                                                    },\n                                                    \"PassOutputLabelAliases\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Aliases\"\n                                                    },\n                                                    \"DefaultOutputLabelAliases\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Aliases\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Aliases\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelCategories\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelCategories\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Categories\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputLabelCategories\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelCategories\"\n                                                    },\n                                                    \"PassOutputLabelCategories\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Categories\"\n                                                    },\n                                                    \"DefaultOutputLabelCategories\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Categories\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Categories\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelConfidence\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelConfidence\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Confidence\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputLabelConfidence\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelConfidence\"\n                                                    },\n                                                    \"PassOutputLabelConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Confidence\"\n                                                    },\n                                                    \"DefaultOutputLabelConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Confidence\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Confidence\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelInstances\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelInstances\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Instances\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"MapOutputLabelInstances\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelInstances\"\n                                                    },\n                                                    \"MapOutputLabelInstances\": {\n                                                        \"Type\": \"Map\",\n                                                        \"ItemProcessor\": {\n                                                            \"ProcessorConfig\": {\n                                                                \"Mode\": \"INLINE\"\n                                                            },\n                                                            \"StartAt\": \"ParallelCheckOutputLabelInstance\",\n                                                            \"States\": {\n                                                                \"ParallelCheckOutputLabelInstance\": {\n                                                                    \"Type\": \"Parallel\",\n                                                                    \"End\": true,\n                                                                    \"Branches\": [\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputLabelInstanceBoundingBox\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputLabelInstanceBoundingBox\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.BoundingBox\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"PassOutputLabelInstanceBoundingBox\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputLabelInstanceBoundingBox\"\n                                                                                },\n                                                                                \"PassOutputLabelInstanceBoundingBox\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"InputPath\": \"$.BoundingBox\"\n                                                                                },\n                                                                                \"DefaultOutputLabelInstanceBoundingBox\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"BoundingBox\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.BoundingBox\"\n                                                                                }\n                                                                            }\n                                                                        },\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputLabelInstanceConfidence\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputLabelInstanceConfidence\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.Confidence\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"PassOutputLabelInstanceConfidence\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputLabelInstanceConfidence\"\n                                                                                },\n                                                                                \"PassOutputLabelInstanceConfidence\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"InputPath\": \"$.Confidence\"\n                                                                                },\n                                                                                \"DefaultOutputLabelInstanceConfidence\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"Confidence\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.Confidence\"\n                                                                                }\n                                                                            }\n                                                                        },\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputLabelInstanceDominantColors\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputLabelInstanceDominantColors\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.DominantColors\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"PassOutputLabelInstanceDominantColors\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputLabelInstanceDominantColors\"\n                                                                                },\n                                                                                \"PassOutputLabelInstanceDominantColors\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"InputPath\": \"$.DominantColors\"\n                                                                                },\n                                                                                \"DefaultOutputLabelInstanceDominantColors\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"DominantColors\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.DominantColors\"\n                                                                                }\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"ResultSelector\": {\n                                                                        \"BoundingBox.$\": \"$[0]\",\n                                                                        \"Confidence.$\": \"$[1]\",\n                                                                        \"DominantColors.$\": \"$[2]\"\n                                                                    }\n                                                                }\n                                                            }\n                                                        },\n                                                        \"End\": true,\n                                                        \"ItemsPath\": \"$.Instances\"\n                                                    },\n                                                    \"DefaultOutputLabelInstances\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Instances\": null\n                                                        }\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelName\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelName\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Name\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputLabelName\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelName\"\n                                                    },\n                                                    \"PassOutputLabelName\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Name\"\n                                                    },\n                                                    \"DefaultOutputLabelName\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Name\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Name\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelParents\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelParents\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Parents\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputLabelParents\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelParents\"\n                                                    },\n                                                    \"PassOutputLabelParents\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Parents\"\n                                                    },\n                                                    \"DefaultOutputLabelParents\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Parents\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Parents\"\n                                                    }\n                                                }\n                                            }\n                                        ],\n                                        \"ResultSelector\": {\n                                            \"Aliases.$\": \"$[0]\",\n                                            \"Categories.$\": \"$[1]\",\n                                            \"Confidence.$\": \"$[2]\",\n                                            \"Name.$\": \"$[3]\",\n                                            \"Parents.$\": \"$[4]\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"End\": true,\n                            \"ItemsPath\": \"$.Labels\"\n                        },\n                        \"DefaultOutputLabels\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Labels\": null\n                            },\n                            \"OutputPath\": \"$.Labels\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputOrientationCorrection\",\n                    \"States\": {\n                        \"CheckOutputOrientationCorrection\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.OrientationCorrection\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOrientationCorrection\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputOrientationCorrection\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.OrientationCorrection\"\n                        },\n                        \"DefaultOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"OrientationCorrection\": null\n                            },\n                            \"Next\": \"PassOrientationCorrection\"\n                        }\n                    }\n                }\n            ],\n            \"ResultSelector\": {\n                \"ImageProperties.$\": \"$[0]\",\n                \"LabelModelVersion.$\": \"$[1]\",\n                \"Labels.$\": \"$[2]\",\n                \"OrientationCorrection.$\": \"$[3]\"\n            },\n            \"ResultPath\": \"$.Output\",\n            \"Next\": \"StateMachineOutput\"\n        },\n        \"StateMachineOutput\": {\n            \"Type\": \"Pass\",\n            \"Parameters\": {\n                \"DetectLabels\": {\n                    \"CreatedAt.$\": \"$$.Execution.StartTime\",\n                    \"Id.$\": \"$.S3.Object.ETag\",\n                    \"ImageProperties.$\": \"$.Output.ImageProperties\",\n                    \"LabelModelVersion.$\": \"$.Output.LabelModelVersion\",\n                    \"Labels.$\": \"$.Output.Labels\",\n                    \"OrientationCorrection.$\": \"$.Output.OrientationCorrection\"\n                },\n                \"Execution\": {\n                    \"Id.$\": \"$$.Execution.Id\",\n                    \"Name.$\": \"$$.Execution.Name\",\n                    \"StartTime.$\": \"$$.Execution.StartTime\"\n                },\n                \"S3.$\": \"$.S3\",\n                \"StateMachine.$\": \"$$.StateMachine\"\n            },\n            \"Next\": \"Success\"\n        },\n        \"Success\": {\n            \"Type\": \"Succeed\"\n        },\n        \"FailDetectLabels\": {\n            \"Type\": \"Fail\"\n        }\n    }\n}\n","logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-detect-labels","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"sensitive_values":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}},{"address":"aws_sfn_state_machine.detect_moderation_labels","mode":"managed","type":"aws_sfn_state_machine","name":"detect_moderation_labels","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"definition":"{\n    \"StartAt\": \"CheckInvoker\",\n    \"States\": {\n        \"CheckInvoker\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n                {\n                    \"Variable\": \"$.StatePayload\",\n                    \"IsPresent\": true,\n                    \"Next\": \"InvokerStateMachine\"\n                }\n            ],\n            \"Default\": \"Fail\"\n        },\n        \"InvokerStateMachine\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"ParallelCheckInput\",\n            \"InputPath\": \"$.StatePayload\"\n        },\n        \"Fail\": {\n            \"Type\": \"Fail\"\n        },\n        \"ParallelCheckInput\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckInputRekognition\",\n                    \"States\": {\n                        \"CheckInputRekognition\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.Rekognition\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.Rekognition\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"CheckInputDetectModerationLabels\"\n                                }\n                            ],\n                            \"Default\": \"DefaultInputRekognition\"\n                        },\n                        \"DefaultInputRekognition\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Rekognition\": {}\n                            },\n                            \"Next\": \"CheckInputDetectModerationLabels\"\n                        },\n                        \"CheckInputDetectModerationLabels\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.DetectModerationLabels\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.DetectModerationLabels\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"ParallelCheckInputDetectModerationLabels\"\n                                }\n                            ],\n                            \"InputPath\": \"$.Rekognition\",\n                            \"Default\": \"DefaultInputDetectModerationLabels\"\n                        },\n                        \"DefaultInputDetectModerationLabels\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"DetectModerationLabels\": {}\n                            },\n                            \"Next\": \"ParallelCheckInputDetectModerationLabels\"\n                        },\n                        \"ParallelCheckInputDetectModerationLabels\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputHumanLoopConfig\",\n                                    \"States\": {\n                                        \"CheckInputHumanLoopConfig\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.HumanLoopConfig\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.HumanLoopConfig\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"ParallelCheckHumanLoopConfig\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputHumanLoopConfig\"\n                                        },\n                                        \"ParallelCheckHumanLoopConfig\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckInputHumanLoopConfigDataAttributes\",\n                                                    \"States\": {\n                                                        \"CheckInputHumanLoopConfigDataAttributes\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.DataAttributes\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Not\": {\n                                                                                \"Variable\": \"$.DataAttributes\",\n                                                                                \"IsNull\": true\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"ParallelCheckInputHumanLoopConfigDataAttributes\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultInputHumanLoopConfigDataAttributes\"\n                                                        },\n                                                        \"ParallelCheckInputHumanLoopConfigDataAttributes\": {\n                                                            \"Type\": \"Parallel\",\n                                                            \"End\": true,\n                                                            \"Branches\": [\n                                                                {\n                                                                    \"StartAt\": \"CheckInputHumanLoopConfigDataAttributesContentClassifiers\",\n                                                                    \"States\": {\n                                                                        \"CheckInputHumanLoopConfigDataAttributesContentClassifiers\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.ContentClassifiers\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Not\": {\n                                                                                                \"Variable\": \"$.ContentClassifiers\",\n                                                                                                \"IsNull\": true\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"MapInputHumanLoopConfigDataAttributesContentClassifiers\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultInputHumanLoopConfigDataAttributesContentClassifiers\"\n                                                                        },\n                                                                        \"MapInputHumanLoopConfigDataAttributesContentClassifiers\": {\n                                                                            \"Type\": \"Map\",\n                                                                            \"ItemProcessor\": {\n                                                                                \"ProcessorConfig\": {\n                                                                                    \"Mode\": \"INLINE\"\n                                                                                },\n                                                                                \"StartAt\": \"CheckValueHumanLoopConfigDataAttributesContentClassifier\",\n                                                                                \"States\": {\n                                                                                    \"CheckValueHumanLoopConfigDataAttributesContentClassifier\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"Variable\": \"$\",\n                                                                                                \"IsString\": true,\n                                                                                                \"Next\": \"PassValueHumanLoopConfigDataAttributesContentClassifier\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckValueHumanLoopConfigDataAttributesContentClassifier\"\n                                                                                    },\n                                                                                    \"PassValueHumanLoopConfigDataAttributesContentClassifier\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckValueHumanLoopConfigDataAttributesContentClassifier\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            \"End\": true,\n                                                                            \"ItemsPath\": \"$.ContentClassifiers\"\n                                                                        },\n                                                                        \"DefaultInputHumanLoopConfigDataAttributesContentClassifiers\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Next\": \"MapInputHumanLoopConfigDataAttributesContentClassifiers\",\n                                                                            \"Parameters\": {\n                                                                                \"ContentClassifiers\": []\n                                                                            }\n                                                                        }\n                                                                    }\n                                                                }\n                                                            ],\n                                                            \"ResultSelector\": {\n                                                                \"ContentClassifiers.$\": \"$[0]\"\n                                                            },\n                                                            \"InputPath\": \"$.DataAttributes\"\n                                                        },\n                                                        \"DefaultInputHumanLoopConfigDataAttributes\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"Parameters\": {\n                                                                \"DataAttributes\": {}\n                                                            },\n                                                            \"Next\": \"ParallelCheckInputHumanLoopConfigDataAttributes\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputHumanLoopConfigFlowDefinitionArn\",\n                                                    \"States\": {\n                                                        \"CheckInputHumanLoopConfigFlowDefinitionArn\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.FlowDefinitionArn\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Variable\": \"$.FlowDefinitionArn\",\n                                                                            \"IsString\": true\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"PassInputHumanLoopConfigFlowDefinitionArn\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckInputHumanLoopConfigFlowDefinitionArn\"\n                                                        },\n                                                        \"PassInputHumanLoopConfigFlowDefinitionArn\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.DefinitionArn\"\n                                                        },\n                                                        \"FailCheckInputHumanLoopConfigFlowDefinitionArn\": {\n                                                            \"Type\": \"Fail\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputHumanLoopConfigHumanLoopName\",\n                                                    \"States\": {\n                                                        \"CheckInputHumanLoopConfigHumanLoopName\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.HumanLoopName\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Variable\": \"$.HumanLoopName\",\n                                                                            \"IsString\": true\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"PassInputHumanLoopConfigHumanLoopName\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckInputHumanLoopConfigHumanLoopName\"\n                                                        },\n                                                        \"PassInputHumanLoopConfigHumanLoopName\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.HumanLoopName\"\n                                                        },\n                                                        \"FailCheckInputHumanLoopConfigHumanLoopName\": {\n                                                            \"Type\": \"Fail\"\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"ResultSelector\": {\n                                                \"DataAttributes.$\": \"$[0]\",\n                                                \"FlowDefinitionArn.$\": \"$[1]\",\n                                                \"HumanLoopName.$\": \"$[2]\"\n                                            },\n                                            \"InputPath\": \"$.HumanLoopConfig\"\n                                        },\n                                        \"DefaultInputHumanLoopConfig\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"HumanLoopConfig\": null\n                                            },\n                                            \"End\": true\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputMinConfidence\",\n                                    \"States\": {\n                                        \"CheckInputMinConfidence\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.MinConfidence\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.MinConfidence\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"CheckValueMinConfidence\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputMinConfidence\"\n                                        },\n                                        \"CheckValueMinConfidence\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$\",\n                                                            \"NumericGreaterThanEquals\": 0\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$\",\n                                                            \"NumericLessThanEquals\": 100\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassValueMinConfidence\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckValueMinConfidence\",\n                                            \"InputPath\": \"$.MinConfidence\"\n                                        },\n                                        \"PassValueMinConfidence\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckValueMinConfidence\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"DefaultInputMinConfidence\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"MinConfidence\": 50\n                                            },\n                                            \"Next\": \"CheckValueMinConfidence\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputProjectVersion\",\n                                    \"States\": {\n                                        \"CheckInputProjectVersion\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.ProjectVersion\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassInputProjectVersion\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputProjectVersion\"\n                                        },\n                                        \"PassInputProjectVersion\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.ProjectVersion\"\n                                        },\n                                        \"DefaultInputProjectVersion\": {\n                                            \"Type\": \"Pass\",\n                                            \"Next\": \"PassInputProjectVersion\",\n                                            \"Parameters\": {\n                                                \"ProjectVersion\": null\n                                            }\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"DetectModerationLabels\": {\n                                    \"HumanLoopConfig.$\": \"$[0]\",\n                                    \"MinConfidence.$\": \"$[1]\",\n                                    \"ProjectVersion.$\": \"$[2]\"\n                                }\n                            },\n                            \"InputPath\": \"$.DetectModerationLabels\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckInputS3\",\n                    \"States\": {\n                        \"CheckInputS3\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.S3\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckInputS3\"\n                                }\n                            ],\n                            \"Default\": \"FailCheckS3Input\"\n                        },\n                        \"ParallelCheckInputS3\": {\n                            \"Type\": \"Parallel\",\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputBucket\",\n                                    \"States\": {\n                                        \"CheckInputBucket\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Bucket\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputBucketName\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucket\"\n                                        },\n                                        \"CheckInputBucketName\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"HeadBucket\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucketName\",\n                                            \"InputPath\": \"$.Bucket\"\n                                        },\n                                        \"HeadBucket\": {\n                                            \"Type\": \"Task\",\n                                            \"Parameters\": {\n                                                \"Bucket.$\": \"$.Name\"\n                                            },\n                                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headBucket\",\n                                            \"Catch\": [\n                                                {\n                                                    \"ErrorEquals\": [\n                                                        \"States.TaskFailed\"\n                                                    ],\n                                                    \"Next\": \"FailHeadBucket\"\n                                                }\n                                            ],\n                                            \"ResultPath\": \"$.Output\",\n                                            \"Next\": \"PassHeadBucket\"\n                                        },\n                                        \"PassHeadBucket\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"AccessPointAlias.$\": \"$.Output.AccessPointAlias\",\n                                                \"Name.$\": \"$.Name\",\n                                                \"Region.$\": \"$.Output.BucketRegion\"\n                                            }\n                                        },\n                                        \"FailHeadBucket\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucketName\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucket\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputObject\",\n                                    \"States\": {\n                                        \"CheckInputObject\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Object\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputObject\"\n                                        },\n                                        \"CheckInputKey\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputKey\",\n                                            \"InputPath\": \"$.Object\"\n                                        },\n                                        \"PassInputKey\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckInputKey\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputObject\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.S3\",\n                            \"ResultSelector\": {\n                                \"Bucket.$\": \"$[0]\",\n                                \"Object.$\": \"$[1]\"\n                            },\n                            \"Next\": \"HeadObject\"\n                        },\n                        \"HeadObject\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\"\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headObject\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailHeadObject\"\n                                }\n                            ],\n                            \"Next\": \"PassHeadObject\"\n                        },\n                        \"PassHeadObject\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            },\n                            \"Next\": \"GetObjectAttributes\"\n                        },\n                        \"GetObjectAttributes\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\",\n                                \"ObjectAttributes\": [\n                                    \"Checksum\",\n                                    \"ETag\",\n                                    \"ObjectParts\",\n                                    \"ObjectSize\",\n                                    \"StorageClass\"\n                                ]\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:getObjectAttributes\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailGetObjectAttributes\"\n                                }\n                            ],\n                            \"Next\": \"PassGetObjectAttributes\"\n                        },\n                        \"PassGetObjectAttributes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            }\n                        },\n                        \"FailGetObjectAttributes\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailHeadObject\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailCheckS3Input\": {\n                            \"Type\": \"Fail\"\n                        }\n                    }\n                }\n            ],\n            \"Next\": \"DetectModerationLabels\",\n            \"ResultSelector\": {\n                \"Rekognition.$\": \"$[0]\",\n                \"S3.$\": \"$[1]\"\n            }\n        },\n        \"DetectModerationLabels\": {\n            \"Type\": \"Task\",\n            \"Parameters\": {\n                \"Image\": {\n                    \"S3Object\": {\n                        \"Bucket.$\": \"$.S3.Bucket.Name\",\n                        \"Name.$\": \"$.S3.Object.Key\"\n                    }\n                }\n            },\n            \"Resource\": \"arn:aws:states:::aws-sdk:rekognition:detectModerationLabels\",\n            \"Next\": \"ParallelCheckOutputDetectModerationLabels\",\n            \"ResultPath\": \"$.Output\",\n            \"Catch\": [\n                {\n                    \"ErrorEquals\": [\n                        \"States.TaskFailed\"\n                    ],\n                    \"Next\": \"FailDetectModerationLabels\"\n                }\n            ]\n        },\n        \"ParallelCheckOutputDetectModerationLabels\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckOutputContentTypes\",\n                    \"States\": {\n                        \"CheckOutputContentTypes\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ContentTypes\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputContentTypes\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputContentTypes\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputContentTypes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true\n                        },\n                        \"DefaultOutputContentTypes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"ContentTypes\": null\n                            }\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputHumanLoopActivationOutput\",\n                    \"States\": {\n                        \"CheckOutputHumanLoopActivationOutput\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.HumanLoopActivationOutput\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputHumanLoopActivationOutput\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputHumanLoopActivationOutput\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputHumanLoopActivationOutput\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true\n                        },\n                        \"DefaultOutputHumanLoopActivationOutput\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"HumanLoopActivationOutput\": null\n                            },\n                            \"OutputPath\": \"$.HumanLoopActivationOutput\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputModerationLabels\",\n                    \"States\": {\n                        \"CheckOutputModerationLabels\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ModerationLabels\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputModerationLabels\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputModerationLabels\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputModerationLabels\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.ModerationLabels\"\n                        },\n                        \"DefaultOutputModerationLabels\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"ModerationLabels\": null\n                            },\n                            \"OutputPath\": \"$.ModerationLabels\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputModerationModelVersion\",\n                    \"States\": {\n                        \"CheckOutputModerationModelVersion\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ModerationModelVersion\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputModerationModelVersion\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputModerationModelVersion\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputModerationModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.ModerationModelVersion\"\n                        },\n                        \"DefaultOutputModerationModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"ModerationModelVersion\": null\n                            },\n                            \"OutputPath\": \"$.ModerationModelVersion\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputOrientationCorrection\",\n                    \"States\": {\n                        \"CheckOutputOrientationCorrection\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.OrientationCorrection\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOrientationCorrection\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputOrientationCorrection\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.OrientationCorrection\"\n                        },\n                        \"DefaultOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"OrientationCorrection\": null\n                            },\n                            \"Next\": \"PassOrientationCorrection\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputProjectVersion\",\n                    \"States\": {\n                        \"CheckOutputProjectVersion\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ProjectVersion\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputProjectVersion\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputProjectVersion\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputProjectVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.ProjectVersion\"\n                        },\n                        \"DefaultOutputProjectVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"ProjectVersion\": null\n                            },\n                            \"OutputPath\": \"$.ProjectVersion\"\n                        }\n                    }\n                }\n            ],\n            \"ResultSelector\": {\n                \"ContentTypes.$\": \"$[0]\",\n                \"HumanLoopActivationOutput.$\": \"$[1]\",\n                \"ModerationLabels.$\": \"$[2]\",\n                \"ModerationModelVersion.$\": \"$[3]\",\n                \"OrientationCorrection.$\": \"$[4]\",\n                \"ProjectVersion.$\": \"$[5]\"\n            },\n            \"ResultPath\": \"$.Output\",\n            \"Next\": \"StateMachineOutput\"\n        },\n        \"StateMachineOutput\": {\n            \"Type\": \"Pass\",\n            \"Parameters\": {\n                \"DetectModerationLabels\": {\n                    \"ContentTypes.$\": \"$.Output.ContentTypes\",\n                    \"CreatedAt.$\": \"$$.Execution.StartTime\",\n                    \"HumanLoopActivationOutput.$\": \"$.Output.HumanLoopActivationOutput\",\n                    \"Id.$\": \"$.S3.Object.ETag\",\n                    \"ModerationLabels.$\": \"$.Output.ModerationLabels\",\n                    \"ModerationModelVersion.$\": \"$.Output.ModerationModelVersion\",\n                    \"OrientationCorrection.$\": \"$.Output.OrientationCorrection\",\n                    \"ProjectVersion.$\": \"$.Output.ProjectVersion\"\n                },\n                \"Execution\": {\n                    \"Id.$\": \"$$.Execution.Id\",\n                    \"Name.$\": \"$$.Execution.Name\",\n                    \"StartTime.$\": \"$$.Execution.StartTime\"\n                },\n                \"S3.$\": \"$.S3\",\n                \"StateMachine.$\": \"$$.StateMachine\"\n            },\n            \"Next\": \"Success\"\n        },\n        \"Success\": {\n            \"Type\": \"Succeed\"\n        },\n        \"FailDetectModerationLabels\": {\n            \"Type\": \"Fail\"\n        }\n    }\n}\n","logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-detect-moderation-labels","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"sensitive_values":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}},{"address":"aws_sfn_state_machine.detect_protective_equipment","mode":"managed","type":"aws_sfn_state_machine","name":"detect_protective_equipment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"definition":"{\n    \"StartAt\": \"CheckInvoker\",\n    \"States\": {\n        \"CheckInvoker\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n                {\n                    \"Variable\": \"$.StatePayload\",\n                    \"IsPresent\": true,\n                    \"Next\": \"InvokerStateMachine\"\n                }\n            ],\n            \"Default\": \"Fail\"\n        },\n        \"InvokerStateMachine\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"ParallelCheckInput\",\n            \"InputPath\": \"$.StatePayload\"\n        },\n        \"Fail\": {\n            \"Type\": \"Fail\"\n        },\n        \"ParallelCheckInput\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckInputRekognition\",\n                    \"States\": {\n                        \"CheckInputRekognition\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.Rekognition\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.Rekognition\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"CheckInputDetectProtectiveEquipment\"\n                                }\n                            ],\n                            \"Default\": \"DefaultInputRekognition\"\n                        },\n                        \"DefaultInputRekognition\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Rekognition\": {}\n                            },\n                            \"Next\": \"CheckInputDetectProtectiveEquipment\"\n                        },\n                        \"CheckInputDetectProtectiveEquipment\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.DetectProtectiveEquipment\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.DetectProtectiveEquipment\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"ParallelCheckInputDetectProtectiveEquipment\"\n                                }\n                            ],\n                            \"InputPath\": \"$.Rekognition\",\n                            \"Default\": \"DefaultInputDetectProtectiveEquipment\"\n                        },\n                        \"DefaultInputDetectProtectiveEquipment\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"DetectProtectiveEquipment\": {}\n                            },\n                            \"Next\": \"ParallelCheckInputDetectProtectiveEquipment\"\n                        },\n                        \"ParallelCheckInputDetectProtectiveEquipment\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputSummarizationAttributes\",\n                                    \"States\": {\n                                        \"CheckInputSummarizationAttributes\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.SummarizationAttributes\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.SummarizationAttributes\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"ParallelCheckInputSummarizationAttributes\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputSummarizationAttributes\"\n                                        },\n                                        \"ParallelCheckInputSummarizationAttributes\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckInputSummarizationAttributesMinConfidence\",\n                                                    \"States\": {\n                                                        \"CheckInputSummarizationAttributesMinConfidence\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.MinConfidence\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Variable\": \"$.MinConfidence\",\n                                                                            \"IsNumeric\": true\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"CheckValueSummarizationAttributesMinConfidence\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultInputSummarizationAttributesMinConfidence\"\n                                                        },\n                                                        \"CheckValueSummarizationAttributesMinConfidence\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$\",\n                                                                            \"NumericGreaterThanEquals\": 0\n                                                                        },\n                                                                        {\n                                                                            \"Variable\": \"$\",\n                                                                            \"NumericLessThanEquals\": 100\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"PassValueSummarizationAttributesMinConfidence\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckValueSummarizationAttributesMinConfidence\",\n                                                            \"InputPath\": \"$.MinConfidence\"\n                                                        },\n                                                        \"PassValueSummarizationAttributesMinConfidence\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true\n                                                        },\n                                                        \"FailCheckValueSummarizationAttributesMinConfidence\": {\n                                                            \"Type\": \"Fail\"\n                                                        },\n                                                        \"DefaultInputSummarizationAttributesMinConfidence\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"Parameters\": {\n                                                                \"MinConfidence\": 50\n                                                            },\n                                                            \"Next\": \"CheckValueSummarizationAttributesMinConfidence\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputSummarizationAttributesRequiredEquipmentTypes\",\n                                                    \"States\": {\n                                                        \"CheckInputSummarizationAttributesRequiredEquipmentTypes\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.RequiredEquipmentTypes\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Not\": {\n                                                                                \"Variable\": \"$.RequiredEquipmentTypes\",\n                                                                                \"IsString\": true\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"MapInputSummarizationAttributesRequiredEquipmentTypes\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultInputSummarizationAttributesRequiredEquipmentTypes\"\n                                                        },\n                                                        \"MapInputSummarizationAttributesRequiredEquipmentTypes\": {\n                                                            \"Type\": \"Map\",\n                                                            \"ItemProcessor\": {\n                                                                \"ProcessorConfig\": {\n                                                                    \"Mode\": \"INLINE\"\n                                                                },\n                                                                \"StartAt\": \"CheckInputSummarizationAttributesRequiredEquipmentType\",\n                                                                \"States\": {\n                                                                    \"CheckInputSummarizationAttributesRequiredEquipmentType\": {\n                                                                        \"Type\": \"Choice\",\n                                                                        \"Choices\": [\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"IsString\": true,\n                                                                                \"Next\": \"PassInputSummarizationAttributesRequiredEquipmentType\"\n                                                                            }\n                                                                        ],\n                                                                        \"Default\": \"FailCheckInputSummarizationAttributesRequiredEquipmentType\"\n                                                                    },\n                                                                    \"PassInputSummarizationAttributesRequiredEquipmentType\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true\n                                                                    },\n                                                                    \"FailCheckInputSummarizationAttributesRequiredEquipmentType\": {\n                                                                        \"Type\": \"Fail\"\n                                                                    }\n                                                                }\n                                                            },\n                                                            \"End\": true,\n                                                            \"ItemsPath\": \"$.RequiredEquipmentTypes\"\n                                                        },\n                                                        \"DefaultInputSummarizationAttributesRequiredEquipmentTypes\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"Next\": \"MapInputSummarizationAttributesRequiredEquipmentTypes\",\n                                                            \"Parameters\": {\n                                                                \"RequiredEquipmentTypes\": []\n                                                            }\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"InputPath\": \"$.SummarizationAttributes\",\n                                            \"ResultSelector\": {\n                                                \"MinConfidence.$\": \"$[0]\",\n                                                \"RequiredEquipmentTypes.$\": \"$[1]\"\n                                            }\n                                        },\n                                        \"DefaultInputSummarizationAttributes\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"SummarizationAttributes\": {}\n                                            },\n                                            \"Next\": \"ParallelCheckInputSummarizationAttributes\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"DetectProtectiveEquipment\": {\n                                    \"SummarizationAttributes.$\": \"$[0]\"\n                                }\n                            },\n                            \"InputPath\": \"$.DetectProtectiveEquipment\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckInputS3\",\n                    \"States\": {\n                        \"CheckInputS3\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.S3\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckInputS3\"\n                                }\n                            ],\n                            \"Default\": \"FailCheckS3Input\"\n                        },\n                        \"ParallelCheckInputS3\": {\n                            \"Type\": \"Parallel\",\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputBucket\",\n                                    \"States\": {\n                                        \"CheckInputBucket\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Bucket\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputBucketName\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucket\"\n                                        },\n                                        \"CheckInputBucketName\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"HeadBucket\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucketName\",\n                                            \"InputPath\": \"$.Bucket\"\n                                        },\n                                        \"HeadBucket\": {\n                                            \"Type\": \"Task\",\n                                            \"Parameters\": {\n                                                \"Bucket.$\": \"$.Name\"\n                                            },\n                                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headBucket\",\n                                            \"Catch\": [\n                                                {\n                                                    \"ErrorEquals\": [\n                                                        \"States.TaskFailed\"\n                                                    ],\n                                                    \"Next\": \"FailHeadBucket\"\n                                                }\n                                            ],\n                                            \"ResultPath\": \"$.Output\",\n                                            \"Next\": \"PassHeadBucket\"\n                                        },\n                                        \"PassHeadBucket\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"AccessPointAlias.$\": \"$.Output.AccessPointAlias\",\n                                                \"Name.$\": \"$.Name\",\n                                                \"Region.$\": \"$.Output.BucketRegion\"\n                                            }\n                                        },\n                                        \"FailHeadBucket\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucketName\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucket\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputObject\",\n                                    \"States\": {\n                                        \"CheckInputObject\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Object\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputObject\"\n                                        },\n                                        \"CheckInputKey\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputKey\",\n                                            \"InputPath\": \"$.Object\"\n                                        },\n                                        \"PassInputKey\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckInputKey\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputObject\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.S3\",\n                            \"ResultSelector\": {\n                                \"Bucket.$\": \"$[0]\",\n                                \"Object.$\": \"$[1]\"\n                            },\n                            \"Next\": \"HeadObject\"\n                        },\n                        \"HeadObject\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\"\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headObject\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailHeadObject\"\n                                }\n                            ],\n                            \"Next\": \"PassHeadObject\"\n                        },\n                        \"PassHeadObject\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            },\n                            \"Next\": \"GetObjectAttributes\"\n                        },\n                        \"GetObjectAttributes\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\",\n                                \"ObjectAttributes\": [\n                                    \"Checksum\",\n                                    \"ETag\",\n                                    \"ObjectParts\",\n                                    \"ObjectSize\",\n                                    \"StorageClass\"\n                                ]\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:getObjectAttributes\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailGetObjectAttributes\"\n                                }\n                            ],\n                            \"Next\": \"PassGetObjectAttributes\"\n                        },\n                        \"PassGetObjectAttributes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            }\n                        },\n                        \"FailGetObjectAttributes\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailHeadObject\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailCheckS3Input\": {\n                            \"Type\": \"Fail\"\n                        }\n                    }\n                }\n            ],\n            \"Next\": \"DetectProtectiveEquipment\",\n            \"ResultSelector\": {\n                \"Rekognition.$\": \"$[0]\",\n                \"S3.$\": \"$[1]\"\n            }\n        },\n        \"DetectProtectiveEquipment\": {\n            \"Type\": \"Task\",\n            \"Parameters\": {\n                \"Image\": {\n                    \"S3Object\": {\n                        \"Bucket.$\": \"$.S3.Bucket.Name\",\n                        \"Name.$\": \"$.S3.Object.Key\"\n                    }\n                }\n            },\n            \"Resource\": \"arn:aws:states:::aws-sdk:rekognition:detectProtectiveEquipment\",\n            \"Next\": \"ParallelCheckOutputDetectProtectiveEquipment\",\n            \"Catch\": [\n                {\n                    \"ErrorEquals\": [\n                        \"States.TaskFailed\"\n                    ],\n                    \"Next\": \"FailDetectProtectiveEquipment\"\n                }\n            ],\n            \"ResultPath\": \"$.Output\"\n        },\n        \"ParallelCheckOutputDetectProtectiveEquipment\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckOutputPersons\",\n                    \"States\": {\n                        \"CheckOutputPersons\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.Persons\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"MapOutputPersons\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputPersons\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"MapOutputPersons\": {\n                            \"Type\": \"Map\",\n                            \"ItemProcessor\": {\n                                \"ProcessorConfig\": {\n                                    \"Mode\": \"INLINE\"\n                                },\n                                \"StartAt\": \"ParallelCheckOutputPerson\",\n                                \"States\": {\n                                    \"ParallelCheckOutputPerson\": {\n                                        \"Type\": \"Parallel\",\n                                        \"End\": true,\n                                        \"Branches\": [\n                                            {\n                                                \"StartAt\": \"CheckOutputPersonBodyParts\",\n                                                \"States\": {\n                                                    \"CheckOutputPersonBodyParts\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.BodyParts\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"MapOutputPersonBodyParts\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputPersonBodyParts\"\n                                                    },\n                                                    \"MapOutputPersonBodyParts\": {\n                                                        \"Type\": \"Map\",\n                                                        \"ItemProcessor\": {\n                                                            \"ProcessorConfig\": {\n                                                                \"Mode\": \"INLINE\"\n                                                            },\n                                                            \"StartAt\": \"ParallelCheckOutputPersonBodyPart\",\n                                                            \"States\": {\n                                                                \"ParallelCheckOutputPersonBodyPart\": {\n                                                                    \"Type\": \"Parallel\",\n                                                                    \"End\": true,\n                                                                    \"Branches\": [\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputPersonBodyPartConfidence\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputPersonBodyPartConfidence\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.Confidence\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"PassOutputPersonBodyPartConfidence\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputPersonBodyPartConfidence\"\n                                                                                },\n                                                                                \"PassOutputPersonBodyPartConfidence\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"InputPath\": \"$.Confidence\"\n                                                                                },\n                                                                                \"DefaultOutputPersonBodyPartConfidence\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"Confidence\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.Confidence\"\n                                                                                }\n                                                                            }\n                                                                        },\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputPersonBodyPartEquipmentDetections\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputPersonBodyPartEquipmentDetections\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.EquipmentDetections\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"MapOutputPersonBodyPartEquipmentDetections\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputPersonBodyPartEquipmentDetections\"\n                                                                                },\n                                                                                \"MapOutputPersonBodyPartEquipmentDetections\": {\n                                                                                    \"Type\": \"Map\",\n                                                                                    \"ItemProcessor\": {\n                                                                                        \"ProcessorConfig\": {\n                                                                                            \"Mode\": \"INLINE\"\n                                                                                        },\n                                                                                        \"StartAt\": \"ParallelCheckOutputPersonBodyPartEquipmentDetection\",\n                                                                                        \"States\": {\n                                                                                            \"ParallelCheckOutputPersonBodyPartEquipmentDetection\": {\n                                                                                                \"Type\": \"Parallel\",\n                                                                                                \"End\": true,\n                                                                                                \"Branches\": [\n                                                                                                    {\n                                                                                                        \"StartAt\": \"CheckOutputPersonBodyPartEquipmentDetectionBoundingBox\",\n                                                                                                        \"States\": {\n                                                                                                            \"CheckOutputPersonBodyPartEquipmentDetectionBoundingBox\": {\n                                                                                                                \"Type\": \"Choice\",\n                                                                                                                \"Choices\": [\n                                                                                                                    {\n                                                                                                                        \"Variable\": \"$.BoundingBox\",\n                                                                                                                        \"IsPresent\": true,\n                                                                                                                        \"Next\": \"PassOutputPersonBodyPartEquipmentDetectionBoundingBox\"\n                                                                                                                    }\n                                                                                                                ],\n                                                                                                                \"Default\": \"DefaultOutputPersonBodyPartEquipmentDetectionBoundingBox\"\n                                                                                                            },\n                                                                                                            \"PassOutputPersonBodyPartEquipmentDetectionBoundingBox\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"InputPath\": \"$.BoundingBox\"\n                                                                                                            },\n                                                                                                            \"DefaultOutputPersonBodyPartEquipmentDetectionBoundingBox\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"Parameters\": {\n                                                                                                                    \"BoundingBox\": null\n                                                                                                                },\n                                                                                                                \"OutputPath\": \"$.BoundingBox\"\n                                                                                                            }\n                                                                                                        }\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"StartAt\": \"CheckOutputPersonBodyPartEquipmentDetectionConfidence\",\n                                                                                                        \"States\": {\n                                                                                                            \"CheckOutputPersonBodyPartEquipmentDetectionConfidence\": {\n                                                                                                                \"Type\": \"Choice\",\n                                                                                                                \"Choices\": [\n                                                                                                                    {\n                                                                                                                        \"Variable\": \"$.Confidence\",\n                                                                                                                        \"IsPresent\": true,\n                                                                                                                        \"Next\": \"PassOutputPersonBodyPartEquipmentDetectionConfidence\"\n                                                                                                                    }\n                                                                                                                ],\n                                                                                                                \"Default\": \"DefaultOutputPersonBodyPartEquipmentDetectionConfidence\"\n                                                                                                            },\n                                                                                                            \"PassOutputPersonBodyPartEquipmentDetectionConfidence\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"InputPath\": \"$.Confidence\"\n                                                                                                            },\n                                                                                                            \"DefaultOutputPersonBodyPartEquipmentDetectionConfidence\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"Parameters\": {\n                                                                                                                    \"Confidence\": null\n                                                                                                                },\n                                                                                                                \"OutputPath\": \"$.Confidence\"\n                                                                                                            }\n                                                                                                        }\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"StartAt\": \"CheckOutputPersonBodyPartEquipmentDetectionCoversBodyPart\",\n                                                                                                        \"States\": {\n                                                                                                            \"CheckOutputPersonBodyPartEquipmentDetectionCoversBodyPart\": {\n                                                                                                                \"Type\": \"Choice\",\n                                                                                                                \"Choices\": [\n                                                                                                                    {\n                                                                                                                        \"Variable\": \"$.CoversBodyPart\",\n                                                                                                                        \"IsPresent\": true,\n                                                                                                                        \"Next\": \"PassOutputPersonBodyPartEquipmentDetectionCoversBodyPart\"\n                                                                                                                    }\n                                                                                                                ],\n                                                                                                                \"Default\": \"DefaultOutputPersonBodyPartEquipmentDetectionCoversBodyPart\"\n                                                                                                            },\n                                                                                                            \"PassOutputPersonBodyPartEquipmentDetectionCoversBodyPart\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"InputPath\": \"$.CoversBodyPart\"\n                                                                                                            },\n                                                                                                            \"DefaultOutputPersonBodyPartEquipmentDetectionCoversBodyPart\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"Parameters\": {\n                                                                                                                    \"CoversBodyPart\": null\n                                                                                                                },\n                                                                                                                \"OutputPath\": \"$.CoversBodyPart\"\n                                                                                                            }\n                                                                                                        }\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"StartAt\": \"CheckOutputPersonBodyPartEquipmentDetectionType\",\n                                                                                                        \"States\": {\n                                                                                                            \"CheckOutputPersonBodyPartEquipmentDetectionType\": {\n                                                                                                                \"Type\": \"Choice\",\n                                                                                                                \"Choices\": [\n                                                                                                                    {\n                                                                                                                        \"Variable\": \"$.Type\",\n                                                                                                                        \"IsPresent\": true,\n                                                                                                                        \"Next\": \"PassOutputPersonBodyPartEquipmentDetectionType\"\n                                                                                                                    }\n                                                                                                                ],\n                                                                                                                \"Default\": \"DefaultOutputPersonBodyPartEquipmentDetectionType\"\n                                                                                                            },\n                                                                                                            \"PassOutputPersonBodyPartEquipmentDetectionType\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"InputPath\": \"$.Type\"\n                                                                                                            },\n                                                                                                            \"DefaultOutputPersonBodyPartEquipmentDetectionType\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"Parameters\": {\n                                                                                                                    \"Type\": null\n                                                                                                                },\n                                                                                                                \"OutputPath\": \"$.Type\"\n                                                                                                            }\n                                                                                                        }\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"ResultSelector\": {\n                                                                                                    \"BoundingBox.$\": \"$[0]\",\n                                                                                                    \"Confidence.$\": \"$[1]\",\n                                                                                                    \"CoversBodyPart.$\": \"$[2]\",\n                                                                                                    \"Type.$\": \"$[3]\"\n                                                                                                }\n                                                                                            }\n                                                                                        }\n                                                                                    },\n                                                                                    \"End\": true,\n                                                                                    \"ItemsPath\": \"$.EquipmentDetections\"\n                                                                                },\n                                                                                \"DefaultOutputPersonBodyPartEquipmentDetections\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"EquipmentDetections\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.EquipmentDetections\"\n                                                                                }\n                                                                            }\n                                                                        },\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputPersonBodyPartName\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputPersonBodyPartName\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.Name\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"PassOutputPersonBodyPartName\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputPersonBodyPartName\"\n                                                                                },\n                                                                                \"PassOutputPersonBodyPartName\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"InputPath\": \"$.Name\"\n                                                                                },\n                                                                                \"DefaultOutputPersonBodyPartName\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"Name\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.Name\"\n                                                                                }\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"ResultSelector\": {\n                                                                        \"Confidence.$\": \"$[0]\",\n                                                                        \"EquipmentDetections.$\": \"$[1]\",\n                                                                        \"Name.$\": \"$[2]\"\n                                                                    }\n                                                                }\n                                                            }\n                                                        },\n                                                        \"End\": true,\n                                                        \"ItemsPath\": \"$.BodyParts\"\n                                                    },\n                                                    \"DefaultOutputPersonBodyParts\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"BodyParts\": null\n                                                        },\n                                                        \"OutputPath\": \"$.BodyParts\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputPersonBoundingBox\",\n                                                \"States\": {\n                                                    \"CheckOutputPersonBoundingBox\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.BoundingBox\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputPersonBoundingBox\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputPersonBoundingBox\"\n                                                    },\n                                                    \"PassOutputPersonBoundingBox\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.BoundingBox\"\n                                                    },\n                                                    \"DefaultOutputPersonBoundingBox\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"BoundingBox\": null\n                                                        },\n                                                        \"OutputPath\": \"$.BoundingBox\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputPersonConfidence\",\n                                                \"States\": {\n                                                    \"CheckOutputPersonConfidence\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Confidence\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputPersonConfidence\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputPersonConfidence\"\n                                                    },\n                                                    \"PassOutputPersonConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Confidence\"\n                                                    },\n                                                    \"DefaultOutputPersonConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Confidence\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Confidence\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputPersonId\",\n                                                \"States\": {\n                                                    \"CheckOutputPersonId\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Id\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputPersonId\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputPersonId\"\n                                                    },\n                                                    \"PassOutputPersonId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Id\"\n                                                    },\n                                                    \"DefaultOutputPersonId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Id\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Id\"\n                                                    }\n                                                }\n                                            }\n                                        ],\n                                        \"ResultSelector\": {\n                                            \"BodyParts.$\": \"$[0]\",\n                                            \"BoundingBox.$\": \"$[1]\",\n                                            \"Confidence.$\": \"$[2]\",\n                                            \"Id.$\": \"$[3]\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"End\": true,\n                            \"ItemsPath\": \"$.Persons\"\n                        },\n                        \"DefaultOutputPersons\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Persons\": null\n                            },\n                            \"OutputPath\": \"$.Persons\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputOrientationCorrection\",\n                    \"States\": {\n                        \"CheckOutputOrientationCorrection\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.OrientationCorrection\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputOrientationCorrection\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputOrientationCorrection\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.OrientationCorrection\"\n                        },\n                        \"DefaultOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"OrientationCorrection\": null\n                            },\n                            \"Next\": \"PassOutputOrientationCorrection\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputProtectiveEquipmentModelVersion\",\n                    \"States\": {\n                        \"CheckOutputProtectiveEquipmentModelVersion\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ProtectiveEquipmentModelVersion\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputProtectiveEquipmentModelVersion\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputProtectiveEquipmentModelVersion\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputProtectiveEquipmentModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.ProtectiveEquipmentModelVersion\"\n                        },\n                        \"DefaultOutputProtectiveEquipmentModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"ProtectiveEquipmentModelVersion\": null\n                            },\n                            \"OutputPath\": \"$.ProtectiveEquipmentModelVersion\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputSummary\",\n                    \"States\": {\n                        \"CheckOutputSummary\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.Summary\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckOutputSummary\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputSummary\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"ParallelCheckOutputSummary\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckOutputSummaryPersonsIndeterminate\",\n                                    \"States\": {\n                                        \"CheckOutputSummaryPersonsIndeterminate\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.PersonsIndeterminate\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassOutputSummaryPersonsIndeterminate\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputSummaryPersonsIndeterminate\"\n                                        },\n                                        \"PassOutputSummaryPersonsIndeterminate\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.PersonsIndeterminate\"\n                                        },\n                                        \"DefaultOutputSummaryPersonsIndeterminate\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"PersonsIndeterminate\": null\n                                            },\n                                            \"OutputPath\": \"$.PersonsIndeterminate\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckOutputSummaryPersonsWithoutRequiredEquipment\",\n                                    \"States\": {\n                                        \"CheckOutputSummaryPersonsWithoutRequiredEquipment\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.PersonsWithoutRequiredEquipment\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassOutputSummaryPersonsWithoutRequiredEquipment\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputSummaryPersonsWithoutRequiredEquipment\"\n                                        },\n                                        \"PassOutputSummaryPersonsWithoutRequiredEquipment\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.PersonsWithoutRequiredEquipment\"\n                                        },\n                                        \"DefaultOutputSummaryPersonsWithoutRequiredEquipment\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"PersonsWithoutRequiredEquipment\": null\n                                            },\n                                            \"OutputPath\": \"$.PersonsWithoutRequiredEquipment\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckOutputSummaryPersonsWithRequiredEquipment\",\n                                    \"States\": {\n                                        \"CheckOutputSummaryPersonsWithRequiredEquipment\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.PersonsWithRequiredEquipment\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassOutputSummaryPersonsWithRequiredEquipment\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputSummaryPersonsWithRequiredEquipment\"\n                                        },\n                                        \"PassOutputSummaryPersonsWithRequiredEquipment\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.PersonsWithRequiredEquipment\"\n                                        },\n                                        \"DefaultOutputSummaryPersonsWithRequiredEquipment\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"PersonsWithRequiredEquipment\": null\n                                            },\n                                            \"OutputPath\": \"$.PersonsWithRequiredEquipment\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"PersonsIndeterminate.$\": \"$[0]\",\n                                \"PersonsWithoutRequiredEquipment.$\": \"$[1]\",\n                                \"PersonsWithRequiredEquipment.$\": \"$[2]\"\n                            }\n                        },\n                        \"DefaultOutputSummary\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Summary\": null\n                            },\n                            \"OutputPath\": \"$.Summary\"\n                        }\n                    }\n                }\n            ],\n            \"ResultSelector\": {\n                \"Persons.$\": \"$[0]\",\n                \"OrientationCorrection.$\": \"$[1]\",\n                \"ProtectiveEquipmentModelVersion.$\": \"$[2]\",\n                \"Summary.$\": \"$[3]\"\n            },\n            \"ResultPath\": \"$.Output\",\n            \"Next\": \"StateMachineOutput\"\n        },\n        \"StateMachineOutput\": {\n            \"Type\": \"Pass\",\n            \"Parameters\": {\n                \"DetectProtectiveEquipment\": {\n                    \"CreatedAt.$\": \"$$.Execution.StartTime\",\n                    \"Id.$\": \"$.S3.Object.ETag\",\n                    \"OrientationCorrection.$\": \"$.Output.OrientationCorrection\",\n                    \"Persons.$\": \"$.Output.Persons\",\n                    \"ProtectiveEquipmentModelVersion.$\": \"$.Output.ProtectiveEquipmentModelVersion\",\n                    \"Summary.$\": \"$.Output.Summary\"\n                },\n                \"Execution\": {\n                    \"Id.$\": \"$$.Execution.Id\",\n                    \"Name.$\": \"$$.Execution.Name\",\n                    \"StartTime.$\": \"$$.Execution.StartTime\"\n                },\n                \"S3.$\": \"$.S3\",\n                \"StateMachine.$\": \"$$.StateMachine\"\n            },\n            \"Next\": \"Success\"\n        },\n        \"Success\": {\n            \"Type\": \"Succeed\"\n        },\n        \"FailDetectProtectiveEquipment\": {\n            \"Type\": \"Fail\"\n        }\n    }\n}\n","logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-detect-protective-equipment","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"sensitive_values":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}},{"address":"aws_sfn_state_machine.detect_text","mode":"managed","type":"aws_sfn_state_machine","name":"detect_text","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"definition":"{\n    \"StartAt\": \"CheckInvoker\",\n    \"States\": {\n        \"CheckInvoker\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n                {\n                    \"Variable\": \"$.StatePayload\",\n                    \"IsPresent\": true,\n                    \"Next\": \"InvokerStateMachine\"\n                }\n            ],\n            \"Default\": \"Fail\"\n        },\n        \"Fail\": {\n            \"Type\": \"Fail\"\n        },\n        \"InvokerStateMachine\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"ParallelCheckInput\",\n            \"InputPath\": \"$.StatePayload\"\n        },\n        \"ParallelCheckInput\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckInputRekognition\",\n                    \"States\": {\n                        \"CheckInputRekognition\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.Rekognition\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.Rekognition\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"CheckInputDetectText\"\n                                }\n                            ],\n                            \"Default\": \"DefaultInputRekognition\"\n                        },\n                        \"DefaultInputRekognition\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Rekognition\": {}\n                            },\n                            \"Next\": \"CheckInputDetectText\"\n                        },\n                        \"CheckInputDetectText\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.DetectText\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.DetectText\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"ParallelCheckInputDetectText\"\n                                }\n                            ],\n                            \"InputPath\": \"$.Rekognition\",\n                            \"Default\": \"DefaultInputDetectText\"\n                        },\n                        \"DefaultInputDetectText\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"DetectText\": {}\n                            },\n                            \"Next\": \"ParallelCheckInputDetectText\"\n                        },\n                        \"ParallelCheckInputDetectText\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputRegionsOfInterest\",\n                                    \"States\": {\n                                        \"CheckInputRegionsOfInterest\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.RegionsOfInterest\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.RegionsOfInterest\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"MapInputRegionsOfInterest\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputRegionsOfInterest\"\n                                        },\n                                        \"MapInputRegionsOfInterest\": {\n                                            \"Type\": \"Map\",\n                                            \"ItemProcessor\": {\n                                                \"ProcessorConfig\": {\n                                                    \"Mode\": \"INLINE\"\n                                                },\n                                                \"StartAt\": \"ParallelCheckInputRegionOfInterest\",\n                                                \"States\": {\n                                                    \"ParallelCheckInputRegionOfInterest\": {\n                                                        \"Type\": \"Parallel\",\n                                                        \"End\": true,\n                                                        \"Branches\": [\n                                                            {\n                                                                \"StartAt\": \"CheckInputRegionOfInterestBoundingBox\",\n                                                                \"States\": {\n                                                                    \"CheckInputRegionOfInterestBoundingBox\": {\n                                                                        \"Type\": \"Choice\",\n                                                                        \"Choices\": [\n                                                                            {\n                                                                                \"And\": [\n                                                                                    {\n                                                                                        \"Variable\": \"$.BoundingBox\",\n                                                                                        \"IsPresent\": true\n                                                                                    },\n                                                                                    {\n                                                                                        \"Not\": {\n                                                                                            \"Variable\": \"$.BoundingBox\",\n                                                                                            \"IsNull\": true\n                                                                                        }\n                                                                                    }\n                                                                                ],\n                                                                                \"Next\": \"ParallelCheckInputRegionOfInterestBoundingBox\"\n                                                                            }\n                                                                        ],\n                                                                        \"Default\": \"DefaultInputRegionOfInterestBoundingBox\"\n                                                                    },\n                                                                    \"ParallelCheckInputRegionOfInterestBoundingBox\": {\n                                                                        \"Type\": \"Parallel\",\n                                                                        \"End\": true,\n                                                                        \"Branches\": [\n                                                                            {\n                                                                                \"StartAt\": \"CheckInputRegionOfInterestBoundingBoxHeight\",\n                                                                                \"States\": {\n                                                                                    \"CheckInputRegionOfInterestBoundingBoxHeight\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"And\": [\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Height\",\n                                                                                                        \"IsPresent\": true\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Height\",\n                                                                                                        \"IsNumeric\": true\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"Next\": \"PassInputRegionOfInterestBoundingBoxHeight\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckInputRegionOfInterestBoundingBoxHeight\"\n                                                                                    },\n                                                                                    \"PassInputRegionOfInterestBoundingBoxHeight\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true,\n                                                                                        \"InputPath\": \"$.Height\"\n                                                                                    },\n                                                                                    \"FailCheckInputRegionOfInterestBoundingBoxHeight\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            {\n                                                                                \"StartAt\": \"CheckInputRegionOfInterestBoundingBoxLeft\",\n                                                                                \"States\": {\n                                                                                    \"CheckInputRegionOfInterestBoundingBoxLeft\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"And\": [\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Left\",\n                                                                                                        \"IsPresent\": true\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Left\",\n                                                                                                        \"IsNumeric\": true\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"Next\": \"PassInputRegionOfInterestBoundingBoxLeft\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckInputRegionOfInterestBoundingBoxLeft\"\n                                                                                    },\n                                                                                    \"PassInputRegionOfInterestBoundingBoxLeft\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckInputRegionOfInterestBoundingBoxLeft\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            {\n                                                                                \"StartAt\": \"CheckInputRegionOfInterestBoundingBoxTop\",\n                                                                                \"States\": {\n                                                                                    \"CheckInputRegionOfInterestBoundingBoxTop\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"And\": [\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Top\",\n                                                                                                        \"IsPresent\": true\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Top\",\n                                                                                                        \"IsNumeric\": true\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"Next\": \"PassInputRegionOfInterestBoundingBoxTop\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckInputRegionOfInterestBoundingBoxTop\"\n                                                                                    },\n                                                                                    \"PassInputRegionOfInterestBoundingBoxTop\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true,\n                                                                                        \"InputPath\": \"$.Top\"\n                                                                                    },\n                                                                                    \"FailCheckInputRegionOfInterestBoundingBoxTop\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            {\n                                                                                \"StartAt\": \"CheckInputRegionOfInterestBoundingBoxWidth\",\n                                                                                \"States\": {\n                                                                                    \"CheckInputRegionOfInterestBoundingBoxWidth\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"And\": [\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Width\",\n                                                                                                        \"IsPresent\": true\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Width\",\n                                                                                                        \"IsNumeric\": true\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"Next\": \"PassInputRegionOfInterestBoundingBoxWidth\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckInputRegionOfInterestBoundingBoxWidth\"\n                                                                                    },\n                                                                                    \"PassInputRegionOfInterestBoundingBoxWidth\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckInputRegionOfInterestBoundingBoxWidth\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            }\n                                                                        ],\n                                                                        \"ResultSelector\": {\n                                                                            \"Height.$\": \"$[0]\",\n                                                                            \"Left.$\": \"$[1]\",\n                                                                            \"Top.$\": \"$[2]\",\n                                                                            \"Width.$\": \"$[3]\"\n                                                                        },\n                                                                        \"InputPath\": \"$.BoundingBox\"\n                                                                    },\n                                                                    \"DefaultInputRegionOfInterestBoundingBox\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true,\n                                                                        \"Parameters\": {\n                                                                            \"BoundingBox\": null\n                                                                        },\n                                                                        \"OutputPath\": \"$.BoundingBox\"\n                                                                    }\n                                                                }\n                                                            },\n                                                            {\n                                                                \"StartAt\": \"CheckInputRegionOfInterestPolygon\",\n                                                                \"States\": {\n                                                                    \"CheckInputRegionOfInterestPolygon\": {\n                                                                        \"Type\": \"Choice\",\n                                                                        \"Choices\": [\n                                                                            {\n                                                                                \"And\": [\n                                                                                    {\n                                                                                        \"Variable\": \"$.Polygon\",\n                                                                                        \"IsPresent\": true\n                                                                                    },\n                                                                                    {\n                                                                                        \"Not\": {\n                                                                                            \"Variable\": \"$.Polygon\",\n                                                                                            \"IsNull\": true\n                                                                                        }\n                                                                                    }\n                                                                                ],\n                                                                                \"Next\": \"MapInputRegionOfInterestPolygon\"\n                                                                            }\n                                                                        ],\n                                                                        \"Default\": \"DefaultInputRegionOfInterestPolygon\"\n                                                                    },\n                                                                    \"MapInputRegionOfInterestPolygon\": {\n                                                                        \"Type\": \"Map\",\n                                                                        \"ItemProcessor\": {\n                                                                            \"ProcessorConfig\": {\n                                                                                \"Mode\": \"INLINE\"\n                                                                            },\n                                                                            \"StartAt\": \"ParallelCheckInputRegionOfInterestPolygon\",\n                                                                            \"States\": {\n                                                                                \"ParallelCheckInputRegionOfInterestPolygon\": {\n                                                                                    \"Type\": \"Parallel\",\n                                                                                    \"End\": true,\n                                                                                    \"Branches\": [\n                                                                                        {\n                                                                                            \"StartAt\": \"CheckInputRegionOfInterestPolygonX\",\n                                                                                            \"States\": {\n                                                                                                \"CheckInputRegionOfInterestPolygonX\": {\n                                                                                                    \"Type\": \"Choice\",\n                                                                                                    \"Choices\": [\n                                                                                                        {\n                                                                                                            \"And\": [\n                                                                                                                {\n                                                                                                                    \"Variable\": \"$.X\",\n                                                                                                                    \"IsPresent\": true\n                                                                                                                },\n                                                                                                                {\n                                                                                                                    \"Variable\": \"$.X\",\n                                                                                                                    \"IsNumeric\": true\n                                                                                                                }\n                                                                                                            ],\n                                                                                                            \"Next\": \"PassInputRegionOfInterestPolygonX\"\n                                                                                                        }\n                                                                                                    ],\n                                                                                                    \"Default\": \"FailCheckInputRegionOfInterestPolygonX\"\n                                                                                                },\n                                                                                                \"PassInputRegionOfInterestPolygonX\": {\n                                                                                                    \"Type\": \"Pass\",\n                                                                                                    \"End\": true,\n                                                                                                    \"InputPath\": \"$.X\"\n                                                                                                },\n                                                                                                \"FailCheckInputRegionOfInterestPolygonX\": {\n                                                                                                    \"Type\": \"Fail\"\n                                                                                                }\n                                                                                            }\n                                                                                        },\n                                                                                        {\n                                                                                            \"StartAt\": \"CheckInputRegionOfInterestPolygonY\",\n                                                                                            \"States\": {\n                                                                                                \"CheckInputRegionOfInterestPolygonY\": {\n                                                                                                    \"Type\": \"Choice\",\n                                                                                                    \"Choices\": [\n                                                                                                        {\n                                                                                                            \"And\": [\n                                                                                                                {\n                                                                                                                    \"Variable\": \"$.Y\",\n                                                                                                                    \"IsPresent\": true\n                                                                                                                },\n                                                                                                                {\n                                                                                                                    \"Variable\": \"$.Y\",\n                                                                                                                    \"IsNumeric\": true\n                                                                                                                }\n                                                                                                            ],\n                                                                                                            \"Next\": \"PassInputRegionOfInterestPolygonY\"\n                                                                                                        }\n                                                                                                    ],\n                                                                                                    \"Default\": \"FailCheckInputRegionOfInterestPolygonY\"\n                                                                                                },\n                                                                                                \"PassInputRegionOfInterestPolygonY\": {\n                                                                                                    \"Type\": \"Pass\",\n                                                                                                    \"End\": true,\n                                                                                                    \"InputPath\": \"$.Y\"\n                                                                                                },\n                                                                                                \"FailCheckInputRegionOfInterestPolygonY\": {\n                                                                                                    \"Type\": \"Fail\"\n                                                                                                }\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"ResultSelector\": {\n                                                                                        \"X.$\": \"$[0]\",\n                                                                                        \"Y.$\": \"$[1]\"\n                                                                                    }\n                                                                                }\n                                                                            }\n                                                                        },\n                                                                        \"End\": true,\n                                                                        \"ItemsPath\": \"$.Polygon\"\n                                                                    },\n                                                                    \"DefaultInputRegionOfInterestPolygon\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"Parameters\": {\n                                                                            \"Polygon\": []\n                                                                        },\n                                                                        \"Next\": \"MapInputRegionOfInterestPolygon\"\n                                                                    }\n                                                                }\n                                                            }\n                                                        ],\n                                                        \"ResultSelector\": {\n                                                            \"BoundingBox.$\": \"$[0]\",\n                                                            \"Polygon.$\": \"$[1]\"\n                                                        }\n                                                    }\n                                                }\n                                            },\n                                            \"End\": true,\n                                            \"ItemsPath\": \"$.RegionsOfInterest\"\n                                        },\n                                        \"DefaultInputRegionsOfInterest\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"RegionsOfInterest\": []\n                                            },\n                                            \"Next\": \"MapInputRegionsOfInterest\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputWordFilter\",\n                                    \"States\": {\n                                        \"CheckInputWordFilter\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.WordFilter\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.WordFilter\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"ParallelCheckInputWordFilter\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputWordFilter\"\n                                        },\n                                        \"ParallelCheckInputWordFilter\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckInputWordFilterMinBoundingBoxHeight\",\n                                                    \"States\": {\n                                                        \"CheckInputWordFilterMinBoundingBoxHeight\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.MinBoundingBoxHeight\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Variable\": \"$.MinBoundingBoxHeight\",\n                                                                            \"IsNumeric\": true\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"PassInputWordFilterMinBoundingBoxHeight\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckInputWordFilterMinBoundingBoxHeight\"\n                                                        },\n                                                        \"PassInputWordFilterMinBoundingBoxHeight\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.MinBoundingBoxHeight\"\n                                                        },\n                                                        \"FailCheckInputWordFilterMinBoundingBoxHeight\": {\n                                                            \"Type\": \"Fail\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputWordFilterMinBoundingBoxWidth\",\n                                                    \"States\": {\n                                                        \"CheckInputWordFilterMinBoundingBoxWidth\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.MinBoundingBoxWidth\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Not\": {\n                                                                                \"Variable\": \"$.MinBoundingBoxWidth\",\n                                                                                \"IsNull\": true\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"PassInputWordFilterMinBoundingBoxWidth\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckInputWordFilterMinBoundingBoxWidth\"\n                                                        },\n                                                        \"PassInputWordFilterMinBoundingBoxWidth\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.MinBoundingBoxWidth\"\n                                                        },\n                                                        \"FailCheckInputWordFilterMinBoundingBoxWidth\": {\n                                                            \"Type\": \"Fail\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputWordFilterMinConfidence\",\n                                                    \"States\": {\n                                                        \"CheckInputWordFilterMinConfidence\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"Variable\": \"$.MinConfidence\",\n                                                                    \"IsPresent\": true,\n                                                                    \"Next\": \"PassInputWordFilterMinConfidence\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckInputWordFilterMinConfidence\"\n                                                        },\n                                                        \"PassInputWordFilterMinConfidence\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.MinConfidence\"\n                                                        },\n                                                        \"FailCheckInputWordFilterMinConfidence\": {\n                                                            \"Type\": \"Fail\"\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"ResultSelector\": {\n                                                \"MinBoundingBoxHeight.$\": \"$[0]\",\n                                                \"MinBoundingBoxWidth.$\": \"$[1]\",\n                                                \"MinConfidence.$\": \"$[2]\"\n                                            },\n                                            \"InputPath\": \"$.WordFilter\"\n                                        },\n                                        \"DefaultInputWordFilter\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"WordFilter\": null\n                                            },\n                                            \"OutputPath\": \"$.WordFilter\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"DetectText\": {\n                                    \"RegionsOfInterest.$\": \"$[0]\",\n                                    \"WordFilter.$\": \"$[1]\"\n                                }\n                            },\n                            \"InputPath\": \"$.DetectText\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckInputS3\",\n                    \"States\": {\n                        \"CheckInputS3\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.S3\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckInputS3\"\n                                }\n                            ],\n                            \"Default\": \"FailCheckS3Input\"\n                        },\n                        \"ParallelCheckInputS3\": {\n                            \"Type\": \"Parallel\",\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputBucket\",\n                                    \"States\": {\n                                        \"CheckInputBucket\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Bucket\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputBucketName\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucket\"\n                                        },\n                                        \"CheckInputBucketName\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"HeadBucket\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucketName\",\n                                            \"InputPath\": \"$.Bucket\"\n                                        },\n                                        \"HeadBucket\": {\n                                            \"Type\": \"Task\",\n                                            \"Parameters\": {\n                                                \"Bucket.$\": \"$.Name\"\n                                            },\n                                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headBucket\",\n                                            \"Catch\": [\n                                                {\n                                                    \"ErrorEquals\": [\n                                                        \"States.TaskFailed\"\n                                                    ],\n                                                    \"Next\": \"FailHeadBucket\"\n                                                }\n                                            ],\n                                            \"ResultPath\": \"$.Output\",\n                                            \"Next\": \"PassHeadBucket\"\n                                        },\n                                        \"PassHeadBucket\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"AccessPointAlias.$\": \"$.Output.AccessPointAlias\",\n                                                \"Name.$\": \"$.Name\",\n                                                \"Region.$\": \"$.Output.BucketRegion\"\n                                            }\n                                        },\n                                        \"FailHeadBucket\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucketName\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucket\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputObject\",\n                                    \"States\": {\n                                        \"CheckInputObject\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Object\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputObject\"\n                                        },\n                                        \"CheckInputKey\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputKey\",\n                                            \"InputPath\": \"$.Object\"\n                                        },\n                                        \"PassInputKey\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckInputKey\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputObject\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.S3\",\n                            \"ResultSelector\": {\n                                \"Bucket.$\": \"$[0]\",\n                                \"Object.$\": \"$[1]\"\n                            },\n                            \"Next\": \"HeadObject\"\n                        },\n                        \"HeadObject\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\"\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headObject\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailHeadObject\"\n                                }\n                            ],\n                            \"Next\": \"PassHeadObject\"\n                        },\n                        \"PassHeadObject\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            },\n                            \"Next\": \"GetObjectAttributes\"\n                        },\n                        \"GetObjectAttributes\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\",\n                                \"ObjectAttributes\": [\n                                    \"Checksum\",\n                                    \"ETag\",\n                                    \"ObjectParts\",\n                                    \"ObjectSize\",\n                                    \"StorageClass\"\n                                ]\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:getObjectAttributes\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailGetObjectAttributes\"\n                                }\n                            ],\n                            \"Next\": \"PassGetObjectAttributes\"\n                        },\n                        \"PassGetObjectAttributes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            }\n                        },\n                        \"FailGetObjectAttributes\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailHeadObject\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailCheckS3Input\": {\n                            \"Type\": \"Fail\"\n                        }\n                    }\n                }\n            ],\n            \"Next\": \"DetectText\",\n            \"ResultSelector\": {\n                \"Rekognition.$\": \"$[0]\",\n                \"S3.$\": \"$[1]\"\n            }\n        },\n        \"DetectText\": {\n            \"Type\": \"Task\",\n            \"Parameters\": {\n                \"Image\": {\n                    \"S3Object\": {\n                        \"Bucket.$\": \"$.S3.Bucket.Name\",\n                        \"Name.$\": \"$.S3.Object.Key\"\n                    }\n                }\n            },\n            \"Resource\": \"arn:aws:states:::aws-sdk:rekognition:detectText\",\n            \"Next\": \"ParallelCheckOutputDetectText\",\n            \"Catch\": [\n                {\n                    \"ErrorEquals\": [\n                        \"States.TaskFailed\"\n                    ],\n                    \"Next\": \"FailDetectText\"\n                }\n            ],\n            \"ResultPath\": \"$.Output\"\n        },\n        \"ParallelCheckOutputDetectText\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckOutputOrientationCorrection\",\n                    \"States\": {\n                        \"CheckOutputOrientationCorrection\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.OrientationCorrection\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOrientationCorrection\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputOrientationCorrection\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.OrientationCorrection\"\n                        },\n                        \"DefaultOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"OrientationCorrection\": null\n                            },\n                            \"Next\": \"PassOrientationCorrection\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputTextDetections\",\n                    \"States\": {\n                        \"CheckOutputTextDetections\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.TextDetections\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"MapOutputTextDetections\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputTextDetections\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"DefaultOutputTextDetections\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"TextDetections\": null\n                            },\n                            \"OutputPath\": \"$.TextDetections\",\n                            \"End\": true\n                        },\n                        \"MapOutputTextDetections\": {\n                            \"Type\": \"Map\",\n                            \"ItemProcessor\": {\n                                \"ProcessorConfig\": {\n                                    \"Mode\": \"INLINE\"\n                                },\n                                \"StartAt\": \"ParallelCheckOutputTextDetection\",\n                                \"States\": {\n                                    \"ParallelCheckOutputTextDetection\": {\n                                        \"Type\": \"Parallel\",\n                                        \"End\": true,\n                                        \"Branches\": [\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionConfidence\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionConfidence\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Confidence\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputTextDetectionConfidence\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionConfidence\"\n                                                    },\n                                                    \"PassOutputTextDetectionConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Confidence\"\n                                                    },\n                                                    \"DefaultOutputTextDetectionConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Confidence\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Confidence\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionDetectedText\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionDetectedText\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.DetectedText\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputTextDetectionDetectedText\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionDetectedText\"\n                                                    },\n                                                    \"PassOutputTextDetectionDetectedText\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.DetectedText\"\n                                                    },\n                                                    \"DefaultOutputTextDetectionDetectedText\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"DetectedText\": null\n                                                        },\n                                                        \"OutputPath\": \"$.DetectedText\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionGeometry\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionGeometry\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Geometry\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"ParallelCheckOutputTextDetectionGeometry\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionGeometry\"\n                                                    },\n                                                    \"ParallelCheckOutputTextDetectionGeometry\": {\n                                                        \"Type\": \"Parallel\",\n                                                        \"End\": true,\n                                                        \"Branches\": [\n                                                            {\n                                                                \"StartAt\": \"CheckOutputTextDetectionGeometryBoundingBox\",\n                                                                \"States\": {\n                                                                    \"CheckOutputTextDetectionGeometryBoundingBox\": {\n                                                                        \"Type\": \"Choice\",\n                                                                        \"Choices\": [\n                                                                            {\n                                                                                \"Variable\": \"$.BoundingBox\",\n                                                                                \"IsPresent\": true,\n                                                                                \"Next\": \"PassOutputTextDetectionGeometryBoundingBox\"\n                                                                            }\n                                                                        ],\n                                                                        \"Default\": \"DefaultOutputTextDetectionGeometryBoundingBox\"\n                                                                    },\n                                                                    \"PassOutputTextDetectionGeometryBoundingBox\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true,\n                                                                        \"InputPath\": \"$.BoundingBox\"\n                                                                    },\n                                                                    \"DefaultOutputTextDetectionGeometryBoundingBox\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true,\n                                                                        \"Parameters\": {\n                                                                            \"BoundingBox\": null\n                                                                        },\n                                                                        \"OutputPath\": \"$.BoundingBox\"\n                                                                    }\n                                                                }\n                                                            },\n                                                            {\n                                                                \"StartAt\": \"CheckOutputTextDetectionGeometryPolygon\",\n                                                                \"States\": {\n                                                                    \"CheckOutputTextDetectionGeometryPolygon\": {\n                                                                        \"Type\": \"Choice\",\n                                                                        \"Choices\": [\n                                                                            {\n                                                                                \"Variable\": \"$.Polygon\",\n                                                                                \"IsPresent\": true,\n                                                                                \"Next\": \"PassOutputTextDetectionGeometryPolygon\"\n                                                                            }\n                                                                        ],\n                                                                        \"Default\": \"DefaultOutputTextDetectionGeometryPolygon\"\n                                                                    },\n                                                                    \"PassOutputTextDetectionGeometryPolygon\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true,\n                                                                        \"InputPath\": \"$.Polygon\"\n                                                                    },\n                                                                    \"DefaultOutputTextDetectionGeometryPolygon\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true,\n                                                                        \"Parameters\": {\n                                                                            \"Polygon\": null\n                                                                        },\n                                                                        \"OutputPath\": \"$.Polygon\"\n                                                                    }\n                                                                }\n                                                            }\n                                                        ],\n                                                        \"InputPath\": \"$.Geometry\",\n                                                        \"ResultSelector\": {\n                                                            \"BoundingBox.$\": \"$[0]\",\n                                                            \"Polygon.$\": \"$[1]\"\n                                                        }\n                                                    },\n                                                    \"DefaultOutputTextDetectionGeometry\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Geometry\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Geometry\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionId\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionId\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Id\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputTextDetectionId\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionId\"\n                                                    },\n                                                    \"PassOutputTextDetectionId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Id\"\n                                                    },\n                                                    \"DefaultOutputTextDetectionId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Id\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Id\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionParentId\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionParentId\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.ParentId\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputTextDetectionParentId\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionParentId\"\n                                                    },\n                                                    \"PassOutputTextDetectionParentId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.ParentId\"\n                                                    },\n                                                    \"DefaultOutputTextDetectionParentId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"ParentId\": null\n                                                        },\n                                                        \"OutputPath\": \"$.ParentId\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionType\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionType\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Type\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputTextDetectionType\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionType\"\n                                                    },\n                                                    \"PassOutputTextDetectionType\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Type\"\n                                                    },\n                                                    \"DefaultOutputTextDetectionType\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Type\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Type\"\n                                                    }\n                                                }\n                                            }\n                                        ],\n                                        \"ResultSelector\": {\n                                            \"Confidence.$\": \"$[0]\",\n                                            \"DetectedText.$\": \"$[1]\",\n                                            \"Geometry.$\": \"$[2]\",\n                                            \"Id.$\": \"$[3]\",\n                                            \"ParentId.$\": \"$[4]\",\n                                            \"Type.$\": \"$[5]\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"ItemsPath\": \"$.TextDetections\",\n                            \"End\": true\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputTextModelVersion\",\n                    \"States\": {\n                        \"CheckOutputTextModelVersion\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.TextModelVersion\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputTextModelVersion\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputTextModelVersion\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"DefaultOutputTextModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"TextModelVersion\": null\n                            },\n                            \"OutputPath\": \"$.TextModelVersion\",\n                            \"End\": true\n                        },\n                        \"PassOutputTextModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"InputPath\": \"$.TextModelVersion\",\n                            \"End\": true\n                        }\n                    }\n                }\n            ],\n            \"ResultSelector\": {\n                \"OrientationCorrection.$\": \"$[0]\",\n                \"TextDetections.$\": \"$[1]\",\n                \"TextModelVersion.$\": \"$[2]\"\n            },\n            \"ResultPath\": \"$.Output\",\n            \"Next\": \"StateMachineOutput\"\n        },\n        \"StateMachineOutput\": {\n            \"Type\": \"Pass\",\n            \"Parameters\": {\n                \"DetectText\": {\n                    \"CreatedAt.$\": \"$$.Execution.StartTime\",\n                    \"Id.$\": \"$.S3.Object.ETag\",\n                    \"OrientationCorrection.$\": \"$.Output.OrientationCorrection\",\n                    \"TextDetections.$\": \"$.Output.TextDetections\",\n                    \"TextModelVersion.$\": \"$.Output.TextModelVersion\"\n                },\n                \"Execution\": {\n                    \"Id.$\": \"$$.Execution.Id\",\n                    \"Name.$\": \"$$.Execution.Name\",\n                    \"StartTime.$\": \"$$.Execution.StartTime\"\n                },\n                \"S3.$\": \"$.S3\",\n                \"StateMachine.$\": \"$$.StateMachine\"\n            },\n            \"Next\": \"Success\"\n        },\n        \"Success\": {\n            \"Type\": \"Succeed\"\n        },\n        \"FailDetectText\": {\n            \"Type\": \"Fail\"\n        }\n    }\n}\n","logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-detect-text","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"sensitive_values":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}},{"address":"aws_sfn_state_machine.parent","mode":"managed","type":"aws_sfn_state_machine","name":"parent","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-parent","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"sensitive_values":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}},{"address":"aws_sqs_queue.dlq","mode":"managed","type":"aws_sqs_queue","name":"dlq","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"content_based_deduplication":false,"delay_seconds":0,"fifo_queue":false,"kms_data_key_reuse_period_seconds":0,"kms_master_key_id":null,"max_message_size":262144,"message_retention_seconds":1209600,"name":"rekognition-orchestrator-dev-image-events-dlq","receive_wait_time_seconds":0,"sqs_managed_sse_enabled":true,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"visibility_timeout_seconds":30},"sensitive_values":{"tags_all":{}}},{"address":"aws_sqs_queue.main","mode":"managed","type":"aws_sqs_queue","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"content_based_deduplication":false,"delay_seconds":0,"fifo_queue":false,"kms_data_key_reuse_period_seconds":0,"kms_master_key_id":null,"max_message_size":262144,"message_retention_seconds":345600,"name":"rekognition-orchestrator-dev-image-events","receive_wait_time_seconds":10,"sqs_managed_sse_enabled":true,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"visibility_timeout_seconds":60},"sensitive_values":{"tags_all":{}}},{"address":"data.aws_iam_policy_document.lambda_inline","mode":"data","type":"aws_iam_policy_document","name":"lambda_inline","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["states:StartExecution"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null],"sid":"StartParentStateMachine"}],"version":null},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}},{"address":"data.aws_iam_policy_document.sfn_inline","mode":"data","type":"aws_iam_policy_document","name":"sfn_inline","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["rekognition:DetectFaces","rekognition:DetectLabels","rekognition:DetectModerationLabels","rekognition:DetectProtectiveEquipment","rekognition:DetectText"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":"Rekognition"},{"actions":["s3:GetObjectAttributes","s3:HeadBucket","s3:HeadObject"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null,null],"sid":"S3ReadInput"},{"actions":["s3:PutObject","s3:PutObjectAcl"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null],"sid":"S3WriteOutput"},{"actions":["states:StartExecution"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null,null,null,null,null],"sid":"StartChildExecutions"},{"actions":["logs:CreateLogDelivery","logs:DeleteLogDelivery","logs:DescribeLogGroups","logs:DescribeResourcePolicies","logs:GetLogDelivery","logs:ListLogDeliveries","logs:PutResourcePolicy","logs:UpdateLogDelivery"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":"AllowCWLogsDelivery"}],"version":null},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false,false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false,false,false,false,false]},{"actions":[false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}}]}},"resource_changes":[{"address":"data.aws_iam_policy_document.lambda_inline","mode":"data","type":"aws_iam_policy_document","name":"lambda_inline","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["states:StartExecution"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null],"sid":"StartParentStateMachine"}],"version":null},"after_unknown":{"id":true,"json":true,"minified_json":true,"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[true]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}},"action_reason":"read_because_config_unknown"},{"address":"data.aws_iam_policy_document.sfn_inline","mode":"data","type":"aws_iam_policy_document","name":"sfn_inline","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["rekognition:DetectFaces","rekognition:DetectLabels","rekognition:DetectModerationLabels","rekognition:DetectProtectiveEquipment","rekognition:DetectText"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":"Rekognition"},{"actions":["s3:GetObjectAttributes","s3:HeadBucket","s3:HeadObject"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null,null],"sid":"S3ReadInput"},{"actions":["s3:PutObject","s3:PutObjectAcl"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null],"sid":"S3WriteOutput"},{"actions":["states:StartExecution"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null,null,null,null,null],"sid":"StartChildExecutions"},{"actions":["logs:CreateLogDelivery","logs:DeleteLogDelivery","logs:DescribeLogGroups","logs:DescribeResourcePolicies","logs:GetLogDelivery","logs:ListLogDeliveries","logs:PutResourcePolicy","logs:UpdateLogDelivery"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":"AllowCWLogsDelivery"}],"version":null},"after_unknown":{"id":true,"json":true,"minified_json":true,"statement":[{"actions":[false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true,true]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[true,true,true,true,true]},{"actions":[false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false,false]},{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false,false,false,false,false]},{"actions":[false,false,false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}},"action_reason":"read_because_config_unknown"},{"address":"aws_cloudwatch_log_group.lambda","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"/aws/lambda/rekognition-orchestrator-dev-dispatcher","retention_in_days":14,"skip_destroy":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"}},"after_unknown":{"arn":true,"id":true,"log_group_class":true,"name_prefix":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_cloudwatch_log_group.sfn","mode":"managed","type":"aws_cloudwatch_log_group","name":"sfn","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"/aws/vendedlogs/states/rekognition-orchestrator-dev","retention_in_days":30,"skip_destroy":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"}},"after_unknown":{"arn":true,"id":true,"log_group_class":true,"name_prefix":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_iam_role.lambda","mode":"managed","type":"aws_iam_role","name":"lambda","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"rekognition-orchestrator-dev-dispatcher-lambda","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role.sfn","mode":"managed","type":"aws_iam_role","name":"sfn","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"rekognition-orchestrator-dev-sfn-exec","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role_policy.lambda_inline","mode":"managed","type":"aws_iam_role_policy","name":"lambda_inline","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"rekognition-orchestrator-dev-dispatcher-inline"},"after_unknown":{"id":true,"name_prefix":true,"policy":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy.sfn_inline","mode":"managed","type":"aws_iam_role_policy","name":"sfn_inline","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"rekognition-orchestrator-dev-sfn-inline"},"after_unknown":{"id":true,"name_prefix":true,"policy":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.lambda_basic","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_basic","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"rekognition-orchestrator-dev-dispatcher-lambda"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_lambda_event_source_mapping.sqs","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"batch_size":10,"bisect_batch_on_function_error":null,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"filter_criteria":[],"function_response_types":["ReportBatchItemFailures"],"kms_key_arn":null,"maximum_batching_window_in_seconds":5,"metrics_config":[],"provisioned_poller_config":[],"queues":null,"scaling_config":[],"self_managed_event_source":[],"source_access_configuration":[],"starting_position":null,"starting_position_timestamp":null,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"topics":null,"tumbling_window_in_seconds":null},"after_unknown":{"amazon_managed_kafka_event_source_config":true,"arn":true,"destination_config":[],"document_db_event_source_config":[],"event_source_arn":true,"filter_criteria":[],"function_arn":true,"function_name":true,"function_response_types":[false],"id":true,"last_modified":true,"last_processing_result":true,"maximum_record_age_in_seconds":true,"maximum_retry_attempts":true,"metrics_config":[],"parallelization_factor":true,"provisioned_poller_config":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":true,"source_access_configuration":[],"state":true,"state_transition_reason":true,"tags_all":{},"uuid":true},"before_sensitive":false,"after_sensitive":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[false],"metrics_config":[],"provisioned_poller_config":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags_all":{}}}},{"address":"aws_lambda_function.dispatcher","mode":"managed","type":"aws_lambda_function","name":"dispatcher","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[{}],"file_system_config":[],"filename":"./.build/dispatcher.zip","function_name":"rekognition-orchestrator-dev-dispatcher","handler":"lambda_dispatcher.handler","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":5,"runtime":"python3.12","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"zpUWGRH1/zQyqYc4Zqy041NkUbl77p7w6qLTIl7ve3c=","tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeout":30,"timeouts":null,"vpc_config":[]},"after_unknown":{"architectures":true,"arn":true,"code_sha256":true,"dead_letter_config":[],"environment":[{"variables":true}],"ephemeral_storage":true,"file_system_config":[],"id":true,"image_config":[],"invoke_arn":true,"last_modified":true,"logging_config":true,"qualified_arn":true,"qualified_invoke_arn":true,"role":true,"signing_job_arn":true,"signing_profile_version_arn":true,"snap_start":[],"source_code_size":true,"tags_all":{},"tracing_config":true,"version":true,"vpc_config":[]},"before_sensitive":false,"after_sensitive":{"architectures":[],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"logging_config":[],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[]}}},{"address":"aws_s3_bucket.input","mode":"managed","type":"aws_s3_bucket","name":"input","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"rekognition-orchestrator-dev-input-000000000000","force_destroy":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":{},"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"aws_s3_bucket.output","mode":"managed","type":"aws_s3_bucket","name":"output","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"rekognition-orchestrator-dev-output-000000000000","force_destroy":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":{},"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"aws_s3_bucket_public_access_block.input","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"input","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_s3_bucket_public_access_block.output","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"output","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"restrict_public_buckets":true},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_s3_bucket_server_side_encryption_configuration.input","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"input","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"aws_s3_bucket_server_side_encryption_configuration.output","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"output","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"bucket_key_enabled":null}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"aws_s3_bucket_versioning.input","mode":"managed","type":"aws_s3_bucket_versioning","name":"input","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"aws_s3_bucket_versioning.output","mode":"managed","type":"aws_s3_bucket_versioning","name":"output","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"aws_sfn_state_machine.detect_faces","mode":"managed","type":"aws_sfn_state_machine","name":"detect_faces","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"definition":"{\n    \"StartAt\": \"CheckInvoker\",\n    \"States\": {\n        \"CheckInvoker\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n                {\n                    \"Variable\": \"$.StatePayload\",\n                    \"IsPresent\": true,\n                    \"Next\": \"InvokerStateMachine\"\n                }\n            ],\n            \"Default\": \"Fail\"\n        },\n        \"InvokerStateMachine\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"ParallelCheckInput\",\n            \"InputPath\": \"$.StatePayload\"\n        },\n        \"Fail\": {\n            \"Type\": \"Fail\"\n        },\n        \"ParallelCheckInput\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckInputRekognition\",\n                    \"States\": {\n                        \"CheckInputRekognition\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.Rekognition\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.Rekognition\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"CheckInputDetectFaces\"\n                                }\n                            ],\n                            \"Default\": \"DefaultInputRekognition\"\n                        },\n                        \"DefaultInputRekognition\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Rekognition\": {}\n                            },\n                            \"Next\": \"CheckInputDetectFaces\"\n                        },\n                        \"CheckInputDetectFaces\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.DetectFaces\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.DetectFaces\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"ParallelCheckInputDetectFaces\"\n                                }\n                            ],\n                            \"InputPath\": \"$.Rekognition\",\n                            \"Default\": \"DefaultInputDetectFaces\"\n                        },\n                        \"DefaultInputDetectFaces\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"DetectFaces\": {}\n                            },\n                            \"Next\": \"ParallelCheckInputDetectFaces\"\n                        },\n                        \"ParallelCheckInputDetectFaces\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputAttributes\",\n                                    \"States\": {\n                                        \"CheckInputAttributes\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Attributes\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.Attributes\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"MapInputAttributes\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputAttributes\"\n                                        },\n                                        \"MapInputAttributes\": {\n                                            \"Type\": \"Map\",\n                                            \"ItemProcessor\": {\n                                                \"ProcessorConfig\": {\n                                                    \"Mode\": \"INLINE\"\n                                                },\n                                                \"StartAt\": \"CheckValueAttribute\",\n                                                \"States\": {\n                                                    \"CheckValueAttribute\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"And\": [\n                                                                    {\n                                                                        \"Variable\": \"$\",\n                                                                        \"IsString\": true\n                                                                    },\n                                                                    {\n                                                                        \"Or\": [\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"AGE_RANGE\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"ALL\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"BEARD\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"DEFAULT\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"EMOTIONS\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"EYEGLASSES\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"EYES_OPEN\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"EYE_DIRECTION\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"FACE_OCCLUDED\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"GENDER\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"MOUTH_OPEN\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"MUSTACHE\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"SMILE\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"SUNGLASSES\"\n                                                                            }\n                                                                        ]\n                                                                    }\n                                                                ],\n                                                                \"Next\": \"PassValueAttribute\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"FailCheckValueAttribute\"\n                                                    },\n                                                    \"PassValueAttribute\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true\n                                                    },\n                                                    \"FailCheckValueAttribute\": {\n                                                        \"Type\": \"Fail\"\n                                                    }\n                                                }\n                                            },\n                                            \"End\": true,\n                                            \"ItemsPath\": \"$.Attributes\"\n                                        },\n                                        \"DefaultInputAttributes\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"Attributes\": [\n                                                    \"ALL\"\n                                                ]\n                                            },\n                                            \"Next\": \"MapInputAttributes\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"DetectFaces\": {\n                                    \"Attributes.$\": \"$[0]\"\n                                }\n                            },\n                            \"InputPath\": \"$.DetectFaces\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckInputS3\",\n                    \"States\": {\n                        \"CheckInputS3\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.S3\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckInputS3\"\n                                }\n                            ],\n                            \"Default\": \"FailCheckS3Input\"\n                        },\n                        \"ParallelCheckInputS3\": {\n                            \"Type\": \"Parallel\",\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputBucket\",\n                                    \"States\": {\n                                        \"CheckInputBucket\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Bucket\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputBucketName\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucket\"\n                                        },\n                                        \"CheckInputBucketName\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"HeadBucket\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucketName\",\n                                            \"InputPath\": \"$.Bucket\"\n                                        },\n                                        \"HeadBucket\": {\n                                            \"Type\": \"Task\",\n                                            \"Parameters\": {\n                                                \"Bucket.$\": \"$.Name\"\n                                            },\n                                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headBucket\",\n                                            \"Catch\": [\n                                                {\n                                                    \"ErrorEquals\": [\n                                                        \"States.TaskFailed\"\n                                                    ],\n                                                    \"Next\": \"FailHeadBucket\"\n                                                }\n                                            ],\n                                            \"ResultPath\": \"$.Output\",\n                                            \"Next\": \"PassHeadBucket\"\n                                        },\n                                        \"PassHeadBucket\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"AccessPointAlias.$\": \"$.Output.AccessPointAlias\",\n                                                \"Name.$\": \"$.Name\",\n                                                \"Region.$\": \"$.Output.BucketRegion\"\n                                            }\n                                        },\n                                        \"FailHeadBucket\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucketName\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucket\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputObject\",\n                                    \"States\": {\n                                        \"CheckInputObject\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Object\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputObject\"\n                                        },\n                                        \"CheckInputKey\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputKey\",\n                                            \"InputPath\": \"$.Object\"\n                                        },\n                                        \"PassInputKey\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckInputKey\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputObject\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.S3\",\n                            \"ResultSelector\": {\n                                \"Bucket.$\": \"$[0]\",\n                                \"Object.$\": \"$[1]\"\n                            },\n                            \"Next\": \"HeadObject\"\n                        },\n                        \"HeadObject\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\"\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headObject\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailHeadObject\"\n                                }\n                            ],\n                            \"Next\": \"PassHeadObject\"\n                        },\n                        \"PassHeadObject\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            },\n                            \"Next\": \"GetObjectAttributes\"\n                        },\n                        \"GetObjectAttributes\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\",\n                                \"ObjectAttributes\": [\n                                    \"Checksum\",\n                                    \"ETag\",\n                                    \"ObjectParts\",\n                                    \"ObjectSize\",\n                                    \"StorageClass\"\n                                ]\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:getObjectAttributes\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailGetObjectAttributes\"\n                                }\n                            ],\n                            \"Next\": \"PassGetObjectAttributes\"\n                        },\n                        \"PassGetObjectAttributes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            }\n                        },\n                        \"FailGetObjectAttributes\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailHeadObject\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailCheckS3Input\": {\n                            \"Type\": \"Fail\"\n                        }\n                    }\n                }\n            ],\n            \"Next\": \"DetectFaces\",\n            \"ResultSelector\": {\n                \"Rekognition.$\": \"$[0]\",\n                \"S3.$\": \"$[1]\"\n            }\n        },\n        \"DetectFaces\": {\n            \"Type\": \"Task\",\n            \"Parameters\": {\n                \"Attributes.$\": \"$.Rekognition.DetectFaces.Attributes\",\n                \"Image\": {\n                    \"S3Object\": {\n                        \"Bucket.$\": \"$.S3.Bucket.Name\",\n                        \"Name.$\": \"$.S3.Object.Key\"\n                    }\n                }\n            },\n            \"Resource\": \"arn:aws:states:::aws-sdk:rekognition:detectFaces\",\n            \"Next\": \"ParallelCheckOutputDetectFaces\",\n            \"Catch\": [\n                {\n                    \"ErrorEquals\": [\n                        \"States.TaskFailed\"\n                    ],\n                    \"Next\": \"FailDetectFaces\"\n                }\n            ],\n            \"ResultPath\": \"$.Output\"\n        },\n        \"ParallelCheckOutputDetectFaces\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckOutputFaceDetails\",\n                    \"States\": {\n                        \"CheckOutputFaceDetails\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.FaceDetails\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"MapOutputFaceDetails\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputFaceDetails\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"MapOutputFaceDetails\": {\n                            \"Type\": \"Map\",\n                            \"ItemProcessor\": {\n                                \"ProcessorConfig\": {\n                                    \"Mode\": \"INLINE\"\n                                },\n                                \"StartAt\": \"CheckOutputFaceDetail\",\n                                \"States\": {\n                                    \"CheckOutputFaceDetail\": {\n                                        \"Type\": \"Parallel\",\n                                        \"End\": true,\n                                        \"Branches\": [\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailAgeRange\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailAgeRange\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.AgeRange\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailAgeRange\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailAgeRange\"\n                                                    },\n                                                    \"PassOutputFaceDetailAgeRange\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.AgeRange\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailAgeRange\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"Parameters\": {\n                                                            \"AgeRange\": null\n                                                        },\n                                                        \"End\": true,\n                                                        \"OutputPath\": \"$.AgeRange\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailBeard\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailBeard\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Beard\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailBeard\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailBeard\"\n                                                    },\n                                                    \"PassOutputFaceDetailBeard\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Beard\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailBeard\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Beard\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Beard\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailBoundingBox\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailBoundingBox\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.BoundingBox\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailBoundingBox\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailBoundingBox\"\n                                                    },\n                                                    \"PassOutputFaceDetailBoundingBox\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.BoundingBox\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailBoundingBox\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"BoundingBox\": null\n                                                        },\n                                                        \"OutputPath\": \"$.BoundingBox\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"PassOutputFaceDetailConfidence\",\n                                                \"States\": {\n                                                    \"PassOutputFaceDetailConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Confidence\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailEmotions\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailEmotions\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Emotions\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailEmotions\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailEmotions\"\n                                                    },\n                                                    \"PassOutputFaceDetailEmotions\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Emotions\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailEmotions\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Emotions\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Emotions\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailEyeDirection\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailEyeDirection\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.EyeDirection\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailEyeDirection\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailEyeDirection\"\n                                                    },\n                                                    \"PassOutputFaceDetailEyeDirection\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.EyeDirection\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailEyeDirection\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"EyeDirection\": null\n                                                        },\n                                                        \"OutputPath\": \"$.EyeDirection\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailEyeglasses\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailEyeglasses\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Eyeglasses\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailEyeglasses\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailEyeglasses\"\n                                                    },\n                                                    \"PassOutputFaceDetailEyeglasses\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Eyeglasses\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailEyeglasses\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Eyeglasses\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Eyeglasses\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailEyesOpen\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailEyesOpen\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.EyesOpen\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailEyesOpen\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailEyesOpen\"\n                                                    },\n                                                    \"PassOutputFaceDetailEyesOpen\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.EyesOpen\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailEyesOpen\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"EyesOpen\": null\n                                                        },\n                                                        \"OutputPath\": \"$.EyesOpen\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailFaceOccluded\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailFaceOccluded\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.FaceOccluded\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailFaceOccluded\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailFaceOccluded\"\n                                                    },\n                                                    \"PassOutputFaceDetailFaceOccluded\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.FaceOccluded\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailFaceOccluded\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"FaceOccluded\": null\n                                                        },\n                                                        \"OutputPath\": \"$.FaceOccluded\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailGender\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailGender\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Gender\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailGender\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailGender\"\n                                                    },\n                                                    \"PassOutputFaceDetailGender\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Gender\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailGender\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Gender\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Gender\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"PassOutputFaceDetailIdParameters\",\n                                                \"States\": {\n                                                    \"PassOutputFaceDetailIdParameters\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"Parameters\": {\n                                                            \"BoundingBox.$\": \"$.BoundingBox\",\n                                                            \"Confidence.$\": \"$.Confidence\",\n                                                            \"Pose.$\": \"$.Pose\",\n                                                            \"Quality.$\": \"$.Quality\",\n                                                            \"Landmarks.$\": \"$.Landmarks\"\n                                                        },\n                                                        \"Next\": \"DefaultOutputFaceDetailId\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Id.$\": \"States.Hash($, 'MD5')\"\n                                                        },\n                                                        \"OutputPath\": \"$.Id\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailLandmarks\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailLandmarks\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Landmarks\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailLandmarks\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailLandmarks\"\n                                                    },\n                                                    \"PassOutputFaceDetailLandmarks\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Landmarks\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailLandmarks\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Landmarks\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Landmarks\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailMouthOpen\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailMouthOpen\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.MouthOpen\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailMouthOpen\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailMouthOpen\"\n                                                    },\n                                                    \"PassOutputFaceDetailMouthOpen\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.MouthOpen\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailMouthOpen\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"MouthOpen\": null\n                                                        },\n                                                        \"OutputPath\": \"$.MouthOpen\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailMustache\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailMustache\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Mustache\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailMustache\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailMustache\"\n                                                    },\n                                                    \"PassOutputFaceDetailMustache\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Mustache\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailMustache\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Mustache\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Mustache\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailPose\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailPose\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Pose\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailPose\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailPose\"\n                                                    },\n                                                    \"PassOutputFaceDetailPose\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Pose\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailPose\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Pose\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Pose\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailQuality\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailQuality\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Quality\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailQuality\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailQuality\"\n                                                    },\n                                                    \"PassOutputFaceDetailQuality\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Quality\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailQuality\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Quality\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Quality\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailSmile\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailSmile\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Smile\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailSmile\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailSmile\"\n                                                    },\n                                                    \"PassOutputFaceDetailSmile\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Smile\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailSmile\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Smile\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Smile\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputFaceDetailSunglasses\",\n                                                \"States\": {\n                                                    \"CheckOutputFaceDetailSunglasses\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Sunglasses\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputFaceDetailSunglasses\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputFaceDetailSunglasses\"\n                                                    },\n                                                    \"PassOutputFaceDetailSunglasses\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Sunglasses\"\n                                                    },\n                                                    \"DefaultOutputFaceDetailSunglasses\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Sunglasses\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Sunglasses\"\n                                                    }\n                                                }\n                                            }\n                                        ],\n                                        \"ResultSelector\": {\n                                            \"AgeRange.$\": \"$[0]\",\n                                            \"Beard.$\": \"$[1]\",\n                                            \"BoundingBox.$\": \"$[2]\",\n                                            \"Confidence.$\": \"$[3]\",\n                                            \"Emotions.$\": \"$[4]\",\n                                            \"EyeDirection.$\": \"$[5]\",\n                                            \"Eyeglasses.$\": \"$[6]\",\n                                            \"EyesOpen.$\": \"$[7]\",\n                                            \"FaceOccluded.$\": \"$[8]\",\n                                            \"Gender.$\": \"$[9]\",\n                                            \"Id.$\": \"$[10]\",\n                                            \"Landmarks.$\": \"$[11]\",\n                                            \"MouthOpen.$\": \"$[12]\",\n                                            \"Mustache.$\": \"$[13]\",\n                                            \"Pose.$\": \"$[14]\",\n                                            \"Quality.$\": \"$[15]\",\n                                            \"Smile.$\": \"$[16]\",\n                                            \"Sunglasses.$\": \"$[17]\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"End\": true,\n                            \"ItemsPath\": \"$.FaceDetails\"\n                        },\n                        \"DefaultOutputFaceDetails\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"FaceDetails\": []\n                            },\n                            \"Next\": \"MapOutputFaceDetails\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputOrientationCorrection\",\n                    \"States\": {\n                        \"CheckOutputOrientationCorrection\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.OrientationCorrection\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOrientationCorrection\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputOrientationCorrection\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.OrientationCorrection\"\n                        },\n                        \"DefaultOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"OrientationCorrection\": null\n                            },\n                            \"Next\": \"PassOrientationCorrection\"\n                        }\n                    }\n                }\n            ],\n            \"ResultSelector\": {\n                \"FaceDetails.$\": \"$[0]\",\n                \"OrientationCorrection.$\": \"$[1]\"\n            },\n            \"ResultPath\": \"$.Output\",\n            \"Next\": \"StateMachineOutput\"\n        },\n        \"StateMachineOutput\": {\n            \"Type\": \"Pass\",\n            \"Parameters\": {\n                \"DetectFaces\": {\n                    \"CreatedAt.$\": \"$$.Execution.StartTime\",\n                    \"FaceDetails.$\": \"$.Output.FaceDetails\",\n                    \"Id.$\": \"$.S3.Object.ETag\",\n                    \"OrientationCorrection.$\": \"$.Output.OrientationCorrection\"\n                },\n                \"Execution\": {\n                    \"Id.$\": \"$$.Execution.Id\",\n                    \"Name.$\": \"$$.Execution.Name\",\n                    \"StartTime.$\": \"$$.Execution.StartTime\"\n                },\n                \"S3.$\": \"$.S3\",\n                \"StateMachine.$\": \"$$.StateMachine\"\n            },\n            \"Next\": \"Success\"\n        },\n        \"Success\": {\n            \"Type\": \"Succeed\"\n        },\n        \"FailDetectFaces\": {\n            \"Type\": \"Fail\"\n        }\n    }\n}\n","logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-detect-faces","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"after_unknown":{"arn":true,"creation_date":true,"description":true,"encryption_configuration":true,"id":true,"logging_configuration":[{"log_destination":true}],"name_prefix":true,"revision_id":true,"role_arn":true,"state_machine_version_arn":true,"status":true,"tags_all":{},"tracing_configuration":true,"version_description":true},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}}},{"address":"aws_sfn_state_machine.detect_labels","mode":"managed","type":"aws_sfn_state_machine","name":"detect_labels","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"definition":"{\n    \"StartAt\": \"CheckInvoker\",\n    \"States\": {\n        \"CheckInvoker\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n                {\n                    \"Variable\": \"$.StatePayload\",\n                    \"IsPresent\": true,\n                    \"Next\": \"InvokerStateMachine\"\n                }\n            ],\n            \"Default\": \"Fail\"\n        },\n        \"InvokerStateMachine\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"ParallelCheckInput\",\n            \"InputPath\": \"$.StatePayload\"\n        },\n        \"Fail\": {\n            \"Type\": \"Fail\"\n        },\n        \"ParallelCheckInput\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckInputRekognition\",\n                    \"States\": {\n                        \"CheckInputRekognition\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.Rekognition\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.Rekognition\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"CheckInputDetectLabels\"\n                                }\n                            ],\n                            \"Default\": \"DefaultInputRekognition\"\n                        },\n                        \"DefaultInputRekognition\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Rekognition\": {}\n                            },\n                            \"Next\": \"CheckInputDetectLabels\"\n                        },\n                        \"CheckInputDetectLabels\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.DetectLabels\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.DetectLabels\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"ParallelCheckInputDetectLabels\"\n                                }\n                            ],\n                            \"InputPath\": \"$.Rekognition\",\n                            \"Default\": \"DefaultInputDetectLabels\"\n                        },\n                        \"DefaultInputDetectLabels\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"DetectFaces\": {}\n                            },\n                            \"Next\": \"ParallelCheckInputDetectLabels\"\n                        },\n                        \"ParallelCheckInputDetectLabels\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputFeatures\",\n                                    \"States\": {\n                                        \"CheckInputFeatures\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Features\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.Features\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"MapInputFeatures\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputFeatures\"\n                                        },\n                                        \"MapInputFeatures\": {\n                                            \"Type\": \"Map\",\n                                            \"ItemProcessor\": {\n                                                \"ProcessorConfig\": {\n                                                    \"Mode\": \"INLINE\"\n                                                },\n                                                \"StartAt\": \"CheckValueFeature\",\n                                                \"States\": {\n                                                    \"CheckValueFeature\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"And\": [\n                                                                    {\n                                                                        \"Variable\": \"$\",\n                                                                        \"IsString\": true\n                                                                    },\n                                                                    {\n                                                                        \"Or\": [\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"GENERAL_LABELS\"\n                                                                            },\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"StringEquals\": \"IMAGE_PROPERTIES\"\n                                                                            }\n                                                                        ]\n                                                                    }\n                                                                ],\n                                                                \"Next\": \"PassValueFeature\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"FailCheckValueFeature\"\n                                                    },\n                                                    \"PassValueFeature\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true\n                                                    },\n                                                    \"FailCheckValueFeature\": {\n                                                        \"Type\": \"Fail\"\n                                                    }\n                                                }\n                                            },\n                                            \"End\": true,\n                                            \"ItemsPath\": \"$.Features\"\n                                        },\n                                        \"DefaultInputFeatures\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"Features\": [\n                                                    \"GENERAL_LABELS\",\n                                                    \"IMAGE_PROPERTIES\"\n                                                ]\n                                            },\n                                            \"Next\": \"MapInputFeatures\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputMaxLabels\",\n                                    \"States\": {\n                                        \"CheckInputMaxLabels\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.MaxLabels\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.MaxLabels\",\n                                                            \"IsNumeric\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"CheckValueMaxLabels\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputMaxLabels\"\n                                        },\n                                        \"CheckValueMaxLabels\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$\",\n                                                    \"NumericGreaterThanEquals\": 0,\n                                                    \"Next\": \"PassValueMaxLabels\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckValueMaxLabels\",\n                                            \"InputPath\": \"$.MaxLabels\"\n                                        },\n                                        \"PassValueMaxLabels\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckValueMaxLabels\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"DefaultInputMaxLabels\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"MaxLabels\": 0\n                                            },\n                                            \"Next\": \"CheckValueMaxLabels\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputMinConfidence\",\n                                    \"States\": {\n                                        \"CheckInputMinConfidence\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.MinConfidence\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.MinConfidence\",\n                                                            \"IsNumeric\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"CheckValueMinConfidence\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputMinConfidence\"\n                                        },\n                                        \"CheckValueMinConfidence\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$\",\n                                                            \"NumericGreaterThanEquals\": 0\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$\",\n                                                            \"NumericLessThanEquals\": 100\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassValueMinConfidence\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckValueMinConfidence\",\n                                            \"InputPath\": \"$.MinConfidence\"\n                                        },\n                                        \"PassValueMinConfidence\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckValueMinConfidence\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"DefaultInputMinConfidence\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"MinConfidence\": 50\n                                            },\n                                            \"Next\": \"CheckValueMinConfidence\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputSettings\",\n                                    \"States\": {\n                                        \"CheckInputSettings\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Settings\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.Settings\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"ParallelCheckInputSettings\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputSettings\"\n                                        },\n                                        \"ParallelCheckInputSettings\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckInputSettingsGeneralLabels\",\n                                                    \"States\": {\n                                                        \"CheckInputSettingsGeneralLabels\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.GeneralLabels\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Not\": {\n                                                                                \"Variable\": \"$.GeneralLabels\",\n                                                                                \"IsNull\": true\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"ParallelCheckInputSettingsGeneralLabels\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultInputSettingsGeneralLabels\"\n                                                        },\n                                                        \"ParallelCheckInputSettingsGeneralLabels\": {\n                                                            \"Type\": \"Parallel\",\n                                                            \"End\": true,\n                                                            \"Branches\": [\n                                                                {\n                                                                    \"StartAt\": \"CheckInputSettingsGeneralLabelsLabelCategoryExclusionFilters\",\n                                                                    \"States\": {\n                                                                        \"CheckInputSettingsGeneralLabelsLabelCategoryExclusionFilters\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.LabelCategoryExclusionFilters\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Not\": {\n                                                                                                \"Variable\": \"$.LabelCategoryExclusionFilters\",\n                                                                                                \"IsNull\": true\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"MapInputSettingsGeneralLabelsLabelCategoryExclusionFilters\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultInputSettingsGeneralLabelsLabelCategoryExclusionFilters\"\n                                                                        },\n                                                                        \"MapInputSettingsGeneralLabelsLabelCategoryExclusionFilters\": {\n                                                                            \"Type\": \"Map\",\n                                                                            \"ItemProcessor\": {\n                                                                                \"ProcessorConfig\": {\n                                                                                    \"Mode\": \"INLINE\"\n                                                                                },\n                                                                                \"StartAt\": \"CheckValueSettingsGeneralLabelsLabelCategoryExclusionFilter\",\n                                                                                \"States\": {\n                                                                                    \"CheckValueSettingsGeneralLabelsLabelCategoryExclusionFilter\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"And\": [\n                                                                                                    {\n                                                                                                        \"Variable\": \"$\",\n                                                                                                        \"IsString\": true\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"Next\": \"PassValueSettingsGeneralLabelsLabelCategoryExclusionFilter\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckValueSettingsGeneralLabelsLabelCategoryExclusionFilters\"\n                                                                                    },\n                                                                                    \"PassValueSettingsGeneralLabelsLabelCategoryExclusionFilter\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckValueSettingsGeneralLabelsLabelCategoryExclusionFilters\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            \"End\": true,\n                                                                            \"ItemsPath\": \"$.LabelCategoryExclusionFilters\"\n                                                                        },\n                                                                        \"DefaultInputSettingsGeneralLabelsLabelCategoryExclusionFilters\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Parameters\": {\n                                                                                \"LabelCategoryExclusionFilters\": []\n                                                                            },\n                                                                            \"Next\": \"MapInputSettingsGeneralLabelsLabelCategoryExclusionFilters\"\n                                                                        }\n                                                                    }\n                                                                },\n                                                                {\n                                                                    \"StartAt\": \"CheckInputSettingsGeneralLabelsLabelCategoryInclusionFilters\",\n                                                                    \"States\": {\n                                                                        \"CheckInputSettingsGeneralLabelsLabelCategoryInclusionFilters\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.LabelCategoryInclusionFilters\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Not\": {\n                                                                                                \"Variable\": \"$.LabelCategoryInclusionFilters\",\n                                                                                                \"IsNull\": true\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"MapInputSettingsGeneralLabelsLabelCategoryInclusionFilters\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultSettingsGeneralLabelsLabelCategoryInclusionFilters\"\n                                                                        },\n                                                                        \"MapInputSettingsGeneralLabelsLabelCategoryInclusionFilters\": {\n                                                                            \"Type\": \"Map\",\n                                                                            \"ItemProcessor\": {\n                                                                                \"ProcessorConfig\": {\n                                                                                    \"Mode\": \"INLINE\"\n                                                                                },\n                                                                                \"StartAt\": \"CheckValueSettingsGeneralLabelsLabelCategoryInclusionFilter\",\n                                                                                \"States\": {\n                                                                                    \"CheckValueSettingsGeneralLabelsLabelCategoryInclusionFilter\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"Variable\": \"$\",\n                                                                                                \"IsString\": true,\n                                                                                                \"Next\": \"PassValueSettingsGeneralLabelsLabelCategoryInclusionFilter\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckValueSettingsGeneralLabelsLabelCategoryInclusionFilter\"\n                                                                                    },\n                                                                                    \"PassValueSettingsGeneralLabelsLabelCategoryInclusionFilter\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckValueSettingsGeneralLabelsLabelCategoryInclusionFilter\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            \"End\": true,\n                                                                            \"ItemsPath\": \"$.LabelCategoryInclusionFilters\"\n                                                                        },\n                                                                        \"DefaultSettingsGeneralLabelsLabelCategoryInclusionFilters\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Parameters\": {\n                                                                                \"LabelCategoryInclusionFilters\": []\n                                                                            },\n                                                                            \"Next\": \"MapInputSettingsGeneralLabelsLabelCategoryInclusionFilters\"\n                                                                        }\n                                                                    }\n                                                                },\n                                                                {\n                                                                    \"StartAt\": \"CheckInputSettingsGeneralLabelsLabelExclusionFilters\",\n                                                                    \"States\": {\n                                                                        \"CheckInputSettingsGeneralLabelsLabelExclusionFilters\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.LabelExclusionFilters\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Not\": {\n                                                                                                \"Variable\": \"$.LabelExclusionFilters\",\n                                                                                                \"IsNull\": true\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"MapInputSettingsGeneralLabelsLabelExclusionFilters\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultInputSettingsGeneralLabelsLabelExclusionFilters\"\n                                                                        },\n                                                                        \"MapInputSettingsGeneralLabelsLabelExclusionFilters\": {\n                                                                            \"Type\": \"Map\",\n                                                                            \"ItemProcessor\": {\n                                                                                \"ProcessorConfig\": {\n                                                                                    \"Mode\": \"INLINE\"\n                                                                                },\n                                                                                \"StartAt\": \"CheckValueSettingsGeneralLabelsLabelExclusionFilter\",\n                                                                                \"States\": {\n                                                                                    \"CheckValueSettingsGeneralLabelsLabelExclusionFilter\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"Variable\": \"$\",\n                                                                                                \"IsString\": true,\n                                                                                                \"Next\": \"PassValueSettingsGeneralLabelsLabelExclusionFilter\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckValueSettingsGeneralLabelsLabelExclusionFilter\"\n                                                                                    },\n                                                                                    \"PassValueSettingsGeneralLabelsLabelExclusionFilter\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckValueSettingsGeneralLabelsLabelExclusionFilter\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            \"End\": true,\n                                                                            \"ItemsPath\": \"$.LabelExclusionFilters\"\n                                                                        },\n                                                                        \"DefaultInputSettingsGeneralLabelsLabelExclusionFilters\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Parameters\": {\n                                                                                \"LabelExclusionFilters\": []\n                                                                            },\n                                                                            \"Next\": \"MapInputSettingsGeneralLabelsLabelExclusionFilters\"\n                                                                        }\n                                                                    }\n                                                                },\n                                                                {\n                                                                    \"StartAt\": \"CheckInputSettingsGeneralLabelsLabelInclusionFilters\",\n                                                                    \"States\": {\n                                                                        \"CheckInputSettingsGeneralLabelsLabelInclusionFilters\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.LabelInclusionFilters\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Not\": {\n                                                                                                \"Variable\": \"$.LabelInclusionFilters\",\n                                                                                                \"IsNull\": true\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"MapInputSettingsGeneralLabelsLabelInclusionFilters\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultInputSettingsGeneralLabelsLabelInclusionFilters\"\n                                                                        },\n                                                                        \"MapInputSettingsGeneralLabelsLabelInclusionFilters\": {\n                                                                            \"Type\": \"Map\",\n                                                                            \"ItemProcessor\": {\n                                                                                \"ProcessorConfig\": {\n                                                                                    \"Mode\": \"INLINE\"\n                                                                                },\n                                                                                \"StartAt\": \"CheckValueSettingsGeneralLabelsLabelInclusionFilter\",\n                                                                                \"States\": {\n                                                                                    \"CheckValueSettingsGeneralLabelsLabelInclusionFilter\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"Variable\": \"$\",\n                                                                                                \"IsString\": true,\n                                                                                                \"Next\": \"PassValueSettingsGeneralLabelsLabelInclusionFilter\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckValueSettingsGeneralLabelsLabelInclusionFilter\"\n                                                                                    },\n                                                                                    \"PassValueSettingsGeneralLabelsLabelInclusionFilter\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckValueSettingsGeneralLabelsLabelInclusionFilter\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            \"End\": true,\n                                                                            \"ItemsPath\": \"$.LabelInclusionFilters\"\n                                                                        },\n                                                                        \"DefaultInputSettingsGeneralLabelsLabelInclusionFilters\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Parameters\": {\n                                                                                \"LabelInclusionFilters\": []\n                                                                            },\n                                                                            \"Next\": \"MapInputSettingsGeneralLabelsLabelInclusionFilters\"\n                                                                        }\n                                                                    }\n                                                                }\n                                                            ],\n                                                            \"InputPath\": \"$.GeneralLabels\",\n                                                            \"ResultSelector\": {\n                                                                \"LabelCategoryExclusionFilters.$\": \"$[0]\",\n                                                                \"LabelCategoryInclusionFilters.$\": \"$[1]\",\n                                                                \"LabelExclusionFilters.$\": \"$[2]\",\n                                                                \"LabelInclusionFilters.$\": \"$[3]\"\n                                                            }\n                                                        },\n                                                        \"DefaultInputSettingsGeneralLabels\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"Next\": \"ParallelCheckInputSettingsGeneralLabels\",\n                                                            \"Parameters\": {\n                                                                \"GeneralLabels\": {}\n                                                            }\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputSettingsImageProperties\",\n                                                    \"States\": {\n                                                        \"CheckInputSettingsImageProperties\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.ImageProperties\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Not\": {\n                                                                                \"Variable\": \"$.ImageProperties\",\n                                                                                \"IsNull\": true\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"ParallelCheckInputSettingsImageProperties\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultInputSettingsImageProperties\"\n                                                        },\n                                                        \"ParallelCheckInputSettingsImageProperties\": {\n                                                            \"Type\": \"Parallel\",\n                                                            \"End\": true,\n                                                            \"Branches\": [\n                                                                {\n                                                                    \"StartAt\": \"CheckInputSettingsImagePropertiesMaxDominantColors\",\n                                                                    \"States\": {\n                                                                        \"CheckInputSettingsImagePropertiesMaxDominantColors\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.MaxDominantColors\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Variable\": \"$.MaxDominantColors\",\n                                                                                            \"IsNumeric\": true\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"CheckValueSettingsImagePropertiesMaxDominantColor\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultInputSettingsImagePropertiesMaxDominantColors\"\n                                                                        },\n                                                                        \"CheckValueSettingsImagePropertiesMaxDominantColor\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$\",\n                                                                                            \"NumericGreaterThanEquals\": 0\n                                                                                        },\n                                                                                        {\n                                                                                            \"Variable\": \"$\",\n                                                                                            \"NumericLessThanEquals\": 100\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"PassValueSettingsImagePropertiesMaxDominantColor\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"FailCheckValueSettingsImagePropertiesMaxDominantColor\",\n                                                                            \"InputPath\": \"$.MaxDominantColors\"\n                                                                        },\n                                                                        \"PassValueSettingsImagePropertiesMaxDominantColor\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"End\": true\n                                                                        },\n                                                                        \"FailCheckValueSettingsImagePropertiesMaxDominantColor\": {\n                                                                            \"Type\": \"Fail\"\n                                                                        },\n                                                                        \"DefaultInputSettingsImagePropertiesMaxDominantColors\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Parameters\": {\n                                                                                \"MaxDominantColors\": 20\n                                                                            },\n                                                                            \"Next\": \"CheckValueSettingsImagePropertiesMaxDominantColor\"\n                                                                        }\n                                                                    }\n                                                                }\n                                                            ],\n                                                            \"InputPath\": \"$.ImageProperties\",\n                                                            \"ResultSelector\": {\n                                                                \"MaxDominantColors.$\": \"$[0]\"\n                                                            }\n                                                        },\n                                                        \"DefaultInputSettingsImageProperties\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"Parameters\": {\n                                                                \"ImageProperties\": {}\n                                                            },\n                                                            \"Next\": \"ParallelCheckInputSettingsImageProperties\"\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"InputPath\": \"$.Settings\",\n                                            \"ResultSelector\": {\n                                                \"GeneralLabels.$\": \"$[0]\",\n                                                \"ImageProperties.$\": \"$[1]\"\n                                            }\n                                        },\n                                        \"DefaultInputSettings\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"Settings\": {}\n                                            },\n                                            \"Next\": \"ParallelCheckInputSettings\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"DetectLabels\": {\n                                    \"Features.$\": \"$[0]\",\n                                    \"MaxLabels.$\": \"$[1]\",\n                                    \"MinConfidence.$\": \"$[2]\",\n                                    \"Settings.$\": \"$[3]\"\n                                }\n                            },\n                            \"InputPath\": \"$.DetectFaces\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckInputS3\",\n                    \"States\": {\n                        \"CheckInputS3\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.S3\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckInputS3\"\n                                }\n                            ],\n                            \"Default\": \"FailCheckS3Input\"\n                        },\n                        \"ParallelCheckInputS3\": {\n                            \"Type\": \"Parallel\",\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputBucket\",\n                                    \"States\": {\n                                        \"CheckInputBucket\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Bucket\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputBucketName\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucket\"\n                                        },\n                                        \"CheckInputBucketName\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"HeadBucket\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucketName\",\n                                            \"InputPath\": \"$.Bucket\"\n                                        },\n                                        \"HeadBucket\": {\n                                            \"Type\": \"Task\",\n                                            \"Parameters\": {\n                                                \"Bucket.$\": \"$.Name\"\n                                            },\n                                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headBucket\",\n                                            \"Catch\": [\n                                                {\n                                                    \"ErrorEquals\": [\n                                                        \"States.TaskFailed\"\n                                                    ],\n                                                    \"Next\": \"FailHeadBucket\"\n                                                }\n                                            ],\n                                            \"ResultPath\": \"$.Output\",\n                                            \"Next\": \"PassHeadBucket\"\n                                        },\n                                        \"PassHeadBucket\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"AccessPointAlias.$\": \"$.Output.AccessPointAlias\",\n                                                \"Name.$\": \"$.Name\",\n                                                \"Region.$\": \"$.Output.BucketRegion\"\n                                            }\n                                        },\n                                        \"FailHeadBucket\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucketName\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucket\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputObject\",\n                                    \"States\": {\n                                        \"CheckInputObject\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Object\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputObject\"\n                                        },\n                                        \"CheckInputKey\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputKey\",\n                                            \"InputPath\": \"$.Object\"\n                                        },\n                                        \"PassInputKey\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckInputKey\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputObject\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.S3\",\n                            \"ResultSelector\": {\n                                \"Bucket.$\": \"$[0]\",\n                                \"Object.$\": \"$[1]\"\n                            },\n                            \"Next\": \"HeadObject\"\n                        },\n                        \"HeadObject\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\"\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headObject\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailHeadObject\"\n                                }\n                            ],\n                            \"Next\": \"PassHeadObject\"\n                        },\n                        \"PassHeadObject\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            },\n                            \"Next\": \"GetObjectAttributes\"\n                        },\n                        \"GetObjectAttributes\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\",\n                                \"ObjectAttributes\": [\n                                    \"Checksum\",\n                                    \"ETag\",\n                                    \"ObjectParts\",\n                                    \"ObjectSize\",\n                                    \"StorageClass\"\n                                ]\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:getObjectAttributes\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailGetObjectAttributes\"\n                                }\n                            ],\n                            \"Next\": \"PassGetObjectAttributes\"\n                        },\n                        \"PassGetObjectAttributes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            }\n                        },\n                        \"FailGetObjectAttributes\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailHeadObject\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailCheckS3Input\": {\n                            \"Type\": \"Fail\"\n                        }\n                    }\n                }\n            ],\n            \"Next\": \"DetectLabels\",\n            \"ResultSelector\": {\n                \"Rekognition.$\": \"$[0]\",\n                \"S3.$\": \"$[1]\"\n            }\n        },\n        \"DetectLabels\": {\n            \"Type\": \"Task\",\n            \"Parameters\": {\n                \"Features.$\": \"$.Rekognition.DetectLabels.Features\",\n                \"Image\": {\n                    \"S3Object\": {\n                        \"Bucket.$\": \"$.S3.Bucket.Name\",\n                        \"Name.$\": \"$.S3.Object.Key\"\n                    }\n                },\n                \"MaxLabels.$\": \"$.Rekognition.DetectLabels.MinConfidence\",\n                \"Settings.$\": \"$.Rekognition.DetectLabels.Settings\"\n            },\n            \"Resource\": \"arn:aws:states:::aws-sdk:rekognition:detectLabels\",\n            \"Next\": \"ParallelCheckOutputDetectLabels\",\n            \"Catch\": [\n                {\n                    \"ErrorEquals\": [\n                        \"States.TaskFailed\"\n                    ],\n                    \"Next\": \"FailDetectLabels\"\n                }\n            ],\n            \"ResultPath\": \"$.Output\"\n        },\n        \"ParallelCheckOutputDetectLabels\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckOutputImageProperties\",\n                    \"States\": {\n                        \"CheckOutputImageProperties\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ImageProperties\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckOutputImageProperties\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputImageProperties\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"ParallelCheckOutputImageProperties\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckOutputImagePropertiesBackground\",\n                                    \"States\": {\n                                        \"CheckOutputImagePropertiesBackground\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Background\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"ParallelOutputImagePropertiesBackground\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputImagePropertiesBackground\"\n                                        },\n                                        \"ParallelOutputImagePropertiesBackground\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckOutputImagePropertiesBackgroundDominantColors\",\n                                                    \"States\": {\n                                                        \"CheckOutputImagePropertiesBackgroundDominantColors\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"Variable\": \"$.DominantColors\",\n                                                                    \"IsPresent\": true,\n                                                                    \"Next\": \"PassOutputImagePropertiesBackgroundDominantColors\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultOutputImagePropertiesBackgroundDominantColors\"\n                                                        },\n                                                        \"PassOutputImagePropertiesBackgroundDominantColors\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.DominantColors\"\n                                                        },\n                                                        \"DefaultOutputImagePropertiesBackgroundDominantColors\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"Parameters\": {\n                                                                \"DominantColors\": null\n                                                            },\n                                                            \"OutputPath\": \"$.DominantColors\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckOutputImagePropertiesBackgroundQuality\",\n                                                    \"States\": {\n                                                        \"CheckOutputImagePropertiesBackgroundQuality\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"Variable\": \"$.Quality\",\n                                                                    \"IsPresent\": true,\n                                                                    \"Next\": \"PassOutputImagePropertiesBackgroundQuality\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultOutputImagePropertiesBackgroundQuality\"\n                                                        },\n                                                        \"PassOutputImagePropertiesBackgroundQuality\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.Quality\"\n                                                        },\n                                                        \"DefaultOutputImagePropertiesBackgroundQuality\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"Parameters\": {\n                                                                \"Quality\": null\n                                                            },\n                                                            \"OutputPath\": \"$.Quality\"\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"InputPath\": \"$.Background\",\n                                            \"ResultSelector\": {\n                                                \"DominantColors.$\": \"$[0]\",\n                                                \"Quality.$\": \"$[1]\"\n                                            }\n                                        },\n                                        \"DefaultOutputImagePropertiesBackground\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"Background\": null\n                                            },\n                                            \"OutputPath\": \"$.Background\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckOutputImagePropertiesDominantColors\",\n                                    \"States\": {\n                                        \"CheckOutputImagePropertiesDominantColors\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.DominantColors\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassOutputImagePropertiesDominantColors\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputImagePropertiesDominantColors\"\n                                        },\n                                        \"PassOutputImagePropertiesDominantColors\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.DominantColors\"\n                                        },\n                                        \"DefaultOutputImagePropertiesDominantColors\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"DominantColors\": []\n                                            },\n                                            \"OutputPath\": \"$.DominantColors\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckOutputImagePropertiesForeground\",\n                                    \"States\": {\n                                        \"CheckOutputImagePropertiesForeground\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Foreground\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"ParallelCheckOutputImagePropertiesForeground\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputImagePropertiesForeground\"\n                                        },\n                                        \"ParallelCheckOutputImagePropertiesForeground\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckOutputImagePropertiesForegroundDominantColors\",\n                                                    \"States\": {\n                                                        \"CheckOutputImagePropertiesForegroundDominantColors\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"Variable\": \"$.DominatColors\",\n                                                                    \"IsPresent\": true,\n                                                                    \"Next\": \"PassOutputImagePropertiesForegroundDominantColors\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultOutputImagePropertiesForegroundDominantColors\"\n                                                        },\n                                                        \"PassOutputImagePropertiesForegroundDominantColors\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.DominantColors\"\n                                                        },\n                                                        \"DefaultOutputImagePropertiesForegroundDominantColors\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"Parameters\": {\n                                                                \"DominantColors\": null\n                                                            },\n                                                            \"OutputPath\": \"$.DominantColors\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckOutputImagePropertiesForegroundQuality\",\n                                                    \"States\": {\n                                                        \"CheckOutputImagePropertiesForegroundQuality\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"Variable\": \"$.Quality\",\n                                                                    \"IsPresent\": true,\n                                                                    \"Next\": \"PassCheckOutputImagePropertiesForegroundQuality\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultCheckOutputImagePropertiesForegroundQuality\"\n                                                        },\n                                                        \"PassCheckOutputImagePropertiesForegroundQuality\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.Quality\"\n                                                        },\n                                                        \"DefaultCheckOutputImagePropertiesForegroundQuality\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"Parameters\": {\n                                                                \"Quality\": null\n                                                            },\n                                                            \"OutputPath\": \"$.Quality\"\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"InputPath\": \"$.Foreground\",\n                                            \"ResultSelector\": {\n                                                \"DominantColors.$\": \"$[0]\",\n                                                \"Quality.$\": \"$[1]\"\n                                            }\n                                        },\n                                        \"DefaultOutputImagePropertiesForeground\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"Foreground\": null\n                                            },\n                                            \"OutputPath\": \"$.Foreground\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckOutputImagePropertiesQuality\",\n                                    \"States\": {\n                                        \"CheckOutputImagePropertiesQuality\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Quality\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassOutputImagePropertiesQuality\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputImagePropertiesQuality\"\n                                        },\n                                        \"PassOutputImagePropertiesQuality\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.Quality\"\n                                        },\n                                        \"DefaultOutputImagePropertiesQuality\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"Quality\": null\n                                            },\n                                            \"OutputPath\": \"$.Quality\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.ImageProperties\",\n                            \"ResultSelector\": {\n                                \"Background.$\": \"$[0]\",\n                                \"DominantColors.$\": \"$[1]\",\n                                \"Foreground.$\": \"$[2]\",\n                                \"Quality.$\": \"$[3]\"\n                            }\n                        },\n                        \"DefaultOutputImageProperties\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"ImageProperties\": {}\n                            },\n                            \"End\": true\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputLabelModelVersion\",\n                    \"States\": {\n                        \"CheckOutputLabelModelVersion\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.LabelModelVersion\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputLabelModelVersion\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputLabelModelVersion\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputLabelModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.LabelModelVersion\"\n                        },\n                        \"DefaultOutputLabelModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"LabelModelVersion\": null\n                            },\n                            \"OutputPath\": \"$.LabelModelVersion\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputLabels\",\n                    \"States\": {\n                        \"CheckOutputLabels\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.Labels\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"MapOutputLabels\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputLabels\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"MapOutputLabels\": {\n                            \"Type\": \"Map\",\n                            \"ItemProcessor\": {\n                                \"ProcessorConfig\": {\n                                    \"Mode\": \"INLINE\"\n                                },\n                                \"StartAt\": \"ParallelCheckOutputLabel\",\n                                \"States\": {\n                                    \"ParallelCheckOutputLabel\": {\n                                        \"Type\": \"Parallel\",\n                                        \"End\": true,\n                                        \"Branches\": [\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelAliases\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelAliases\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Aliases\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputLabelAliases\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelAliases\"\n                                                    },\n                                                    \"PassOutputLabelAliases\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Aliases\"\n                                                    },\n                                                    \"DefaultOutputLabelAliases\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Aliases\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Aliases\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelCategories\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelCategories\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Categories\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputLabelCategories\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelCategories\"\n                                                    },\n                                                    \"PassOutputLabelCategories\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Categories\"\n                                                    },\n                                                    \"DefaultOutputLabelCategories\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Categories\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Categories\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelConfidence\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelConfidence\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Confidence\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputLabelConfidence\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelConfidence\"\n                                                    },\n                                                    \"PassOutputLabelConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Confidence\"\n                                                    },\n                                                    \"DefaultOutputLabelConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Confidence\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Confidence\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelInstances\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelInstances\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Instances\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"MapOutputLabelInstances\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelInstances\"\n                                                    },\n                                                    \"MapOutputLabelInstances\": {\n                                                        \"Type\": \"Map\",\n                                                        \"ItemProcessor\": {\n                                                            \"ProcessorConfig\": {\n                                                                \"Mode\": \"INLINE\"\n                                                            },\n                                                            \"StartAt\": \"ParallelCheckOutputLabelInstance\",\n                                                            \"States\": {\n                                                                \"ParallelCheckOutputLabelInstance\": {\n                                                                    \"Type\": \"Parallel\",\n                                                                    \"End\": true,\n                                                                    \"Branches\": [\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputLabelInstanceBoundingBox\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputLabelInstanceBoundingBox\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.BoundingBox\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"PassOutputLabelInstanceBoundingBox\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputLabelInstanceBoundingBox\"\n                                                                                },\n                                                                                \"PassOutputLabelInstanceBoundingBox\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"InputPath\": \"$.BoundingBox\"\n                                                                                },\n                                                                                \"DefaultOutputLabelInstanceBoundingBox\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"BoundingBox\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.BoundingBox\"\n                                                                                }\n                                                                            }\n                                                                        },\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputLabelInstanceConfidence\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputLabelInstanceConfidence\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.Confidence\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"PassOutputLabelInstanceConfidence\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputLabelInstanceConfidence\"\n                                                                                },\n                                                                                \"PassOutputLabelInstanceConfidence\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"InputPath\": \"$.Confidence\"\n                                                                                },\n                                                                                \"DefaultOutputLabelInstanceConfidence\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"Confidence\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.Confidence\"\n                                                                                }\n                                                                            }\n                                                                        },\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputLabelInstanceDominantColors\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputLabelInstanceDominantColors\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.DominantColors\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"PassOutputLabelInstanceDominantColors\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputLabelInstanceDominantColors\"\n                                                                                },\n                                                                                \"PassOutputLabelInstanceDominantColors\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"InputPath\": \"$.DominantColors\"\n                                                                                },\n                                                                                \"DefaultOutputLabelInstanceDominantColors\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"DominantColors\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.DominantColors\"\n                                                                                }\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"ResultSelector\": {\n                                                                        \"BoundingBox.$\": \"$[0]\",\n                                                                        \"Confidence.$\": \"$[1]\",\n                                                                        \"DominantColors.$\": \"$[2]\"\n                                                                    }\n                                                                }\n                                                            }\n                                                        },\n                                                        \"End\": true,\n                                                        \"ItemsPath\": \"$.Instances\"\n                                                    },\n                                                    \"DefaultOutputLabelInstances\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Instances\": null\n                                                        }\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelName\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelName\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Name\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputLabelName\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelName\"\n                                                    },\n                                                    \"PassOutputLabelName\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Name\"\n                                                    },\n                                                    \"DefaultOutputLabelName\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Name\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Name\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputLabelParents\",\n                                                \"States\": {\n                                                    \"CheckOutputLabelParents\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Parents\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputLabelParents\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputLabelParents\"\n                                                    },\n                                                    \"PassOutputLabelParents\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Parents\"\n                                                    },\n                                                    \"DefaultOutputLabelParents\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Parents\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Parents\"\n                                                    }\n                                                }\n                                            }\n                                        ],\n                                        \"ResultSelector\": {\n                                            \"Aliases.$\": \"$[0]\",\n                                            \"Categories.$\": \"$[1]\",\n                                            \"Confidence.$\": \"$[2]\",\n                                            \"Name.$\": \"$[3]\",\n                                            \"Parents.$\": \"$[4]\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"End\": true,\n                            \"ItemsPath\": \"$.Labels\"\n                        },\n                        \"DefaultOutputLabels\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Labels\": null\n                            },\n                            \"OutputPath\": \"$.Labels\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputOrientationCorrection\",\n                    \"States\": {\n                        \"CheckOutputOrientationCorrection\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.OrientationCorrection\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOrientationCorrection\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputOrientationCorrection\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.OrientationCorrection\"\n                        },\n                        \"DefaultOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"OrientationCorrection\": null\n                            },\n                            \"Next\": \"PassOrientationCorrection\"\n                        }\n                    }\n                }\n            ],\n            \"ResultSelector\": {\n                \"ImageProperties.$\": \"$[0]\",\n                \"LabelModelVersion.$\": \"$[1]\",\n                \"Labels.$\": \"$[2]\",\n                \"OrientationCorrection.$\": \"$[3]\"\n            },\n            \"ResultPath\": \"$.Output\",\n            \"Next\": \"StateMachineOutput\"\n        },\n        \"StateMachineOutput\": {\n            \"Type\": \"Pass\",\n            \"Parameters\": {\n                \"DetectLabels\": {\n                    \"CreatedAt.$\": \"$$.Execution.StartTime\",\n                    \"Id.$\": \"$.S3.Object.ETag\",\n                    \"ImageProperties.$\": \"$.Output.ImageProperties\",\n                    \"LabelModelVersion.$\": \"$.Output.LabelModelVersion\",\n                    \"Labels.$\": \"$.Output.Labels\",\n                    \"OrientationCorrection.$\": \"$.Output.OrientationCorrection\"\n                },\n                \"Execution\": {\n                    \"Id.$\": \"$$.Execution.Id\",\n                    \"Name.$\": \"$$.Execution.Name\",\n                    \"StartTime.$\": \"$$.Execution.StartTime\"\n                },\n                \"S3.$\": \"$.S3\",\n                \"StateMachine.$\": \"$$.StateMachine\"\n            },\n            \"Next\": \"Success\"\n        },\n        \"Success\": {\n            \"Type\": \"Succeed\"\n        },\n        \"FailDetectLabels\": {\n            \"Type\": \"Fail\"\n        }\n    }\n}\n","logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-detect-labels","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"after_unknown":{"arn":true,"creation_date":true,"description":true,"encryption_configuration":true,"id":true,"logging_configuration":[{"log_destination":true}],"name_prefix":true,"revision_id":true,"role_arn":true,"state_machine_version_arn":true,"status":true,"tags_all":{},"tracing_configuration":true,"version_description":true},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}}},{"address":"aws_sfn_state_machine.detect_moderation_labels","mode":"managed","type":"aws_sfn_state_machine","name":"detect_moderation_labels","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"definition":"{\n    \"StartAt\": \"CheckInvoker\",\n    \"States\": {\n        \"CheckInvoker\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n                {\n                    \"Variable\": \"$.StatePayload\",\n                    \"IsPresent\": true,\n                    \"Next\": \"InvokerStateMachine\"\n                }\n            ],\n            \"Default\": \"Fail\"\n        },\n        \"InvokerStateMachine\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"ParallelCheckInput\",\n            \"InputPath\": \"$.StatePayload\"\n        },\n        \"Fail\": {\n            \"Type\": \"Fail\"\n        },\n        \"ParallelCheckInput\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckInputRekognition\",\n                    \"States\": {\n                        \"CheckInputRekognition\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.Rekognition\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.Rekognition\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"CheckInputDetectModerationLabels\"\n                                }\n                            ],\n                            \"Default\": \"DefaultInputRekognition\"\n                        },\n                        \"DefaultInputRekognition\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Rekognition\": {}\n                            },\n                            \"Next\": \"CheckInputDetectModerationLabels\"\n                        },\n                        \"CheckInputDetectModerationLabels\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.DetectModerationLabels\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.DetectModerationLabels\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"ParallelCheckInputDetectModerationLabels\"\n                                }\n                            ],\n                            \"InputPath\": \"$.Rekognition\",\n                            \"Default\": \"DefaultInputDetectModerationLabels\"\n                        },\n                        \"DefaultInputDetectModerationLabels\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"DetectModerationLabels\": {}\n                            },\n                            \"Next\": \"ParallelCheckInputDetectModerationLabels\"\n                        },\n                        \"ParallelCheckInputDetectModerationLabels\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputHumanLoopConfig\",\n                                    \"States\": {\n                                        \"CheckInputHumanLoopConfig\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.HumanLoopConfig\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.HumanLoopConfig\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"ParallelCheckHumanLoopConfig\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputHumanLoopConfig\"\n                                        },\n                                        \"ParallelCheckHumanLoopConfig\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckInputHumanLoopConfigDataAttributes\",\n                                                    \"States\": {\n                                                        \"CheckInputHumanLoopConfigDataAttributes\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.DataAttributes\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Not\": {\n                                                                                \"Variable\": \"$.DataAttributes\",\n                                                                                \"IsNull\": true\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"ParallelCheckInputHumanLoopConfigDataAttributes\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultInputHumanLoopConfigDataAttributes\"\n                                                        },\n                                                        \"ParallelCheckInputHumanLoopConfigDataAttributes\": {\n                                                            \"Type\": \"Parallel\",\n                                                            \"End\": true,\n                                                            \"Branches\": [\n                                                                {\n                                                                    \"StartAt\": \"CheckInputHumanLoopConfigDataAttributesContentClassifiers\",\n                                                                    \"States\": {\n                                                                        \"CheckInputHumanLoopConfigDataAttributesContentClassifiers\": {\n                                                                            \"Type\": \"Choice\",\n                                                                            \"Choices\": [\n                                                                                {\n                                                                                    \"And\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.ContentClassifiers\",\n                                                                                            \"IsPresent\": true\n                                                                                        },\n                                                                                        {\n                                                                                            \"Not\": {\n                                                                                                \"Variable\": \"$.ContentClassifiers\",\n                                                                                                \"IsNull\": true\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Next\": \"MapInputHumanLoopConfigDataAttributesContentClassifiers\"\n                                                                                }\n                                                                            ],\n                                                                            \"Default\": \"DefaultInputHumanLoopConfigDataAttributesContentClassifiers\"\n                                                                        },\n                                                                        \"MapInputHumanLoopConfigDataAttributesContentClassifiers\": {\n                                                                            \"Type\": \"Map\",\n                                                                            \"ItemProcessor\": {\n                                                                                \"ProcessorConfig\": {\n                                                                                    \"Mode\": \"INLINE\"\n                                                                                },\n                                                                                \"StartAt\": \"CheckValueHumanLoopConfigDataAttributesContentClassifier\",\n                                                                                \"States\": {\n                                                                                    \"CheckValueHumanLoopConfigDataAttributesContentClassifier\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"Variable\": \"$\",\n                                                                                                \"IsString\": true,\n                                                                                                \"Next\": \"PassValueHumanLoopConfigDataAttributesContentClassifier\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckValueHumanLoopConfigDataAttributesContentClassifier\"\n                                                                                    },\n                                                                                    \"PassValueHumanLoopConfigDataAttributesContentClassifier\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckValueHumanLoopConfigDataAttributesContentClassifier\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            \"End\": true,\n                                                                            \"ItemsPath\": \"$.ContentClassifiers\"\n                                                                        },\n                                                                        \"DefaultInputHumanLoopConfigDataAttributesContentClassifiers\": {\n                                                                            \"Type\": \"Pass\",\n                                                                            \"Next\": \"MapInputHumanLoopConfigDataAttributesContentClassifiers\",\n                                                                            \"Parameters\": {\n                                                                                \"ContentClassifiers\": []\n                                                                            }\n                                                                        }\n                                                                    }\n                                                                }\n                                                            ],\n                                                            \"ResultSelector\": {\n                                                                \"ContentClassifiers.$\": \"$[0]\"\n                                                            },\n                                                            \"InputPath\": \"$.DataAttributes\"\n                                                        },\n                                                        \"DefaultInputHumanLoopConfigDataAttributes\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"Parameters\": {\n                                                                \"DataAttributes\": {}\n                                                            },\n                                                            \"Next\": \"ParallelCheckInputHumanLoopConfigDataAttributes\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputHumanLoopConfigFlowDefinitionArn\",\n                                                    \"States\": {\n                                                        \"CheckInputHumanLoopConfigFlowDefinitionArn\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.FlowDefinitionArn\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Variable\": \"$.FlowDefinitionArn\",\n                                                                            \"IsString\": true\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"PassInputHumanLoopConfigFlowDefinitionArn\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckInputHumanLoopConfigFlowDefinitionArn\"\n                                                        },\n                                                        \"PassInputHumanLoopConfigFlowDefinitionArn\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.DefinitionArn\"\n                                                        },\n                                                        \"FailCheckInputHumanLoopConfigFlowDefinitionArn\": {\n                                                            \"Type\": \"Fail\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputHumanLoopConfigHumanLoopName\",\n                                                    \"States\": {\n                                                        \"CheckInputHumanLoopConfigHumanLoopName\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.HumanLoopName\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Variable\": \"$.HumanLoopName\",\n                                                                            \"IsString\": true\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"PassInputHumanLoopConfigHumanLoopName\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckInputHumanLoopConfigHumanLoopName\"\n                                                        },\n                                                        \"PassInputHumanLoopConfigHumanLoopName\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.HumanLoopName\"\n                                                        },\n                                                        \"FailCheckInputHumanLoopConfigHumanLoopName\": {\n                                                            \"Type\": \"Fail\"\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"ResultSelector\": {\n                                                \"DataAttributes.$\": \"$[0]\",\n                                                \"FlowDefinitionArn.$\": \"$[1]\",\n                                                \"HumanLoopName.$\": \"$[2]\"\n                                            },\n                                            \"InputPath\": \"$.HumanLoopConfig\"\n                                        },\n                                        \"DefaultInputHumanLoopConfig\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"HumanLoopConfig\": null\n                                            },\n                                            \"End\": true\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputMinConfidence\",\n                                    \"States\": {\n                                        \"CheckInputMinConfidence\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.MinConfidence\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.MinConfidence\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"CheckValueMinConfidence\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputMinConfidence\"\n                                        },\n                                        \"CheckValueMinConfidence\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$\",\n                                                            \"NumericGreaterThanEquals\": 0\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$\",\n                                                            \"NumericLessThanEquals\": 100\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassValueMinConfidence\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckValueMinConfidence\",\n                                            \"InputPath\": \"$.MinConfidence\"\n                                        },\n                                        \"PassValueMinConfidence\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckValueMinConfidence\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"DefaultInputMinConfidence\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"MinConfidence\": 50\n                                            },\n                                            \"Next\": \"CheckValueMinConfidence\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputProjectVersion\",\n                                    \"States\": {\n                                        \"CheckInputProjectVersion\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.ProjectVersion\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassInputProjectVersion\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputProjectVersion\"\n                                        },\n                                        \"PassInputProjectVersion\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.ProjectVersion\"\n                                        },\n                                        \"DefaultInputProjectVersion\": {\n                                            \"Type\": \"Pass\",\n                                            \"Next\": \"PassInputProjectVersion\",\n                                            \"Parameters\": {\n                                                \"ProjectVersion\": null\n                                            }\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"DetectModerationLabels\": {\n                                    \"HumanLoopConfig.$\": \"$[0]\",\n                                    \"MinConfidence.$\": \"$[1]\",\n                                    \"ProjectVersion.$\": \"$[2]\"\n                                }\n                            },\n                            \"InputPath\": \"$.DetectModerationLabels\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckInputS3\",\n                    \"States\": {\n                        \"CheckInputS3\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.S3\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckInputS3\"\n                                }\n                            ],\n                            \"Default\": \"FailCheckS3Input\"\n                        },\n                        \"ParallelCheckInputS3\": {\n                            \"Type\": \"Parallel\",\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputBucket\",\n                                    \"States\": {\n                                        \"CheckInputBucket\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Bucket\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputBucketName\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucket\"\n                                        },\n                                        \"CheckInputBucketName\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"HeadBucket\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucketName\",\n                                            \"InputPath\": \"$.Bucket\"\n                                        },\n                                        \"HeadBucket\": {\n                                            \"Type\": \"Task\",\n                                            \"Parameters\": {\n                                                \"Bucket.$\": \"$.Name\"\n                                            },\n                                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headBucket\",\n                                            \"Catch\": [\n                                                {\n                                                    \"ErrorEquals\": [\n                                                        \"States.TaskFailed\"\n                                                    ],\n                                                    \"Next\": \"FailHeadBucket\"\n                                                }\n                                            ],\n                                            \"ResultPath\": \"$.Output\",\n                                            \"Next\": \"PassHeadBucket\"\n                                        },\n                                        \"PassHeadBucket\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"AccessPointAlias.$\": \"$.Output.AccessPointAlias\",\n                                                \"Name.$\": \"$.Name\",\n                                                \"Region.$\": \"$.Output.BucketRegion\"\n                                            }\n                                        },\n                                        \"FailHeadBucket\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucketName\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucket\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputObject\",\n                                    \"States\": {\n                                        \"CheckInputObject\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Object\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputObject\"\n                                        },\n                                        \"CheckInputKey\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputKey\",\n                                            \"InputPath\": \"$.Object\"\n                                        },\n                                        \"PassInputKey\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckInputKey\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputObject\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.S3\",\n                            \"ResultSelector\": {\n                                \"Bucket.$\": \"$[0]\",\n                                \"Object.$\": \"$[1]\"\n                            },\n                            \"Next\": \"HeadObject\"\n                        },\n                        \"HeadObject\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\"\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headObject\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailHeadObject\"\n                                }\n                            ],\n                            \"Next\": \"PassHeadObject\"\n                        },\n                        \"PassHeadObject\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            },\n                            \"Next\": \"GetObjectAttributes\"\n                        },\n                        \"GetObjectAttributes\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\",\n                                \"ObjectAttributes\": [\n                                    \"Checksum\",\n                                    \"ETag\",\n                                    \"ObjectParts\",\n                                    \"ObjectSize\",\n                                    \"StorageClass\"\n                                ]\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:getObjectAttributes\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailGetObjectAttributes\"\n                                }\n                            ],\n                            \"Next\": \"PassGetObjectAttributes\"\n                        },\n                        \"PassGetObjectAttributes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            }\n                        },\n                        \"FailGetObjectAttributes\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailHeadObject\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailCheckS3Input\": {\n                            \"Type\": \"Fail\"\n                        }\n                    }\n                }\n            ],\n            \"Next\": \"DetectModerationLabels\",\n            \"ResultSelector\": {\n                \"Rekognition.$\": \"$[0]\",\n                \"S3.$\": \"$[1]\"\n            }\n        },\n        \"DetectModerationLabels\": {\n            \"Type\": \"Task\",\n            \"Parameters\": {\n                \"Image\": {\n                    \"S3Object\": {\n                        \"Bucket.$\": \"$.S3.Bucket.Name\",\n                        \"Name.$\": \"$.S3.Object.Key\"\n                    }\n                }\n            },\n            \"Resource\": \"arn:aws:states:::aws-sdk:rekognition:detectModerationLabels\",\n            \"Next\": \"ParallelCheckOutputDetectModerationLabels\",\n            \"ResultPath\": \"$.Output\",\n            \"Catch\": [\n                {\n                    \"ErrorEquals\": [\n                        \"States.TaskFailed\"\n                    ],\n                    \"Next\": \"FailDetectModerationLabels\"\n                }\n            ]\n        },\n        \"ParallelCheckOutputDetectModerationLabels\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckOutputContentTypes\",\n                    \"States\": {\n                        \"CheckOutputContentTypes\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ContentTypes\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputContentTypes\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputContentTypes\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputContentTypes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true\n                        },\n                        \"DefaultOutputContentTypes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"ContentTypes\": null\n                            }\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputHumanLoopActivationOutput\",\n                    \"States\": {\n                        \"CheckOutputHumanLoopActivationOutput\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.HumanLoopActivationOutput\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputHumanLoopActivationOutput\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputHumanLoopActivationOutput\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputHumanLoopActivationOutput\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true\n                        },\n                        \"DefaultOutputHumanLoopActivationOutput\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"HumanLoopActivationOutput\": null\n                            },\n                            \"OutputPath\": \"$.HumanLoopActivationOutput\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputModerationLabels\",\n                    \"States\": {\n                        \"CheckOutputModerationLabels\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ModerationLabels\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputModerationLabels\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputModerationLabels\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputModerationLabels\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.ModerationLabels\"\n                        },\n                        \"DefaultOutputModerationLabels\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"ModerationLabels\": null\n                            },\n                            \"OutputPath\": \"$.ModerationLabels\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputModerationModelVersion\",\n                    \"States\": {\n                        \"CheckOutputModerationModelVersion\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ModerationModelVersion\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputModerationModelVersion\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputModerationModelVersion\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputModerationModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.ModerationModelVersion\"\n                        },\n                        \"DefaultOutputModerationModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"ModerationModelVersion\": null\n                            },\n                            \"OutputPath\": \"$.ModerationModelVersion\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputOrientationCorrection\",\n                    \"States\": {\n                        \"CheckOutputOrientationCorrection\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.OrientationCorrection\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOrientationCorrection\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputOrientationCorrection\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.OrientationCorrection\"\n                        },\n                        \"DefaultOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"OrientationCorrection\": null\n                            },\n                            \"Next\": \"PassOrientationCorrection\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputProjectVersion\",\n                    \"States\": {\n                        \"CheckOutputProjectVersion\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ProjectVersion\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputProjectVersion\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputProjectVersion\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputProjectVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.ProjectVersion\"\n                        },\n                        \"DefaultOutputProjectVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"ProjectVersion\": null\n                            },\n                            \"OutputPath\": \"$.ProjectVersion\"\n                        }\n                    }\n                }\n            ],\n            \"ResultSelector\": {\n                \"ContentTypes.$\": \"$[0]\",\n                \"HumanLoopActivationOutput.$\": \"$[1]\",\n                \"ModerationLabels.$\": \"$[2]\",\n                \"ModerationModelVersion.$\": \"$[3]\",\n                \"OrientationCorrection.$\": \"$[4]\",\n                \"ProjectVersion.$\": \"$[5]\"\n            },\n            \"ResultPath\": \"$.Output\",\n            \"Next\": \"StateMachineOutput\"\n        },\n        \"StateMachineOutput\": {\n            \"Type\": \"Pass\",\n            \"Parameters\": {\n                \"DetectModerationLabels\": {\n                    \"ContentTypes.$\": \"$.Output.ContentTypes\",\n                    \"CreatedAt.$\": \"$$.Execution.StartTime\",\n                    \"HumanLoopActivationOutput.$\": \"$.Output.HumanLoopActivationOutput\",\n                    \"Id.$\": \"$.S3.Object.ETag\",\n                    \"ModerationLabels.$\": \"$.Output.ModerationLabels\",\n                    \"ModerationModelVersion.$\": \"$.Output.ModerationModelVersion\",\n                    \"OrientationCorrection.$\": \"$.Output.OrientationCorrection\",\n                    \"ProjectVersion.$\": \"$.Output.ProjectVersion\"\n                },\n                \"Execution\": {\n                    \"Id.$\": \"$$.Execution.Id\",\n                    \"Name.$\": \"$$.Execution.Name\",\n                    \"StartTime.$\": \"$$.Execution.StartTime\"\n                },\n                \"S3.$\": \"$.S3\",\n                \"StateMachine.$\": \"$$.StateMachine\"\n            },\n            \"Next\": \"Success\"\n        },\n        \"Success\": {\n            \"Type\": \"Succeed\"\n        },\n        \"FailDetectModerationLabels\": {\n            \"Type\": \"Fail\"\n        }\n    }\n}\n","logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-detect-moderation-labels","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"after_unknown":{"arn":true,"creation_date":true,"description":true,"encryption_configuration":true,"id":true,"logging_configuration":[{"log_destination":true}],"name_prefix":true,"revision_id":true,"role_arn":true,"state_machine_version_arn":true,"status":true,"tags_all":{},"tracing_configuration":true,"version_description":true},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}}},{"address":"aws_sfn_state_machine.detect_protective_equipment","mode":"managed","type":"aws_sfn_state_machine","name":"detect_protective_equipment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"definition":"{\n    \"StartAt\": \"CheckInvoker\",\n    \"States\": {\n        \"CheckInvoker\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n                {\n                    \"Variable\": \"$.StatePayload\",\n                    \"IsPresent\": true,\n                    \"Next\": \"InvokerStateMachine\"\n                }\n            ],\n            \"Default\": \"Fail\"\n        },\n        \"InvokerStateMachine\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"ParallelCheckInput\",\n            \"InputPath\": \"$.StatePayload\"\n        },\n        \"Fail\": {\n            \"Type\": \"Fail\"\n        },\n        \"ParallelCheckInput\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckInputRekognition\",\n                    \"States\": {\n                        \"CheckInputRekognition\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.Rekognition\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.Rekognition\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"CheckInputDetectProtectiveEquipment\"\n                                }\n                            ],\n                            \"Default\": \"DefaultInputRekognition\"\n                        },\n                        \"DefaultInputRekognition\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Rekognition\": {}\n                            },\n                            \"Next\": \"CheckInputDetectProtectiveEquipment\"\n                        },\n                        \"CheckInputDetectProtectiveEquipment\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.DetectProtectiveEquipment\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.DetectProtectiveEquipment\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"ParallelCheckInputDetectProtectiveEquipment\"\n                                }\n                            ],\n                            \"InputPath\": \"$.Rekognition\",\n                            \"Default\": \"DefaultInputDetectProtectiveEquipment\"\n                        },\n                        \"DefaultInputDetectProtectiveEquipment\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"DetectProtectiveEquipment\": {}\n                            },\n                            \"Next\": \"ParallelCheckInputDetectProtectiveEquipment\"\n                        },\n                        \"ParallelCheckInputDetectProtectiveEquipment\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputSummarizationAttributes\",\n                                    \"States\": {\n                                        \"CheckInputSummarizationAttributes\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.SummarizationAttributes\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.SummarizationAttributes\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"ParallelCheckInputSummarizationAttributes\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputSummarizationAttributes\"\n                                        },\n                                        \"ParallelCheckInputSummarizationAttributes\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckInputSummarizationAttributesMinConfidence\",\n                                                    \"States\": {\n                                                        \"CheckInputSummarizationAttributesMinConfidence\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.MinConfidence\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Variable\": \"$.MinConfidence\",\n                                                                            \"IsNumeric\": true\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"CheckValueSummarizationAttributesMinConfidence\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultInputSummarizationAttributesMinConfidence\"\n                                                        },\n                                                        \"CheckValueSummarizationAttributesMinConfidence\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$\",\n                                                                            \"NumericGreaterThanEquals\": 0\n                                                                        },\n                                                                        {\n                                                                            \"Variable\": \"$\",\n                                                                            \"NumericLessThanEquals\": 100\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"PassValueSummarizationAttributesMinConfidence\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckValueSummarizationAttributesMinConfidence\",\n                                                            \"InputPath\": \"$.MinConfidence\"\n                                                        },\n                                                        \"PassValueSummarizationAttributesMinConfidence\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true\n                                                        },\n                                                        \"FailCheckValueSummarizationAttributesMinConfidence\": {\n                                                            \"Type\": \"Fail\"\n                                                        },\n                                                        \"DefaultInputSummarizationAttributesMinConfidence\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"Parameters\": {\n                                                                \"MinConfidence\": 50\n                                                            },\n                                                            \"Next\": \"CheckValueSummarizationAttributesMinConfidence\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputSummarizationAttributesRequiredEquipmentTypes\",\n                                                    \"States\": {\n                                                        \"CheckInputSummarizationAttributesRequiredEquipmentTypes\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.RequiredEquipmentTypes\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Not\": {\n                                                                                \"Variable\": \"$.RequiredEquipmentTypes\",\n                                                                                \"IsString\": true\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"MapInputSummarizationAttributesRequiredEquipmentTypes\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"DefaultInputSummarizationAttributesRequiredEquipmentTypes\"\n                                                        },\n                                                        \"MapInputSummarizationAttributesRequiredEquipmentTypes\": {\n                                                            \"Type\": \"Map\",\n                                                            \"ItemProcessor\": {\n                                                                \"ProcessorConfig\": {\n                                                                    \"Mode\": \"INLINE\"\n                                                                },\n                                                                \"StartAt\": \"CheckInputSummarizationAttributesRequiredEquipmentType\",\n                                                                \"States\": {\n                                                                    \"CheckInputSummarizationAttributesRequiredEquipmentType\": {\n                                                                        \"Type\": \"Choice\",\n                                                                        \"Choices\": [\n                                                                            {\n                                                                                \"Variable\": \"$\",\n                                                                                \"IsString\": true,\n                                                                                \"Next\": \"PassInputSummarizationAttributesRequiredEquipmentType\"\n                                                                            }\n                                                                        ],\n                                                                        \"Default\": \"FailCheckInputSummarizationAttributesRequiredEquipmentType\"\n                                                                    },\n                                                                    \"PassInputSummarizationAttributesRequiredEquipmentType\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true\n                                                                    },\n                                                                    \"FailCheckInputSummarizationAttributesRequiredEquipmentType\": {\n                                                                        \"Type\": \"Fail\"\n                                                                    }\n                                                                }\n                                                            },\n                                                            \"End\": true,\n                                                            \"ItemsPath\": \"$.RequiredEquipmentTypes\"\n                                                        },\n                                                        \"DefaultInputSummarizationAttributesRequiredEquipmentTypes\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"Next\": \"MapInputSummarizationAttributesRequiredEquipmentTypes\",\n                                                            \"Parameters\": {\n                                                                \"RequiredEquipmentTypes\": []\n                                                            }\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"InputPath\": \"$.SummarizationAttributes\",\n                                            \"ResultSelector\": {\n                                                \"MinConfidence.$\": \"$[0]\",\n                                                \"RequiredEquipmentTypes.$\": \"$[1]\"\n                                            }\n                                        },\n                                        \"DefaultInputSummarizationAttributes\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"SummarizationAttributes\": {}\n                                            },\n                                            \"Next\": \"ParallelCheckInputSummarizationAttributes\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"DetectProtectiveEquipment\": {\n                                    \"SummarizationAttributes.$\": \"$[0]\"\n                                }\n                            },\n                            \"InputPath\": \"$.DetectProtectiveEquipment\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckInputS3\",\n                    \"States\": {\n                        \"CheckInputS3\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.S3\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckInputS3\"\n                                }\n                            ],\n                            \"Default\": \"FailCheckS3Input\"\n                        },\n                        \"ParallelCheckInputS3\": {\n                            \"Type\": \"Parallel\",\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputBucket\",\n                                    \"States\": {\n                                        \"CheckInputBucket\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Bucket\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputBucketName\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucket\"\n                                        },\n                                        \"CheckInputBucketName\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"HeadBucket\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucketName\",\n                                            \"InputPath\": \"$.Bucket\"\n                                        },\n                                        \"HeadBucket\": {\n                                            \"Type\": \"Task\",\n                                            \"Parameters\": {\n                                                \"Bucket.$\": \"$.Name\"\n                                            },\n                                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headBucket\",\n                                            \"Catch\": [\n                                                {\n                                                    \"ErrorEquals\": [\n                                                        \"States.TaskFailed\"\n                                                    ],\n                                                    \"Next\": \"FailHeadBucket\"\n                                                }\n                                            ],\n                                            \"ResultPath\": \"$.Output\",\n                                            \"Next\": \"PassHeadBucket\"\n                                        },\n                                        \"PassHeadBucket\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"AccessPointAlias.$\": \"$.Output.AccessPointAlias\",\n                                                \"Name.$\": \"$.Name\",\n                                                \"Region.$\": \"$.Output.BucketRegion\"\n                                            }\n                                        },\n                                        \"FailHeadBucket\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucketName\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucket\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputObject\",\n                                    \"States\": {\n                                        \"CheckInputObject\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Object\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputObject\"\n                                        },\n                                        \"CheckInputKey\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputKey\",\n                                            \"InputPath\": \"$.Object\"\n                                        },\n                                        \"PassInputKey\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckInputKey\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputObject\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.S3\",\n                            \"ResultSelector\": {\n                                \"Bucket.$\": \"$[0]\",\n                                \"Object.$\": \"$[1]\"\n                            },\n                            \"Next\": \"HeadObject\"\n                        },\n                        \"HeadObject\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\"\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headObject\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailHeadObject\"\n                                }\n                            ],\n                            \"Next\": \"PassHeadObject\"\n                        },\n                        \"PassHeadObject\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            },\n                            \"Next\": \"GetObjectAttributes\"\n                        },\n                        \"GetObjectAttributes\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\",\n                                \"ObjectAttributes\": [\n                                    \"Checksum\",\n                                    \"ETag\",\n                                    \"ObjectParts\",\n                                    \"ObjectSize\",\n                                    \"StorageClass\"\n                                ]\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:getObjectAttributes\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailGetObjectAttributes\"\n                                }\n                            ],\n                            \"Next\": \"PassGetObjectAttributes\"\n                        },\n                        \"PassGetObjectAttributes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            }\n                        },\n                        \"FailGetObjectAttributes\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailHeadObject\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailCheckS3Input\": {\n                            \"Type\": \"Fail\"\n                        }\n                    }\n                }\n            ],\n            \"Next\": \"DetectProtectiveEquipment\",\n            \"ResultSelector\": {\n                \"Rekognition.$\": \"$[0]\",\n                \"S3.$\": \"$[1]\"\n            }\n        },\n        \"DetectProtectiveEquipment\": {\n            \"Type\": \"Task\",\n            \"Parameters\": {\n                \"Image\": {\n                    \"S3Object\": {\n                        \"Bucket.$\": \"$.S3.Bucket.Name\",\n                        \"Name.$\": \"$.S3.Object.Key\"\n                    }\n                }\n            },\n            \"Resource\": \"arn:aws:states:::aws-sdk:rekognition:detectProtectiveEquipment\",\n            \"Next\": \"ParallelCheckOutputDetectProtectiveEquipment\",\n            \"Catch\": [\n                {\n                    \"ErrorEquals\": [\n                        \"States.TaskFailed\"\n                    ],\n                    \"Next\": \"FailDetectProtectiveEquipment\"\n                }\n            ],\n            \"ResultPath\": \"$.Output\"\n        },\n        \"ParallelCheckOutputDetectProtectiveEquipment\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckOutputPersons\",\n                    \"States\": {\n                        \"CheckOutputPersons\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.Persons\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"MapOutputPersons\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputPersons\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"MapOutputPersons\": {\n                            \"Type\": \"Map\",\n                            \"ItemProcessor\": {\n                                \"ProcessorConfig\": {\n                                    \"Mode\": \"INLINE\"\n                                },\n                                \"StartAt\": \"ParallelCheckOutputPerson\",\n                                \"States\": {\n                                    \"ParallelCheckOutputPerson\": {\n                                        \"Type\": \"Parallel\",\n                                        \"End\": true,\n                                        \"Branches\": [\n                                            {\n                                                \"StartAt\": \"CheckOutputPersonBodyParts\",\n                                                \"States\": {\n                                                    \"CheckOutputPersonBodyParts\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.BodyParts\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"MapOutputPersonBodyParts\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputPersonBodyParts\"\n                                                    },\n                                                    \"MapOutputPersonBodyParts\": {\n                                                        \"Type\": \"Map\",\n                                                        \"ItemProcessor\": {\n                                                            \"ProcessorConfig\": {\n                                                                \"Mode\": \"INLINE\"\n                                                            },\n                                                            \"StartAt\": \"ParallelCheckOutputPersonBodyPart\",\n                                                            \"States\": {\n                                                                \"ParallelCheckOutputPersonBodyPart\": {\n                                                                    \"Type\": \"Parallel\",\n                                                                    \"End\": true,\n                                                                    \"Branches\": [\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputPersonBodyPartConfidence\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputPersonBodyPartConfidence\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.Confidence\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"PassOutputPersonBodyPartConfidence\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputPersonBodyPartConfidence\"\n                                                                                },\n                                                                                \"PassOutputPersonBodyPartConfidence\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"InputPath\": \"$.Confidence\"\n                                                                                },\n                                                                                \"DefaultOutputPersonBodyPartConfidence\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"Confidence\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.Confidence\"\n                                                                                }\n                                                                            }\n                                                                        },\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputPersonBodyPartEquipmentDetections\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputPersonBodyPartEquipmentDetections\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.EquipmentDetections\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"MapOutputPersonBodyPartEquipmentDetections\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputPersonBodyPartEquipmentDetections\"\n                                                                                },\n                                                                                \"MapOutputPersonBodyPartEquipmentDetections\": {\n                                                                                    \"Type\": \"Map\",\n                                                                                    \"ItemProcessor\": {\n                                                                                        \"ProcessorConfig\": {\n                                                                                            \"Mode\": \"INLINE\"\n                                                                                        },\n                                                                                        \"StartAt\": \"ParallelCheckOutputPersonBodyPartEquipmentDetection\",\n                                                                                        \"States\": {\n                                                                                            \"ParallelCheckOutputPersonBodyPartEquipmentDetection\": {\n                                                                                                \"Type\": \"Parallel\",\n                                                                                                \"End\": true,\n                                                                                                \"Branches\": [\n                                                                                                    {\n                                                                                                        \"StartAt\": \"CheckOutputPersonBodyPartEquipmentDetectionBoundingBox\",\n                                                                                                        \"States\": {\n                                                                                                            \"CheckOutputPersonBodyPartEquipmentDetectionBoundingBox\": {\n                                                                                                                \"Type\": \"Choice\",\n                                                                                                                \"Choices\": [\n                                                                                                                    {\n                                                                                                                        \"Variable\": \"$.BoundingBox\",\n                                                                                                                        \"IsPresent\": true,\n                                                                                                                        \"Next\": \"PassOutputPersonBodyPartEquipmentDetectionBoundingBox\"\n                                                                                                                    }\n                                                                                                                ],\n                                                                                                                \"Default\": \"DefaultOutputPersonBodyPartEquipmentDetectionBoundingBox\"\n                                                                                                            },\n                                                                                                            \"PassOutputPersonBodyPartEquipmentDetectionBoundingBox\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"InputPath\": \"$.BoundingBox\"\n                                                                                                            },\n                                                                                                            \"DefaultOutputPersonBodyPartEquipmentDetectionBoundingBox\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"Parameters\": {\n                                                                                                                    \"BoundingBox\": null\n                                                                                                                },\n                                                                                                                \"OutputPath\": \"$.BoundingBox\"\n                                                                                                            }\n                                                                                                        }\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"StartAt\": \"CheckOutputPersonBodyPartEquipmentDetectionConfidence\",\n                                                                                                        \"States\": {\n                                                                                                            \"CheckOutputPersonBodyPartEquipmentDetectionConfidence\": {\n                                                                                                                \"Type\": \"Choice\",\n                                                                                                                \"Choices\": [\n                                                                                                                    {\n                                                                                                                        \"Variable\": \"$.Confidence\",\n                                                                                                                        \"IsPresent\": true,\n                                                                                                                        \"Next\": \"PassOutputPersonBodyPartEquipmentDetectionConfidence\"\n                                                                                                                    }\n                                                                                                                ],\n                                                                                                                \"Default\": \"DefaultOutputPersonBodyPartEquipmentDetectionConfidence\"\n                                                                                                            },\n                                                                                                            \"PassOutputPersonBodyPartEquipmentDetectionConfidence\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"InputPath\": \"$.Confidence\"\n                                                                                                            },\n                                                                                                            \"DefaultOutputPersonBodyPartEquipmentDetectionConfidence\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"Parameters\": {\n                                                                                                                    \"Confidence\": null\n                                                                                                                },\n                                                                                                                \"OutputPath\": \"$.Confidence\"\n                                                                                                            }\n                                                                                                        }\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"StartAt\": \"CheckOutputPersonBodyPartEquipmentDetectionCoversBodyPart\",\n                                                                                                        \"States\": {\n                                                                                                            \"CheckOutputPersonBodyPartEquipmentDetectionCoversBodyPart\": {\n                                                                                                                \"Type\": \"Choice\",\n                                                                                                                \"Choices\": [\n                                                                                                                    {\n                                                                                                                        \"Variable\": \"$.CoversBodyPart\",\n                                                                                                                        \"IsPresent\": true,\n                                                                                                                        \"Next\": \"PassOutputPersonBodyPartEquipmentDetectionCoversBodyPart\"\n                                                                                                                    }\n                                                                                                                ],\n                                                                                                                \"Default\": \"DefaultOutputPersonBodyPartEquipmentDetectionCoversBodyPart\"\n                                                                                                            },\n                                                                                                            \"PassOutputPersonBodyPartEquipmentDetectionCoversBodyPart\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"InputPath\": \"$.CoversBodyPart\"\n                                                                                                            },\n                                                                                                            \"DefaultOutputPersonBodyPartEquipmentDetectionCoversBodyPart\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"Parameters\": {\n                                                                                                                    \"CoversBodyPart\": null\n                                                                                                                },\n                                                                                                                \"OutputPath\": \"$.CoversBodyPart\"\n                                                                                                            }\n                                                                                                        }\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"StartAt\": \"CheckOutputPersonBodyPartEquipmentDetectionType\",\n                                                                                                        \"States\": {\n                                                                                                            \"CheckOutputPersonBodyPartEquipmentDetectionType\": {\n                                                                                                                \"Type\": \"Choice\",\n                                                                                                                \"Choices\": [\n                                                                                                                    {\n                                                                                                                        \"Variable\": \"$.Type\",\n                                                                                                                        \"IsPresent\": true,\n                                                                                                                        \"Next\": \"PassOutputPersonBodyPartEquipmentDetectionType\"\n                                                                                                                    }\n                                                                                                                ],\n                                                                                                                \"Default\": \"DefaultOutputPersonBodyPartEquipmentDetectionType\"\n                                                                                                            },\n                                                                                                            \"PassOutputPersonBodyPartEquipmentDetectionType\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"InputPath\": \"$.Type\"\n                                                                                                            },\n                                                                                                            \"DefaultOutputPersonBodyPartEquipmentDetectionType\": {\n                                                                                                                \"Type\": \"Pass\",\n                                                                                                                \"End\": true,\n                                                                                                                \"Parameters\": {\n                                                                                                                    \"Type\": null\n                                                                                                                },\n                                                                                                                \"OutputPath\": \"$.Type\"\n                                                                                                            }\n                                                                                                        }\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"ResultSelector\": {\n                                                                                                    \"BoundingBox.$\": \"$[0]\",\n                                                                                                    \"Confidence.$\": \"$[1]\",\n                                                                                                    \"CoversBodyPart.$\": \"$[2]\",\n                                                                                                    \"Type.$\": \"$[3]\"\n                                                                                                }\n                                                                                            }\n                                                                                        }\n                                                                                    },\n                                                                                    \"End\": true,\n                                                                                    \"ItemsPath\": \"$.EquipmentDetections\"\n                                                                                },\n                                                                                \"DefaultOutputPersonBodyPartEquipmentDetections\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"EquipmentDetections\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.EquipmentDetections\"\n                                                                                }\n                                                                            }\n                                                                        },\n                                                                        {\n                                                                            \"StartAt\": \"CheckOutputPersonBodyPartName\",\n                                                                            \"States\": {\n                                                                                \"CheckOutputPersonBodyPartName\": {\n                                                                                    \"Type\": \"Choice\",\n                                                                                    \"Choices\": [\n                                                                                        {\n                                                                                            \"Variable\": \"$.Name\",\n                                                                                            \"IsPresent\": true,\n                                                                                            \"Next\": \"PassOutputPersonBodyPartName\"\n                                                                                        }\n                                                                                    ],\n                                                                                    \"Default\": \"DefaultOutputPersonBodyPartName\"\n                                                                                },\n                                                                                \"PassOutputPersonBodyPartName\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"InputPath\": \"$.Name\"\n                                                                                },\n                                                                                \"DefaultOutputPersonBodyPartName\": {\n                                                                                    \"Type\": \"Pass\",\n                                                                                    \"End\": true,\n                                                                                    \"Parameters\": {\n                                                                                        \"Name\": null\n                                                                                    },\n                                                                                    \"OutputPath\": \"$.Name\"\n                                                                                }\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"ResultSelector\": {\n                                                                        \"Confidence.$\": \"$[0]\",\n                                                                        \"EquipmentDetections.$\": \"$[1]\",\n                                                                        \"Name.$\": \"$[2]\"\n                                                                    }\n                                                                }\n                                                            }\n                                                        },\n                                                        \"End\": true,\n                                                        \"ItemsPath\": \"$.BodyParts\"\n                                                    },\n                                                    \"DefaultOutputPersonBodyParts\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"BodyParts\": null\n                                                        },\n                                                        \"OutputPath\": \"$.BodyParts\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputPersonBoundingBox\",\n                                                \"States\": {\n                                                    \"CheckOutputPersonBoundingBox\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.BoundingBox\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputPersonBoundingBox\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputPersonBoundingBox\"\n                                                    },\n                                                    \"PassOutputPersonBoundingBox\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.BoundingBox\"\n                                                    },\n                                                    \"DefaultOutputPersonBoundingBox\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"BoundingBox\": null\n                                                        },\n                                                        \"OutputPath\": \"$.BoundingBox\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputPersonConfidence\",\n                                                \"States\": {\n                                                    \"CheckOutputPersonConfidence\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Confidence\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputPersonConfidence\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputPersonConfidence\"\n                                                    },\n                                                    \"PassOutputPersonConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Confidence\"\n                                                    },\n                                                    \"DefaultOutputPersonConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Confidence\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Confidence\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputPersonId\",\n                                                \"States\": {\n                                                    \"CheckOutputPersonId\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Id\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputPersonId\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputPersonId\"\n                                                    },\n                                                    \"PassOutputPersonId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Id\"\n                                                    },\n                                                    \"DefaultOutputPersonId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Id\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Id\"\n                                                    }\n                                                }\n                                            }\n                                        ],\n                                        \"ResultSelector\": {\n                                            \"BodyParts.$\": \"$[0]\",\n                                            \"BoundingBox.$\": \"$[1]\",\n                                            \"Confidence.$\": \"$[2]\",\n                                            \"Id.$\": \"$[3]\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"End\": true,\n                            \"ItemsPath\": \"$.Persons\"\n                        },\n                        \"DefaultOutputPersons\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Persons\": null\n                            },\n                            \"OutputPath\": \"$.Persons\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputOrientationCorrection\",\n                    \"States\": {\n                        \"CheckOutputOrientationCorrection\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.OrientationCorrection\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputOrientationCorrection\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputOrientationCorrection\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.OrientationCorrection\"\n                        },\n                        \"DefaultOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"OrientationCorrection\": null\n                            },\n                            \"Next\": \"PassOutputOrientationCorrection\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputProtectiveEquipmentModelVersion\",\n                    \"States\": {\n                        \"CheckOutputProtectiveEquipmentModelVersion\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.ProtectiveEquipmentModelVersion\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputProtectiveEquipmentModelVersion\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputProtectiveEquipmentModelVersion\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOutputProtectiveEquipmentModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.ProtectiveEquipmentModelVersion\"\n                        },\n                        \"DefaultOutputProtectiveEquipmentModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"ProtectiveEquipmentModelVersion\": null\n                            },\n                            \"OutputPath\": \"$.ProtectiveEquipmentModelVersion\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputSummary\",\n                    \"States\": {\n                        \"CheckOutputSummary\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.Summary\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckOutputSummary\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputSummary\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"ParallelCheckOutputSummary\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckOutputSummaryPersonsIndeterminate\",\n                                    \"States\": {\n                                        \"CheckOutputSummaryPersonsIndeterminate\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.PersonsIndeterminate\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassOutputSummaryPersonsIndeterminate\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputSummaryPersonsIndeterminate\"\n                                        },\n                                        \"PassOutputSummaryPersonsIndeterminate\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.PersonsIndeterminate\"\n                                        },\n                                        \"DefaultOutputSummaryPersonsIndeterminate\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"PersonsIndeterminate\": null\n                                            },\n                                            \"OutputPath\": \"$.PersonsIndeterminate\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckOutputSummaryPersonsWithoutRequiredEquipment\",\n                                    \"States\": {\n                                        \"CheckOutputSummaryPersonsWithoutRequiredEquipment\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.PersonsWithoutRequiredEquipment\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassOutputSummaryPersonsWithoutRequiredEquipment\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputSummaryPersonsWithoutRequiredEquipment\"\n                                        },\n                                        \"PassOutputSummaryPersonsWithoutRequiredEquipment\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.PersonsWithoutRequiredEquipment\"\n                                        },\n                                        \"DefaultOutputSummaryPersonsWithoutRequiredEquipment\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"PersonsWithoutRequiredEquipment\": null\n                                            },\n                                            \"OutputPath\": \"$.PersonsWithoutRequiredEquipment\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckOutputSummaryPersonsWithRequiredEquipment\",\n                                    \"States\": {\n                                        \"CheckOutputSummaryPersonsWithRequiredEquipment\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.PersonsWithRequiredEquipment\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"PassOutputSummaryPersonsWithRequiredEquipment\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultOutputSummaryPersonsWithRequiredEquipment\"\n                                        },\n                                        \"PassOutputSummaryPersonsWithRequiredEquipment\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"InputPath\": \"$.PersonsWithRequiredEquipment\"\n                                        },\n                                        \"DefaultOutputSummaryPersonsWithRequiredEquipment\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"PersonsWithRequiredEquipment\": null\n                                            },\n                                            \"OutputPath\": \"$.PersonsWithRequiredEquipment\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"PersonsIndeterminate.$\": \"$[0]\",\n                                \"PersonsWithoutRequiredEquipment.$\": \"$[1]\",\n                                \"PersonsWithRequiredEquipment.$\": \"$[2]\"\n                            }\n                        },\n                        \"DefaultOutputSummary\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Summary\": null\n                            },\n                            \"OutputPath\": \"$.Summary\"\n                        }\n                    }\n                }\n            ],\n            \"ResultSelector\": {\n                \"Persons.$\": \"$[0]\",\n                \"OrientationCorrection.$\": \"$[1]\",\n                \"ProtectiveEquipmentModelVersion.$\": \"$[2]\",\n                \"Summary.$\": \"$[3]\"\n            },\n            \"ResultPath\": \"$.Output\",\n            \"Next\": \"StateMachineOutput\"\n        },\n        \"StateMachineOutput\": {\n            \"Type\": \"Pass\",\n            \"Parameters\": {\n                \"DetectProtectiveEquipment\": {\n                    \"CreatedAt.$\": \"$$.Execution.StartTime\",\n                    \"Id.$\": \"$.S3.Object.ETag\",\n                    \"OrientationCorrection.$\": \"$.Output.OrientationCorrection\",\n                    \"Persons.$\": \"$.Output.Persons\",\n                    \"ProtectiveEquipmentModelVersion.$\": \"$.Output.ProtectiveEquipmentModelVersion\",\n                    \"Summary.$\": \"$.Output.Summary\"\n                },\n                \"Execution\": {\n                    \"Id.$\": \"$$.Execution.Id\",\n                    \"Name.$\": \"$$.Execution.Name\",\n                    \"StartTime.$\": \"$$.Execution.StartTime\"\n                },\n                \"S3.$\": \"$.S3\",\n                \"StateMachine.$\": \"$$.StateMachine\"\n            },\n            \"Next\": \"Success\"\n        },\n        \"Success\": {\n            \"Type\": \"Succeed\"\n        },\n        \"FailDetectProtectiveEquipment\": {\n            \"Type\": \"Fail\"\n        }\n    }\n}\n","logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-detect-protective-equipment","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"after_unknown":{"arn":true,"creation_date":true,"description":true,"encryption_configuration":true,"id":true,"logging_configuration":[{"log_destination":true}],"name_prefix":true,"revision_id":true,"role_arn":true,"state_machine_version_arn":true,"status":true,"tags_all":{},"tracing_configuration":true,"version_description":true},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}}},{"address":"aws_sfn_state_machine.detect_text","mode":"managed","type":"aws_sfn_state_machine","name":"detect_text","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"definition":"{\n    \"StartAt\": \"CheckInvoker\",\n    \"States\": {\n        \"CheckInvoker\": {\n            \"Type\": \"Choice\",\n            \"Choices\": [\n                {\n                    \"Variable\": \"$.StatePayload\",\n                    \"IsPresent\": true,\n                    \"Next\": \"InvokerStateMachine\"\n                }\n            ],\n            \"Default\": \"Fail\"\n        },\n        \"Fail\": {\n            \"Type\": \"Fail\"\n        },\n        \"InvokerStateMachine\": {\n            \"Type\": \"Pass\",\n            \"Next\": \"ParallelCheckInput\",\n            \"InputPath\": \"$.StatePayload\"\n        },\n        \"ParallelCheckInput\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckInputRekognition\",\n                    \"States\": {\n                        \"CheckInputRekognition\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.Rekognition\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.Rekognition\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"CheckInputDetectText\"\n                                }\n                            ],\n                            \"Default\": \"DefaultInputRekognition\"\n                        },\n                        \"DefaultInputRekognition\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Rekognition\": {}\n                            },\n                            \"Next\": \"CheckInputDetectText\"\n                        },\n                        \"CheckInputDetectText\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"And\": [\n                                        {\n                                            \"Variable\": \"$.DetectText\",\n                                            \"IsPresent\": true\n                                        },\n                                        {\n                                            \"Not\": {\n                                                \"Variable\": \"$.DetectText\",\n                                                \"IsNull\": true\n                                            }\n                                        }\n                                    ],\n                                    \"Next\": \"ParallelCheckInputDetectText\"\n                                }\n                            ],\n                            \"InputPath\": \"$.Rekognition\",\n                            \"Default\": \"DefaultInputDetectText\"\n                        },\n                        \"DefaultInputDetectText\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"DetectText\": {}\n                            },\n                            \"Next\": \"ParallelCheckInputDetectText\"\n                        },\n                        \"ParallelCheckInputDetectText\": {\n                            \"Type\": \"Parallel\",\n                            \"End\": true,\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputRegionsOfInterest\",\n                                    \"States\": {\n                                        \"CheckInputRegionsOfInterest\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.RegionsOfInterest\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.RegionsOfInterest\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"MapInputRegionsOfInterest\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputRegionsOfInterest\"\n                                        },\n                                        \"MapInputRegionsOfInterest\": {\n                                            \"Type\": \"Map\",\n                                            \"ItemProcessor\": {\n                                                \"ProcessorConfig\": {\n                                                    \"Mode\": \"INLINE\"\n                                                },\n                                                \"StartAt\": \"ParallelCheckInputRegionOfInterest\",\n                                                \"States\": {\n                                                    \"ParallelCheckInputRegionOfInterest\": {\n                                                        \"Type\": \"Parallel\",\n                                                        \"End\": true,\n                                                        \"Branches\": [\n                                                            {\n                                                                \"StartAt\": \"CheckInputRegionOfInterestBoundingBox\",\n                                                                \"States\": {\n                                                                    \"CheckInputRegionOfInterestBoundingBox\": {\n                                                                        \"Type\": \"Choice\",\n                                                                        \"Choices\": [\n                                                                            {\n                                                                                \"And\": [\n                                                                                    {\n                                                                                        \"Variable\": \"$.BoundingBox\",\n                                                                                        \"IsPresent\": true\n                                                                                    },\n                                                                                    {\n                                                                                        \"Not\": {\n                                                                                            \"Variable\": \"$.BoundingBox\",\n                                                                                            \"IsNull\": true\n                                                                                        }\n                                                                                    }\n                                                                                ],\n                                                                                \"Next\": \"ParallelCheckInputRegionOfInterestBoundingBox\"\n                                                                            }\n                                                                        ],\n                                                                        \"Default\": \"DefaultInputRegionOfInterestBoundingBox\"\n                                                                    },\n                                                                    \"ParallelCheckInputRegionOfInterestBoundingBox\": {\n                                                                        \"Type\": \"Parallel\",\n                                                                        \"End\": true,\n                                                                        \"Branches\": [\n                                                                            {\n                                                                                \"StartAt\": \"CheckInputRegionOfInterestBoundingBoxHeight\",\n                                                                                \"States\": {\n                                                                                    \"CheckInputRegionOfInterestBoundingBoxHeight\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"And\": [\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Height\",\n                                                                                                        \"IsPresent\": true\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Height\",\n                                                                                                        \"IsNumeric\": true\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"Next\": \"PassInputRegionOfInterestBoundingBoxHeight\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckInputRegionOfInterestBoundingBoxHeight\"\n                                                                                    },\n                                                                                    \"PassInputRegionOfInterestBoundingBoxHeight\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true,\n                                                                                        \"InputPath\": \"$.Height\"\n                                                                                    },\n                                                                                    \"FailCheckInputRegionOfInterestBoundingBoxHeight\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            {\n                                                                                \"StartAt\": \"CheckInputRegionOfInterestBoundingBoxLeft\",\n                                                                                \"States\": {\n                                                                                    \"CheckInputRegionOfInterestBoundingBoxLeft\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"And\": [\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Left\",\n                                                                                                        \"IsPresent\": true\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Left\",\n                                                                                                        \"IsNumeric\": true\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"Next\": \"PassInputRegionOfInterestBoundingBoxLeft\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckInputRegionOfInterestBoundingBoxLeft\"\n                                                                                    },\n                                                                                    \"PassInputRegionOfInterestBoundingBoxLeft\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckInputRegionOfInterestBoundingBoxLeft\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            {\n                                                                                \"StartAt\": \"CheckInputRegionOfInterestBoundingBoxTop\",\n                                                                                \"States\": {\n                                                                                    \"CheckInputRegionOfInterestBoundingBoxTop\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"And\": [\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Top\",\n                                                                                                        \"IsPresent\": true\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Top\",\n                                                                                                        \"IsNumeric\": true\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"Next\": \"PassInputRegionOfInterestBoundingBoxTop\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckInputRegionOfInterestBoundingBoxTop\"\n                                                                                    },\n                                                                                    \"PassInputRegionOfInterestBoundingBoxTop\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true,\n                                                                                        \"InputPath\": \"$.Top\"\n                                                                                    },\n                                                                                    \"FailCheckInputRegionOfInterestBoundingBoxTop\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            },\n                                                                            {\n                                                                                \"StartAt\": \"CheckInputRegionOfInterestBoundingBoxWidth\",\n                                                                                \"States\": {\n                                                                                    \"CheckInputRegionOfInterestBoundingBoxWidth\": {\n                                                                                        \"Type\": \"Choice\",\n                                                                                        \"Choices\": [\n                                                                                            {\n                                                                                                \"And\": [\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Width\",\n                                                                                                        \"IsPresent\": true\n                                                                                                    },\n                                                                                                    {\n                                                                                                        \"Variable\": \"$.Width\",\n                                                                                                        \"IsNumeric\": true\n                                                                                                    }\n                                                                                                ],\n                                                                                                \"Next\": \"PassInputRegionOfInterestBoundingBoxWidth\"\n                                                                                            }\n                                                                                        ],\n                                                                                        \"Default\": \"FailCheckInputRegionOfInterestBoundingBoxWidth\"\n                                                                                    },\n                                                                                    \"PassInputRegionOfInterestBoundingBoxWidth\": {\n                                                                                        \"Type\": \"Pass\",\n                                                                                        \"End\": true\n                                                                                    },\n                                                                                    \"FailCheckInputRegionOfInterestBoundingBoxWidth\": {\n                                                                                        \"Type\": \"Fail\"\n                                                                                    }\n                                                                                }\n                                                                            }\n                                                                        ],\n                                                                        \"ResultSelector\": {\n                                                                            \"Height.$\": \"$[0]\",\n                                                                            \"Left.$\": \"$[1]\",\n                                                                            \"Top.$\": \"$[2]\",\n                                                                            \"Width.$\": \"$[3]\"\n                                                                        },\n                                                                        \"InputPath\": \"$.BoundingBox\"\n                                                                    },\n                                                                    \"DefaultInputRegionOfInterestBoundingBox\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true,\n                                                                        \"Parameters\": {\n                                                                            \"BoundingBox\": null\n                                                                        },\n                                                                        \"OutputPath\": \"$.BoundingBox\"\n                                                                    }\n                                                                }\n                                                            },\n                                                            {\n                                                                \"StartAt\": \"CheckInputRegionOfInterestPolygon\",\n                                                                \"States\": {\n                                                                    \"CheckInputRegionOfInterestPolygon\": {\n                                                                        \"Type\": \"Choice\",\n                                                                        \"Choices\": [\n                                                                            {\n                                                                                \"And\": [\n                                                                                    {\n                                                                                        \"Variable\": \"$.Polygon\",\n                                                                                        \"IsPresent\": true\n                                                                                    },\n                                                                                    {\n                                                                                        \"Not\": {\n                                                                                            \"Variable\": \"$.Polygon\",\n                                                                                            \"IsNull\": true\n                                                                                        }\n                                                                                    }\n                                                                                ],\n                                                                                \"Next\": \"MapInputRegionOfInterestPolygon\"\n                                                                            }\n                                                                        ],\n                                                                        \"Default\": \"DefaultInputRegionOfInterestPolygon\"\n                                                                    },\n                                                                    \"MapInputRegionOfInterestPolygon\": {\n                                                                        \"Type\": \"Map\",\n                                                                        \"ItemProcessor\": {\n                                                                            \"ProcessorConfig\": {\n                                                                                \"Mode\": \"INLINE\"\n                                                                            },\n                                                                            \"StartAt\": \"ParallelCheckInputRegionOfInterestPolygon\",\n                                                                            \"States\": {\n                                                                                \"ParallelCheckInputRegionOfInterestPolygon\": {\n                                                                                    \"Type\": \"Parallel\",\n                                                                                    \"End\": true,\n                                                                                    \"Branches\": [\n                                                                                        {\n                                                                                            \"StartAt\": \"CheckInputRegionOfInterestPolygonX\",\n                                                                                            \"States\": {\n                                                                                                \"CheckInputRegionOfInterestPolygonX\": {\n                                                                                                    \"Type\": \"Choice\",\n                                                                                                    \"Choices\": [\n                                                                                                        {\n                                                                                                            \"And\": [\n                                                                                                                {\n                                                                                                                    \"Variable\": \"$.X\",\n                                                                                                                    \"IsPresent\": true\n                                                                                                                },\n                                                                                                                {\n                                                                                                                    \"Variable\": \"$.X\",\n                                                                                                                    \"IsNumeric\": true\n                                                                                                                }\n                                                                                                            ],\n                                                                                                            \"Next\": \"PassInputRegionOfInterestPolygonX\"\n                                                                                                        }\n                                                                                                    ],\n                                                                                                    \"Default\": \"FailCheckInputRegionOfInterestPolygonX\"\n                                                                                                },\n                                                                                                \"PassInputRegionOfInterestPolygonX\": {\n                                                                                                    \"Type\": \"Pass\",\n                                                                                                    \"End\": true,\n                                                                                                    \"InputPath\": \"$.X\"\n                                                                                                },\n                                                                                                \"FailCheckInputRegionOfInterestPolygonX\": {\n                                                                                                    \"Type\": \"Fail\"\n                                                                                                }\n                                                                                            }\n                                                                                        },\n                                                                                        {\n                                                                                            \"StartAt\": \"CheckInputRegionOfInterestPolygonY\",\n                                                                                            \"States\": {\n                                                                                                \"CheckInputRegionOfInterestPolygonY\": {\n                                                                                                    \"Type\": \"Choice\",\n                                                                                                    \"Choices\": [\n                                                                                                        {\n                                                                                                            \"And\": [\n                                                                                                                {\n                                                                                                                    \"Variable\": \"$.Y\",\n                                                                                                                    \"IsPresent\": true\n                                                                                                                },\n                                                                                                                {\n                                                                                                                    \"Variable\": \"$.Y\",\n                                                                                                                    \"IsNumeric\": true\n                                                                                                                }\n                                                                                                            ],\n                                                                                                            \"Next\": \"PassInputRegionOfInterestPolygonY\"\n                                                                                                        }\n                                                                                                    ],\n                                                                                                    \"Default\": \"FailCheckInputRegionOfInterestPolygonY\"\n                                                                                                },\n                                                                                                \"PassInputRegionOfInterestPolygonY\": {\n                                                                                                    \"Type\": \"Pass\",\n                                                                                                    \"End\": true,\n                                                                                                    \"InputPath\": \"$.Y\"\n                                                                                                },\n                                                                                                \"FailCheckInputRegionOfInterestPolygonY\": {\n                                                                                                    \"Type\": \"Fail\"\n                                                                                                }\n                                                                                            }\n                                                                                        }\n                                                                                    ],\n                                                                                    \"ResultSelector\": {\n                                                                                        \"X.$\": \"$[0]\",\n                                                                                        \"Y.$\": \"$[1]\"\n                                                                                    }\n                                                                                }\n                                                                            }\n                                                                        },\n                                                                        \"End\": true,\n                                                                        \"ItemsPath\": \"$.Polygon\"\n                                                                    },\n                                                                    \"DefaultInputRegionOfInterestPolygon\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"Parameters\": {\n                                                                            \"Polygon\": []\n                                                                        },\n                                                                        \"Next\": \"MapInputRegionOfInterestPolygon\"\n                                                                    }\n                                                                }\n                                                            }\n                                                        ],\n                                                        \"ResultSelector\": {\n                                                            \"BoundingBox.$\": \"$[0]\",\n                                                            \"Polygon.$\": \"$[1]\"\n                                                        }\n                                                    }\n                                                }\n                                            },\n                                            \"End\": true,\n                                            \"ItemsPath\": \"$.RegionsOfInterest\"\n                                        },\n                                        \"DefaultInputRegionsOfInterest\": {\n                                            \"Type\": \"Pass\",\n                                            \"Parameters\": {\n                                                \"RegionsOfInterest\": []\n                                            },\n                                            \"Next\": \"MapInputRegionsOfInterest\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputWordFilter\",\n                                    \"States\": {\n                                        \"CheckInputWordFilter\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.WordFilter\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Not\": {\n                                                                \"Variable\": \"$.WordFilter\",\n                                                                \"IsNull\": true\n                                                            }\n                                                        }\n                                                    ],\n                                                    \"Next\": \"ParallelCheckInputWordFilter\"\n                                                }\n                                            ],\n                                            \"Default\": \"DefaultInputWordFilter\"\n                                        },\n                                        \"ParallelCheckInputWordFilter\": {\n                                            \"Type\": \"Parallel\",\n                                            \"End\": true,\n                                            \"Branches\": [\n                                                {\n                                                    \"StartAt\": \"CheckInputWordFilterMinBoundingBoxHeight\",\n                                                    \"States\": {\n                                                        \"CheckInputWordFilterMinBoundingBoxHeight\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.MinBoundingBoxHeight\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Variable\": \"$.MinBoundingBoxHeight\",\n                                                                            \"IsNumeric\": true\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"PassInputWordFilterMinBoundingBoxHeight\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckInputWordFilterMinBoundingBoxHeight\"\n                                                        },\n                                                        \"PassInputWordFilterMinBoundingBoxHeight\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.MinBoundingBoxHeight\"\n                                                        },\n                                                        \"FailCheckInputWordFilterMinBoundingBoxHeight\": {\n                                                            \"Type\": \"Fail\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputWordFilterMinBoundingBoxWidth\",\n                                                    \"States\": {\n                                                        \"CheckInputWordFilterMinBoundingBoxWidth\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"And\": [\n                                                                        {\n                                                                            \"Variable\": \"$.MinBoundingBoxWidth\",\n                                                                            \"IsPresent\": true\n                                                                        },\n                                                                        {\n                                                                            \"Not\": {\n                                                                                \"Variable\": \"$.MinBoundingBoxWidth\",\n                                                                                \"IsNull\": true\n                                                                            }\n                                                                        }\n                                                                    ],\n                                                                    \"Next\": \"PassInputWordFilterMinBoundingBoxWidth\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckInputWordFilterMinBoundingBoxWidth\"\n                                                        },\n                                                        \"PassInputWordFilterMinBoundingBoxWidth\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.MinBoundingBoxWidth\"\n                                                        },\n                                                        \"FailCheckInputWordFilterMinBoundingBoxWidth\": {\n                                                            \"Type\": \"Fail\"\n                                                        }\n                                                    }\n                                                },\n                                                {\n                                                    \"StartAt\": \"CheckInputWordFilterMinConfidence\",\n                                                    \"States\": {\n                                                        \"CheckInputWordFilterMinConfidence\": {\n                                                            \"Type\": \"Choice\",\n                                                            \"Choices\": [\n                                                                {\n                                                                    \"Variable\": \"$.MinConfidence\",\n                                                                    \"IsPresent\": true,\n                                                                    \"Next\": \"PassInputWordFilterMinConfidence\"\n                                                                }\n                                                            ],\n                                                            \"Default\": \"FailCheckInputWordFilterMinConfidence\"\n                                                        },\n                                                        \"PassInputWordFilterMinConfidence\": {\n                                                            \"Type\": \"Pass\",\n                                                            \"End\": true,\n                                                            \"InputPath\": \"$.MinConfidence\"\n                                                        },\n                                                        \"FailCheckInputWordFilterMinConfidence\": {\n                                                            \"Type\": \"Fail\"\n                                                        }\n                                                    }\n                                                }\n                                            ],\n                                            \"ResultSelector\": {\n                                                \"MinBoundingBoxHeight.$\": \"$[0]\",\n                                                \"MinBoundingBoxWidth.$\": \"$[1]\",\n                                                \"MinConfidence.$\": \"$[2]\"\n                                            },\n                                            \"InputPath\": \"$.WordFilter\"\n                                        },\n                                        \"DefaultInputWordFilter\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"WordFilter\": null\n                                            },\n                                            \"OutputPath\": \"$.WordFilter\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"ResultSelector\": {\n                                \"DetectText\": {\n                                    \"RegionsOfInterest.$\": \"$[0]\",\n                                    \"WordFilter.$\": \"$[1]\"\n                                }\n                            },\n                            \"InputPath\": \"$.DetectText\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckInputS3\",\n                    \"States\": {\n                        \"CheckInputS3\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.S3\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"ParallelCheckInputS3\"\n                                }\n                            ],\n                            \"Default\": \"FailCheckS3Input\"\n                        },\n                        \"ParallelCheckInputS3\": {\n                            \"Type\": \"Parallel\",\n                            \"Branches\": [\n                                {\n                                    \"StartAt\": \"CheckInputBucket\",\n                                    \"States\": {\n                                        \"CheckInputBucket\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Bucket\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputBucketName\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucket\"\n                                        },\n                                        \"CheckInputBucketName\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Name\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"HeadBucket\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputBucketName\",\n                                            \"InputPath\": \"$.Bucket\"\n                                        },\n                                        \"HeadBucket\": {\n                                            \"Type\": \"Task\",\n                                            \"Parameters\": {\n                                                \"Bucket.$\": \"$.Name\"\n                                            },\n                                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headBucket\",\n                                            \"Catch\": [\n                                                {\n                                                    \"ErrorEquals\": [\n                                                        \"States.TaskFailed\"\n                                                    ],\n                                                    \"Next\": \"FailHeadBucket\"\n                                                }\n                                            ],\n                                            \"ResultPath\": \"$.Output\",\n                                            \"Next\": \"PassHeadBucket\"\n                                        },\n                                        \"PassHeadBucket\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true,\n                                            \"Parameters\": {\n                                                \"AccessPointAlias.$\": \"$.Output.AccessPointAlias\",\n                                                \"Name.$\": \"$.Name\",\n                                                \"Region.$\": \"$.Output.BucketRegion\"\n                                            }\n                                        },\n                                        \"FailHeadBucket\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucketName\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputBucket\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                },\n                                {\n                                    \"StartAt\": \"CheckInputObject\",\n                                    \"States\": {\n                                        \"CheckInputObject\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"Variable\": \"$.Object\",\n                                                    \"IsPresent\": true,\n                                                    \"Next\": \"CheckInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputObject\"\n                                        },\n                                        \"CheckInputKey\": {\n                                            \"Type\": \"Choice\",\n                                            \"Choices\": [\n                                                {\n                                                    \"And\": [\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsPresent\": true\n                                                        },\n                                                        {\n                                                            \"Variable\": \"$.Key\",\n                                                            \"IsString\": true\n                                                        }\n                                                    ],\n                                                    \"Next\": \"PassInputKey\"\n                                                }\n                                            ],\n                                            \"Default\": \"FailCheckInputKey\",\n                                            \"InputPath\": \"$.Object\"\n                                        },\n                                        \"PassInputKey\": {\n                                            \"Type\": \"Pass\",\n                                            \"End\": true\n                                        },\n                                        \"FailCheckInputKey\": {\n                                            \"Type\": \"Fail\"\n                                        },\n                                        \"FailCheckInputObject\": {\n                                            \"Type\": \"Fail\"\n                                        }\n                                    }\n                                }\n                            ],\n                            \"InputPath\": \"$.S3\",\n                            \"ResultSelector\": {\n                                \"Bucket.$\": \"$[0]\",\n                                \"Object.$\": \"$[1]\"\n                            },\n                            \"Next\": \"HeadObject\"\n                        },\n                        \"HeadObject\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\"\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:headObject\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailHeadObject\"\n                                }\n                            ],\n                            \"Next\": \"PassHeadObject\"\n                        },\n                        \"PassHeadObject\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            },\n                            \"Next\": \"GetObjectAttributes\"\n                        },\n                        \"GetObjectAttributes\": {\n                            \"Type\": \"Task\",\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket.Name\",\n                                \"Key.$\": \"$.Object.Key\",\n                                \"ObjectAttributes\": [\n                                    \"Checksum\",\n                                    \"ETag\",\n                                    \"ObjectParts\",\n                                    \"ObjectSize\",\n                                    \"StorageClass\"\n                                ]\n                            },\n                            \"Resource\": \"arn:aws:states:::aws-sdk:s3:getObjectAttributes\",\n                            \"ResultPath\": \"$.Output\",\n                            \"Catch\": [\n                                {\n                                    \"ErrorEquals\": [\n                                        \"States.TaskFailed\"\n                                    ],\n                                    \"Next\": \"FailGetObjectAttributes\"\n                                }\n                            ],\n                            \"Next\": \"PassGetObjectAttributes\"\n                        },\n                        \"PassGetObjectAttributes\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"Parameters\": {\n                                \"Bucket.$\": \"$.Bucket\",\n                                \"Object.$\": \"States.JsonMerge($.Object, $.Output, false)\"\n                            }\n                        },\n                        \"FailGetObjectAttributes\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailHeadObject\": {\n                            \"Type\": \"Fail\"\n                        },\n                        \"FailCheckS3Input\": {\n                            \"Type\": \"Fail\"\n                        }\n                    }\n                }\n            ],\n            \"Next\": \"DetectText\",\n            \"ResultSelector\": {\n                \"Rekognition.$\": \"$[0]\",\n                \"S3.$\": \"$[1]\"\n            }\n        },\n        \"DetectText\": {\n            \"Type\": \"Task\",\n            \"Parameters\": {\n                \"Image\": {\n                    \"S3Object\": {\n                        \"Bucket.$\": \"$.S3.Bucket.Name\",\n                        \"Name.$\": \"$.S3.Object.Key\"\n                    }\n                }\n            },\n            \"Resource\": \"arn:aws:states:::aws-sdk:rekognition:detectText\",\n            \"Next\": \"ParallelCheckOutputDetectText\",\n            \"Catch\": [\n                {\n                    \"ErrorEquals\": [\n                        \"States.TaskFailed\"\n                    ],\n                    \"Next\": \"FailDetectText\"\n                }\n            ],\n            \"ResultPath\": \"$.Output\"\n        },\n        \"ParallelCheckOutputDetectText\": {\n            \"Type\": \"Parallel\",\n            \"Branches\": [\n                {\n                    \"StartAt\": \"CheckOutputOrientationCorrection\",\n                    \"States\": {\n                        \"CheckOutputOrientationCorrection\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.OrientationCorrection\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOrientationCorrection\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputOrientationCorrection\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"PassOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"End\": true,\n                            \"InputPath\": \"$.OrientationCorrection\"\n                        },\n                        \"DefaultOutputOrientationCorrection\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"OrientationCorrection\": null\n                            },\n                            \"Next\": \"PassOrientationCorrection\"\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputTextDetections\",\n                    \"States\": {\n                        \"CheckOutputTextDetections\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.TextDetections\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"MapOutputTextDetections\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputTextDetections\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"DefaultOutputTextDetections\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"TextDetections\": null\n                            },\n                            \"OutputPath\": \"$.TextDetections\",\n                            \"End\": true\n                        },\n                        \"MapOutputTextDetections\": {\n                            \"Type\": \"Map\",\n                            \"ItemProcessor\": {\n                                \"ProcessorConfig\": {\n                                    \"Mode\": \"INLINE\"\n                                },\n                                \"StartAt\": \"ParallelCheckOutputTextDetection\",\n                                \"States\": {\n                                    \"ParallelCheckOutputTextDetection\": {\n                                        \"Type\": \"Parallel\",\n                                        \"End\": true,\n                                        \"Branches\": [\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionConfidence\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionConfidence\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Confidence\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputTextDetectionConfidence\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionConfidence\"\n                                                    },\n                                                    \"PassOutputTextDetectionConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Confidence\"\n                                                    },\n                                                    \"DefaultOutputTextDetectionConfidence\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Confidence\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Confidence\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionDetectedText\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionDetectedText\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.DetectedText\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputTextDetectionDetectedText\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionDetectedText\"\n                                                    },\n                                                    \"PassOutputTextDetectionDetectedText\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.DetectedText\"\n                                                    },\n                                                    \"DefaultOutputTextDetectionDetectedText\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"DetectedText\": null\n                                                        },\n                                                        \"OutputPath\": \"$.DetectedText\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionGeometry\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionGeometry\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Geometry\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"ParallelCheckOutputTextDetectionGeometry\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionGeometry\"\n                                                    },\n                                                    \"ParallelCheckOutputTextDetectionGeometry\": {\n                                                        \"Type\": \"Parallel\",\n                                                        \"End\": true,\n                                                        \"Branches\": [\n                                                            {\n                                                                \"StartAt\": \"CheckOutputTextDetectionGeometryBoundingBox\",\n                                                                \"States\": {\n                                                                    \"CheckOutputTextDetectionGeometryBoundingBox\": {\n                                                                        \"Type\": \"Choice\",\n                                                                        \"Choices\": [\n                                                                            {\n                                                                                \"Variable\": \"$.BoundingBox\",\n                                                                                \"IsPresent\": true,\n                                                                                \"Next\": \"PassOutputTextDetectionGeometryBoundingBox\"\n                                                                            }\n                                                                        ],\n                                                                        \"Default\": \"DefaultOutputTextDetectionGeometryBoundingBox\"\n                                                                    },\n                                                                    \"PassOutputTextDetectionGeometryBoundingBox\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true,\n                                                                        \"InputPath\": \"$.BoundingBox\"\n                                                                    },\n                                                                    \"DefaultOutputTextDetectionGeometryBoundingBox\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true,\n                                                                        \"Parameters\": {\n                                                                            \"BoundingBox\": null\n                                                                        },\n                                                                        \"OutputPath\": \"$.BoundingBox\"\n                                                                    }\n                                                                }\n                                                            },\n                                                            {\n                                                                \"StartAt\": \"CheckOutputTextDetectionGeometryPolygon\",\n                                                                \"States\": {\n                                                                    \"CheckOutputTextDetectionGeometryPolygon\": {\n                                                                        \"Type\": \"Choice\",\n                                                                        \"Choices\": [\n                                                                            {\n                                                                                \"Variable\": \"$.Polygon\",\n                                                                                \"IsPresent\": true,\n                                                                                \"Next\": \"PassOutputTextDetectionGeometryPolygon\"\n                                                                            }\n                                                                        ],\n                                                                        \"Default\": \"DefaultOutputTextDetectionGeometryPolygon\"\n                                                                    },\n                                                                    \"PassOutputTextDetectionGeometryPolygon\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true,\n                                                                        \"InputPath\": \"$.Polygon\"\n                                                                    },\n                                                                    \"DefaultOutputTextDetectionGeometryPolygon\": {\n                                                                        \"Type\": \"Pass\",\n                                                                        \"End\": true,\n                                                                        \"Parameters\": {\n                                                                            \"Polygon\": null\n                                                                        },\n                                                                        \"OutputPath\": \"$.Polygon\"\n                                                                    }\n                                                                }\n                                                            }\n                                                        ],\n                                                        \"InputPath\": \"$.Geometry\",\n                                                        \"ResultSelector\": {\n                                                            \"BoundingBox.$\": \"$[0]\",\n                                                            \"Polygon.$\": \"$[1]\"\n                                                        }\n                                                    },\n                                                    \"DefaultOutputTextDetectionGeometry\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Geometry\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Geometry\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionId\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionId\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Id\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputTextDetectionId\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionId\"\n                                                    },\n                                                    \"PassOutputTextDetectionId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Id\"\n                                                    },\n                                                    \"DefaultOutputTextDetectionId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Id\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Id\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionParentId\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionParentId\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.ParentId\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputTextDetectionParentId\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionParentId\"\n                                                    },\n                                                    \"PassOutputTextDetectionParentId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.ParentId\"\n                                                    },\n                                                    \"DefaultOutputTextDetectionParentId\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"ParentId\": null\n                                                        },\n                                                        \"OutputPath\": \"$.ParentId\"\n                                                    }\n                                                }\n                                            },\n                                            {\n                                                \"StartAt\": \"CheckOutputTextDetectionType\",\n                                                \"States\": {\n                                                    \"CheckOutputTextDetectionType\": {\n                                                        \"Type\": \"Choice\",\n                                                        \"Choices\": [\n                                                            {\n                                                                \"Variable\": \"$.Type\",\n                                                                \"IsPresent\": true,\n                                                                \"Next\": \"PassOutputTextDetectionType\"\n                                                            }\n                                                        ],\n                                                        \"Default\": \"DefaultOutputTextDetectionType\"\n                                                    },\n                                                    \"PassOutputTextDetectionType\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"InputPath\": \"$.Type\"\n                                                    },\n                                                    \"DefaultOutputTextDetectionType\": {\n                                                        \"Type\": \"Pass\",\n                                                        \"End\": true,\n                                                        \"Parameters\": {\n                                                            \"Type\": null\n                                                        },\n                                                        \"OutputPath\": \"$.Type\"\n                                                    }\n                                                }\n                                            }\n                                        ],\n                                        \"ResultSelector\": {\n                                            \"Confidence.$\": \"$[0]\",\n                                            \"DetectedText.$\": \"$[1]\",\n                                            \"Geometry.$\": \"$[2]\",\n                                            \"Id.$\": \"$[3]\",\n                                            \"ParentId.$\": \"$[4]\",\n                                            \"Type.$\": \"$[5]\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"ItemsPath\": \"$.TextDetections\",\n                            \"End\": true\n                        }\n                    }\n                },\n                {\n                    \"StartAt\": \"CheckOutputTextModelVersion\",\n                    \"States\": {\n                        \"CheckOutputTextModelVersion\": {\n                            \"Type\": \"Choice\",\n                            \"Choices\": [\n                                {\n                                    \"Variable\": \"$.TextModelVersion\",\n                                    \"IsPresent\": true,\n                                    \"Next\": \"PassOutputTextModelVersion\"\n                                }\n                            ],\n                            \"Default\": \"DefaultOutputTextModelVersion\",\n                            \"InputPath\": \"$.Output\"\n                        },\n                        \"DefaultOutputTextModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"Parameters\": {\n                                \"TextModelVersion\": null\n                            },\n                            \"OutputPath\": \"$.TextModelVersion\",\n                            \"End\": true\n                        },\n                        \"PassOutputTextModelVersion\": {\n                            \"Type\": \"Pass\",\n                            \"InputPath\": \"$.TextModelVersion\",\n                            \"End\": true\n                        }\n                    }\n                }\n            ],\n            \"ResultSelector\": {\n                \"OrientationCorrection.$\": \"$[0]\",\n                \"TextDetections.$\": \"$[1]\",\n                \"TextModelVersion.$\": \"$[2]\"\n            },\n            \"ResultPath\": \"$.Output\",\n            \"Next\": \"StateMachineOutput\"\n        },\n        \"StateMachineOutput\": {\n            \"Type\": \"Pass\",\n            \"Parameters\": {\n                \"DetectText\": {\n                    \"CreatedAt.$\": \"$$.Execution.StartTime\",\n                    \"Id.$\": \"$.S3.Object.ETag\",\n                    \"OrientationCorrection.$\": \"$.Output.OrientationCorrection\",\n                    \"TextDetections.$\": \"$.Output.TextDetections\",\n                    \"TextModelVersion.$\": \"$.Output.TextModelVersion\"\n                },\n                \"Execution\": {\n                    \"Id.$\": \"$$.Execution.Id\",\n                    \"Name.$\": \"$$.Execution.Name\",\n                    \"StartTime.$\": \"$$.Execution.StartTime\"\n                },\n                \"S3.$\": \"$.S3\",\n                \"StateMachine.$\": \"$$.StateMachine\"\n            },\n            \"Next\": \"Success\"\n        },\n        \"Success\": {\n            \"Type\": \"Succeed\"\n        },\n        \"FailDetectText\": {\n            \"Type\": \"Fail\"\n        }\n    }\n}\n","logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-detect-text","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"after_unknown":{"arn":true,"creation_date":true,"description":true,"encryption_configuration":true,"id":true,"logging_configuration":[{"log_destination":true}],"name_prefix":true,"revision_id":true,"role_arn":true,"state_machine_version_arn":true,"status":true,"tags_all":{},"tracing_configuration":true,"version_description":true},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}}},{"address":"aws_sfn_state_machine.parent","mode":"managed","type":"aws_sfn_state_machine","name":"parent","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"logging_configuration":[{"include_execution_data":true,"level":"ALL"}],"name":"rekognition-orchestrator-dev-parent","publish":false,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"type":"STANDARD"},"after_unknown":{"arn":true,"creation_date":true,"definition":true,"description":true,"encryption_configuration":true,"id":true,"logging_configuration":[{"log_destination":true}],"name_prefix":true,"revision_id":true,"role_arn":true,"state_machine_version_arn":true,"status":true,"tags_all":{},"tracing_configuration":true,"version_description":true},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"logging_configuration":[{}],"tags_all":{},"tracing_configuration":[]}}},{"address":"aws_sqs_queue.dlq","mode":"managed","type":"aws_sqs_queue","name":"dlq","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"content_based_deduplication":false,"delay_seconds":0,"fifo_queue":false,"kms_data_key_reuse_period_seconds":0,"kms_master_key_id":null,"max_message_size":262144,"message_retention_seconds":1209600,"name":"rekognition-orchestrator-dev-image-events-dlq","receive_wait_time_seconds":0,"sqs_managed_sse_enabled":true,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"visibility_timeout_seconds":30},"after_unknown":{"arn":true,"deduplication_scope":true,"fifo_throughput_limit":true,"id":true,"name_prefix":true,"policy":true,"redrive_allow_policy":true,"redrive_policy":true,"tags_all":{},"url":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_sqs_queue.main","mode":"managed","type":"aws_sqs_queue","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"content_based_deduplication":false,"delay_seconds":0,"fifo_queue":false,"kms_data_key_reuse_period_seconds":0,"kms_master_key_id":null,"max_message_size":262144,"message_retention_seconds":345600,"name":"rekognition-orchestrator-dev-image-events","receive_wait_time_seconds":10,"sqs_managed_sse_enabled":true,"tags":null,"tags_all":{"Environment":"dev","ManagedBy":"terraform","Project":"rekognition-orchestrator"},"timeouts":null,"visibility_timeout_seconds":60},"after_unknown":{"arn":true,"deduplication_scope":true,"fifo_throughput_limit":true,"id":true,"name_prefix":true,"policy":true,"redrive_allow_policy":true,"redrive_policy":true,"tags_all":{},"url":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}}],"output_changes":{"dispatcher_lambda_name":{"actions":["create"],"before":null,"after":"rekognition-orchestrator-dev-dispatcher","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"input_bucket_name":{"actions":["create"],"before":null,"after":"rekognition-orchestrator-dev-input-000000000000","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"output_bucket_name":{"actions":["create"],"before":null,"after":"rekognition-orchestrator-dev-output-000000000000","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"parent_state_machine_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"sqs_queue_url":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.5","values":{"outputs":{"dispatcher_lambda_name":{"sensitive":false,"value":"rekognition-orchestrator-dev-dispatcher","type":"string"},"input_bucket_name":{"sensitive":false,"value":"rekognition-orchestrator-dev-input-000000000000","type":"string"},"output_bucket_name":{"sensitive":false,"value":"rekognition-orchestrator-dev-output-000000000000","type":"string"}},"root_module":{"resources":[{"address":"data.archive_file.dispatcher_zip","mode":"data","type":"archive_file","name":"dispatcher_zip","provider_name":"registry.terraform.io/hashicorp/archive","schema_version":0,"values":{"exclude_symlink_directories":null,"excludes":null,"id":"69ba7a4cc4f327d1a02a22d33834d228b1c7e119","output_base64sha256":"zpUWGRH1/zQyqYc4Zqy041NkUbl77p7w6qLTIl7ve3c=","output_base64sha512":"UPlmKljK2qa+Ci+ePtHj/SvbZf1E40xNkKpHRfJQ+6g4ERbmJKlrXV2yCPci3VHftZSqQL2YF+g0nbWKRe53oQ==","output_file_mode":null,"output_md5":"6971efee5a3ee87f8750a2c248ce8258","output_path":"./.build/dispatcher.zip","output_sha":"69ba7a4cc4f327d1a02a22d33834d228b1c7e119","output_sha256":"ce95161911f5ff3432a9873866acb4e3536451b97bee9ef0eaa2d3225eef7b77","output_sha512":"50f9662a58cadaa6be0a2f9e3ed1e3fd2bdb65fd44e34c4d90aa4745f250fba8381116e624a96b5d5db208f722dd51dfb594aa40bd9817e8349db58a45ee77a1","output_size":591,"source":[],"source_content":null,"source_content_filename":null,"source_dir":null,"source_file":"./lambda_dispatcher.py","type":"zip"},"sensitive_values":{"source":[]}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"000000000000","arn":"arn:aws:iam::000000000000:root","id":"000000000000","user_id":"AKIAIOSFODNN7EXAMPLE"},"sensitive_values":{}},{"address":"data.aws_iam_policy_document.lambda_assume","mode":"data","type":"aws_iam_policy_document","name":"lambda_assume","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2690255455","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["lambda.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_iam_policy_document.sfn_assume","mode":"data","type":"aws_iam_policy_document","name":"sfn_assume","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"4022981484","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"states.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"states.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["states.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dns_suffix":"amazonaws.com","id":"aws","partition":"aws","reverse_dns_prefix":"com.amazonaws"},"sensitive_values":{}},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"},"sensitive_values":{}}]}}},"configuration":{"provider_config":{"archive":{"name":"archive","full_name":"registry.terraform.io/hashicorp/archive","version_constraint":"~\u003e 2.4"},"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.0","expressions":{"default_tags":[{"tags":{"references":["var.project_name","var.environment","var.tags"]}}],"region":{"references":["var.aws_region"]}}}},"root_module":{"outputs":{"dispatcher_lambda_name":{"expression":{"references":["aws_lambda_function.dispatcher.function_name","aws_lambda_function.dispatcher"]},"description":"Name of the SQS-\u003eStepFunctions dispatcher Lambda."},"input_bucket_name":{"expression":{"references":["aws_s3_bucket.input.bucket","aws_s3_bucket.input"]},"description":"S3 bucket for input images."},"output_bucket_name":{"expression":{"references":["aws_s3_bucket.output.bucket","aws_s3_bucket.output"]},"description":"S3 bucket for output results."},"parent_state_machine_arn":{"expression":{"references":["aws_sfn_state_machine.parent.arn","aws_sfn_state_machine.parent"]},"description":"ARN of the parent Step Functions state machine."},"sqs_queue_url":{"expression":{"references":["aws_sqs_queue.main.url","aws_sqs_queue.main"]},"description":"SQS queue URL for image events."}},"resources":[{"address":"aws_cloudwatch_log_group.lambda","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"retention_in_days":{"constant_value":14}},"schema_version":0},{"address":"aws_cloudwatch_log_group.sfn","mode":"managed","type":"aws_cloudwatch_log_group","name":"sfn","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"retention_in_days":{"constant_value":30}},"schema_version":0},{"address":"aws_iam_role.lambda","mode":"managed","type":"aws_iam_role","name":"lambda","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.lambda_assume.json","data.aws_iam_policy_document.lambda_assume"]},"name":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_iam_role.sfn","mode":"managed","type":"aws_iam_role","name":"sfn","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.sfn_assume.json","data.aws_iam_policy_document.sfn_assume"]},"name":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_iam_role_policy.lambda_inline","mode":"managed","type":"aws_iam_role_policy","name":"lambda_inline","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"policy":{"references":["data.aws_iam_policy_document.lambda_inline.json","data.aws_iam_policy_document.lambda_inline"]},"role":{"references":["aws_iam_role.lambda.id","aws_iam_role.lambda"]}},"schema_version":0},{"address":"aws_iam_role_policy.sfn_inline","mode":"managed","type":"aws_iam_role_policy","name":"sfn_inline","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"policy":{"references":["data.aws_iam_policy_document.sfn_inline.json","data.aws_iam_policy_document.sfn_inline"]},"role":{"references":["aws_iam_role.sfn.id","aws_iam_role.sfn"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_basic","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_basic","provider_config_key":"aws","expressions":{"policy_arn":{"references":["data.aws_partition.current.partition","data.aws_partition.current"]},"role":{"references":["aws_iam_role.lambda.name","aws_iam_role.lambda"]}},"schema_version":0},{"address":"aws_lambda_event_source_mapping.sqs","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs","provider_config_key":"aws","expressions":{"batch_size":{"references":["var.lambda_batch_size"]},"event_source_arn":{"references":["aws_sqs_queue.main.arn","aws_sqs_queue.main"]},"function_name":{"references":["aws_lambda_function.dispatcher.arn","aws_lambda_function.dispatcher"]},"function_response_types":{"constant_value":["ReportBatchItemFailures"]},"maximum_batching_window_in_seconds":{"references":["var.lambda_maximum_batching_window_in_seconds"]}},"schema_version":0},{"address":"aws_lambda_function.dispatcher","mode":"managed","type":"aws_lambda_function","name":"dispatcher","provider_config_key":"aws","expressions":{"environment":[{"variables":{"references":["aws_sfn_state_machine.parent.arn","aws_sfn_state_machine.parent"]}}],"filename":{"references":["data.archive_file.dispatcher_zip.output_path","data.archive_file.dispatcher_zip"]},"function_name":{"references":["local.name_prefix"]},"handler":{"constant_value":"lambda_dispatcher.handler"},"reserved_concurrent_executions":{"references":["var.lambda_reserved_concurrency"]},"role":{"references":["aws_iam_role.lambda.arn","aws_iam_role.lambda"]},"runtime":{"constant_value":"python3.12"},"source_code_hash":{"references":["data.archive_file.dispatcher_zip.output_base64sha256","data.archive_file.dispatcher_zip"]},"timeout":{"constant_value":30}},"schema_version":0,"depends_on":["aws_iam_role_policy_attachment.lambda_basic","aws_cloudwatch_log_group.lambda"]},{"address":"aws_s3_bucket.input","mode":"managed","type":"aws_s3_bucket","name":"input","provider_config_key":"aws","expressions":{"bucket":{"references":["local.input_bucket_name"]}},"schema_version":0},{"address":"aws_s3_bucket.output","mode":"managed","type":"aws_s3_bucket","name":"output","provider_config_key":"aws","expressions":{"bucket":{"references":["local.output_bucket_name"]}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.input","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"input","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.input.id","aws_s3_bucket.input"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_public_access_block.output","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"output","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.output.id","aws_s3_bucket.output"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.input","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"input","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.input.id","aws_s3_bucket.input"]},"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.output","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"output","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.output.id","aws_s3_bucket.output"]},"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.input","mode":"managed","type":"aws_s3_bucket_versioning","name":"input","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.input.id","aws_s3_bucket.input"]},"versioning_configuration":[{"status":{"constant_value":"Enabled"}}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.output","mode":"managed","type":"aws_s3_bucket_versioning","name":"output","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.output.id","aws_s3_bucket.output"]},"versioning_configuration":[{"status":{"constant_value":"Enabled"}}]},"schema_version":0},{"address":"aws_sfn_state_machine.detect_faces","mode":"managed","type":"aws_sfn_state_machine","name":"detect_faces","provider_config_key":"aws","expressions":{"definition":{"references":["local.asl_detect_faces"]},"logging_configuration":[{"include_execution_data":{"constant_value":true},"level":{"references":["var.stepfunctions_log_level"]},"log_destination":{"references":["aws_cloudwatch_log_group.sfn.arn","aws_cloudwatch_log_group.sfn"]}}],"name":{"references":["local.name_prefix"]},"role_arn":{"references":["aws_iam_role.sfn.arn","aws_iam_role.sfn"]},"type":{"constant_value":"STANDARD"}},"schema_version":0},{"address":"aws_sfn_state_machine.detect_labels","mode":"managed","type":"aws_sfn_state_machine","name":"detect_labels","provider_config_key":"aws","expressions":{"definition":{"references":["local.asl_detect_labels"]},"logging_configuration":[{"include_execution_data":{"constant_value":true},"level":{"references":["var.stepfunctions_log_level"]},"log_destination":{"references":["aws_cloudwatch_log_group.sfn.arn","aws_cloudwatch_log_group.sfn"]}}],"name":{"references":["local.name_prefix"]},"role_arn":{"references":["aws_iam_role.sfn.arn","aws_iam_role.sfn"]},"type":{"constant_value":"STANDARD"}},"schema_version":0},{"address":"aws_sfn_state_machine.detect_moderation_labels","mode":"managed","type":"aws_sfn_state_machine","name":"detect_moderation_labels","provider_config_key":"aws","expressions":{"definition":{"references":["local.asl_detect_moderation_labels"]},"logging_configuration":[{"include_execution_data":{"constant_value":true},"level":{"references":["var.stepfunctions_log_level"]},"log_destination":{"references":["aws_cloudwatch_log_group.sfn.arn","aws_cloudwatch_log_group.sfn"]}}],"name":{"references":["local.name_prefix"]},"role_arn":{"references":["aws_iam_role.sfn.arn","aws_iam_role.sfn"]},"type":{"constant_value":"STANDARD"}},"schema_version":0},{"address":"aws_sfn_state_machine.detect_protective_equipment","mode":"managed","type":"aws_sfn_state_machine","name":"detect_protective_equipment","provider_config_key":"aws","expressions":{"definition":{"references":["local.asl_detect_protective_equipment"]},"logging_configuration":[{"include_execution_data":{"constant_value":true},"level":{"references":["var.stepfunctions_log_level"]},"log_destination":{"references":["aws_cloudwatch_log_group.sfn.arn","aws_cloudwatch_log_group.sfn"]}}],"name":{"references":["local.name_prefix"]},"role_arn":{"references":["aws_iam_role.sfn.arn","aws_iam_role.sfn"]},"type":{"constant_value":"STANDARD"}},"schema_version":0},{"address":"aws_sfn_state_machine.detect_text","mode":"managed","type":"aws_sfn_state_machine","name":"detect_text","provider_config_key":"aws","expressions":{"definition":{"references":["local.asl_detect_text"]},"logging_configuration":[{"include_execution_data":{"constant_value":true},"level":{"references":["var.stepfunctions_log_level"]},"log_destination":{"references":["aws_cloudwatch_log_group.sfn.arn","aws_cloudwatch_log_group.sfn"]}}],"name":{"references":["local.name_prefix"]},"role_arn":{"references":["aws_iam_role.sfn.arn","aws_iam_role.sfn"]},"type":{"constant_value":"STANDARD"}},"schema_version":0},{"address":"aws_sfn_state_machine.parent","mode":"managed","type":"aws_sfn_state_machine","name":"parent","provider_config_key":"aws","expressions":{"definition":{"references":["local.parent_definition"]},"logging_configuration":[{"include_execution_data":{"constant_value":true},"level":{"references":["var.stepfunctions_log_level"]},"log_destination":{"references":["aws_cloudwatch_log_group.sfn.arn","aws_cloudwatch_log_group.sfn"]}}],"name":{"references":["local.name_prefix"]},"role_arn":{"references":["aws_iam_role.sfn.arn","aws_iam_role.sfn"]},"type":{"constant_value":"STANDARD"}},"schema_version":0,"depends_on":["aws_iam_role_policy.sfn_inline"]},{"address":"aws_sqs_queue.dlq","mode":"managed","type":"aws_sqs_queue","name":"dlq","provider_config_key":"aws","expressions":{"message_retention_seconds":{"constant_value":1209600},"name":{"references":["local.sqs_dlq_name"]},"sqs_managed_sse_enabled":{"references":["var.enable_sqs_sse"]}},"schema_version":0},{"address":"aws_sqs_queue.main","mode":"managed","type":"aws_sqs_queue","name":"main","provider_config_key":"aws","expressions":{"message_retention_seconds":{"constant_value":345600},"name":{"references":["local.sqs_queue_name"]},"receive_wait_time_seconds":{"constant_value":10},"redrive_policy":{"references":["aws_sqs_queue.dlq.arn","aws_sqs_queue.dlq"]},"sqs_managed_sse_enabled":{"references":["var.enable_sqs_sse"]},"visibility_timeout_seconds":{"constant_value":60}},"schema_version":0},{"address":"data.archive_file.dispatcher_zip","mode":"data","type":"archive_file","name":"dispatcher_zip","provider_config_key":"archive","expressions":{"output_path":{"references":["path.module"]},"source_file":{"references":["path.module"]},"type":{"constant_value":"zip"}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.lambda_assume","mode":"data","type":"aws_iam_policy_document","name":"lambda_assume","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["lambda.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.lambda_inline","mode":"data","type":"aws_iam_policy_document","name":"lambda_inline","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["states:StartExecution"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_sfn_state_machine.parent.arn","aws_sfn_state_machine.parent"]},"sid":{"constant_value":"StartParentStateMachine"}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.sfn_assume","mode":"data","type":"aws_iam_policy_document","name":"sfn_assume","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["states.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.sfn_inline","mode":"data","type":"aws_iam_policy_document","name":"sfn_inline","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["rekognition:DetectLabels","rekognition:DetectFaces","rekognition:DetectText","rekognition:DetectModerationLabels","rekognition:DetectProtectiveEquipment"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"Rekognition"}},{"actions":{"constant_value":["s3:HeadBucket","s3:HeadObject","s3:GetObjectAttributes"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_s3_bucket.input.arn","aws_s3_bucket.input","aws_s3_bucket.input.arn","aws_s3_bucket.input"]},"sid":{"constant_value":"S3ReadInput"}},{"actions":{"constant_value":["s3:PutObject","s3:PutObjectAcl"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_s3_bucket.output.arn","aws_s3_bucket.output"]},"sid":{"constant_value":"S3WriteOutput"}},{"actions":{"constant_value":["states:StartExecution"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_sfn_state_machine.detect_faces.arn","aws_sfn_state_machine.detect_faces","aws_sfn_state_machine.detect_labels.arn","aws_sfn_state_machine.detect_labels","aws_sfn_state_machine.detect_moderation_labels.arn","aws_sfn_state_machine.detect_moderation_labels","aws_sfn_state_machine.detect_protective_equipment.arn","aws_sfn_state_machine.detect_protective_equipment","aws_sfn_state_machine.detect_text.arn","aws_sfn_state_machine.detect_text"]},"sid":{"constant_value":"StartChildExecutions"}},{"actions":{"constant_value":["logs:CreateLogDelivery","logs:GetLogDelivery","logs:UpdateLogDelivery","logs:DeleteLogDelivery","logs:ListLogDeliveries","logs:PutResourcePolicy","logs:DescribeResourcePolicies","logs:DescribeLogGroups"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":"AllowCWLogsDelivery"}}]},"schema_version":0},{"address":"data.aws_partition.current","mode":"data","type":"aws_partition","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"aws_region":{"default":"us-east-1","description":"AWS region to deploy into."},"enable_sqs_sse":{"default":true,"description":"Enable SQS SSE (SSE-SQS)."},"environment":{"default":"dev","description":"Environment name (e.g., dev, staging, prod)."},"input_bucket_name":{"default":null,"description":"Optional explicit name for the input images bucket. If null, a name will be generated."},"lambda_batch_size":{"default":10,"description":"SQS event source mapping batch size."},"lambda_maximum_batching_window_in_seconds":{"default":5,"description":"Maximum batching window for SQS event source mapping."},"lambda_reserved_concurrency":{"default":5,"description":"Optional reserved concurrency for the dispatcher Lambda. Set to null for unreserved."},"output_bucket_name":{"default":null,"description":"Optional explicit name for the output results bucket. If null, a name will be generated."},"project_name":{"default":"rekognition-orchestrator","description":"Project/name prefix used for resource naming."},"s3_results_prefix":{"default":"rekognition-results/","description":"Prefix used by the parent state machine when writing results objects."},"sqs_queue_name":{"default":null,"description":"Optional explicit name for the SQS queue. If null, a name will be generated."},"stepfunctions_log_level":{"default":"ALL","description":"Step Functions log level. One of: ALL, ERROR, FATAL, OFF."},"tags":{"default":{},"description":"Additional tags to apply to all resources."}}}},"relevant_attributes":[{"resource":"aws_cloudwatch_log_group.sfn","attribute":["arn"]},{"resource":"aws_sfn_state_machine.detect_text","attribute":["arn"]},{"resource":"aws_iam_role.lambda","attribute":["arn"]},{"resource":"aws_s3_bucket.output","attribute":["arn"]},{"resource":"aws_lambda_function.dispatcher","attribute":["arn"]},{"resource":"aws_sqs_queue.main","attribute":["arn"]},{"resource":"aws_iam_role.sfn","attribute":["id"]},{"resource":"aws_s3_bucket.output","attribute":["bucket"]},{"resource":"aws_s3_bucket.input","attribute":["bucket"]},{"resource":"data.archive_file.dispatcher_zip","attribute":["output_base64sha256"]},{"resource":"aws_sfn_state_machine.detect_labels","attribute":["arn"]},{"resource":"data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"data.aws_iam_policy_document.lambda_assume","attribute":["json"]},{"resource":"data.aws_iam_policy_document.sfn_assume","attribute":["json"]},{"resource":"aws_sqs_queue.main","attribute":["url"]},{"resource":"data.aws_partition.current","attribute":["partition"]},{"resource":"aws_sfn_state_machine.detect_moderation_labels","attribute":["arn"]},{"resource":"data.aws_iam_policy_document.lambda_inline","attribute":["json"]},{"resource":"data.aws_iam_policy_document.sfn_inline","attribute":["json"]},{"resource":"aws_iam_role.lambda","attribute":["name"]},{"resource":"aws_sqs_queue.dlq","attribute":["arn"]},{"resource":"data.archive_file.dispatcher_zip","attribute":["output_path"]},{"resource":"aws_s3_bucket.output","attribute":["id"]},{"resource":"aws_sfn_state_machine.detect_protective_equipment","attribute":["arn"]},{"resource":"aws_s3_bucket.input","attribute":["id"]},{"resource":"aws_iam_role.sfn","attribute":["arn"]},{"resource":"aws_lambda_function.dispatcher","attribute":["function_name"]},{"resource":"aws_s3_bucket.input","attribute":["arn"]},{"resource":"aws_sfn_state_machine.detect_faces","attribute":["arn"]},{"resource":"aws_iam_role.lambda","attribute":["id"]},{"resource":"aws_sfn_state_machine.parent","attribute":["arn"]}],"checks":[{"address":{"kind":"var","name":"stepfunctions_log_level","to_display":"var.stepfunctions_log_level"},"status":"pass","instances":[{"address":{"to_display":"var.stepfunctions_log_level"},"status":"pass"}]}],"timestamp":"2026-01-27T12:36:04Z","applyable":true,"complete":true,"errored":false}
