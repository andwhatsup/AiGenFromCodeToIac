{
  "aws_architecture_description": "### Target AWS architecture (lean, secure, scalable)\n\n#### 1) Networking foundation\n- Deploy into a dedicated **VPC** spanning **2–3 Availability Zones** for high availability.\n- Create **public subnets** (for internet-facing load balancers and NAT) and **private subnets** (for EKS worker nodes and pods).\n- Use **Internet Gateway** for inbound/outbound internet access from public subnets.\n- Use **NAT Gateways** (one per AZ, or one to reduce cost) so private subnets (EKS nodes) can pull images from Docker Hub and reach AWS APIs without being publicly reachable.\n- Use **VPC endpoints** where it reduces exposure/cost (at minimum: CloudWatch Logs, ECR if you later move images to ECR, SSM).\n\n#### 2) Compute: Amazon EKS to run the existing Kubernetes manifests\n- Provision an **Amazon EKS cluster**.\n- Use an **EKS Managed Node Group** (EC2) in private subnets.\n  - Nodes run the Nginx container serving the static HTML/CSS/JS app.\n  - Keep the existing **Kubernetes Deployment (replicas=2)** and **Service type LoadBalancer** pattern.\n- Add **Cluster Autoscaler** (or Karpenter) so node capacity scales when replicas increase.\n- Add **Horizontal Pod Autoscaler (HPA)** for the web deployment (CPU/requests-based) so pods scale beyond 2 replicas when needed.\n\n#### 3) Ingress / Load balancing\n- Your current manifests expose a **Service type `LoadBalancer`** with AWS LB annotations.\n- Recommended approach on EKS:\n  - Install **AWS Load Balancer Controller** and expose the app via **Ingress** (ALB) for better L7 routing, TLS, and future multi-service expansion.\n  - If you keep `Service: LoadBalancer`, you’ll typically get an NLB/CLB depending on annotations; for a web app, **ALB via Ingress** is usually the best fit.\n- Terminate TLS at the load balancer using **ACM** certificates.\n- Use **Route 53** to map a friendly domain (e.g., `app.example.com`) to the load balancer.\n\n#### 4) Container image supply chain\n- Today the cluster pulls from **Docker Hub** (`yash5090/dinosaur:latest`). This works, but for reliability and security best practice:\n  - Mirror/publish the image to **Amazon ECR** and pull from ECR in EKS.\n  - Use **IRSA** (IAM Roles for Service Accounts) so pods/controllers get least-privilege AWS access.\n\n#### 5) CI/CD on AWS (optional but recommended)\nYou currently have Jenkins + SonarQube + scanners. On AWS you have two clean options:\n\n**Option A (minimal change): keep Jenkins, host it on AWS**\n- Run Jenkins on **EC2** (or on EKS) in private subnets.\n- Store Jenkins state on **EBS** (single node) or **EFS** (shared).\n- Use **Secrets Manager** for Docker Hub/ECR credentials, kubeconfig access, Sonar token, etc.\n\n**Option B (more managed): move to AWS-native CI/CD**\n- **CodePipeline + CodeBuild** to build container images, run scans, and deploy to EKS.\n- Keep SonarQube as SaaS or host it on AWS if required.\n\nGiven your repo already references `awscli`, `kubectl`, and `terraform`, either option works; Option A is fastest migration, Option B reduces ops.\n\n#### 6) Observability, security, and operations\n- Send EKS control plane logs and application logs to **CloudWatch Logs**.\n- Use **CloudWatch Container Insights** for cluster metrics.\n- Use **AWS WAF** on the ALB for basic L7 protection (rate limiting, managed rules).\n- Use **AWS Shield Standard** (automatic) for DDoS protection.\n- Use **SSM** for node access (avoid SSH/bastions).\n- Encrypt at rest with **KMS** (EBS/EFS/Secrets).\n\n#### 7) Serving the “Jump Game” static app\n- If it’s a separate site, the leanest approach is **S3 static hosting + CloudFront** (no containers).\n- If you want everything in one place, you can also bundle it into the same Nginx container and route via ALB path-based routing (e.g., `/jump-game`).\n\n---\n\n### End-to-end request flow\n1. User resolves DNS in **Route 53** and connects over HTTPS.\n2. **ALB (via AWS Load Balancer Controller Ingress)** terminates TLS (ACM cert) and forwards to a Kubernetes Service.\n3. Service routes to Nginx pods (Deployment, replicas>=2, HPA enabled).\n4. Pods run on EKS managed nodes in private subnets; nodes/pods pull images from **ECR** (recommended) or Docker Hub (current).\n5. Logs/metrics go to **CloudWatch**; WAF protects the ALB.\n\n---\n\n### Notes / assumptions\n- No backend/database is present in the analyzed repo; architecture is optimized for static web serving.\n- Terraform is referenced but not present; the resource list below assumes you will provision infra via Terraform/CloudFormation/CDK.\n",
  "aws_resources": [
    "VPC",
    "Public subnets (2–3 AZs)",
    "Private subnets (2–3 AZs)",
    "Internet Gateway",
    "NAT Gateway(s)",
    "Route tables (public/private)",
    "Security Groups (ALB, EKS nodes, Jenkins if used)",
    "Network ACLs (optional, if you enforce beyond SGs)",
    "VPC Endpoints (Interface/Gateway as needed: CloudWatch Logs, SSM, ECR API/DKR if using ECR, S3 gateway endpoint)",
    "Amazon EKS Cluster",
    "EKS Managed Node Group (EC2)",
    "IAM Role for EKS Cluster",
    "IAM Role for EKS Node Group",
    "OIDC provider for EKS (for IRSA)",
    "IAM Roles for Service Accounts (IRSA) for AWS Load Balancer Controller and other add-ons",
    "AWS Load Balancer Controller (EKS add-on/Helm deployment)",
    "Application Load Balancer (provisioned by Ingress)",
    "Target Groups (created with ALB)",
    "AWS Certificate Manager (ACM) certificate",
    "Amazon Route 53 Hosted Zone + DNS records (A/AAAA alias to ALB)",
    "AWS WAFv2 Web ACL (associated to ALB)",
    "Amazon ECR Repository (recommended for app images)",
    "CloudWatch Log Groups (EKS control plane + app logs)",
    "CloudWatch Container Insights (cluster metrics)",
    "AWS KMS Key(s) (for encryption of secrets/volumes/logs as needed)",
    "AWS Secrets Manager (CI/CD tokens, registry creds, kube access, etc.)",
    "AWS Systems Manager (SSM) + Instance Profile permissions for nodes (no SSH)",
    "S3 Bucket (artifacts/logs, optional; required if using CodePipeline/CodeBuild)",
    "CloudFront Distribution + S3 Bucket (optional: to host the “Jump Game” as a separate static site)",
    "EC2 Instance(s) for Jenkins (optional, if keeping Jenkins)",
    "EBS Volume(s) for Jenkins data (optional)",
    "EFS File System (optional alternative for Jenkins shared storage)",
    "IAM Roles for CodeBuild/CodePipeline (optional, if moving to AWS-native CI/CD)",
    "CodeBuild Project(s) (optional)",
    "CodePipeline Pipeline (optional)"
  ]
}