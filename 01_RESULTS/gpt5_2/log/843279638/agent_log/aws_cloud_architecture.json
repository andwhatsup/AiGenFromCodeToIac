{
  "aws_architecture_description": "## Proposed high-level AWS architecture (React SPA on EKS + ALB + CI/CD)\n\n### 1) Networking foundation\n- Create a dedicated **VPC** spanning **at least 2 Availability Zones**.\n- Use **public subnets** for internet-facing load balancers and **private subnets** for EKS worker nodes/pods (recommended EKS pattern). ([docs.aws.amazon.com](https://docs.aws.amazon.com/eks/latest/best-practices/subnets.html?utm_source=openai))\n- Private subnets route outbound traffic through **NAT Gateway(s)**; public subnets route through an **Internet Gateway**.\n- Use **VPC endpoints** (Interface/Gateway) where practical (e.g., ECR API/DKR, S3, CloudWatch Logs) to reduce NAT egress and tighten security.\n\n### 2) Compute / Kubernetes runtime\n- Provision an **Amazon EKS cluster** (managed control plane).\n- Create an **EKS managed node group** (or Fargate, but node groups are the most common fit here) in **private subnets**.\n- Deploy the React SPA as a **Kubernetes Deployment** (replicas=6 as in your manifests). Add:\n  - **Horizontal Pod Autoscaler (HPA)** based on CPU/memory (and optionally ALB request metrics via custom metrics) to scale beyond the fixed replica count.\n  - **PodDisruptionBudgets** and **readiness/liveness probes** for safer rollouts.\n\n### 3) Ingress / Load balancing\n- Install the **AWS Load Balancer Controller** in the cluster to provision and manage ALBs for Kubernetes Ingress/Service annotations. ([docs.aws.amazon.com](https://docs.aws.amazon.com/eks/latest/userguide/lbc-manifest.html?utm_source=openai))\n- Use **IRSA (IAM Roles for Service Accounts)** for the controller’s AWS permissions (recommended best practice vs. node IAM). ([kubernetes-sigs.github.io](https://kubernetes-sigs.github.io/aws-load-balancer-controller/latest/deploy/installation/?utm_source=openai))\n- Expose the app via:\n  - **Kubernetes Ingress** (preferred) or your existing **Service** annotations, resulting in an **internet-facing ALB** in public subnets.\n  - **ACM** TLS certificate on the ALB for HTTPS.\n  - Optional **AWS WAF** on the ALB for basic L7 protections.\n\n### 4) Container images\n- You currently build/push to **GHCR**. EKS can pull from GHCR, but for tighter AWS-native integration consider:\n  - Mirroring/publishing images to **Amazon ECR** (recommended) and using node IAM/IRSA to pull.\n- Use **image immutability** (digest pinning) in Kubernetes manifests for safer deployments.\n\n### 5) CI/CD\nTwo viable paths (you can keep both, but pick one as the “source of truth”):\n- **Option A (leaner): GitHub Actions → ECR → EKS**\n  - GitHub Actions builds/tests, scans, pushes to ECR, then deploys to EKS using `kubectl`/Helm.\n  - Use **OIDC federation from GitHub to AWS IAM** (no long-lived AWS keys) for pushing to ECR and updating the cluster.\n- **Option B: Jenkins → ECR/GHCR → EKS**\n  - Run Jenkins on **EC2** (or in EKS) in private subnets.\n  - Jenkins assumes an **IAM role** to push images and deploy to EKS.\n\n### 6) DNS and edge\n- Use **Route 53** to host the application domain.\n- Route 53 alias → ALB.\n- Optional: **CloudFront** in front of ALB for global caching and additional edge controls (often not necessary if the SPA is already served efficiently, but can help globally).\n\n### 7) Observability, logging, and security\n- Enable **EKS control plane logs** to **CloudWatch Logs** (at least for production; manage retention to control cost). ([docs.aws.amazon.com](https://docs.aws.amazon.com/eks/latest/best-practices/auditing-and-logging.html?utm_source=openai))\n- Use **CloudWatch Container Insights** (or ADOT) for node/pod metrics.\n- Use **AWS CloudTrail** for account audit.\n- Use **AWS Secrets Manager** (or SSM Parameter Store) for any runtime secrets (if needed).\n- Use **KMS** for encryption (EKS secrets envelope encryption optional; CloudWatch log group encryption; Secrets Manager encryption).\n\n---\n\n## AWS resources to provision\n\n### Networking\n- Amazon VPC\n- Public subnets (2+ AZs)\n- Private subnets (2+ AZs)\n- Internet Gateway (IGW)\n- NAT Gateway(s) (1 per AZ recommended for HA) + Elastic IPs\n- Route tables (public/private) + routes\n- Security Groups (ALB SG, node group SG, Jenkins SG if applicable)\n- Network ACLs (optional; default is fine for many setups)\n- VPC Endpoints:\n  - Gateway endpoint: S3\n  - Interface endpoints (as needed): ECR (api, dkr), CloudWatch Logs, STS, Secrets Manager\n\n### EKS / Kubernetes\n- Amazon EKS cluster\n- EKS managed node group(s) (Auto Scaling)\n- EKS add-ons (typical): VPC CNI, CoreDNS, kube-proxy\n- IAM OIDC provider for the EKS cluster (for IRSA)\n- AWS Load Balancer Controller (Helm release / Kubernetes manifests)\n- IAM policy for AWS Load Balancer Controller\n- IAM role for AWS Load Balancer Controller (IRSA) + Kubernetes ServiceAccount\n- Kubernetes namespace\n- Kubernetes Deployment (react-spa)\n- Kubernetes Service (ClusterIP/NodePort as required by ingress pattern)\n- Kubernetes Ingress (recommended) or Service annotations to create ALB\n- Horizontal Pod Autoscaler (HPA)\n- PodDisruptionBudget\n\n### Load balancing / TLS / DNS\n- Application Load Balancer (provisioned by controller)\n- ALB Target Group(s) (provisioned by controller)\n- ALB Listener(s) : 80/443 (redirect 80→443)\n- AWS Certificate Manager (ACM) certificate\n- Amazon Route 53 hosted zone + DNS records (A/AAAA alias to ALB)\n- AWS WAFv2 Web ACL (optional but recommended for internet-facing apps)\n\n### Container registry (recommended)\n- Amazon ECR repository\n- ECR lifecycle policy\n- IAM permissions for CI to push to ECR\n\n### CI/CD (choose what you actually run)\n- If using GitHub Actions to AWS:\n  - IAM OIDC identity provider for GitHub\n  - IAM role for GitHub Actions (assume-role with OIDC)\n- If hosting Jenkins on AWS:\n  - EC2 instance(s) or Auto Scaling Group\n  - IAM instance profile/role for Jenkins\n  - (Optional) EBS volumes for Jenkins home\n  - (Optional) Application Load Balancer / NLB for Jenkins UI (or private-only access)\n\n### Observability / Security / Governance\n- Amazon CloudWatch log groups (EKS control plane logs, application logs)\n- CloudWatch log retention policies\n- CloudWatch alarms (ALB 5xx, target health, CPU/memory, node group capacity)\n- AWS CloudTrail\n- AWS KMS key(s) (for log groups / secrets / optional EKS secret encryption)\n- AWS Secrets Manager (if any secrets are required)\n- IAM roles/policies:\n  - EKS cluster role\n  - Node group role\n  - CI deploy role (GitHub Actions and/or Jenkins)\n\nIf you tell me (a) preferred region, (b) whether you want to keep GHCR or move to ECR, and (c) whether Jenkins is staying, I can trim this to the leanest possible bill-of-materials and a concrete deployment flow.",
  "aws_resources": [
    "Amazon VPC",
    "Public Subnets (2+ AZs)",
    "Private Subnets (2+ AZs)",
    "Internet Gateway (IGW)",
    "NAT Gateway(s) + Elastic IPs",
    "Route Tables (public/private) + Routes",
    "Security Groups (ALB, EKS nodes, CI/CD)",
    "VPC Endpoints (S3 Gateway; Interface endpoints for ECR api/dkr, CloudWatch Logs, STS, Secrets Manager as needed)",
    "Amazon EKS Cluster",
    "EKS Managed Node Group(s)",
    "EKS Add-ons (VPC CNI, CoreDNS, kube-proxy)",
    "IAM OIDC Provider for EKS (IRSA)",
    "AWS Load Balancer Controller (in-cluster)",
    "IAM Policy: AWSLoadBalancerControllerIAMPolicy",
    "IAM Role for AWS Load Balancer Controller (IRSA) + Kubernetes ServiceAccount",
    "Kubernetes Namespace",
    "Kubernetes Deployment (react-spa)",
    "Kubernetes Service",
    "Kubernetes Ingress (recommended)",
    "Horizontal Pod Autoscaler (HPA)",
    "PodDisruptionBudget",
    "Application Load Balancer (ALB) (controller-managed)",
    "ALB Target Group(s) (controller-managed)",
    "ALB Listeners (80/443)",
    "AWS Certificate Manager (ACM) Certificate",
    "Amazon Route 53 Hosted Zone + DNS Records",
    "AWS WAFv2 Web ACL (optional)",
    "Amazon ECR Repository (recommended)",
    "ECR Lifecycle Policy",
    "IAM OIDC Provider for GitHub Actions (if using GitHub→AWS)",
    "IAM Role for GitHub Actions (assume-role via OIDC)",
    "(Optional) Amazon EC2 for Jenkins",
    "(Optional) IAM Instance Profile/Role for Jenkins",
    "Amazon CloudWatch Log Groups",
    "CloudWatch Log Retention Policies",
    "CloudWatch Alarms",
    "AWS CloudTrail",
    "AWS KMS Key(s)",
    "AWS Secrets Manager"
  ]
}