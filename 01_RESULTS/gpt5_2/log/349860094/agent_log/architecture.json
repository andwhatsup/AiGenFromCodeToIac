{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\ntitle Serverless Announcement Notifier (AWS)\n\nskinparam shadowing false\nskinparam componentStyle rectangle\n\nnode \"AWS Account / Region\" as aws {\n\n  node \"EventBridge\" as evb {\n    component \"Scheduled Rule\\n(cron)\" as rule\n  }\n\n  node \"AWS Lambda\" as lambda {\n    component \"check_announcement\\nGo + aws-lambda-go\\nUses: DynamoDB, SSM\" as fn_check\n    component \"send_notification\\nGo + aws-lambda-go\\nUses: SNS\" as fn_sns\n    component \"send_telegram_notification\\nGo + aws-lambda-go\\nUses: SSM + Telegram Bot API\" as fn_tg\n  }\n\n  database \"Amazon DynamoDB\\nAnnouncement State Table\\n+ Streams\" as ddb\n\n  queue \"Amazon SNS\\nNotifications Topic\" as sns\n\n  node \"AWS Systems Manager\" as ssm {\n    component \"Parameter Store\\nTelegram token + channel config\" as ps\n  }\n\n  node \"Amazon CloudWatch Logs\" as cwl {\n    component \"Log Groups\\n(per Lambda)\" as logs\n  }\n}\n\ncloud \"Telegram\" as telegram {\n  component \"Telegram Bot API\" as tg_api\n  component \"Telegram Channels/Chats\" as tg_channels\n}\n\n' Triggers / flows\nrule --> fn_check : Invoke (schedule)\nfn_check --> ddb : Read/Write state\nfn_check --> ps : Get config\n\n' DynamoDB stream fan-out\nddb --> fn_sns : Stream event\\n(announcement change)\n\n' SNS fan-out to telegram sender\nfn_sns --> sns : Publish notification\nsns --> fn_tg : Subscription\\n(invoke)\n\n' External integration\nfn_tg --> ps : Get bot token + chat ids\nfn_tg --> tg_api : HTTPS sendMessage\n\ntg_api --> tg_channels : Deliver messages\n\n' Observability\nfn_check --> logs\nfn_sns --> logs\nfn_tg --> logs\n\n@enduml",
  "svg_diagram": "<?plantuml 1.2026.2beta1?><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"742px\" preserveAspectRatio=\"none\" style=\"width:1134px;height:742px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 1134 742\" width=\"1134px\" zoomAndPan=\"magnify\"><title>Serverless Announcement Notifier (AWS)</title><defs/><g><g class=\"title\" data-source-line=\"4\"><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"325.7188\" x=\"394.3294\" y=\"22.9951\">Serverless Announcement Notifier (AWS)</text></g><!--cluster aws--><g class=\"cluster\" data-qualified-name=\"aws\" data-source-line=\"9\" id=\"ent0002\"><polygon fill=\"#FFFFFF\" points=\"80.15,53.2969,90.15,43.2969,859.15,43.2969,859.15,598.6169,849.15,608.6169,80.15,608.6169,80.15,53.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"849.15\" x2=\"859.15\" y1=\"53.2969\" y2=\"43.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"80.15\" x2=\"849.15\" y1=\"53.2969\" y2=\"53.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"849.15\" x2=\"849.15\" y1=\"53.2969\" y2=\"608.6169\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"174.4531\" x=\"378.4234\" y=\"69.292\">AWS Account / Region</text></g><!--cluster evb--><g class=\"cluster\" data-qualified-name=\"aws.evb\" data-source-line=\"11\" id=\"ent0003\"><polygon fill=\"#FFFFFF\" points=\"104.15,101.2969,114.15,91.2969,276.15,91.2969,276.15,189.8969,266.15,199.8969,104.15,199.8969,104.15,101.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"266.15\" x2=\"276.15\" y1=\"101.2969\" y2=\"91.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"104.15\" x2=\"266.15\" y1=\"101.2969\" y2=\"101.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"266.15\" x2=\"266.15\" y1=\"101.2969\" y2=\"199.8969\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"96.7559\" x=\"137.7721\" y=\"117.292\">EventBridge</text></g><!--cluster lambda--><g class=\"cluster\" data-qualified-name=\"aws.lambda\" data-source-line=\"15\" id=\"ent0005\"><polygon fill=\"#FFFFFF\" points=\"174.15,281.5469,184.15,271.5469,834.15,271.5469,834.15,402.7269,824.15,412.7269,174.15,412.7269,174.15,281.5469\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"824.15\" x2=\"834.15\" y1=\"281.5469\" y2=\"271.5469\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"174.15\" x2=\"824.15\" y1=\"281.5469\" y2=\"281.5469\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"824.15\" x2=\"824.15\" y1=\"281.5469\" y2=\"412.7269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"103.6807\" x=\"448.3097\" y=\"297.542\">AWS Lambda</text></g><!--cluster ssm--><g class=\"cluster\" data-qualified-name=\"aws.ssm\" data-source-line=\"25\" id=\"ent0011\"><polygon fill=\"#FFFFFF\" points=\"142.15,469.7269,152.15,459.7269,399.15,459.7269,399.15,574.6169,389.15,584.6169,142.15,584.6169,142.15,469.7269\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"389.15\" x2=\"399.15\" y1=\"469.7269\" y2=\"459.7269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"142.15\" x2=\"389.15\" y1=\"469.7269\" y2=\"469.7269\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"389.15\" x2=\"389.15\" y1=\"469.7269\" y2=\"584.6169\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"181.9727\" x=\"175.6637\" y=\"485.722\">AWS Systems Manager</text></g><!--cluster cwl--><g class=\"cluster\" data-qualified-name=\"aws.cwl\" data-source-line=\"29\" id=\"ent0013\"><polygon fill=\"#FFFFFF\" points=\"423.15,477.8769,433.15,467.8769,702.15,467.8769,702.15,566.4669,692.15,576.4669,423.15,576.4669,423.15,477.8769\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"692.15\" x2=\"702.15\" y1=\"477.8769\" y2=\"467.8769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"423.15\" x2=\"692.15\" y1=\"477.8769\" y2=\"477.8769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"692.15\" x2=\"692.15\" y1=\"477.8769\" y2=\"576.4669\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"203.7725\" x=\"456.7638\" y=\"493.872\">Amazon CloudWatch Logs</text></g><!--cluster telegram--><g class=\"cluster\" data-qualified-name=\"telegram\" data-source-line=\"34\" id=\"ent0015\"><path d=\"M899.0632,491.7819 C902.9577,482.1387 911.6237,482.4794 917.4669,489.6489 C921.6318,483.1001 929.1574,480.7696 933.5589,489.3979 C939.4972,482.2851 945.2354,480.4054 951.0335,489.5486 C955.8893,480.9285 962.3102,482.0101 967.2406,489.4735 C972.137,480.8987 978.0219,479.6224 984.1164,488.3016 C988.801,480.0923 995.8547,481.6501 1000.3364,488.5199 C1006.247,481.6594 1013.1484,482.7641 1017.6297,490.2435 C1022.8653,481.646 1028.7011,481.3103 1035.3667,488.6521 C1041.7071,480.6739 1047.9081,482.1422 1052.6455,490.362 C1058.1373,483.0695 1063.2205,484.2386 1068.2818,490.8463 C1072.3879,482.8371 1079.2539,481.3668 1084.8855,489.2527 C1094.6029,479.5383 1104.4784,482.5837 1107.15,496.0269 C1108.1479,495.3686 1108.8221,495.6742 1109.2168,496.7471 C1117.4857,500.6547 1117.4953,507.8259 1109.8052,512.3359 C1116.7217,515.3944 1117.9648,521.9778 1111.1788,526.3769 C1120.1721,529.8553 1120.2418,535.4904 1113.7502,541.5868 C1121.9627,546.7061 1121.6611,552.1715 1113.9991,557.5385 C1123.0991,562.5479 1122.0089,568.2837 1114.9259,574.1936 C1122.8489,578.3378 1123.839,582.7731 1116.8889,588.9021 C1123.7533,591.3276 1126.4785,597.5259 1119.8736,602.8365 C1127.118,608.1385 1125.3533,614.8773 1117.3397,617.552 C1124.7381,621.788 1126.4449,629.7975 1117.5926,634.2793 C1123.1491,641.2152 1121.0829,645.5432 1113.1382,648.1403 C1120.4262,653.1757 1118.7362,658.2816 1111.9947,662.1737 C1120.3898,667.5398 1120.1575,673.785 1111.1003,678.1757 C1118.6619,683.065 1119.9368,689.2662 1111.2639,694.32 C1116.3674,706.2205 1112.0591,711.6647 1100.15,713.9169 C1100.6389,713.4484 1101.32,713.4573 1101.4987,714.2489 C1097.2277,723.2382 1090.6443,723.506 1083.8061,717.2229 C1079.9126,726.8556 1073.5427,727.3032 1066.8275,720.0621 C1062.3412,726.4245 1055.9784,728.3745 1051.3455,720.2185 C1048.1896,727.4588 1040.6386,729.9257 1035.7184,722.0413 C1032.1989,731.0756 1025.1072,733.2663 1018.7428,724.8009 C1014.6243,733.493 1007.196,735.2397 1000.5034,727.692 C994.1455,734.6078 986.6519,733.9205 983.6612,724.269 C978.7742,734.0597 970.4484,733.9617 965.6788,724.1612 C960.2421,730.9081 954.3222,731.0902 950.6023,722.4762 C944.0996,728.9454 938.155,727.3789 934.3349,719.4461 C928.1089,727.5166 921.4625,728.6595 916.2146,718.4752 C903.3906,725.1454 893.7627,722.3904 891.15,706.9169 C892.482,707.4062 892.664,708.5955 891.6603,709.5393 C883.8641,704.496 884.3078,697.6159 892.8987,693.8675 C885.1104,689.3488 884.2815,683.3444 891.5963,677.6153 C885.7483,674.6107 883.9351,668.8551 890.3038,664.6342 C882.8137,659.319 883.7797,654.3362 890.4667,649.1704 C882.9572,646.6376 881.9018,639.2533 887.1471,633.9404 C879.6705,629.6826 879.3998,623.9993 885.9117,618.6139 C878.7514,614.1977 877.012,608.6628 884.9181,603.271 C876.7164,596.4041 879.0043,591.3974 887.1952,586.7963 C881.562,582.0551 881.926,576.8646 889.1343,574.0819 C881.9069,569.3863 879.3183,563.7489 887.8517,557.8109 C882.8498,552.9714 882.0221,546.3334 890.3055,543.8248 C883.3478,538.7844 885.3117,532.3094 891.9214,528.7206 C885.1128,524.6705 883.178,519.17 890.8286,514.0434 C881.6024,502.0842 882.1529,493.6042 898.15,489.0269 C899.9048,489.4996 899.8983,490.4508 899.0632,491.7819\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"74.2998\" x=\"962.0001\" y=\"507.022\">Telegram</text></g><!--entity ddb--><g class=\"entity\" data-qualified-name=\"aws.ddb\" data-source-line=\"21\" id=\"ent0009\"><path d=\"M304.63,128.6469 C304.63,118.6469 410.1486,118.6469 410.1486,118.6469 C410.1486,118.6469 515.6671,118.6469 515.6671,128.6469 L515.6671,186.5375 C515.6671,196.5375 410.1486,196.5375 410.1486,196.5375 C410.1486,196.5375 304.63,196.5375 304.63,186.5375 L304.63,128.6469\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M304.63,128.6469 C304.63,138.6469 410.1486,138.6469 410.1486,138.6469 C410.1486,138.6469 515.6671,138.6469 515.6671,128.6469\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.5811\" x=\"340.0802\" y=\"155.642\">Amazon</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"396.6613\" y=\"155.642\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"79.1055\" x=\"401.1114\" y=\"155.642\">DynamoDB</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"106.5586\" x=\"314.63\" y=\"171.9389\">Announcement</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"421.1886\" y=\"171.9389\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.0576\" x=\"425.6388\" y=\"171.9389\">State</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"462.6964\" y=\"171.9389\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"38.5205\" x=\"467.1466\" y=\"171.9389\">Table</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"372.9303\" y=\"188.2357\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"384.6608\" y=\"188.2357\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"58.2559\" x=\"389.111\" y=\"188.2357\">Streams</text></g><!--entity sns--><g class=\"entity\" data-qualified-name=\"aws.sns\" data-source-line=\"23\" id=\"ent0010\"><path d=\"M626.32,136.2969 L765.9841,136.2969 C770.9841,136.2969 770.9841,157.5938 770.9841,157.5938 C770.9841,157.5938 770.9841,178.8906 765.9841,178.8906 L626.32,178.8906 C621.32,178.8906 621.32,157.5938 621.32,157.5938 C621.32,157.5938 621.32,136.2969 626.32,136.2969\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M765.9841,136.2969 C760.9841,136.2969 760.9841,157.5938 760.9841,157.5938 C760.9841,178.8906 765.9841,178.8906 765.9841,178.8906\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.5811\" x=\"646.5134\" y=\"154.292\">Amazon</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"703.0944\" y=\"154.292\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"28.2461\" x=\"707.5446\" y=\"154.292\">SNS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"87.623\" x=\"626.32\" y=\"170.5889\">Notifications</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"713.943\" y=\"170.5889\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.5908\" x=\"718.3932\" y=\"170.5889\">Topic</text></g><!--entity rule--><g class=\"entity\" data-qualified-name=\"aws.evb.rule\" data-source-line=\"12\" id=\"ent0004\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"128.7734\" x=\"119.77\" y=\"131.2969\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"73.2197\" x=\"129.77\" y=\"154.292\">Scheduled</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"202.9897\" y=\"154.292\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"31.1035\" x=\"207.4399\" y=\"154.292\">Rule</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"41.8154\" x=\"163.249\" y=\"170.5889\">(cron)</text></g><!--entity fn_check--><g class=\"entity\" data-qualified-name=\"aws.lambda.fn_check\" data-source-line=\"16\" id=\"ent0006\"><rect fill=\"#FFFFFF\" height=\"68.8906\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"180.4736\" x=\"189.92\" y=\"319.6869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"153.5488\" x=\"203.3824\" y=\"342.682\">check_announcement</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"19.4141\" x=\"206.4654\" y=\"358.9789\">Go</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"225.8795\" y=\"358.9789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"230.3297\" y=\"358.9789\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"242.0601\" y=\"358.9789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"107.3379\" x=\"246.5103\" y=\"358.9789\">aws-lambda-go</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"38.165\" x=\"199.92\" y=\"375.2757\">Uses:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"238.085\" y=\"375.2757\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"83.5557\" x=\"242.5352\" y=\"375.2757\">DynamoDB,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"326.0909\" y=\"375.2757\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"29.8525\" x=\"330.5411\" y=\"375.2757\">SSM</text></g><!--entity fn_sns--><g class=\"entity\" data-qualified-name=\"aws.lambda.fn_sns\" data-source-line=\"17\" id=\"ent0007\"><rect fill=\"#FFFFFF\" height=\"68.8906\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"167.3828\" x=\"405.46\" y=\"319.6869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"119.3965\" x=\"429.4532\" y=\"342.682\">send_notification</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"19.4141\" x=\"415.46\" y=\"358.9789\">Go</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"434.8741\" y=\"358.9789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"439.3243\" y=\"358.9789\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"451.0547\" y=\"358.9789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"107.3379\" x=\"455.5049\" y=\"358.9789\">aws-lambda-go</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"38.165\" x=\"453.7207\" y=\"375.2757\">Uses:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"491.8858\" y=\"375.2757\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"28.2461\" x=\"496.336\" y=\"375.2757\">SNS</text></g><!--entity fn_tg--><g class=\"entity\" data-qualified-name=\"aws.lambda.fn_tg\" data-source-line=\"18\" id=\"ent0008\"><rect fill=\"#FFFFFF\" height=\"85.1875\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"209.8613\" x=\"608.22\" y=\"311.5469\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"189.8613\" x=\"618.22\" y=\"334.542\">send_telegram_notification</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"19.4141\" x=\"639.4593\" y=\"350.8389\">Go</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"658.8733\" y=\"350.8389\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"663.3235\" y=\"350.8389\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"675.054\" y=\"350.8389\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"107.3379\" x=\"679.5042\" y=\"350.8389\">aws-lambda-go</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"38.165\" x=\"619.283\" y=\"367.1357\">Uses:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"657.448\" y=\"367.1357\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"29.8525\" x=\"661.8982\" y=\"367.1357\">SSM</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"691.7508\" y=\"367.1357\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"696.201\" y=\"367.1357\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"707.9314\" y=\"367.1357\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"66.5273\" x=\"712.3816\" y=\"367.1357\">Telegram</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"778.909\" y=\"367.1357\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"23.6592\" x=\"783.3592\" y=\"367.1357\">Bot</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"22.1484\" x=\"702.0764\" y=\"383.4326\">API</text></g><!--entity ps--><g class=\"entity\" data-qualified-name=\"aws.ssm.ps\" data-source-line=\"26\" id=\"ent0012\"><rect fill=\"#FFFFFF\" height=\"68.8906\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"206.6553\" x=\"176.82\" y=\"499.7269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"73.4658\" x=\"222.5344\" y=\"522.722\">Parameter</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"296.0002\" y=\"522.722\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.3105\" x=\"300.4504\" y=\"522.722\">Store</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"66.5273\" x=\"186.82\" y=\"539.0189\">Telegram</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"253.3473\" y=\"539.0189\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"39.6484\" x=\"257.7975\" y=\"539.0189\">token</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"297.446\" y=\"539.0189\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"301.8962\" y=\"539.0189\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"313.6266\" y=\"539.0189\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"55.3984\" x=\"318.0768\" y=\"539.0189\">channel</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"42.8408\" x=\"258.7272\" y=\"555.3157\">config</text></g><!--entity logs--><g class=\"entity\" data-qualified-name=\"aws.cwl.logs\" data-source-line=\"30\" id=\"ent0014\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"114.999\" x=\"438.65\" y=\"507.8769\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"25.252\" x=\"456.1866\" y=\"530.872\">Log</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"481.4386\" y=\"530.872\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"50.2236\" x=\"485.8888\" y=\"530.872\">Groups</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"28.7178\" x=\"448.65\" y=\"547.1689\">(per</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"477.3678\" y=\"547.1689\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"61.8311\" x=\"481.818\" y=\"547.1689\">Lambda)</text></g><!--entity tg_api--><g class=\"entity\" data-qualified-name=\"telegram.tg_api\" data-source-line=\"35\" id=\"ent0016\"><rect fill=\"#FFFFFF\" height=\"36.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"141.2354\" x=\"909.53\" y=\"516.0269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"66.5273\" x=\"919.53\" y=\"539.022\">Telegram</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"986.0573\" y=\"539.022\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"23.6592\" x=\"990.5075\" y=\"539.022\">Bot</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1014.1667\" y=\"539.022\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"22.1484\" x=\"1018.6169\" y=\"539.022\">API</text></g><!--entity tg_channels--><g class=\"entity\" data-qualified-name=\"telegram.tg_channels\" data-source-line=\"36\" id=\"ent0017\"><rect fill=\"#FFFFFF\" height=\"36.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"200.4756\" x=\"898.91\" y=\"669.6169\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"66.5273\" x=\"908.91\" y=\"692.612\">Telegram</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"975.4373\" y=\"692.612\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"109.498\" x=\"979.8875\" y=\"692.612\">Channels/Chats</text></g><!--link rule to fn_check--><g class=\"link\" data-entity-1=\"ent0004\" data-entity-2=\"ent0006\" data-link-type=\"dependency\" data-source-line=\"40\" id=\"lnk18\"><path d=\"M119.51,173.3169 C67.08,188.4969 6,215.6169 33.15,255.5469 C68.03,306.8169 128.5673,329.9276 183.7473,341.4776\" fill=\"none\" id=\"rule-to-fn_check\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"189.62,342.7069,181.6304,336.9478,184.7261,341.6825,179.9914,344.7782,189.62,342.7069\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"39.9199\" x=\"34.15\" y=\"245.6855\">Invoke</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"74.0699\" y=\"245.6855\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"63.1406\" x=\"77.8844\" y=\"245.6855\">(schedule)</text></g><!--link fn_check to ddb--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0009\" data-link-type=\"dependency\" data-source-line=\"41\" id=\"lnk19\"><path d=\"M278.43,319.1969 C278.68,291.9869 282.84,253.9569 301.15,226.5469 C308.77,215.1369 314.2205,208.8976 325.3905,200.5176\" fill=\"none\" id=\"fn_check-to-ddb\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"330.19,196.9169,320.5903,199.1182,326.1904,199.9174,325.3912,205.5176,330.19,196.9169\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"66.9551\" x=\"302.15\" y=\"245.6855\">Read/Write</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"369.1051\" y=\"245.6855\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"30.3984\" x=\"372.9195\" y=\"245.6855\">state</text></g><!--link fn_check to ps--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0012\" data-link-type=\"dependency\" data-source-line=\"42\" id=\"lnk20\"><path d=\"M280.15,389.0469 C280.15,420.7269 280.15,461.7569 280.15,493.3969\" fill=\"none\" id=\"fn_check-to-ps\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"280.15,499.3969,284.15,490.3969,280.15,494.3969,276.15,490.3969,280.15,499.3969\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"21.3867\" x=\"281.15\" y=\"440.8655\">Get</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"302.5367\" y=\"440.8655\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"36.7207\" x=\"306.3512\" y=\"440.8655\">config</text></g><!--link ddb to fn_sns--><g class=\"link\" data-entity-1=\"ent0009\" data-entity-2=\"ent0007\" data-link-type=\"dependency\" data-source-line=\"45\" id=\"lnk21\"><path d=\"M409.11,196.9169 C409.76,215.1769 412.23,237.0169 419.15,255.5469 C427.91,278.9869 440.0379,297.2372 454.4979,314.9672\" fill=\"none\" id=\"ddb-to-fn_sns\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"458.29,319.6169,455.7016,310.1142,455.1299,315.7421,449.502,315.1704,458.29,319.6169\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"43.6816\" x=\"453.2232\" y=\"238.6855\">Stream</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"496.9049\" y=\"238.6855\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"34.1777\" x=\"500.7193\" y=\"238.6855\">event</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"95.1621\" x=\"420.15\" y=\"252.6543\">(announcement</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"515.3121\" y=\"252.6543\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"48.8438\" x=\"519.1266\" y=\"252.6543\">change)</text></g><!--link fn_sns to sns--><g class=\"link\" data-entity-1=\"ent0007\" data-entity-2=\"ent0010\" data-link-type=\"dependency\" data-source-line=\"48\" id=\"lnk22\"><path d=\"M516.79,319.1969 C539.1,292.6969 571.99,255.6069 604.15,226.5469 C623.31,209.2369 641.8016,195.4089 660.2216,182.6189\" fill=\"none\" id=\"fn_sns-to-sns\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"665.15,179.1969,655.476,181.0444,661.043,182.0486,660.0387,187.6156,665.15,179.1969\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"42.9844\" x=\"605.15\" y=\"245.6855\">Publish</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"648.1344\" y=\"245.6855\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"67.4824\" x=\"651.9488\" y=\"245.6855\">notification</text></g><!--link sns to fn_tg--><g class=\"link\" data-entity-1=\"ent0010\" data-entity-2=\"ent0008\" data-link-type=\"dependency\" data-source-line=\"49\" id=\"lnk23\"><path d=\"M708.76,179.1569 C716,192.2069 724.4,209.7469 728.15,226.5469 C734.39,254.4069 731.7965,280.4621 726.4365,305.2821\" fill=\"none\" id=\"sns-to-fn_tg\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"725.17,311.1469,730.9797,303.194,726.2254,306.2595,723.1599,301.5053,725.17,311.1469\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"74.5605\" x=\"732.15\" y=\"238.6855\">Subscription</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"49.0781\" x=\"744.8912\" y=\"252.6543\">(invoke)</text></g><!--link fn_tg to ps--><g class=\"link\" data-entity-1=\"ent0008\" data-entity-2=\"ent0012\" data-link-type=\"dependency\" data-source-line=\"52\" id=\"lnk24\"><path d=\"M643.29,397.1269 C626.35,405.9669 607.97,414.4969 590.15,420.7269 C589.6,420.9269 423.71,451.5269 423.15,451.7269 C390.42,463.7069 361.4954,479.5728 334.8554,496.2528\" fill=\"none\" id=\"fn_tg-to-ps\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"329.77,499.4369,339.5209,498.051,334.0078,496.7834,335.2754,491.2704,329.77,499.4369\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"21.3867\" x=\"546.15\" y=\"440.8655\">Get</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"567.5367\" y=\"440.8655\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"19.6641\" x=\"571.3512\" y=\"440.8655\">bot</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"591.0152\" y=\"440.8655\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"33.9844\" x=\"594.8297\" y=\"440.8655\">token</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"628.8141\" y=\"440.8655\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"10.0547\" x=\"632.6285\" y=\"440.8655\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"642.6832\" y=\"440.8655\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"26.2617\" x=\"646.4977\" y=\"440.8655\">chat</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"672.7594\" y=\"440.8655\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"17.2031\" x=\"676.5738\" y=\"440.8655\">ids</text></g><!--link fn_tg to tg_api--><g class=\"link\" data-entity-1=\"ent0008\" data-entity-2=\"ent0016\" data-link-type=\"dependency\" data-source-line=\"53\" id=\"lnk25\"><path d=\"M776.09,397.1069 C832.67,434.8369 907.9983,485.0578 948.9483,512.3678\" fill=\"none\" id=\"fn_tg-to-tg_api\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"953.94,515.6969,948.6718,507.3755,949.7802,512.9227,944.233,514.0311,953.94,515.6969\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.5371\" x=\"839.15\" y=\"440.8655\">HTTPS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"877.6871\" y=\"440.8655\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"81.4512\" x=\"881.5016\" y=\"440.8655\">sendMessage</text></g><!--link tg_api to tg_channels--><g class=\"link\" data-entity-1=\"ent0016\" data-entity-2=\"ent0017\" data-link-type=\"dependency\" data-source-line=\"55\" id=\"lnk26\"><path d=\"M982.33,552.5669 C986,581.8069 992.6033,634.5235 996.2533,663.6235\" fill=\"none\" id=\"tg_api-to-tg_channels\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"997,669.5769,999.8488,660.149,996.3777,664.6157,991.911,661.1447,997,669.5769\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"42.709\" x=\"993.15\" y=\"636.7555\">Deliver</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1035.859\" y=\"636.7555\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"60.1816\" x=\"1039.6734\" y=\"636.7555\">messages</text></g><!--link fn_check to logs--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0014\" data-link-type=\"dependency\" data-source-line=\"58\" id=\"lnk27\"><path d=\"M322.15,388.9369 C344.99,407.4069 373.71,430.7269 399.15,451.7269 C421.71,470.3469 442.4248,487.737 461.5248,503.857\" fill=\"none\" id=\"fn_check-to-logs\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"466.11,507.7269,461.812,498.8653,462.289,504.502,456.6523,504.9789,466.11,507.7269\" style=\"stroke:#000000;stroke-width:2;\"/></g><!--link fn_sns to logs--><g class=\"link\" data-entity-1=\"ent0007\" data-entity-2=\"ent0014\" data-link-type=\"dependency\" data-source-line=\"59\" id=\"lnk28\"><path d=\"M490.49,389.0469 C491.84,423.5469 493.6856,470.2715 494.9056,501.4715\" fill=\"none\" id=\"fn_sns-to-logs\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"495.14,507.4669,498.7853,498.3175,494.9446,502.4707,490.7914,498.63,495.14,507.4669\" style=\"stroke:#000000;stroke-width:2;\"/></g><!--link fn_tg to logs--><g class=\"link\" data-entity-1=\"ent0008\" data-entity-2=\"ent0014\" data-link-type=\"dependency\" data-source-line=\"60\" id=\"lnk29\"><path d=\"M717.49,397.1269 C717.06,413.0569 713.85,430.5169 704.15,443.7269 C668.81,491.9069 607.9776,513.1535 559.6176,523.4835\" fill=\"none\" id=\"fn_tg-to-logs\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"553.75,524.7369,563.387,526.7686,558.6397,523.6924,561.7159,518.9451,553.75,524.7369\" style=\"stroke:#000000;stroke-width:2;\"/></g></g></svg>",
  "architecture_description": "## High-level architecture (deployment view)\n\nThis codebase deploys a fully serverless, event-driven notification pipeline on AWS, implemented in **Go** using **aws-lambda-go** and **AWS SDK for Go v2**, and provisioned via **Terraform**.\n\n### Core AWS components\n- **Amazon EventBridge (scheduled rule / cron)**\n  - Triggers the periodic execution of the system.\n  - Invokes the `check_announcement` Lambda on a schedule.\n\n- **AWS Lambda functions (Go)**\n  1. **`check_announcement`**\n     - Periodically checks for new/updated announcements.\n     - **Reads/Writes** announcement state in **DynamoDB**.\n     - Reads configuration from **SSM Parameter Store**.\n  2. **`send_notification`**\n     - Triggered by **DynamoDB Streams** when the announcement state changes.\n     - Publishes a normalized notification event to an **SNS Topic** for fan-out.\n  3. **`send_telegram_notification`**\n     - Subscribed to the **SNS Topic**.\n     - Fetches **Telegram bot token** and per-announcement/channel routing config from **SSM Parameter Store**.\n     - Calls the **Telegram Bot API** over HTTPS to deliver messages.\n\n- **Amazon DynamoDB (state table + Streams)**\n  - Stores the announcement state (e.g., last seen/processed announcements).\n  - **DynamoDB Streams** emits change events that trigger `send_notification`.\n\n- **Amazon SNS (notifications topic)**\n  - Provides fan-out and decoupling between “state change detected” and “delivery channel implementation”.\n  - Invokes `send_telegram_notification` via subscription.\n\n- **AWS Systems Manager Parameter Store (SSM)**\n  - Stores secrets/configuration such as:\n    - Telegram bot auth token\n    - Chat/channel IDs and per-announcement channel configuration\n\n- **Amazon CloudWatch Logs**\n  - Each Lambda writes logs to its own log group for operational visibility.\n\n### External dependency\n- **Telegram (external)**\n  - `send_telegram_notification` integrates with the **Telegram Bot API** to post messages into **Telegram channels/chats**.\n\n### End-to-end flow\n1. EventBridge scheduled rule invokes `check_announcement`.\n2. `check_announcement` reads/writes state in DynamoDB and reads config from SSM.\n3. DynamoDB Streams triggers `send_notification` on state changes.\n4. `send_notification` publishes to SNS.\n5. SNS invokes `send_telegram_notification`.\n6. `send_telegram_notification` reads secrets/config from SSM and sends messages to Telegram via HTTPS.\n7. All Lambdas emit logs to CloudWatch Logs.\n\n### Provisioning / IaC\n- **Terraform** (AWS provider) provisions:\n  - EventBridge rule + target\n  - DynamoDB table + Streams + Lambda event source mapping\n  - SNS topic + subscription\n  - SSM parameters\n  - IAM roles/policies and CloudWatch log groups for Lambdas"
}