{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\ntitle Rust AWS Lambda Delta Lake Maintenance (High-level Deployment)\n\nskinparam shadowing false\nskinparam componentStyle rectangle\nskinparam wrapWidth 220\nskinparam maxMessageSize 120\n\ncloud \"AWS Account\" as aws {\n  node \"EventBridge\" as eventbridge {\n    artifact \"Scheduled Rule\\n(Cron)\" as schedule\n  }\n\n  node \"AWS Lambda\" as lambda {\n    component \"Delta Lake Job\\nRust + lambda_runtime 0.7\\nTokio async\" as fn\n  }\n\n  node \"Amazon S3\" as s3 {\n    database \"Delta Lake Table\\n(s3://DATALAKE_LOCATION)\" as deltalake\n  }\n\n  node \"Amazon DynamoDB\" as dynamodb {\n    database \"Lock Table\\n(Delta-rs S3 locking provider)\" as locktable\n  }\n\n  node \"CloudWatch\" as cloudwatch {\n    artifact \"CloudWatch Logs\\n(Lambda log streams)\" as logs\n  }\n\n  node \"IAM\" as iam {\n    artifact \"Lambda Execution Role\\nPolicies: S3 + DynamoDB + Logs\" as role\n  }\n}\n\nschedule --> fn : triggers (CloudWatchEvent)\nfn --> deltalake : read/write\\nDelta log + Parquet\\n(delta-rs; s3)\nfn --> locktable : acquire/release locks\\n(delta-rs; dynamodb)\nfn --> logs : write logs\nrole ..> fn : assumed by\nrole ..> deltalake : grants access\nrole ..> locktable : grants access\nrole ..> logs : grants access\n\n@enduml",
  "svg_diagram": "<?plantuml 1.2026.2beta1?><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"701px\" preserveAspectRatio=\"none\" style=\"width:892px;height:701px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 892 701\" width=\"892px\" zoomAndPan=\"magnify\"><title>Rust AWS Lambda Delta Lake Maintenance (High-level Deployment)</title><defs/><g><g class=\"title\" data-source-line=\"4\"><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"537.6807\" x=\"170.5768\" y=\"22.9951\">Rust AWS Lambda Delta Lake Maintenance (High-level Deployment)</text></g><!--cluster aws--><g class=\"cluster\" data-qualified-name=\"aws\" data-source-line=\"11\" id=\"ent0002\"><path d=\"M53.1581,83.2017 C69.6306,57.5087 96.1554,59.4227 112.4203,83.4491 C128.5817,55.6339 153.6575,56.693 169.6827,83.5917 C185.5829,57.9131 206.51,56.221 225.3746,80.2719 C239.0178,58.6105 257.4516,58.1433 272.3268,78.9084 C285.732,50.8333 314.5278,47.7231 332.5346,73.7914 C347.9865,47.08 376.5651,49.1131 392.2031,73.5745 C408.6759,50.0552 424.3133,47.5802 442.0989,72.2141 C459.0611,43.2969 488.0359,46.3931 501.3355,75.9259 C519.3607,46.1618 549.3943,54.4754 562.916,80.8646 C574.9353,55.9905 597.1785,62.1135 608.9843,81.0889 C626.5412,56.5808 648.4877,52.4599 665.6043,81.5539 C684.1064,51.3843 703.2524,50.7326 723.3736,79.9797 C742.6611,52.4177 764.7657,53.7948 779.2418,84.5862 C798.2104,55.3695 821.0343,52.9602 840.444,84.1393 C844.7196,85.8001 845.7523,89.287 841.8427,92.3434 C866.362,108.0802 869.6132,129.7588 845.7057,148.8087 C873.8415,163.4808 872.375,187.2219 848.7922,204.7476 C873.4672,217.6975 875.431,232.8557 854.9173,251.7005 C881.5188,265.8998 885.4511,292.4246 859.3792,310.6134 C882.5215,330.7983 884.3353,349.4196 856.1239,366.6197 C878.8649,380.2827 884.3803,404.3996 858.6144,420.3126 C885.8344,445.4064 877.9539,464.78 848.3235,480.0862 C877.1747,495.486 876.2494,516.1062 851.18,534.3448 C873.0754,553.1891 876.0958,569.908 849.8108,587.5114 C875.6963,613.3662 868.5162,639.0179 833.444,648.5193 C838.5498,646.1013 842.8318,649.334 842.1274,654.8658 C823.1451,688.6829 799.8816,686.8033 780.2306,655.5014 C768.3193,687.4238 741.7493,682.8093 724.5063,661.0344 C704.9792,689.0449 685.4304,690.1439 665.43,661.5283 C650.6414,687.1904 627.3763,685.7444 610.695,663.6998 C592.9382,687.2299 573.7955,683.2812 562.4546,657.432 C546.4968,694.6774 525.8117,693.577 499.7487,667.4273 C479.5478,693.4556 454.5232,690.7969 441.9992,659.6705 C426.7962,684.919 398.3117,685.5504 384.4023,658.2525 C371.8633,681.5068 352.3722,681.3744 337.2831,661.007 C321.1416,689.2849 296.1508,691.2481 279.9313,661.0835 C263.2228,686.0712 236.8771,692.5032 220.6268,660.6058 C202.0047,688.7227 174.7558,686.6096 163.752,653.526 C148.6703,680.0772 130.3549,682.1949 113.2427,655.4502 C87.2645,684.5756 53.457,680.1458 40.444,641.5193 C43.248,643.5092 43.6118,646.4103 40.4641,648.4175 C17.0331,633.6575 13.5329,607.4468 39.2778,591.659 C8.7653,574.6432 8.7993,554.6502 37.0871,535.3469 C7.1566,515.6099 7.3313,494.1091 39.6223,477.0793 C15.6563,459.1997 9.7407,436.8327 41.1546,420.4516 C16.79,407.7407 11.2717,386.6862 37.3952,370.1984 C9.7184,352.9768 18.2115,328.6329 42.5528,316.3981 C15.0158,298.9609 11.54,277.3747 39.4957,257.0777 C12.8059,239.5732 18.8435,217.3929 43.9217,204.2234 C20.6302,187.2569 15.2237,169.7186 39.9984,149.3175 C6,126.0729 16.1237,93.6458 47.444,77.1393 C51.8674,76.1426 54.6739,78.6003 53.1581,83.2017\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"104.9111\" x=\"387.9884\" y=\"95.1344\">AWS Account</text></g><!--cluster eventbridge--><g class=\"cluster\" data-qualified-name=\"aws.eventbridge\" data-source-line=\"12\" id=\"ent0003\"><polygon fill=\"#FFFFFF\" points=\"628.444,130.2893,638.444,120.2893,800.444,120.2893,800.444,221.8893,790.444,231.8893,628.444,231.8893,628.444,130.2893\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"790.444\" x2=\"800.444\" y1=\"130.2893\" y2=\"120.2893\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"628.444\" x2=\"790.444\" y1=\"130.2893\" y2=\"130.2893\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"790.444\" x2=\"790.444\" y1=\"130.2893\" y2=\"231.8893\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"96.7559\" x=\"662.066\" y=\"146.2844\">EventBridge</text></g><!--cluster lambda--><g class=\"cluster\" data-qualified-name=\"aws.lambda\" data-source-line=\"16\" id=\"ent0005\"><polygon fill=\"#FFFFFF\" points=\"393.444,311.0393,403.444,301.0393,639.444,301.0393,639.444,415.9293,629.444,425.9293,393.444,425.9293,393.444,311.0393\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"629.444\" x2=\"639.444\" y1=\"311.0393\" y2=\"301.0393\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"393.444\" x2=\"629.444\" y1=\"311.0393\" y2=\"311.0393\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"629.444\" x2=\"629.444\" y1=\"311.0393\" y2=\"425.9293\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"103.6807\" x=\"460.6036\" y=\"327.0344\">AWS Lambda</text></g><!--cluster s3--><g class=\"cluster\" data-qualified-name=\"aws.s3\" data-source-line=\"20\" id=\"ent0007\"><polygon fill=\"#FFFFFF\" points=\"578.444,524.9293,588.444,514.9293,824.444,514.9293,824.444,622.5193,814.444,632.5193,578.444,632.5193,578.444,524.9293\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"814.444\" x2=\"824.444\" y1=\"524.9293\" y2=\"514.9293\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"578.444\" x2=\"814.444\" y1=\"524.9293\" y2=\"524.9293\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"814.444\" x2=\"814.444\" y1=\"524.9293\" y2=\"632.5193\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"87.3018\" x=\"653.7931\" y=\"540.9244\">Amazon S3</text></g><!--cluster dynamodb--><g class=\"cluster\" data-qualified-name=\"aws.dynamodb\" data-source-line=\"24\" id=\"ent0009\"><polygon fill=\"#FFFFFF\" points=\"296.444,524.9293,306.444,514.9293,554.444,514.9293,554.444,622.5193,544.444,632.5193,296.444,632.5193,296.444,524.9293\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"544.444\" x2=\"554.444\" y1=\"524.9293\" y2=\"514.9293\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"296.444\" x2=\"544.444\" y1=\"524.9293\" y2=\"524.9293\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"544.444\" x2=\"544.444\" y1=\"524.9293\" y2=\"632.5193\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"154.1367\" x=\"344.3756\" y=\"540.9244\">Amazon DynamoDB</text></g><!--cluster cloudwatch--><g class=\"cluster\" data-qualified-name=\"aws.cloudwatch\" data-source-line=\"28\" id=\"ent0011\"><polygon fill=\"#FFFFFF\" points=\"56.444,527.9293,66.444,517.9293,272.444,517.9293,272.444,619.5193,262.444,629.5193,56.444,629.5193,56.444,527.9293\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"262.444\" x2=\"272.444\" y1=\"527.9293\" y2=\"517.9293\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"56.444\" x2=\"262.444\" y1=\"527.9293\" y2=\"527.9293\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"262.444\" x2=\"262.444\" y1=\"527.9293\" y2=\"629.5193\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"94.5273\" x=\"113.1803\" y=\"543.9244\">CloudWatch</text></g><!--cluster iam--><g class=\"cluster\" data-qualified-name=\"aws.iam\" data-source-line=\"32\" id=\"ent0013\"><polygon fill=\"#FFFFFF\" points=\"228.444,122.1393,238.444,112.1393,486.444,112.1393,486.444,230.0393,476.444,240.0393,228.444,240.0393,228.444,122.1393\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"476.444\" x2=\"486.444\" y1=\"122.1393\" y2=\"112.1393\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"228.444\" x2=\"476.444\" y1=\"122.1393\" y2=\"122.1393\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"476.444\" x2=\"476.444\" y1=\"122.1393\" y2=\"240.0393\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"29.9756\" x=\"338.4562\" y=\"138.1344\">IAM</text></g><!--entity schedule--><g class=\"entity\" data-qualified-name=\"aws.eventbridge.schedule\" data-source-line=\"13\" id=\"ent0004\"><rect fill=\"#FFFFFF\" height=\"55.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"138.7734\" x=\"645.054\" y=\"160.2893\"/><polygon fill=\"#FFFFFF\" points=\"766.8274,165.2893,766.8274,179.2893,778.8274,179.2893,778.8274,171.2893,772.8274,165.2893,766.8274,165.2893\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"772.8274\" x2=\"772.8274\" y1=\"165.2893\" y2=\"171.2893\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"778.8274\" x2=\"772.8274\" y1=\"171.2893\" y2=\"171.2893\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"73.2197\" x=\"655.054\" y=\"186.2844\">Scheduled</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"728.2737\" y=\"186.2844\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"31.1035\" x=\"732.7239\" y=\"186.2844\">Rule</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"43.8936\" x=\"687.4939\" y=\"202.5812\">(Cron)</text></g><!--entity fn--><g class=\"entity\" data-qualified-name=\"aws.lambda.fn\" data-source-line=\"17\" id=\"ent0006\"><rect fill=\"#FFFFFF\" height=\"68.8906\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"213.3203\" x=\"409.784\" y=\"341.0393\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.3516\" x=\"465.9778\" y=\"364.0344\">Delta</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"503.3294\" y=\"364.0344\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"33.0996\" x=\"507.7796\" y=\"364.0344\">Lake</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"540.8792\" y=\"364.0344\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"21.5811\" x=\"545.3294\" y=\"364.0344\">Job</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"31.3838\" x=\"419.784\" y=\"380.3312\">Rust</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"451.1678\" y=\"380.3312\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"455.6179\" y=\"380.3312\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"467.3484\" y=\"380.3312\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"114.5908\" x=\"471.7986\" y=\"380.3312\">lambda_runtime</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"586.3894\" y=\"380.3312\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"22.2646\" x=\"590.8396\" y=\"380.3312\">0.7</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.6797\" x=\"475.0149\" y=\"396.6281\">Tokio</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"512.6946\" y=\"396.6281\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"40.7285\" x=\"517.1448\" y=\"396.6281\">async</text></g><!--entity deltalake--><g class=\"entity\" data-qualified-name=\"aws.s3.deltalake\" data-source-line=\"21\" id=\"ent0008\"><path d=\"M594.194,564.9293 C594.194,554.9293 701.4488,554.9293 701.4488,554.9293 C701.4488,554.9293 808.7037,554.9293 808.7037,564.9293 L808.7037,606.523 C808.7037,616.523 701.4488,616.523 701.4488,616.523 C701.4488,616.523 594.194,616.523 594.194,606.523 L594.194,564.9293\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M594.194,564.9293 C594.194,574.9293 701.4488,574.9293 701.4488,574.9293 C701.4488,574.9293 808.7037,574.9293 808.7037,564.9293\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"37.3516\" x=\"642.5128\" y=\"591.9244\">Delta</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"679.8644\" y=\"591.9244\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"33.0996\" x=\"684.3146\" y=\"591.9244\">Lake</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"717.4142\" y=\"591.9244\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"38.5205\" x=\"721.8644\" y=\"591.9244\">Table</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"194.5098\" x=\"604.194\" y=\"608.2212\">(s3://DATALAKE_LOCATION)</text></g><!--entity locktable--><g class=\"entity\" data-qualified-name=\"aws.dynamodb.locktable\" data-source-line=\"25\" id=\"ent0010\"><path d=\"M312.414,564.9293 C312.414,554.9293 425.4486,554.9293 425.4486,554.9293 C425.4486,554.9293 538.4833,554.9293 538.4833,564.9293 L538.4833,606.523 C538.4833,616.523 425.4486,616.523 425.4486,616.523 C425.4486,616.523 312.414,616.523 312.414,606.523 L312.414,564.9293\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M312.414,564.9293 C312.414,574.9293 425.4486,574.9293 425.4486,574.9293 C425.4486,574.9293 538.4833,574.9293 538.4833,564.9293\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"32.1699\" x=\"387.8783\" y=\"591.9244\">Lock</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"420.0482\" y=\"591.9244\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"38.5205\" x=\"424.4984\" y=\"591.9244\">Table</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"60.915\" x=\"322.414\" y=\"608.2212\">(Delta-rs</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"383.329\" y=\"608.2212\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"17.7939\" x=\"387.7792\" y=\"608.2212\">S3</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"405.5731\" y=\"608.2212\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"49.9092\" x=\"410.0233\" y=\"608.2212\">locking</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"459.9325\" y=\"608.2212\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"64.1006\" x=\"464.3827\" y=\"608.2212\">provider)</text></g><!--entity logs--><g class=\"entity\" data-qualified-name=\"aws.cloudwatch.logs\" data-source-line=\"29\" id=\"ent0012\"><rect fill=\"#FFFFFF\" height=\"55.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"184.1982\" x=\"72.344\" y=\"557.9293\"/><polygon fill=\"#FFFFFF\" points=\"239.5422,562.9293,239.5422,576.9293,251.5422,576.9293,251.5422,568.9293,245.5422,562.9293,239.5422,562.9293\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"245.5422\" x2=\"245.5422\" y1=\"562.9293\" y2=\"568.9293\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"251.5422\" x2=\"245.5422\" y1=\"568.9293\" y2=\"568.9293\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"84.4717\" x=\"98.7092\" y=\"583.9244\">CloudWatch</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"183.1809\" y=\"583.9244\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"32.5459\" x=\"187.6311\" y=\"583.9244\">Logs</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"61.8311\" x=\"82.344\" y=\"600.2212\">(Lambda</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"144.175\" y=\"600.2212\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"21.3418\" x=\"148.6252\" y=\"600.2212\">log</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"169.967\" y=\"600.2212\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"62.125\" x=\"174.4172\" y=\"600.2212\">streams)</text></g><!--entity role--><g class=\"entity\" data-qualified-name=\"aws.iam.role\" data-source-line=\"33\" id=\"ent0014\"><rect fill=\"#FFFFFF\" height=\"71.8906\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"225.1592\" x=\"244.864\" y=\"152.1393\"/><polygon fill=\"#FFFFFF\" points=\"453.0231,157.1393,453.0231,171.1393,465.0231,171.1393,465.0231,163.1393,459.0231,157.1393,453.0231,157.1393\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"459.0231\" x2=\"459.0231\" y1=\"157.1393\" y2=\"163.1393\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"465.0231\" x2=\"459.0231\" y1=\"163.1393\" y2=\"163.1393\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.3691\" x=\"269.8449\" y=\"178.1344\">Lambda</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"326.2141\" y=\"178.1344\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"69.1318\" x=\"330.6643\" y=\"178.1344\">Execution</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"399.7961\" y=\"178.1344\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"30.7959\" x=\"404.2463\" y=\"178.1344\">Role</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.998\" x=\"254.864\" y=\"194.4312\">Policies:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"311.862\" y=\"194.4312\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"17.7939\" x=\"316.3122\" y=\"194.4312\">S3</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"334.1061\" y=\"194.4312\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"338.5563\" y=\"194.4312\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"350.2868\" y=\"194.4312\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"79.1055\" x=\"354.737\" y=\"194.4312\">DynamoDB</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"433.8425\" y=\"194.4312\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"11.7305\" x=\"438.2927\" y=\"194.4312\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"32.5459\" x=\"336.1706\" y=\"210.7281\">Logs</text></g><!--link schedule to fn--><g class=\"link\" data-entity-1=\"ent0004\" data-entity-2=\"ent0006\" data-link-type=\"dependency\" data-source-line=\"37\" id=\"lnk15\"><path d=\"M685.654,216.0493 C650.474,248.9893 595.3034,300.638 557.0434,336.468\" fill=\"none\" id=\"schedule-to-fn\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"552.664,340.5693,561.9673,337.337,556.3135,337.1515,556.4989,331.4977,552.664,340.5693\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"46.7754\" x=\"674.1285\" y=\"268.1779\">triggers</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"116.1445\" x=\"639.444\" y=\"282.1467\">(CloudWatchEvent)</text></g><!--link fn to deltalake--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0008\" data-link-type=\"dependency\" data-source-line=\"38\" id=\"lnk16\"><path d=\"M523.554,410.3893 C530.454,436.7993 543.084,473.1793 564.444,498.9293 C583.434,521.8193 604.9566,537.524 629.7866,551.514\" fill=\"none\" id=\"fn-to-deltalake\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"635.014,554.4593,629.1364,546.5564,630.6578,552.0049,625.2094,553.5263,635.014,554.4593\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"61.5\" x=\"594.0143\" y=\"461.0679\">read/write</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"32.0156\" x=\"565.444\" y=\"475.0367\">Delta</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"597.4596\" y=\"475.0367\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"18.293\" x=\"601.274\" y=\"475.0367\">log</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"619.567\" y=\"475.0367\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"10.0547\" x=\"623.3815\" y=\"475.0367\">+</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"633.4361\" y=\"475.0367\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"46.834\" x=\"637.2506\" y=\"475.0367\">Parquet</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"54.6328\" x=\"586.2565\" y=\"489.0054\">(delta-rs;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"640.8893\" y=\"489.0054\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"18.5684\" x=\"644.7037\" y=\"489.0054\">s3)</text></g><!--link fn to locktable--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0010\" data-link-type=\"dependency\" data-source-line=\"39\" id=\"lnk17\"><path d=\"M457.084,410.3493 C446.434,419.2093 436.744,429.7593 430.444,441.9293 C412.144,477.2793 413.9315,518.506 418.4815,548.756\" fill=\"none\" id=\"fn-to-locktable\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"419.374,554.6893,421.9908,545.1944,418.6303,549.7449,414.0798,546.3843,419.374,554.6893\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"92.8887\" x=\"431.444\" y=\"454.0679\">acquire/release</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"30.4746\" x=\"462.651\" y=\"468.0367\">locks</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"54.6328\" x=\"450.5719\" y=\"482.0054\">(delta-rs;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"68.625\" x=\"443.5758\" y=\"495.9742\">dynamodb)</text></g><!--link fn to logs--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0012\" data-link-type=\"dependency\" data-source-line=\"40\" id=\"lnk18\"><path d=\"M443.954,410.2793 C424.264,418.7093 402.764,427.2393 382.444,433.9293 C367.694,438.7793 362.454,435.2393 348.444,441.9293 C286.234,471.6393 229.6041,520.956 195.8141,553.366\" fill=\"none\" id=\"fn-to-logs\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"191.484,557.5193,200.748,554.1761,195.0924,554.0582,195.2103,548.4026,191.484,557.5193\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"30.1699\" x=\"349.444\" y=\"475.0679\">write</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"379.6139\" y=\"475.0679\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"24.5449\" x=\"383.4283\" y=\"475.0679\">logs</text></g><!--link role to fn--><g class=\"link\" data-entity-1=\"ent0014\" data-entity-2=\"ent0006\" data-link-type=\"dependency\" data-source-line=\"41\" id=\"lnk19\"><path d=\"M387.724,224.3993 C416.374,257.8093 455.1886,303.0542 483.4386,336.0042\" fill=\"none\" id=\"role-to-fn\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"487.344,340.5593,484.5227,331.1231,484.0895,336.7634,478.4493,336.3302,487.344,340.5593\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"54.1523\" x=\"437.444\" y=\"275.1779\">assumed</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"491.5963\" y=\"275.1779\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"14.7188\" x=\"495.4108\" y=\"275.1779\">by</text></g><!--link role to deltalake--><g class=\"link\" data-entity-1=\"ent0014\" data-entity-2=\"ent0008\" data-link-type=\"dependency\" data-source-line=\"42\" id=\"lnk20\"><path d=\"M470.254,206.6293 C527.754,220.9593 594.774,246.7693 639.444,293.0393 C709.384,365.4793 709.2728,490.2353 704.9728,548.8653\" fill=\"none\" id=\"role-to-deltalake\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"704.534,554.8493,709.1815,546.1659,704.8997,549.8627,701.203,545.5808,704.534,554.8493\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.4668\" x=\"700.444\" y=\"380.1179\">grants</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"738.9108\" y=\"380.1179\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"40.4355\" x=\"742.7252\" y=\"380.1179\">access</text></g><!--link role to locktable--><g class=\"link\" data-entity-1=\"ent0014\" data-entity-2=\"ent0010\" data-link-type=\"dependency\" data-source-line=\"43\" id=\"lnk21\"><path d=\"M336.034,224.3093 C302.614,284.2493 246.704,408.3493 295.444,498.9293 C308.264,522.7393 325.7248,537.993 348.5648,551.453\" fill=\"none\" id=\"role-to-locktable\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"353.734,554.4993,348.0111,546.4837,349.4263,551.9607,343.9494,553.376,353.734,554.4993\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.4668\" x=\"303.444\" y=\"380.1179\">grants</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"341.9108\" y=\"380.1179\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"40.4355\" x=\"345.7252\" y=\"380.1179\">access</text></g><!--link role to logs--><g class=\"link\" data-entity-1=\"ent0014\" data-entity-2=\"ent0012\" data-link-type=\"dependency\" data-source-line=\"44\" id=\"lnk22\"><path d=\"M262.794,224.3993 C232.364,240.5793 201.794,263.0093 183.444,293.0393 C131.704,377.6793 146.7651,497.2683 157.3151,551.8383\" fill=\"none\" id=\"role-to-logs\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"158.454,557.7293,160.6729,548.1336,157.5049,552.8202,152.8183,549.6521,158.454,557.7293\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"38.4668\" x=\"184.444\" y=\"380.1179\">grants</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"222.9108\" y=\"380.1179\"> </text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"40.4355\" x=\"226.7252\" y=\"380.1179\">access</text></g></g></svg>",
  "architecture_description": "## High-level architecture\n\nThis codebase deploys a scheduled, serverless data-maintenance/processing job on AWS.\n\n### Components\n- **EventBridge Scheduled Rule (Cron)**\n  - Triggers the workload on a schedule.\n  - The Lambda handler input is a **CloudWatchEvent**.\n\n- **AWS Lambda Function: “Delta Lake Job”**\n  - **Language/Runtime:** Rust\n  - **Frameworks/Libraries:** `lambda_runtime` (0.7), `tokio` async runtime\n  - **Data stack:** `deltalake` (delta-rs) with Arrow/Parquet and S3 support\n  - Executes the Delta Lake read/write operations and coordinates locking.\n\n- **Amazon S3 (Delta Lake storage)**\n  - Stores the Delta Lake table at `s3://DATALAKE_LOCATION`.\n  - Contains Delta transaction log and Parquet data files.\n\n- **Amazon DynamoDB (Lock table)**\n  - Used as the **S3 locking provider** for delta-rs (as indicated by `AWS_S3_LOCKING_PROVIDER=dynamodb`).\n  - Prevents concurrent writers from corrupting the Delta log.\n\n- **CloudWatch Logs**\n  - Receives application logs emitted by the Lambda function (`log` + `pretty_env_logger`).\n\n- **IAM Execution Role/Policies**\n  - Lambda assumes an execution role granting:\n    - S3 read/write access to the Delta Lake location\n    - DynamoDB access to the lock table\n    - CloudWatch Logs permissions\n\n### Key relationships / flow\n1. **EventBridge** triggers the **Rust Lambda** on a schedule.\n2. The **Lambda** reads/writes the **Delta Lake table in S3** (Delta log + Parquet).\n3. The **Lambda** uses **DynamoDB** to acquire/release locks for safe Delta transactions.\n4. The **Lambda** writes operational logs to **CloudWatch Logs**.\n5. **IAM** permissions enable the Lambda’s access to S3, DynamoDB, and logging."
}