{
  "aws_architecture_description": "## Proposed high-level AWS architecture\n\n### 1) Runtime hosting (EKS)\n- **Amazon EKS cluster** runs the existing Kubernetes Deployment/Service model.\n- **VPC across 2–3 Availability Zones** with:\n  - **Public subnets** for internet-facing load balancers.\n  - **Private subnets** for EKS worker nodes (or EKS managed node groups) and internal cluster traffic.\n- **Ingress / Load balancing**\n  - Replace (or complement) the current `Service: LoadBalancer` pattern with an **Ingress** managed by the **AWS Load Balancer Controller** so you get an **Application Load Balancer (ALB)** for HTTP/HTTPS routing (better fit for a web app than L4-only). AWS explicitly recommends using the AWS Load Balancer Controller for EKS Service/Ingress reconciliation. ([docs.aws.amazon.com](https://docs.aws.amazon.com/eks/latest/best-practices/load-balancing.html?utm_source=openai))\n  - ALB terminates TLS using **ACM** certificates.\n- **Autoscaling**\n  - Use **Horizontal Pod Autoscaler (HPA)** for the React container (even if it’s mostly static content, it helps with burst traffic).\n  - Use **Cluster Autoscaler** (or EKS-managed scaling) to add/remove nodes as pods scale.\n\n### 2) Container images (move from DockerHub to ECR, or cache it)\n- Recommended: store the application image in **Amazon ECR (private)** and have EKS pull from ECR.\n- If you must keep DockerHub as the “source of truth”, configure **ECR Pull Through Cache** for DockerHub so EKS pulls from ECR while ECR syncs/caches from DockerHub. This reduces external dependency and centralizes IAM-based access. ([docs.aws.amazon.com](https://docs.aws.amazon.com/AmazonECR/latest/userguide/pull-through-cache.html?utm_source=openai))\n  - DockerHub credentials (if needed) are stored in **AWS Secrets Manager** for the pull-through cache rule. ([docs.aws.amazon.com](https://docs.aws.amazon.com/AmazonECR/latest/userguide/pull-through-cache.html?utm_source=openai))\n\n### 3) Frontend delivery optimization (optional but common)\nTwo lean options:\n- **Option A (simplest, keep as-is):** Users hit the **ALB** directly, which routes to the EKS Service.\n- **Option B (recommended for SPA performance):** Put **CloudFront** in front of the ALB to cache static assets globally and reduce load on the cluster. AWS EKS best practices explicitly call out CloudFront as an option to expose services and cache assets. ([docs.aws.amazon.com](https://docs.aws.amazon.com/eks/latest/best-practices/scale-workloads.html?utm_source=openai))\n\n### 4) DNS and TLS\n- **Route 53** hosts the public DNS record (e.g., `app.example.com`) pointing to CloudFront (Option B) or ALB (Option A).\n- **ACM** issues/renews TLS certificates.\n\n### 5) CI/CD on AWS (lean migration path)\nYou currently have Jenkins + GitHub Actions. On AWS, a clean approach is:\n- **AWS CodeBuild** builds/tests the React app, runs container build, and pushes to ECR.\n- **AWS CodePipeline** orchestrates: GitHub source → build/test/scan → deploy to EKS.\n- Deployment to EKS via:\n  - `kubectl apply` in CodeBuild, or\n  - Helm charts, or\n  - GitOps (Argo CD) if you want (optional; not required for “lean”).\n\n### 6) Security, observability, and operations\n- **IAM Roles for Service Accounts (IRSA)** for in-cluster components (AWS Load Balancer Controller, external-dns if used, etc.).\n- **CloudWatch Container Insights** (or basic CloudWatch logs) for pod/node logs and metrics.\n- **AWS WAF** (optional) attached to CloudFront or ALB for common web protections.\n- **Secrets Manager** for any sensitive values (e.g., DockerHub creds for pull-through cache; future API keys).\n\n### 7) External API dependency\n- The React SPA calls `https://official-joke-api.appspot.com/random_joke` from the client.\n- No AWS-side integration is required, but you may want:\n  - **CSP headers** (set at Nginx/ingress) and\n  - **WAF rules** (if you front with CloudFront/ALB) to reduce abuse.\n\n---\n\n## AWS resources to provision\n\n### Networking (foundation)\n- **VPC**\n- **Internet Gateway**\n- **NAT Gateway(s)** (one per AZ recommended) + **Elastic IP(s)**\n- **Public Subnets** (2–3 AZs)\n- **Private Subnets** (2–3 AZs)\n- **Route Tables** (public + private) and routes\n- **Security Groups** (ALB, EKS nodes, control-plane-to-node rules)\n- **Network ACLs** (optional; default is fine for lean)\n- **VPC Endpoints** (recommended for private access, at least):\n  - Gateway endpoint: **S3**\n  - Interface endpoints: **ECR (api + dkr)**, **CloudWatch Logs**, **STS** (as needed)\n\n### Kubernetes / Compute\n- **Amazon EKS Cluster**\n- **EKS Managed Node Group(s)** (or Fargate profiles if you prefer serverless pods)\n- **EKS Add-ons** (as applicable):\n  - **VPC CNI**\n  - **CoreDNS**\n  - **kube-proxy**\n- **AWS Load Balancer Controller** (installed via Helm/addon) ([docs.aws.amazon.com](https://docs.aws.amazon.com/eks/latest/best-practices/load-balancing.html?utm_source=openai))\n- **Kubernetes resources** (deployed manifests): Namespace, Deployment, Service, Ingress, HPA\n\n### Load balancing / Edge / DNS\n- **Application Load Balancer (ALB)** (provisioned/managed by AWS Load Balancer Controller via Ingress) ([docs.aws.amazon.com](https://docs.aws.amazon.com/eks/latest/best-practices/load-balancing.html?utm_source=openai))\n- **Target Group(s)**\n- **ACM Certificate**\n- **Route 53 Hosted Zone** + **Record Sets**\n- Optional (recommended for SPA caching):\n  - **CloudFront Distribution** ([docs.aws.amazon.com](https://docs.aws.amazon.com/eks/latest/best-practices/scale-workloads.html?utm_source=openai))\n  - **CloudFront Origin Access / policies** (as needed)\n- Optional security:\n  - **AWS WAF Web ACL** (attach to CloudFront or ALB)\n\n### Container registry\n- **Amazon ECR Private Repository** (for your app image)\n- Optional (if keeping DockerHub as upstream):\n  - **ECR Pull Through Cache Rule** (DockerHub upstream) ([docs.aws.amazon.com](https://docs.aws.amazon.com/AmazonECR/latest/userguide/pull-through-cache.html?utm_source=openai))\n  - **AWS Secrets Manager Secret** (DockerHub credentials for pull-through cache) ([docs.aws.amazon.com](https://docs.aws.amazon.com/AmazonECR/latest/userguide/pull-through-cache.html?utm_source=openai))\n\n### CI/CD (AWS-native option)\n- **AWS CodePipeline**\n- **AWS CodeBuild Project(s)**\n- **IAM Roles/Policies** for CodePipeline/CodeBuild (ECR push, EKS deploy, logs)\n- **S3 Artifact Bucket** (for pipeline artifacts)\n- Optional: **CodeStar Connections** (GitHub integration)\n\n### Observability / Security / Ops\n- **CloudWatch Log Groups** (EKS control plane, application logs)\n- **CloudWatch Alarms** (ALB 5xx, latency, node CPU/memory, etc.)\n- **AWS CloudTrail**\n- **AWS KMS Key(s)** (encrypt ECR, S3 artifacts, Secrets Manager, CloudWatch logs where applicable)\n- **IAM OIDC Provider for EKS** (for IRSA)\n- **IAM Roles for Service Accounts** (ALB controller, external-dns if used)\n\nIf you tell me whether you want **Option A (ALB only)** or **Option B (CloudFront + ALB)**, and whether you want to **migrate off DockerHub** or **use ECR pull-through cache**, I can tighten this into a minimal “lean” bill of materials and a deployment flow.",
  "aws_resources": [
    "VPC",
    "Internet Gateway",
    "NAT Gateway(s)",
    "Elastic IP(s) for NAT",
    "Public Subnets (multi-AZ)",
    "Private Subnets (multi-AZ)",
    "Route Tables (public/private) and routes",
    "Security Groups (ALB, EKS nodes, control plane access)",
    "VPC Endpoints: S3 (Gateway), ECR (api/dkr), CloudWatch Logs, STS (as needed)",
    "Amazon EKS Cluster",
    "EKS Managed Node Group(s) (or Fargate Profiles)",
    "EKS Add-ons: VPC CNI, CoreDNS, kube-proxy",
    "IAM OIDC Provider for EKS (IRSA)",
    "IAM Roles for Service Accounts (ALB controller, etc.)",
    "AWS Load Balancer Controller (EKS add-on/Helm)",
    "Application Load Balancer (via Ingress)",
    "ALB Target Group(s)",
    "ACM Certificate",
    "Amazon Route 53 Hosted Zone and DNS Records",
    "(Optional) Amazon CloudFront Distribution",
    "(Optional) AWS WAF Web ACL",
    "Amazon ECR Private Repository",
    "(Optional) ECR Pull Through Cache Rule (DockerHub upstream)",
    "(Optional) AWS Secrets Manager Secret (DockerHub credentials)",
    "AWS CodePipeline",
    "AWS CodeBuild Project(s)",
    "S3 Bucket for CI/CD artifacts",
    "IAM Roles/Policies for CodePipeline/CodeBuild",
    "Amazon CloudWatch Log Groups",
    "Amazon CloudWatch Alarms",
    "AWS CloudTrail",
    "AWS KMS Key(s) for encryption at rest"
  ]
}