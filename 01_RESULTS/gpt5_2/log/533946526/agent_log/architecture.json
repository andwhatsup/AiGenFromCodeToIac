{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\ntitle High-level Deployment Architecture (Ansible + RKE Kubernetes Provisioning)\n\nskinparam shadowing false\nskinparam componentStyle rectangle\n\nnode \"Developer / Ops Workstation\\n(Localhost inventory)\" as workstation {\n  artifact \"Bootstrap Scripts\\nBash: bin/01_install_cli_tools.sh\\nBash: bin/02_create_cluster.sh\" as scripts\n  artifact \"Poetry Project\\nPython 3 + Poetry\\nDependency: ansible ^8.5.0\" as poetry\n  component \"Ansible Automation\\nPlaybooks + Roles\\n- install_cli_tools.yaml\\n- Galaxy roles: avnes.*\" as ansible\n  component \"Installed CLI Tooling\\n- kubectl, helm, flux\\n- k9s, crictl\\n- kubectx\\n- rke\" as clis\n  component \"Terraform CLI (optional)\\n(referenced; IaC not in snapshot)\" as terraform\n}\n\ncloud \"GitHub\" as github {\n  component \"GitHub Actions\\nWorkflow: tfsec.yaml\" as gha\n  component \"tfsec\\nTerraform security scanning\" as tfsec\n  component \"Renovate\\nDependency update automation\" as renovate\n}\n\nnode \"Target Infrastructure\" as infra {\n  node \"Kubernetes Cluster\\nProvisioned via Rancher RKE\" as k8s {\n    node \"Control Plane\" as control\n    node \"Worker Nodes\" as workers\n  }\n}\n\nscripts --> poetry : installs/bootstraps\npoetry --> ansible : runs (poetry/ansible)\nansible --> clis : installs via roles\nscripts --> terraform : runs terraform init/apply\nterraform --> infra : provisions resources (expected)\nclis --> k8s : manages cluster\\n(kubectl/helm/flux/rke)\nansible --> k8s : configures cluster\\n(via installed CLIs)\n\ngha --> tfsec : runs scan\nrenovate --> github : opens PRs\\n(dep updates)\ntfsec --> github : reports findings\n\nnote right of terraform\nTerraform directory referenced by script,\nbut not present in repository snapshot.\nend note\n\n@enduml",
  "svg_diagram": "<?plantuml 1.2026.2beta1?><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"1041px\" preserveAspectRatio=\"none\" style=\"width:1350px;height:1041px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 1350 1041\" width=\"1350px\" zoomAndPan=\"magnify\"><title>High-level Deployment Architecture (Ansible + RKE Kubernetes Provisioning)</title><defs/><g><g class=\"title\" data-source-line=\"4\"><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"611.3174\" x=\"362.4446\" y=\"22.9951\">High-level Deployment Architecture (Ansible + RKE Kubernetes Provisioning)</text></g><!--cluster workstation--><g class=\"cluster\" data-qualified-name=\"workstation\" data-source-line=\"9\" id=\"ent0002\"><polygon fill=\"#FFFFFF\" points=\"175,53.2969,185,43.2969,660,43.2969,660,707.3369,650,717.3369,175,717.3369,175,53.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"650\" x2=\"660\" y1=\"53.2969\" y2=\"43.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"175\" x2=\"650\" y1=\"53.2969\" y2=\"53.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"650\" x2=\"650\" y1=\"53.2969\" y2=\"717.3369\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"227.3906\" x=\"299.8047\" y=\"69.292\">Developer / Ops Workstation</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"169.0596\" x=\"328.9702\" y=\"85.5889\">(Localhost inventory)</text></g><!--cluster github--><g class=\"cluster\" data-qualified-name=\"github\" data-source-line=\"17\" id=\"ent0008\"><path d=\"M931.0447,82.7128 C938.0109,68.4565 949.2351,70.6815 956.7393,82.1759 C965.0431,70.277 974.4168,68.8931 982.9367,81.949 C990.2628,69.2327 1003.0133,65.9226 1011.1313,81.1499 C1019.2342,69.4044 1031.2037,65.2248 1039.7944,80.635 C1049.6396,67.5949 1057.1584,71.0549 1065.0971,82.5975 C1071.3926,69.564 1082.4186,70.879 1090.2796,80.8866 C1101.1324,66.0554 1113.1017,69.3974 1122.202,82.8635 C1130.6476,72.9322 1139.1375,70.9954 1146.3231,84.1784 C1152.8111,72.3189 1165.7751,72.1233 1172.612,83.7886 C1180.1994,69.4864 1194.6876,69.1822 1202.5217,83.5311 C1210.9057,70.1737 1222.9403,72.1063 1230.2485,84.6813 C1238.0214,73.36 1248.0991,72.4169 1256.3179,84.1778 C1263.3138,71.3844 1275.9928,71.5192 1282.763,84.4102 C1296.0258,72.2405 1306.6557,73.4078 1316,89.0869 C1316.9285,88.7243 1317.6416,89.0111 1317.5438,90.1453 C1332.8634,97.7802 1329.773,111.15 1317.9226,119.1398 C1333.6918,126.4372 1335.8697,135.307 1322.2729,147.1631 C1335.9964,154.2816 1337.0912,163.3863 1324.4487,172.7471 C1334.5525,179.0118 1337.6239,187.8017 1326.4692,195.9199 C1340.9975,206.5892 1337.2504,215.125 1325.2901,224.7096 C1337.1525,231.6733 1338.0553,245.2249 1325.9197,252.7279 C1340.4046,258.6869 1341.8154,268.8737 1329.4396,278.5011 C1341.4853,286.7763 1343.2065,299.8389 1327.8082,306.516 C1338.9288,314.6318 1338.3045,324.0667 1328.0334,332.3688 C1337.6435,338.9174 1339.6043,350.8538 1326.6456,356.0814 C1337.3457,365.7102 1336.924,377.2531 1322.419,382.9113 C1334.2962,393.3662 1334.6467,403.0549 1320.1368,411.3957 C1330.0583,419.5971 1330.2339,429.6941 1317.5799,435.5009 C1328.6135,449.2495 1325.0191,461.8851 1309,468.6269 C1310.8017,467.5215 1311.9225,468.0251 1312.2593,470.1192 C1305.212,484.601 1290.8332,488.1836 1281.8506,472.0409 C1274.9924,486.1637 1265.5246,485.4792 1257.0087,473.6263 C1249.6279,488.3043 1240.3579,487.6237 1229.7039,477.1847 C1221.2665,490.5275 1210.9043,490.5145 1203.2216,476.4553 C1197.0425,494.3067 1182.7365,492.2994 1172.4291,480.7841 C1166.1239,493.4648 1154.5832,493.8511 1147.1579,481.9349 C1140.5803,495.7676 1129.7338,494.7433 1122.2827,482.7771 C1115.0281,495.3639 1101.732,496.9196 1093.8716,483.4373 C1083.468,495.3825 1072.3186,494.0903 1066.522,478.8093 C1058.6125,491.4477 1044.9181,492.3506 1038.2215,477.558 C1029.7031,490.7679 1019.3717,491.0351 1010.8651,477.546 C1002.8839,488.2683 992.3776,490.3367 985.6764,476.2465 C973.788,488.8641 964.097,485.4047 956.3165,471.6698 C939.7217,489.0425 925.6709,481.1285 919,461.6269 C920.7436,460.5766 922.2213,461.2066 922.6748,463.1897 C908.3063,457.9757 907.3669,446.6448 919.1302,437.7847 C905.7852,428.6061 905.1469,419.5132 918.9059,410.1149 C908.2578,401.8373 909.0604,392.2893 921.2644,386.2723 C906.2607,380.5676 907.0838,368.4357 917.4658,359.1726 C903.8876,351.8864 901.2138,338.7634 916.1566,330.1888 C903.8692,321.8417 906.5869,314.1789 916.4598,306.1109 C900.727,298.0014 900.0059,288.4512 914.5546,278.2697 C902.1695,270.5524 900.2417,256.9755 915.4134,250.0983 C904.3814,242.7815 902.6793,231.5094 916.1376,224.8963 C905.8852,214.4011 905.7308,202.1921 921.3203,196.3962 C911.4605,189.6548 910.1805,178.3241 921.8123,172.0165 C909.4556,164.0814 907.2555,154.0827 921.2878,145.6231 C906.2229,135.1756 910.1012,124.3708 923.4253,115.9696 C907.9432,105.9185 908.0047,89.594 926,82.0869 C927.679,79.9495 929.9423,80.2034 931.0447,82.7128\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"54.6875\" x=\"1090.1563\" y=\"100.082\">GitHub</text></g><!--cluster infra--><g class=\"cluster\" data-qualified-name=\"infra\" data-source-line=\"23\" id=\"ent0012\"><polygon fill=\"#FFFFFF\" points=\"16,796.3369,26,786.3369,479,786.3369,479,1014.6369,469,1024.6369,16,1024.6369,16,796.3369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"469\" x2=\"479\" y1=\"796.3369\" y2=\"786.3369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"16\" x2=\"469\" y1=\"796.3369\" y2=\"796.3369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"469\" x2=\"469\" y1=\"796.3369\" y2=\"1024.6369\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"167.8564\" x=\"159.5718\" y=\"812.332\">Target Infrastructure</text></g><!--cluster k8s--><g class=\"cluster\" data-qualified-name=\"infra.k8s\" data-source-line=\"24\" id=\"ent0013\"><polygon fill=\"#FFFFFF\" points=\"56,860.3369,66,850.3369,431,850.3369,431,974.6369,421,984.6369,56,984.6369,56,860.3369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"421\" x2=\"431\" y1=\"860.3369\" y2=\"850.3369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"56\" x2=\"421\" y1=\"860.3369\" y2=\"860.3369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"421\" x2=\"421\" y1=\"860.3369\" y2=\"984.6369\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"152.5576\" x=\"163.2212\" y=\"876.332\">Kubernetes Cluster</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"226.9873\" x=\"126.0063\" y=\"892.6289\">Provisioned via Rancher RKE</text></g><!-- (SVG truncated for brevity in this field is not allowed; providing full SVG as returned) -->\n</g></svg>",
  "architecture_description": "## High-level architecture\n\nThis repository is an **automation/code-as-ops project** intended to be run from a **local execution host (inventory targets `localhost`)** to provision and/or configure a **Kubernetes cluster using Rancher RKE**, and to install a standard set of Kubernetes operator/management CLIs.\n\n### Main components\n\n1. **Developer/Ops Workstation (localhost execution host)**\n   - **Bash bootstrap scripts**\n     - `bin/01_install_cli_tools.sh`: bootstraps prerequisites (e.g., Python/curl), installs Poetry, installs Ansible deps/roles, and runs the Ansible playbook.\n     - `bin/02_create_cluster.sh`: runs `terraform init/apply` (Terraform code referenced but not present in the snapshot).\n   - **Python + Poetry project**\n     - `pyproject.toml` / `poetry.lock`\n     - Primary dependency: **Ansible `^8.5.0`** (Python package).\n   - **Ansible automation**\n     - Playbook: `ansible/install_cli_tools.yaml`\n     - Galaxy roles: `avnes.crictl`, `avnes.flux`, `avnes.helm`, `avnes.k9s`, `avnes.kubectl`, `avnes.kubectx`, `avnes.rke`\n   - **Installed CLI tooling** (installed onto the workstation by Ansible roles)\n     - `kubectl`, `helm`, `flux`, `k9s`, `crictl`, `kubectx`, `rke`\n   - **Terraform CLI (optional / referenced)**\n     - Used by `bin/02_create_cluster.sh` to provision infrastructure, but the Terraform configuration directory is not included in the provided repo snapshot.\n\n2. **Target Infrastructure**\n   - **Kubernetes cluster (Rancher RKE)**\n     - Abstracted into **Control Plane** and **Worker Nodes**.\n   - The workstation interacts with this cluster primarily via the installed CLIs (kubectl/helm/flux/rke) and any Ansible tasks that shell out to those tools.\n\n3. **GitHub (CI/CD and automation services)**\n   - **GitHub Actions** runs a workflow (`.github/workflows/tfsec.yaml`) to perform security scanning.\n   - **tfsec** scans Terraform code for security issues (useful once Terraform code exists in the repo).\n   - **Renovate** automates dependency update PRs (e.g., Python/Poetry and potentially other config dependencies).\n\n### Key relationships / flow\n- Bootstrap script installs Python/Poetry and then runs **Ansible**.\n- Ansible installs the **Kubernetes management CLIs** on the workstation.\n- The workstation uses those CLIs to **provision/manage/configure** the **RKE Kubernetes cluster**.\n- A separate bootstrap script can run **Terraform** to provision the underlying infrastructure (expected, but Terraform code is missing in this snapshot).\n- In CI, **GitHub Actions** runs **tfsec**; **Renovate** opens PRs for dependency updates."
}