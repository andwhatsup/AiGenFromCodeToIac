{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\ntitle High-level Deployment Architecture (S3 -> SQS -> Lambda)\n\nskinparam shadowing false\nskinparam componentStyle rectangle\nskinparam wrapWidth 220\nskinparam maxMessageSize 120\n\nactor \"User / Producer\" as user\n\ncloud \"AWS Account\" as aws {\n  node \"Amazon S3\" as s3 {\n    artifact \"S3 Bucket\\n(CSV uploads)\" as bucket\n  }\n\n  node \"Amazon SQS\" as sqs {\n    queue \"SQS Queue\\n(Event source)\" as q\n  }\n\n  node \"AWS Lambda\" as lambda {\n    component \"Go Lambda Function\\n(aws-lambda-go, custom runtime bootstrap)\\nArtifact: handler.zip\" as fn\n  }\n\n  node \"IAM\" as iam {\n    component \"IAM Roles/Policies\\n- S3 -> SQS permission\\n- Lambda execution role\" as policies\n  }\n}\n\nnode \"Local Development\" as local {\n  node \"LocalStack (Docker)\\nEmulates: s3, sqs, lambda, iam\" as localstack\n}\n\nuser --> bucket : Upload CSV\nbucket --> q : S3 Event Notification\\n(send message)\nq --> fn : Event Source Mapping\\n(SQSEvent)\nfn --> s3 : Read object (optional)\npolicies ..> bucket : authorize\npolicies ..> q : authorize\npolicies ..> fn : authorize\n\nlocalstack ..> bucket : local emulation\nlocalstack ..> q : local emulation\nlocalstack ..> fn : local emulation\nlocalstack ..> policies : local emulation\n\n@enduml",
  "svg_diagram": "<?plantuml 1.2026.2beta1?><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"722px\" preserveAspectRatio=\"none\" style=\"width:990px;height:722px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 990 722\" width=\"990px\" zoomAndPan=\"magnify\"><title>High-level Deployment Architecture (S3 -&gt; SQS -&gt; Lambda)</title><defs/><g><g class=\"title\" data-source-line=\"4\"><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"470.1348\" x=\"253.0261\" y=\"22.9951\">High-level Deployment Architecture (S3 -&gt; SQS -&gt; Lambda)</text></g><!--cluster aws--><g class=\"cluster\" data-qualified-name=\"aws\" data-source-line=\"13\" id=\"ent0003\"><path d=\"M149.1452,242.022 C165.5375,215.5427 186.9369,215.972 204.9136,240.2824 C222.301,220.9467 244.3982,219.1393 256.8528,245.847 C272.5133,217.4828 295.5428,220.945 312.3762,244.5949 C328.2498,219.369 351.2041,210.1845 371.3011,240.0802 C384.2255,209.663 410.9487,207.8178 430.4123,233.1462 C449.431,205.6202 474.9758,207.7702 486.7044,240.0122 C499.264,211.5307 517.8571,213.8091 535.7367,234.7322 C554.214,204.5218 577.5715,209.8172 592.7612,237.9458 C609.4962,213.097 628.9982,212.4405 645.1808,238.5145 C661.1195,209.1717 692.6325,206.9953 710.0016,236.9509 C726.8348,215.9465 747.8897,218.5501 755.6971,245.5438 C770.9143,212.7948 790.6211,211.3577 812.659,239.1235 C831.1771,211.0853 861.1972,216.0194 875.2347,244.1179 C893.0401,221.4875 914.9662,217.5116 929.06,247.8869 C934.0455,243.8605 936.7562,245.1124 938.4271,251.0141 C967.4575,266.5968 965.7403,292.3387 937.6316,307.1111 C959.396,324.8578 959.4289,344.787 935.9732,361.1459 C960.5608,377.0215 958.9474,398.3081 932.6232,410.7449 C956.3182,424.5429 960.1821,445.0528 937.5022,463.167 C960.7871,477.7462 959.0977,497.4352 935.2335,509.7165 C965.8017,525.754 966.9417,552.0727 936.2758,569.1835 C961.6341,586.9796 959.8905,607.3918 933.4262,622.4137 C951.3182,640.085 947.9562,664.2279 922.06,671.8269 C926.0873,669.6429 927.6632,671.6133 928.2519,675.3955 C909.9152,704.9508 890.1617,701.2547 870.3302,677.0047 C853.2196,704.3391 836.7286,705.2223 818.5138,678.0544 C804.4636,707.2341 777.1474,710.2451 760.0755,681.0809 C747.8033,708.2004 720.9187,710.4238 705.2245,684.6282 C686.9788,713.3481 658.9978,704.6138 646.9099,678.1241 C633.725,708.3638 613.8233,709.6113 594.223,684.1975 C578.8947,712.5792 559.0123,710.5914 539.6385,688.5794 C522.3069,715.1138 498.972,709.4355 485.0287,684.9525 C465.4869,707.7303 447.4171,709.0223 430.5352,682.0394 C415.4468,705.1192 394.7819,710.2463 376.7431,685.3473 C356.7308,714.5845 328.8199,705.8112 317.7322,676.3718 C301.6168,707.6309 279.5852,709.811 257.9139,681.9979 C242.147,702.0909 218.6279,699.8636 209.5526,674.8271 C181.1367,708.0197 156.803,700.7865 138.06,664.8269 C141.936,664.0415 144.6129,666.5029 143.8869,670.4697 C115.1435,653.8325 113.916,631.0289 143.2103,613.7 C115.4331,601.3847 115.1417,580.6059 137.3865,562.5907 C118.2775,546.1881 116.1997,525.2065 142.4297,513.4576 C122.209,495.9614 120.027,477.1989 145.1593,462.1138 C118.7468,450.6563 116.9873,426.9348 140.6531,411.0575 C117.1795,394.6121 121.2737,372.5546 145.0612,360.206 C115.9749,344.5273 117.2265,320.1859 145.0373,304.4829 C116.1757,285.0895 117.7543,260.2602 145.06,240.8869 C146.7909,239.1813 148.4823,239.884 149.1452,242.022\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"104.9111\" x=\"481.1044\" y=\"258.882\">AWS Account</text></g><!--cluster s3--><g class=\"cluster\" data-qualified-name=\"aws.s3\" data-source-line=\"14\" id=\"ent0004\"><polygon fill=\"#FFFFFF\" points=\"162.06,506.2369,172.06,496.2369,358.06,496.2369,358.06,637.8269,348.06,647.8269,162.06,647.8269,162.06,506.2369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"348.06\" x2=\"358.06\" y1=\"506.2369\" y2=\"496.2369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"162.06\" x2=\"348.06\" y1=\"506.2369\" y2=\"506.2369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"348.06\" x2=\"348.06\" y1=\"506.2369\" y2=\"647.8269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"87.3018\" x=\"212.4091\" y=\"522.232\">Amazon S3</text></g><!--cluster sqs--><g class=\"cluster\" data-qualified-name=\"aws.sqs\" data-source-line=\"18\" id=\"ent0006\"><polygon fill=\"#FFFFFF\" points=\"440.06,520.7369,450.06,510.7369,615.06,510.7369,615.06,623.3269,605.06,633.3269,440.06,633.3269,440.06,520.7369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"605.06\" x2=\"615.06\" y1=\"520.7369\" y2=\"510.7369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"440.06\" x2=\"605.06\" y1=\"520.7369\" y2=\"520.7369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"605.06\" x2=\"605.06\" y1=\"520.7369\" y2=\"633.3269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"99.5449\" x=\"473.7875\" y=\"536.732\">Amazon SQS</text></g><!--cluster lambda--><g class=\"cluster\" data-qualified-name=\"aws.lambda\" data-source-line=\"22\" id=\"ent0008\"><polygon fill=\"#FFFFFF\" points=\"687.06,499.4369,697.06,489.4369,913.06,489.4369,913.06,644.6269,903.06,654.6269,687.06,654.6269,687.06,499.4369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"903.06\" x2=\"913.06\" y1=\"499.4369\" y2=\"489.4369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"687.06\" x2=\"903.06\" y1=\"499.4369\" y2=\"499.4369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"903.06\" x2=\"903.06\" y1=\"499.4369\" y2=\"654.6269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"103.6807\" x=\"744.2197\" y=\"515.432\">AWS Lambda</text></g><!--cluster iam--><g class=\"cluster\" data-qualified-name=\"aws.iam\" data-source-line=\"26\" id=\"ent0010\"><polygon fill=\"#FFFFFF\" points=\"312.06,285.8869,322.06,275.8869,534.06,275.8869,534.06,414.7769,524.06,424.7769,312.06,424.7769,312.06,285.8869\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"524.06\" x2=\"534.06\" y1=\"285.8869\" y2=\"275.8869\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"312.06\" x2=\"524.06\" y1=\"285.8869\" y2=\"285.8869\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"524.06\" x2=\"524.06\" y1=\"285.8869\" y2=\"424.7769\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"29.9756\" x=\"404.0722\" y=\"301.882\">IAM</text></g><!--cluster local--><g class=\"cluster\" data-qualified-name=\"local\" data-source-line=\"31\" id=\"ent0012\"><polygon fill=\"#FFFFFF\" points=\"531.06,53.2969,541.06,43.2969,823.06,43.2969,823.06,175.8869,813.06,185.8869,531.06,185.8869,531.06,53.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"813.06\" x2=\"823.06\" y1=\"53.2969\" y2=\"43.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"531.06\" x2=\"813.06\" y1=\"53.2969\" y2=\"53.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"813.06\" x2=\"813.06\" y1=\"53.2969\" y2=\"185.8869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"150.876\" x=\"597.622\" y=\"69.292\">Local Development</text></g><!--entity bucket--><g class=\"entity\" data-qualified-name=\"aws.s3.bucket\" data-source-line=\"15\" id=\"ent0005\"><rect fill=\"#FFFFFF\" height=\"55.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"128.5879\" x=\"205.76\" y=\"568.2369\"/><polygon fill=\"#FFFFFF\" points=\"317.3479,573.2369,317.3479,587.2369,329.3479,587.2369,329.3479,579.2369,323.3479,573.2369,317.3479,573.2369\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"323.3479\" x2=\"323.3479\" y1=\"573.2369\" y2=\"579.2369\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"329.3479\" x2=\"323.3479\" y1=\"579.2369\" y2=\"579.2369\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"17.7939\" x=\"229.7395\" y=\"594.232\">S3</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"247.5334\" y=\"594.232\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"48.3848\" x=\"251.9836\" y=\"594.232\">Bucket</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"33.7012\" x=\"215.76\" y=\"610.5289\">(CSV</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"249.4612\" y=\"610.5289\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"60.4365\" x=\"253.9114\" y=\"610.5289\">uploads)</text></g><!--entity q--><g class=\"entity\" data-qualified-name=\"aws.sqs.q\" data-source-line=\"19\" id=\"ent0007\"><path d=\"M470.92,574.7369 L583.1993,574.7369 C588.1993,574.7369 588.1993,596.0337 588.1993,596.0337 C588.1993,596.0337 588.1993,617.3306 583.1993,617.3306 L470.92,617.3306 C465.92,617.3306 465.92,596.0337 465.92,596.0337 C465.92,596.0337 465.92,574.7369 470.92,574.7369\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M583.1993,574.7369 C578.1993,574.7369 578.1993,596.0337 578.1993,596.0337 C578.1993,617.3306 583.1993,617.3306 583.1993,617.3306\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"28.793\" x=\"482.442\" y=\"592.732\">SQS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"511.2349\" y=\"592.732\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"45.9922\" x=\"515.6851\" y=\"592.732\">Queue</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"45.5684\" x=\"470.92\" y=\"609.0289\">(Event</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"516.4884\" y=\"609.0289\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"52.2607\" x=\"520.9386\" y=\"609.0289\">source)</text></g><!--entity fn--><g class=\"entity\" data-qualified-name=\"aws.lambda.fn\" data-source-line=\"23\" id=\"ent0009\"><rect fill=\"#FFFFFF\" height=\"85.1875\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"193.2568\" x=\"703.43\" y=\"553.4369\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"19.4141\" x=\"727.5599\" y=\"576.432\">Go</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"746.9739\" y=\"576.432\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.3691\" x=\"751.4241\" y=\"576.432\">Lambda</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"807.7933\" y=\"576.432\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"60.3135\" x=\"812.2435\" y=\"576.432\">Function</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"117.25\" x=\"713.43\" y=\"592.7289\">(aws-lambda-go,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"830.68\" y=\"592.7289\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"51.5566\" x=\"835.1302\" y=\"592.7289\">custom</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"55.1318\" x=\"733.7806\" y=\"609.0257\">runtime</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"788.9124\" y=\"609.0257\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"72.9736\" x=\"793.3626\" y=\"609.0257\">bootstrap)</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.123\" x=\"730.7488\" y=\"625.3226\">Artifact:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"786.8719\" y=\"625.3226\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"78.0459\" x=\"791.3221\" y=\"625.3226\">handler.zip</text></g><!--entity policies--><g class=\"entity\" data-qualified-name=\"aws.iam.policies\" data-source-line=\"27\" id=\"ent0011\"><rect fill=\"#FFFFFF\" height=\"68.8906\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"190.4951\" x=\"327.81\" y=\"339.8869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"25.7852\" x=\"360.3959\" y=\"362.882\">IAM</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"386.1811\" y=\"362.882\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"95.0879\" x=\"390.6313\" y=\"362.882\">Roles/Policies</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"5.0518\" x=\"341.5971\" y=\"379.1789\">-</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"346.6489\" y=\"379.1789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"17.7939\" x=\"351.0991\" y=\"379.1789\">S3</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"368.893\" y=\"379.1789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"16.7822\" x=\"373.3432\" y=\"379.1789\">-&gt;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"390.1254\" y=\"379.1789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"28.793\" x=\"394.5756\" y=\"379.1789\">SQS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"423.3686\" y=\"379.1789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"76.6992\" x=\"427.8188\" y=\"379.1789\">permission</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"5.0518\" x=\"337.81\" y=\"395.4757\">-</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"342.8618\" y=\"395.4757\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.3691\" x=\"347.312\" y=\"395.4757\">Lambda</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"403.6811\" y=\"395.4757\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"68.8994\" x=\"408.1313\" y=\"395.4757\">execution</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"477.0307\" y=\"395.4757\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"26.8242\" x=\"481.4809\" y=\"395.4757\">role</text></g><!--entity localstack--><g class=\"entity\" data-qualified-name=\"local.localstack\" data-source-line=\"32\" id=\"ent0013\"><polygon fill=\"#FFFFFF\" points=\"547.39,117.2969,557.39,107.2969,806.7211,107.2969,806.7211,159.8906,796.7211,169.8906,547.39,169.8906,547.39,117.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"796.7211\" x2=\"806.7211\" y1=\"117.2969\" y2=\"107.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"547.39\" x2=\"796.7211\" y1=\"117.2969\" y2=\"117.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"796.7211\" x2=\"796.7211\" y1=\"117.2969\" y2=\"169.8906\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"75.291\" x=\"601.9632\" y=\"140.292\">LocalStack</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"677.2543\" y=\"140.292\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"60.4434\" x=\"681.7045\" y=\"140.292\">(Docker)</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"69.9385\" x=\"562.39\" y=\"156.5889\">Emulates:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"632.3285\" y=\"156.5889\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"20.6514\" x=\"636.7787\" y=\"156.5889\">s3,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"657.43\" y=\"156.5889\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"27.9248\" x=\"661.8802\" y=\"156.5889\">sqs,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"689.805\" y=\"156.5889\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.9092\" x=\"694.2552\" y=\"156.5889\">lambda,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"751.1644\" y=\"156.5889\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"26.1064\" x=\"755.6146\" y=\"156.5889\">iam</text></g><!--entity user--><g class=\"entity\" data-qualified-name=\"user\" data-source-line=\"11\" id=\"ent0002\"><ellipse cx=\"60.0586\" cy=\"344.6869\" fill=\"#FFFFFF\" rx=\"8\" ry=\"8\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M60.0586,352.6869 L60.0586,379.6869 M47.0586,360.6869 L73.0586,360.6869 M60.0586,379.6869 L47.0586,394.6869 M60.0586,379.6869 L73.0586,394.6869\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"31.9102\" x=\"6\" y=\"409.932\">User</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"37.9102\" y=\"409.932\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.7168\" x=\"42.3604\" y=\"409.932\">/</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"47.0771\" y=\"409.932\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"62.5898\" x=\"51.5273\" y=\"409.932\">Producer</text></g><!--link user to bucket--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0005\" data-link-type=\"dependency\" data-source-line=\"35\" id=\"lnk14\"><path d=\"M75.65,413.2669 C86.34,434.2569 102.67,458.7569 125.06,472.2369 C154.54,489.9769 173.09,461.6769 202.06,480.2369 C233.56,500.4169 250.3752,535.1617 259.9752,562.2417\" fill=\"none\" id=\"user-to-bucket\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"261.98,567.8969,262.7429,558.0776,260.3093,563.1842,255.2027,560.7507,261.98,567.8969\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"42.0469\" x=\"126.06\" y=\"462.3755\">Upload</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"168.1069\" y=\"462.3755\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"24.2051\" x=\"171.9213\" y=\"462.3755\">CSV</text></g><!--link bucket to q--><g class=\"link\" data-entity-1=\"ent0005\" data-entity-2=\"ent0007\" data-link-type=\"dependency\" data-source-line=\"36\" id=\"lnk15\"><path d=\"M334.58,596.0269 C374.72,596.0269 420.06,596.0269 459.61,596.0269\" fill=\"none\" id=\"bucket-to-q\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"465.61,596.0269,456.61,592.0269,460.61,596.0269,456.61,600.0269,465.61,596.0269\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"15.252\" x=\"373.9007\" y=\"562.1655\">S3</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"389.1527\" y=\"562.1655\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"34.377\" x=\"392.9671\" y=\"562.1655\">Event</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"68.8535\" x=\"366.1957\" y=\"576.1343\">Notification</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"33.5391\" x=\"352.64\" y=\"590.103\">(send</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"386.1791\" y=\"590.103\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"58.6113\" x=\"389.9935\" y=\"590.103\">message)</text></g><!--link q to fn--><g class=\"link\" data-entity-1=\"ent0007\" data-entity-2=\"ent0009\" data-link-type=\"dependency\" data-source-line=\"37\" id=\"lnk16\"><path d=\"M588.67,596.0269 C622.4,596.0269 658.97,596.0269 697.05,596.0269\" fill=\"none\" id=\"q-to-fn\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"703.05,596.0269,694.05,592.0269,698.05,596.0269,694.05,600.0269,703.05,596.0269\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"34.377\" x=\"606.31\" y=\"562.1655\">Event</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"640.687\" y=\"562.1655\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"41.4785\" x=\"644.5014\" y=\"562.1655\">Source</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"51.498\" x=\"620.3959\" y=\"576.1343\">Mapping</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"68.4199\" x=\"611.935\" y=\"590.103\">(SQSEvent)</text></g><!--link fn to s3--><g class=\"link\" data-entity-1=\"ent0009\" data-entity-2=\"ent0004\" data-link-type=\"dependency\" data-source-line=\"38\" id=\"lnk17\"><path d=\"M744.85,553.1169 C707.39,526.7069 655.5,495.1369 604.06,480.2369 C456.35,437.4369 240.54,459.1269 204.56,470.2869 C191.37,474.3769 182.5069,483.6569 176.6575,495.4214 C176.5661,495.6052 179.0983,490.3933 179.0084,490.5783\" fill=\"none\" id=\"fn-to-s3\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"176.3855,495.9747,183.9174,489.6287,178.5712,491.4777,176.7223,486.1316,176.3855,495.9747\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"30.6914\" x=\"205.56\" y=\"455.3755\">Read</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"236.2514\" y=\"455.3755\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"36.9785\" x=\"240.0659\" y=\"455.3755\">object</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"57.9961\" x=\"212.3041\" y=\"469.3443\">(optional)</text></g><!--link policies to bucket--><g class=\"link\" data-entity-1=\"ent0011\" data-entity-2=\"ent0005\" data-link-type=\"dependency\" data-source-line=\"39\" id=\"lnk18\"><path d=\"M375.04,409.1169 C362.94,419.1469 350.67,430.8069 341.06,443.2369 C310.98,482.1269 291.6221,530.1533 280.6121,562.1533\" fill=\"none\" id=\"policies-to-bucket\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"278.66,567.8269,285.3705,560.6179,280.2867,563.0989,277.8057,558.0151,278.66,567.8269\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"56.5605\" x=\"342.06\" y=\"462.3755\">authorize</text></g><!--link policies to q--><g class=\"link\" data-entity-1=\"ent0011\" data-entity-2=\"ent0007\" data-link-type=\"dependency\" data-source-line=\"40\" id=\"lnk19\"><path d=\"M412.02,409.1269 C407.61,428.2369 405.21,452.2369 413.06,472.2369 C430.02,515.4169 465.3777,548.7555 493.1777,570.5455\" fill=\"none\" id=\"policies-to-q\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"497.9,574.2469,493.2842,565.5466,493.9648,571.1624,488.349,571.843,497.9,574.2469\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"56.5605\" x=\"414.06\" y=\"462.3755\">authorize</text></g><!--link policies to fn--><g class=\"link\" data-entity-1=\"ent0011\" data-entity-2=\"ent0009\" data-link-type=\"dependency\" data-source-line=\"41\" id=\"lnk20\"><path d=\"M481.38,409.0469 C516.87,429.5769 563.11,456.3769 604.06,480.2369 C645.29,504.2569 686.1543,528.1818 723.2443,549.9318\" fill=\"none\" id=\"policies-to-fn\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"728.42,552.9669,722.6798,544.9637,724.1069,550.4376,718.633,551.8647,728.42,552.9669\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"56.5605\" x=\"590.06\" y=\"462.3755\">authorize</text></g><!--link localstack to bucket--><g class=\"link\" data-entity-1=\"ent0013\" data-entity-2=\"ent0005\" data-link-type=\"dependency\" data-source-line=\"43\" id=\"lnk21\"><path d=\"M637.46,170.3169 C621.48,185.0069 604.59,203.9469 595.06,224.8869 C572.2,275.1169 612.54,433.6769 573.06,472.2369 C563.26,481.7969 463.07,475.9769 450.06,480.2369 C392.82,498.9669 340.3822,536.4001 306.3122,564.0001\" fill=\"none\" id=\"localstack-to-bucket\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"301.65,567.7769,311.1611,565.2198,305.5351,564.6295,306.1254,559.0036,301.65,567.7769\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"27.9609\" x=\"596.06\" y=\"378.9755\">local</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"624.0209\" y=\"378.9755\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"60.3516\" x=\"627.8354\" y=\"378.9755\">emulation</text></g><!--link localstack to q--><g class=\"link\" data-entity-1=\"ent0013\" data-entity-2=\"ent0007\" data-link-type=\"dependency\" data-source-line=\"44\" id=\"lnk22\"><path d=\"M687.97,170.2369 C705.71,225.3269 735.2,343.6569 697.06,432.7769 C669.61,496.9169 608.0164,544.5058 566.7964,571.1958\" fill=\"none\" id=\"localstack-to-q\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"561.76,574.4569,571.4887,572.9229,565.957,571.7393,567.1406,566.2077,561.76,574.4569\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"27.9609\" x=\"716.06\" y=\"378.9755\">local</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"744.0209\" y=\"378.9755\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"60.3516\" x=\"747.8354\" y=\"378.9755\">emulation</text></g><!--link localstack to fn--><g class=\"link\" data-entity-1=\"ent0013\" data-entity-2=\"ent0009\" data-link-type=\"dependency\" data-source-line=\"45\" id=\"lnk23\"><path d=\"M794.5,170.2869 C820.76,182.8469 845.42,200.4069 861.06,224.8869 C927.14,328.3569 865.6338,474.8323 827.1338,547.6723\" fill=\"none\" id=\"localstack-to-fn\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"824.33,552.9769,832.0721,546.8892,826.6665,548.5564,824.9993,543.1508,824.33,552.9769\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"27.9609\" x=\"890.06\" y=\"378.9755\">local</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"918.0209\" y=\"378.9755\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"60.3516\" x=\"921.8354\" y=\"378.9755\">emulation</text></g><!--link localstack to policies--><g class=\"link\" data-entity-1=\"ent0013\" data-entity-2=\"ent0011\" data-link-type=\"dependency\" data-source-line=\"46\" id=\"lnk24\"><path d=\"M547.08,159.3569 C520.53,168.5969 494.73,182.1169 475.06,201.8869 C438.2,238.9269 427.8055,295.2066 424.6855,333.6366\" fill=\"none\" id=\"localstack-to-policies\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><polygon fill=\"#000000\" points=\"424.2,339.6169,428.9152,330.9701,424.6046,334.6333,420.9414,330.3227,424.2,339.6169\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"27.9609\" x=\"476.06\" y=\"214.0255\">local</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"504.0209\" y=\"214.0255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"60.3516\" x=\"507.8354\" y=\"214.0255\">emulation</text></g><?plantuml-src XLDDJ-Cm4BtxLmmzjH9fMBZri58Ns0y9La34Sk7YEjF6Y-D9_K61rVxt7Jk15j2AanE_DszcteptQbngYp2_gIvYQw09eVEpidHoCrtfqCH5zEWKsO0sJ1MrfTnu8nS-dOLcm1TBSaLdf0qiKDuV7amFobhx8FQqLIRMB-8bdyVKjcId7VyA4NGm2D_rgYaCtgE14-mCFRQS2kPEDJgW2j4XZAiZA3v3TLcbuqosYrfEXF1tsdRIoHPy8slQQBk2fJGUTn0kkIFBYbLuv6IE5QLTcLtAnidkHjUXWSF3WvtxLZwSe_ToXPL-GlZ4e90ga8FHDPi29LmuggD2DmBf8HabX38KQnXngp1NYg8D6MItu8y0iCH-ZEQjV28BrL76_5660AGBUiaPOCJzVedg3iEj7HzNlo2oBxBsaynVP8GZ_eftYfTLBxdsW-OwOcGyMNUPFbdmz3uPx2awXRtY-eqO5z-Rd56JFmUz5pzXz8q65doDLWLDbiNJMlG1nOhsGKKVg0N7FkWMOK4KV62_9xTsFdGxWqRQsg2RFkak9rpQr_Nyc9_dUyr3ULS5Wt151drvGKOhZVxM5h1Tc0vTgxtFrHNF1UC3gfWg1iUXMRmRedDgJjwdFYCbqrxoTbAN5hDt9DzkvvbPLP3g3iOdnDDntDzf6uqCw6SyuFqqaVt1oVtKo5R7fxYKCIqG55nsFs2OmNKUE_06YE4kmMj6kBz-Z3-9NTHA3lPxj3Mq_TPEn3hpbvO3UdQLXmxdikluiJ2V7Sh8H30haNaPPt25d9KMl_cnm9Ywf2tDH3nR1DFfJf4oXeOSlv3N-Fh_K2veYucj3Q-LUvin-yWblEMjFwRaJ1zmNafxn_m7?></g></svg>",
  "architecture_description": "## High-level architecture\n\n### Core AWS event-driven flow\n- **Amazon S3 (Bucket)**: Stores uploaded CSV files. An upload triggers an **S3 Event Notification**.\n- **Amazon SQS (Queue)**: Receives messages from S3 notifications (decouples ingestion from processing).\n- **AWS Lambda (Go)**: A Go-based Lambda function using **aws-lambda-go** (with a custom runtime bootstrap and packaged as `handler.zip`) is configured with an **SQS event source mapping** and processes incoming `events.SQSEvent` messages. The function may optionally read the referenced object from S3.\n\n### Security / permissions\n- **IAM Roles/Policies**:\n  - Allows **S3 to send messages to SQS**.\n  - Provides the **Lambda execution role** (e.g., permissions to poll SQS, write logs, and optionally read from S3).\n\n### Local development\n- **LocalStack (Docker)**: The `docker-compose.yml` provisions LocalStack to emulate **s3, sqs, lambda, iam** for local testing of the same event-driven pipeline without deploying to AWS.\n\n### Relationships (summary)\n1. User uploads CSV to S3.\n2. S3 publishes an event notification to SQS.\n3. SQS triggers Lambda via event source mapping.\n4. Lambda processes the message and may fetch the CSV from S3.\n5. IAM governs all interactions; LocalStack mirrors these services locally."
}