
Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_security_group.client will be created
  + resource "aws_security_group" "client" {
      + arn                    = (known after apply)
      + description            = "FreeIPA client security group"
      + egress                 = (known after apply)
      + id                     = (known after apply)
      + ingress                = (known after apply)
      + name                   = (known after apply)
      + name_prefix            = "freeipa-client-"
      + owner_id               = (known after apply)
      + region                 = "us-east-1"
      + revoke_rules_on_delete = false
      + tags                   = {
          + "Name" = "freeipa-client"
        }
      + tags_all               = {
          + "Name" = "freeipa-client"
        }
      + vpc_id                 = "vpc-00000000"
    }

  # aws_security_group.server will be created
  + resource "aws_security_group" "server" {
      + arn                    = (known after apply)
      + description            = "FreeIPA server security group"
      + egress                 = (known after apply)
      + id                     = (known after apply)
      + ingress                = (known after apply)
      + name                   = (known after apply)
      + name_prefix            = "freeipa-server-"
      + owner_id               = (known after apply)
      + region                 = "us-east-1"
      + revoke_rules_on_delete = false
      + tags                   = {
          + "Name" = "freeipa-server"
        }
      + tags_all               = {
          + "Name" = "freeipa-server"
        }
      + vpc_id                 = "vpc-00000000"
    }

  # aws_security_group_rule.client_egress will be created
  + resource "aws_security_group_rule" "client_egress" {
      + description              = "Allow FreeIPA clients to reach FreeIPA servers"
      + from_port                = 0
      + id                       = (known after apply)
      + protocol                 = "-1"
      + region                   = "us-east-1"
      + security_group_id        = (known after apply)
      + security_group_rule_id   = (known after apply)
      + self                     = false
      + source_security_group_id = (known after apply)
      + to_port                  = 0
      + type                     = "egress"
    }

  # aws_security_group_rule.server_egress_self will be created
  + resource "aws_security_group_rule" "server_egress_self" {
      + description              = "Allow all egress within server SG"
      + from_port                = 0
      + id                       = (known after apply)
      + protocol                 = "-1"
      + region                   = "us-east-1"
      + security_group_id        = (known after apply)
      + security_group_rule_id   = (known after apply)
      + self                     = true
      + source_security_group_id = (known after apply)
      + to_port                  = 0
      + type                     = "egress"
    }

  # aws_security_group_rule.server_http_egress will be created
  + resource "aws_security_group_rule" "server_http_egress" {
      + cidr_blocks              = [
          + "0.0.0.0/0",
        ]
      + description              = "Allow HTTP egress"
      + from_port                = 80
      + id                       = (known after apply)
      + protocol                 = "tcp"
      + region                   = "us-east-1"
      + security_group_id        = (known after apply)
      + security_group_rule_id   = (known after apply)
      + self                     = false
      + source_security_group_id = (known after apply)
      + to_port                  = 80
      + type                     = "egress"
    }

  # aws_security_group_rule.server_https_egress will be created
  + resource "aws_security_group_rule" "server_https_egress" {
      + cidr_blocks              = [
          + "0.0.0.0/0",
        ]
      + description              = "Allow HTTPS egress"
      + from_port                = 443
      + id                       = (known after apply)
      + protocol                 = "tcp"
      + region                   = "us-east-1"
      + security_group_id        = (known after apply)
      + security_group_rule_id   = (known after apply)
      + self                     = false
      + source_security_group_id = (known after apply)
      + to_port                  = 443
      + type                     = "egress"
    }

  # aws_security_group_rule.server_ingress_clients will be created
  + resource "aws_security_group_rule" "server_ingress_clients" {
      + description              = "Allow FreeIPA client traffic"
      + from_port                = 0
      + id                       = (known after apply)
      + protocol                 = "-1"
      + region                   = "us-east-1"
      + security_group_id        = (known after apply)
      + security_group_rule_id   = (known after apply)
      + self                     = false
      + source_security_group_id = (known after apply)
      + to_port                  = 0
      + type                     = "ingress"
    }

  # aws_security_group_rule.server_ingress_self will be created
  + resource "aws_security_group_rule" "server_ingress_self" {
      + description              = "Allow all traffic within server SG (replication/cluster)"
      + from_port                = 0
      + id                       = (known after apply)
      + protocol                 = "-1"
      + region                   = "us-east-1"
      + security_group_id        = (known after apply)
      + security_group_rule_id   = (known after apply)
      + self                     = true
      + source_security_group_id = (known after apply)
      + to_port                  = 0
      + type                     = "ingress"
    }

Plan: 8 to add, 0 to change, 0 to destroy.

Changes to Outputs:
  + client_security_group_id = (known after apply)
  + server_security_group_id = (known after apply)
aws_security_group.server: Creating...
aws_security_group.client: Creating...
aws_security_group.client: Creation complete after 1s [id=sg-28cc90a2b3907b293]
aws_security_group.server: Creation complete after 1s [id=sg-55fde092cd52705de]
aws_security_group_rule.server_ingress_clients: Creating...
aws_security_group_rule.server_http_egress: Creating...
aws_security_group_rule.client_egress: Creating...
aws_security_group_rule.server_egress_self: Creating...
aws_security_group_rule.server_ingress_self: Creating...
aws_security_group_rule.server_https_egress: Creating...
aws_security_group_rule.client_egress: Creation complete after 0s [id=sgrule-1596934493]
aws_security_group_rule.server_ingress_clients: Creation complete after 0s [id=sgrule-2096719528]
aws_security_group_rule.server_http_egress: Creation complete after 0s [id=sgrule-2646280505]
aws_security_group_rule.server_egress_self: Creation complete after 0s [id=sgrule-1862929181]
aws_security_group_rule.server_ingress_self: Creation complete after 0s [id=sgrule-3367622962]
aws_security_group_rule.server_https_egress: Creation complete after 0s [id=sgrule-2386444184]

Apply complete! Resources: 8 added, 0 changed, 0 destroyed.

Outputs:

client_security_group_id = "sg-28cc90a2b3907b293"
server_security_group_id = "sg-55fde092cd52705de"
