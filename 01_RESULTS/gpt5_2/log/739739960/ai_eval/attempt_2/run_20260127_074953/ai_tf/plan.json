{"format_version":"1.2","terraform_version":"1.13.5","variables":{"acm_certificate_arn":{"value":null},"aws_region":{"value":"eu-central-1"},"bucket_name":{"value":null},"cloudfront_log_bucket_name":{"value":null},"custom_domain_name":{"value":null},"enable_cloudfront_logs":{"value":false},"enable_versioning":{"value":true},"environment":{"value":"prod"},"error_document":{"value":"index.html"},"github_environment":{"value":null},"github_org":{"value":"ai-tf"},"github_ref":{"value":"refs/heads/main"},"github_repo":{"value":"ai-tf"},"index_document":{"value":"index.html"},"project_name":{"value":"ai-tf"},"route53_zone_id":{"value":null},"spa_fallback":{"value":true},"tags":{"value":{}}},"planned_values":{"outputs":{"cloudfront_distribution_id":{"sensitive":false},"cloudfront_domain_name":{"sensitive":false},"github_deploy_role_arn":{"sensitive":false},"s3_bucket_name":{"sensitive":false},"site_url":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_cloudfront_cache_policy.caching_optimized","mode":"managed","type":"aws_cloudfront_cache_policy","name":"caching_optimized","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"comment":"Caching optimized for static site","default_ttl":86400,"max_ttl":31536000,"min_ttl":0,"name":"ai-tf-prod-caching-optimized","parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":"none","cookies":[]}],"enable_accept_encoding_brotli":true,"enable_accept_encoding_gzip":true,"headers_config":[{"header_behavior":"none","headers":[]}],"query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]}]},"sensitive_values":{"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[]}],"query_strings_config":[{"query_strings":[]}]}]}},{"address":"aws_cloudfront_distribution.this","mode":"managed","type":"aws_cloudfront_distribution","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":null,"anycast_ip_list_id":null,"comment":"ai-tf-prod static site","connection_function_association":[],"custom_error_response":[{"error_caching_min_ttl":0,"error_code":403,"response_code":200,"response_page_path":"/index.html"},{"error_caching_min_ttl":0,"error_code":404,"response_code":200,"response_page_path":"/index.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cached_methods":["GET","HEAD","OPTIONS"],"compress":true,"field_level_encryption_id":null,"forwarded_values":[],"function_association":[],"lambda_function_association":[],"min_ttl":0,"realtime_log_config_arn":null,"smooth_streaming":null,"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","enabled":true,"http_version":"http2and3","is_ipv6_enabled":true,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_100","restrictions":[{"geo_restriction":[{"restriction_type":"none"}]}],"retain_on_delete":false,"staging":false,"tags":null,"tags_all":{"Environment":"prod","ManagedBy":"terraform","Project":"ai-tf"},"viewer_certificate":[{"acm_certificate_arn":null,"cloudfront_default_certificate":true,"iam_certificate_id":null,"minimum_protocol_version":"TLSv1","ssl_support_method":null}],"viewer_mtls_config":[],"wait_for_deployment":true,"web_acl_id":null},"sensitive_values":{"connection_function_association":[],"custom_error_response":[{},{}],"default_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false,false],"forwarded_values":[],"function_association":[],"grpc_config":[],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags_all":{},"trusted_key_groups":[],"trusted_signers":[],"viewer_certificate":[{}],"viewer_mtls_config":[]}},{"address":"aws_cloudfront_origin_access_control.oac","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"oac","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"ai-tf-prod-oac","origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"sensitive_values":{}},{"address":"aws_cloudfront_origin_request_policy.cors_s3","mode":"managed","type":"aws_cloudfront_origin_request_policy","name":"cors_s3","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"comment":"Origin request policy for S3 origin with CORS","cookies_config":[{"cookie_behavior":"none","cookies":[]}],"headers_config":[{"header_behavior":"whitelist","headers":[{"items":["Access-Control-Request-Headers","Access-Control-Request-Method","Origin"]}]}],"name":"ai-tf-prod-cors-s3-origin","query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]},"sensitive_values":{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false,false,false]}]}],"query_strings_config":[{"query_strings":[]}]}},{"address":"aws_cloudfront_response_headers_policy.security","mode":"managed","type":"aws_cloudfront_response_headers_policy","name":"security","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"comment":null,"cors_config":[],"custom_headers_config":[],"name":"ai-tf-prod-security-headers","remove_headers_config":[],"security_headers_config":[{"content_security_policy":[],"content_type_options":[{"override":true}],"frame_options":[{"frame_option":"DENY","override":true}],"referrer_policy":[{"override":true,"referrer_policy":"strict-origin-when-cross-origin"}],"strict_transport_security":[{"access_control_max_age_sec":31536000,"include_subdomains":true,"override":true,"preload":true}],"xss_protection":[{"mode_block":true,"override":true,"protection":true,"report_uri":null}]}],"server_timing_headers_config":[]},"sensitive_values":{"cors_config":[],"custom_headers_config":[],"remove_headers_config":[],"security_headers_config":[{"content_security_policy":[],"content_type_options":[{}],"frame_options":[{}],"referrer_policy":[{}],"strict_transport_security":[{}],"xss_protection":[{}]}],"server_timing_headers_config":[]}},{"address":"aws_iam_openid_connect_provider.github","mode":"managed","type":"aws_iam_openid_connect_provider","name":"github","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"client_id_list":["sts.amazonaws.com"],"tags":null,"tags_all":{"Environment":"prod","ManagedBy":"terraform","Project":"ai-tf"},"thumbprint_list":["6938fd4d98bab03faadb97b34396831e3780aea1"],"url":"https://token.actions.githubusercontent.com"},"sensitive_values":{"client_id_list":[false],"tags_all":{},"thumbprint_list":[false]},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_iam_policy.github_deploy","mode":"managed","type":"aws_iam_policy","name":"github_deploy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"delay_after_policy_creation_in_ms":null,"description":null,"name":"ai-tf-prod-github-deploy","path":"/","tags":null,"tags_all":{"Environment":"prod","ManagedBy":"terraform","Project":"ai-tf"}},"sensitive_values":{"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_iam_role.github_deploy","mode":"managed","type":"aws_iam_role","name":"github_deploy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ai-tf-prod-github-deploy","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"prod","ManagedBy":"terraform","Project":"ai-tf"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null}},{"address":"aws_iam_role_policy_attachment.github_deploy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"github_deploy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"ai-tf-prod-github-deploy"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_s3_bucket.site","mode":"managed","type":"aws_s3_bucket","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"force_destroy":false,"region":"eu-central-1","tags":null,"tags_all":{"Environment":"prod","ManagedBy":"terraform","Project":"ai-tf"},"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"region":null}},{"address":"aws_s3_bucket_lifecycle_configuration.site","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"region":"eu-central-1","rule":[{"abort_incomplete_multipart_upload":[{"days_after_initiation":7}],"expiration":[],"filter":[],"id":"abort-multipart","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"sensitive_values":{"rule":[{"abort_incomplete_multipart_upload":[{}],"expiration":[],"filter":[],"noncurrent_version_expiration":[],"noncurrent_version_transition":[],"transition":[]}]}},{"address":"aws_s3_bucket_ownership_controls.site","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"eu-central-1","rule":[{"object_ownership":"BucketOwnerEnforced"}]},"sensitive_values":{"rule":[{}]},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"region":null}},{"address":"aws_s3_bucket_policy.site","mode":"managed","type":"aws_s3_bucket_policy","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"region":"eu-central-1"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"region":null}},{"address":"aws_s3_bucket_public_access_block.site","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"region":"eu-central-1","restrict_public_buckets":true,"skip_destroy":null},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"region":null}},{"address":"aws_s3_bucket_server_side_encryption_configuration.site","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"region":"eu-central-1","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"blocked_encryption_types":[],"bucket_key_enabled":null}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}],"blocked_encryption_types":[]}]},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"expected_bucket_owner":null,"region":null}},{"address":"aws_s3_bucket_versioning.site","mode":"managed","type":"aws_s3_bucket_versioning","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"region":"eu-central-1","versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]},"identity_schema_version":0,"identity":{"account_id":null,"bucket":null,"expected_bucket_owner":null,"region":null}},{"address":"data.aws_iam_policy_document.github_assume_role","mode":"data","type":"aws_iam_policy_document","name":"github_assume_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRoleWithWebIdentity"],"condition":[{"test":"StringEquals","values":["sts.amazonaws.com"],"variable":"token.actions.githubusercontent.com:aud"},{"test":"StringLike","values":["repo:ai-tf/ai-tf:ref:refs/heads/main"],"variable":"token.actions.githubusercontent.com:sub"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":[null],"type":"Federated"}],"resources":null,"sid":null}],"version":null},"sensitive_values":{"statement":[{"actions":[false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[{"identifiers":[false]}]}]}},{"address":"data.aws_iam_policy_document.github_deploy","mode":"data","type":"aws_iam_policy_document","name":"github_deploy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetBucketLocation","s3:ListBucket"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null],"sid":"S3List"},{"actions":["s3:AbortMultipartUpload","s3:DeleteObject","s3:GetObject","s3:ListBucketMultipartUploads","s3:ListMultipartUploadParts","s3:PutObject"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null],"sid":"S3ObjectRW"},{"actions":["cloudfront:CreateInvalidation"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null],"sid":"CloudFrontInvalidation"}],"version":null},"sensitive_values":{"statement":[{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}},{"address":"data.aws_iam_policy_document.site_bucket_policy","mode":"data","type":"aws_iam_policy_document","name":"site_bucket_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetObject"],"condition":[{"test":"StringEquals","values":[null],"variable":"AWS:SourceArn"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["cloudfront.amazonaws.com"],"type":"Service"}],"resources":[null],"sid":"AllowCloudFrontServicePrincipalReadOnly"}],"version":null},"sensitive_values":{"statement":[{"actions":[false],"condition":[{"values":[false]}],"not_principals":[],"principals":[{"identifiers":[false]}],"resources":[false]}]}}]}},"resource_changes":[{"address":"data.aws_iam_policy_document.github_assume_role","mode":"data","type":"aws_iam_policy_document","name":"github_assume_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRoleWithWebIdentity"],"condition":[{"test":"StringEquals","values":["sts.amazonaws.com"],"variable":"token.actions.githubusercontent.com:aud"},{"test":"StringLike","values":["repo:ai-tf/ai-tf:ref:refs/heads/main"],"variable":"token.actions.githubusercontent.com:sub"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":[null],"type":"Federated"}],"resources":null,"sid":null}],"version":null},"after_unknown":{"id":true,"json":true,"minified_json":true,"statement":[{"actions":[false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[{"identifiers":[true]}]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false],"condition":[{"values":[false]},{"values":[false]}],"not_principals":[],"principals":[{"identifiers":[false]}]}]}},"action_reason":"read_because_config_unknown"},{"address":"data.aws_iam_policy_document.github_deploy","mode":"data","type":"aws_iam_policy_document","name":"github_deploy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetBucketLocation","s3:ListBucket"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null],"sid":"S3List"},{"actions":["s3:AbortMultipartUpload","s3:DeleteObject","s3:GetObject","s3:ListBucketMultipartUploads","s3:ListMultipartUploadParts","s3:PutObject"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null],"sid":"S3ObjectRW"},{"actions":["cloudfront:CreateInvalidation"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[null],"sid":"CloudFrontInvalidation"}],"version":null},"after_unknown":{"id":true,"json":true,"minified_json":true,"statement":[{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[true]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false,false,false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]}]}},"action_reason":"read_because_config_unknown"},{"address":"data.aws_iam_policy_document.site_bucket_policy","mode":"data","type":"aws_iam_policy_document","name":"site_bucket_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["s3:GetObject"],"condition":[{"test":"StringEquals","values":[null],"variable":"AWS:SourceArn"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[{"identifiers":["cloudfront.amazonaws.com"],"type":"Service"}],"resources":[null],"sid":"AllowCloudFrontServicePrincipalReadOnly"}],"version":null},"after_unknown":{"id":true,"json":true,"minified_json":true,"statement":[{"actions":[false],"condition":[{"values":[true]}],"not_principals":[],"principals":[{"identifiers":[false]}],"resources":[true]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false],"condition":[{"values":[false]}],"not_principals":[],"principals":[{"identifiers":[false]}],"resources":[false]}]}},"action_reason":"read_because_config_unknown"},{"address":"aws_cloudfront_cache_policy.caching_optimized","mode":"managed","type":"aws_cloudfront_cache_policy","name":"caching_optimized","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"comment":"Caching optimized for static site","default_ttl":86400,"max_ttl":31536000,"min_ttl":0,"name":"ai-tf-prod-caching-optimized","parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":"none","cookies":[]}],"enable_accept_encoding_brotli":true,"enable_accept_encoding_gzip":true,"headers_config":[{"header_behavior":"none","headers":[]}],"query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]}]},"after_unknown":{"arn":true,"etag":true,"id":true,"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[]}],"query_strings_config":[{"query_strings":[]}]}]},"before_sensitive":false,"after_sensitive":{"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[]}],"query_strings_config":[{"query_strings":[]}]}]}}},{"address":"aws_cloudfront_distribution.this","mode":"managed","type":"aws_cloudfront_distribution","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"aliases":null,"anycast_ip_list_id":null,"comment":"ai-tf-prod static site","connection_function_association":[],"custom_error_response":[{"error_caching_min_ttl":0,"error_code":403,"response_code":200,"response_page_path":"/index.html"},{"error_caching_min_ttl":0,"error_code":404,"response_code":200,"response_page_path":"/index.html"}],"default_cache_behavior":[{"allowed_methods":["GET","HEAD","OPTIONS"],"cached_methods":["GET","HEAD","OPTIONS"],"compress":true,"field_level_encryption_id":null,"forwarded_values":[],"function_association":[],"lambda_function_association":[],"min_ttl":0,"realtime_log_config_arn":null,"smooth_streaming":null,"viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","enabled":true,"http_version":"http2and3","is_ipv6_enabled":true,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"origin_path":"","origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"price_class":"PriceClass_100","restrictions":[{"geo_restriction":[{"restriction_type":"none"}]}],"retain_on_delete":false,"staging":false,"tags":null,"tags_all":{"Environment":"prod","ManagedBy":"terraform","Project":"ai-tf"},"viewer_certificate":[{"acm_certificate_arn":null,"cloudfront_default_certificate":true,"iam_certificate_id":null,"minimum_protocol_version":"TLSv1","ssl_support_method":null}],"viewer_mtls_config":[],"wait_for_deployment":true,"web_acl_id":null},"after_unknown":{"arn":true,"caller_reference":true,"connection_function_association":[],"continuous_deployment_policy_id":true,"custom_error_response":[{},{}],"default_cache_behavior":[{"allowed_methods":[false,false,false],"cache_policy_id":true,"cached_methods":[false,false,false],"default_ttl":true,"forwarded_values":[],"function_association":[],"grpc_config":true,"lambda_function_association":[],"max_ttl":true,"origin_request_policy_id":true,"response_headers_policy_id":true,"target_origin_id":true,"trusted_key_groups":true,"trusted_signers":true}],"domain_name":true,"etag":true,"hosted_zone_id":true,"id":true,"in_progress_validation_batches":true,"last_modified_time":true,"logging_config":[],"logging_v1_enabled":true,"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[],"domain_name":true,"origin_access_control_id":true,"origin_id":true,"origin_shield":[],"response_completion_timeout":true,"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":true}]}],"status":true,"tags_all":{},"trusted_key_groups":true,"trusted_signers":true,"viewer_certificate":[{}],"viewer_mtls_config":[]},"before_sensitive":false,"after_sensitive":{"connection_function_association":[],"custom_error_response":[{},{}],"default_cache_behavior":[{"allowed_methods":[false,false,false],"cached_methods":[false,false,false],"forwarded_values":[],"function_association":[],"grpc_config":[],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[],"vpc_origin_config":[]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags_all":{},"trusted_key_groups":[],"trusted_signers":[],"viewer_certificate":[{}],"viewer_mtls_config":[]}}},{"address":"aws_cloudfront_origin_access_control.oac","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"oac","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"ai-tf-prod-oac","origin_access_control_origin_type":"s3","signing_behavior":"always","signing_protocol":"sigv4"},"after_unknown":{"arn":true,"description":true,"etag":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_cloudfront_origin_request_policy.cors_s3","mode":"managed","type":"aws_cloudfront_origin_request_policy","name":"cors_s3","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"comment":"Origin request policy for S3 origin with CORS","cookies_config":[{"cookie_behavior":"none","cookies":[]}],"headers_config":[{"header_behavior":"whitelist","headers":[{"items":["Access-Control-Request-Headers","Access-Control-Request-Method","Origin"]}]}],"name":"ai-tf-prod-cors-s3-origin","query_strings_config":[{"query_string_behavior":"none","query_strings":[]}]},"after_unknown":{"arn":true,"cookies_config":[{"cookies":[]}],"etag":true,"headers_config":[{"headers":[{"items":[false,false,false]}]}],"id":true,"query_strings_config":[{"query_strings":[]}]},"before_sensitive":false,"after_sensitive":{"cookies_config":[{"cookies":[]}],"headers_config":[{"headers":[{"items":[false,false,false]}]}],"query_strings_config":[{"query_strings":[]}]}}},{"address":"aws_cloudfront_response_headers_policy.security","mode":"managed","type":"aws_cloudfront_response_headers_policy","name":"security","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"comment":null,"cors_config":[],"custom_headers_config":[],"name":"ai-tf-prod-security-headers","remove_headers_config":[],"security_headers_config":[{"content_security_policy":[],"content_type_options":[{"override":true}],"frame_options":[{"frame_option":"DENY","override":true}],"referrer_policy":[{"override":true,"referrer_policy":"strict-origin-when-cross-origin"}],"strict_transport_security":[{"access_control_max_age_sec":31536000,"include_subdomains":true,"override":true,"preload":true}],"xss_protection":[{"mode_block":true,"override":true,"protection":true,"report_uri":null}]}],"server_timing_headers_config":[]},"after_unknown":{"arn":true,"cors_config":[],"custom_headers_config":[],"etag":true,"id":true,"remove_headers_config":[],"security_headers_config":[{"content_security_policy":[],"content_type_options":[{}],"frame_options":[{}],"referrer_policy":[{}],"strict_transport_security":[{}],"xss_protection":[{}]}],"server_timing_headers_config":[]},"before_sensitive":false,"after_sensitive":{"cors_config":[],"custom_headers_config":[],"remove_headers_config":[],"security_headers_config":[{"content_security_policy":[],"content_type_options":[{}],"frame_options":[{}],"referrer_policy":[{}],"strict_transport_security":[{}],"xss_protection":[{}]}],"server_timing_headers_config":[]}}},{"address":"aws_iam_openid_connect_provider.github","mode":"managed","type":"aws_iam_openid_connect_provider","name":"github","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"client_id_list":["sts.amazonaws.com"],"tags":null,"tags_all":{"Environment":"prod","ManagedBy":"terraform","Project":"ai-tf"},"thumbprint_list":["6938fd4d98bab03faadb97b34396831e3780aea1"],"url":"https://token.actions.githubusercontent.com"},"after_unknown":{"arn":true,"client_id_list":[false],"id":true,"tags_all":{},"thumbprint_list":[false]},"before_sensitive":false,"after_sensitive":{"client_id_list":[false],"tags_all":{},"thumbprint_list":[false]},"after_identity":{"arn":null}}},{"address":"aws_iam_policy.github_deploy","mode":"managed","type":"aws_iam_policy","name":"github_deploy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"delay_after_policy_creation_in_ms":null,"description":null,"name":"ai-tf-prod-github-deploy","path":"/","tags":null,"tags_all":{"Environment":"prod","ManagedBy":"terraform","Project":"ai-tf"}},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy":true,"policy_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_iam_role.github_deploy","mode":"managed","type":"aws_iam_role","name":"github_deploy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ai-tf-prod-github-deploy","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"Environment":"prod","ManagedBy":"terraform","Project":"ai-tf"}},"after_unknown":{"arn":true,"assume_role_policy":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"after_identity":{"account_id":null,"name":null}}},{"address":"aws_iam_role_policy_attachment.github_deploy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"github_deploy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"ai-tf-prod-github-deploy"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_s3_bucket.site","mode":"managed","type":"aws_s3_bucket","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"force_destroy":false,"region":"eu-central-1","tags":null,"tags_all":{"Environment":"prod","ManagedBy":"terraform","Project":"ai-tf"},"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_region":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":{},"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]},"after_identity":{"account_id":null,"bucket":null,"region":null}}},{"address":"aws_s3_bucket_lifecycle_configuration.site","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"eu-central-1","rule":[{"abort_incomplete_multipart_upload":[{"days_after_initiation":7}],"expiration":[],"filter":[],"id":"abort-multipart","noncurrent_version_expiration":[],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"after_unknown":{"bucket":true,"expected_bucket_owner":true,"id":true,"rule":[{"abort_incomplete_multipart_upload":[{}],"expiration":[],"filter":[],"noncurrent_version_expiration":[],"noncurrent_version_transition":[],"transition":[]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"abort_incomplete_multipart_upload":[{}],"expiration":[],"filter":[],"noncurrent_version_expiration":[],"noncurrent_version_transition":[],"transition":[]}]}}},{"address":"aws_s3_bucket_ownership_controls.site","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"eu-central-1","rule":[{"object_ownership":"BucketOwnerEnforced"}]},"after_unknown":{"bucket":true,"id":true,"rule":[{}]},"before_sensitive":false,"after_sensitive":{"rule":[{}]},"after_identity":{"account_id":null,"bucket":null,"region":null}}},{"address":"aws_s3_bucket_policy.site","mode":"managed","type":"aws_s3_bucket_policy","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"region":"eu-central-1"},"after_unknown":{"bucket":true,"id":true,"policy":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"bucket":null,"region":null}}},{"address":"aws_s3_bucket_public_access_block.site","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_public_acls":true,"block_public_policy":true,"ignore_public_acls":true,"region":"eu-central-1","restrict_public_buckets":true,"skip_destroy":null},"after_unknown":{"bucket":true,"id":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"bucket":null,"region":null}}},{"address":"aws_s3_bucket_server_side_encryption_configuration.site","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"region":"eu-central-1","rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":"","sse_algorithm":"AES256"}],"blocked_encryption_types":[],"bucket_key_enabled":null}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{}],"blocked_encryption_types":[]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}],"blocked_encryption_types":[]}]},"after_identity":{"account_id":null,"bucket":null,"expected_bucket_owner":null,"region":null}}},{"address":"aws_s3_bucket_versioning.site","mode":"managed","type":"aws_s3_bucket_versioning","name":"site","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"region":"eu-central-1","versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]},"after_identity":{"account_id":null,"bucket":null,"expected_bucket_owner":null,"region":null}}}],"output_changes":{"cloudfront_distribution_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"cloudfront_domain_name":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"github_deploy_role_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"s3_bucket_name":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"site_url":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 5.0.0","expressions":{"default_tags":[{"tags":{"references":["var.project_name","var.environment","var.tags"]}}],"region":{"references":["var.aws_region"]}}},"aws.us_east_1":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","alias":"us_east_1","version_constraint":"\u003e= 5.0.0","expressions":{"default_tags":[{"tags":{"references":["var.project_name","var.environment","var.tags"]}}],"region":{"constant_value":"us-east-1"}}}},"root_module":{"outputs":{"cloudfront_distribution_id":{"expression":{"references":["aws_cloudfront_distribution.this.id","aws_cloudfront_distribution.this"]},"description":"CloudFront distribution id (use for invalidations)."},"cloudfront_domain_name":{"expression":{"references":["aws_cloudfront_distribution.this.domain_name","aws_cloudfront_distribution.this"]},"description":"CloudFront domain name."},"github_deploy_role_arn":{"expression":{"references":["aws_iam_role.github_deploy.arn","aws_iam_role.github_deploy"]},"description":"IAM role ARN to configure in GitHub Actions (assume-role)."},"s3_bucket_name":{"expression":{"references":["aws_s3_bucket.site.bucket","aws_s3_bucket.site"]},"description":"S3 bucket name for static site artifacts (origin)."},"site_url":{"expression":{"references":["var.custom_domain_name","var.custom_domain_name","var.custom_domain_name","aws_cloudfront_distribution.this.domain_name","aws_cloudfront_distribution.this"]},"description":"Primary site URL."}},"resources":[{"address":"aws_acm_certificate.this","mode":"managed","type":"aws_acm_certificate","name":"this","provider_config_key":"aws.us_east_1","expressions":{"domain_name":{"references":["var.custom_domain_name"]},"validation_method":{"constant_value":"DNS"}},"schema_version":0,"count_expression":{"references":["local.use_custom_domain","var.acm_certificate_arn"]}},{"address":"aws_acm_certificate_validation.this","mode":"managed","type":"aws_acm_certificate_validation","name":"this","provider_config_key":"aws.us_east_1","expressions":{"certificate_arn":{"references":["aws_acm_certificate.this[0].arn","aws_acm_certificate.this[0]","aws_acm_certificate.this"]},"validation_record_fqdns":{"references":["aws_route53_record.acm_validation[0].fqdn","aws_route53_record.acm_validation[0]","aws_route53_record.acm_validation"]}},"schema_version":0,"count_expression":{"references":["local.use_custom_domain","var.acm_certificate_arn"]}},{"address":"aws_cloudfront_cache_policy.caching_optimized","mode":"managed","type":"aws_cloudfront_cache_policy","name":"caching_optimized","provider_config_key":"aws","expressions":{"comment":{"constant_value":"Caching optimized for static site"},"default_ttl":{"constant_value":86400},"max_ttl":{"constant_value":31536000},"min_ttl":{"constant_value":0},"name":{"references":["local.name_prefix"]},"parameters_in_cache_key_and_forwarded_to_origin":[{"cookies_config":[{"cookie_behavior":{"constant_value":"none"}}],"enable_accept_encoding_brotli":{"constant_value":true},"enable_accept_encoding_gzip":{"constant_value":true},"headers_config":[{"header_behavior":{"constant_value":"none"}}],"query_strings_config":[{"query_string_behavior":{"constant_value":"none"}}]}]},"schema_version":0},{"address":"aws_cloudfront_distribution.this","mode":"managed","type":"aws_cloudfront_distribution","name":"this","provider_config_key":"aws","expressions":{"aliases":{"references":["local.use_custom_domain","var.custom_domain_name"]},"comment":{"references":["local.name_prefix"]},"default_cache_behavior":[{"allowed_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"cache_policy_id":{"references":["aws_cloudfront_cache_policy.caching_optimized.id","aws_cloudfront_cache_policy.caching_optimized"]},"cached_methods":{"constant_value":["GET","HEAD","OPTIONS"]},"compress":{"constant_value":true},"origin_request_policy_id":{"references":["aws_cloudfront_origin_request_policy.cors_s3.id","aws_cloudfront_origin_request_policy.cors_s3"]},"response_headers_policy_id":{"references":["aws_cloudfront_response_headers_policy.security.id","aws_cloudfront_response_headers_policy.security"]},"target_origin_id":{"references":["aws_s3_bucket.site.id","aws_s3_bucket.site"]},"viewer_protocol_policy":{"constant_value":"redirect-to-https"}}],"default_root_object":{"references":["var.index_document"]},"enabled":{"constant_value":true},"http_version":{"constant_value":"http2and3"},"is_ipv6_enabled":{"constant_value":true},"origin":[{"domain_name":{"references":["aws_s3_bucket.site.bucket_regional_domain_name","aws_s3_bucket.site"]},"origin_access_control_id":{"references":["aws_cloudfront_origin_access_control.oac.id","aws_cloudfront_origin_access_control.oac"]},"origin_id":{"references":["aws_s3_bucket.site.id","aws_s3_bucket.site"]}}],"price_class":{"constant_value":"PriceClass_100"},"restrictions":[{"geo_restriction":[{"restriction_type":{"constant_value":"none"}}]}],"viewer_certificate":[{"acm_certificate_arn":{"references":["local.use_custom_domain","local.viewer_certificate_arn"]},"cloudfront_default_certificate":{"references":["local.use_custom_domain"]},"minimum_protocol_version":{"references":["local.use_custom_domain"]},"ssl_support_method":{"references":["local.use_custom_domain"]}}]},"schema_version":1,"depends_on":["aws_s3_bucket_public_access_block.site"]},{"address":"aws_cloudfront_origin_access_control.oac","mode":"managed","type":"aws_cloudfront_origin_access_control","name":"oac","provider_config_key":"aws","expressions":{"description":{"references":["aws_s3_bucket.site.bucket","aws_s3_bucket.site"]},"name":{"references":["local.name_prefix"]},"origin_access_control_origin_type":{"constant_value":"s3"},"signing_behavior":{"constant_value":"always"},"signing_protocol":{"constant_value":"sigv4"}},"schema_version":0},{"address":"aws_cloudfront_origin_request_policy.cors_s3","mode":"managed","type":"aws_cloudfront_origin_request_policy","name":"cors_s3","provider_config_key":"aws","expressions":{"comment":{"constant_value":"Origin request policy for S3 origin with CORS"},"cookies_config":[{"cookie_behavior":{"constant_value":"none"}}],"headers_config":[{"header_behavior":{"constant_value":"whitelist"},"headers":[{"items":{"constant_value":["Origin","Access-Control-Request-Method","Access-Control-Request-Headers"]}}]}],"name":{"references":["local.name_prefix"]},"query_strings_config":[{"query_string_behavior":{"constant_value":"none"}}]},"schema_version":0},{"address":"aws_cloudfront_response_headers_policy.security","mode":"managed","type":"aws_cloudfront_response_headers_policy","name":"security","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"security_headers_config":[{"content_type_options":[{"override":{"constant_value":true}}],"frame_options":[{"frame_option":{"constant_value":"DENY"},"override":{"constant_value":true}}],"referrer_policy":[{"override":{"constant_value":true},"referrer_policy":{"constant_value":"strict-origin-when-cross-origin"}}],"strict_transport_security":[{"access_control_max_age_sec":{"constant_value":31536000},"include_subdomains":{"constant_value":true},"override":{"constant_value":true},"preload":{"constant_value":true}}],"xss_protection":[{"mode_block":{"constant_value":true},"override":{"constant_value":true},"protection":{"constant_value":true}}]}]},"schema_version":0},{"address":"aws_iam_openid_connect_provider.github","mode":"managed","type":"aws_iam_openid_connect_provider","name":"github","provider_config_key":"aws","expressions":{"client_id_list":{"constant_value":["sts.amazonaws.com"]},"thumbprint_list":{"constant_value":["6938fd4d98bab03faadb97b34396831e3780aea1"]},"url":{"constant_value":"https://token.actions.githubusercontent.com"}},"schema_version":0},{"address":"aws_iam_policy.github_deploy","mode":"managed","type":"aws_iam_policy","name":"github_deploy","provider_config_key":"aws","expressions":{"name":{"references":["local.name_prefix"]},"policy":{"references":["data.aws_iam_policy_document.github_deploy.json","data.aws_iam_policy_document.github_deploy"]}},"schema_version":0},{"address":"aws_iam_role.github_deploy","mode":"managed","type":"aws_iam_role","name":"github_deploy","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.github_assume_role.json","data.aws_iam_policy_document.github_assume_role"]},"name":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.github_deploy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"github_deploy","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.github_deploy.arn","aws_iam_policy.github_deploy"]},"role":{"references":["aws_iam_role.github_deploy.name","aws_iam_role.github_deploy"]}},"schema_version":0},{"address":"aws_route53_record.acm_validation","mode":"managed","type":"aws_route53_record","name":"acm_validation","provider_config_key":"aws","expressions":{"name":{"references":["local.acm_dvo.resource_record_name","local.acm_dvo"]},"records":{"references":["local.acm_dvo.resource_record_value","local.acm_dvo"]},"ttl":{"constant_value":60},"type":{"references":["local.acm_dvo.resource_record_type","local.acm_dvo"]},"zone_id":{"references":["var.route53_zone_id"]}},"schema_version":2,"count_expression":{"references":["local.use_custom_domain","var.acm_certificate_arn"]}},{"address":"aws_route53_record.site_a","mode":"managed","type":"aws_route53_record","name":"site_a","provider_config_key":"aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":false},"name":{"references":["aws_cloudfront_distribution.this.domain_name","aws_cloudfront_distribution.this"]},"zone_id":{"references":["aws_cloudfront_distribution.this.hosted_zone_id","aws_cloudfront_distribution.this"]}}],"name":{"references":["var.custom_domain_name"]},"type":{"constant_value":"A"},"zone_id":{"references":["var.route53_zone_id"]}},"schema_version":2,"count_expression":{"references":["local.use_custom_domain"]}},{"address":"aws_route53_record.site_aaaa","mode":"managed","type":"aws_route53_record","name":"site_aaaa","provider_config_key":"aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":false},"name":{"references":["aws_cloudfront_distribution.this.domain_name","aws_cloudfront_distribution.this"]},"zone_id":{"references":["aws_cloudfront_distribution.this.hosted_zone_id","aws_cloudfront_distribution.this"]}}],"name":{"references":["var.custom_domain_name"]},"type":{"constant_value":"AAAA"},"zone_id":{"references":["var.route53_zone_id"]}},"schema_version":2,"count_expression":{"references":["local.use_custom_domain"]}},{"address":"aws_s3_bucket.cf_logs","mode":"managed","type":"aws_s3_bucket","name":"cf_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["var.cloudfront_log_bucket_name"]},"force_destroy":{"constant_value":false}},"schema_version":0,"count_expression":{"references":["var.enable_cloudfront_logs"]}},{"address":"aws_s3_bucket.site","mode":"managed","type":"aws_s3_bucket","name":"site","provider_config_key":"aws","expressions":{"bucket":{"references":["var.bucket_name"]},"force_destroy":{"constant_value":false}},"schema_version":0},{"address":"aws_s3_bucket_lifecycle_configuration.site","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"site","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.site.id","aws_s3_bucket.site"]},"rule":[{"abort_incomplete_multipart_upload":[{"days_after_initiation":{"constant_value":7}}],"id":{"constant_value":"abort-multipart"},"status":{"constant_value":"Enabled"}}]},"schema_version":1},{"address":"aws_s3_bucket_ownership_controls.cf_logs","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"cf_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.cf_logs[0].id","aws_s3_bucket.cf_logs[0]","aws_s3_bucket.cf_logs"]},"rule":[{"object_ownership":{"constant_value":"BucketOwnerEnforced"}}]},"schema_version":0,"count_expression":{"references":["var.enable_cloudfront_logs"]}},{"address":"aws_s3_bucket_ownership_controls.site","mode":"managed","type":"aws_s3_bucket_ownership_controls","name":"site","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.site.id","aws_s3_bucket.site"]},"rule":[{"object_ownership":{"constant_value":"BucketOwnerEnforced"}}]},"schema_version":0},{"address":"aws_s3_bucket_policy.site","mode":"managed","type":"aws_s3_bucket_policy","name":"site","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.site.id","aws_s3_bucket.site"]},"policy":{"references":["data.aws_iam_policy_document.site_bucket_policy.json","data.aws_iam_policy_document.site_bucket_policy"]}},"schema_version":0,"depends_on":["aws_s3_bucket_public_access_block.site"]},{"address":"aws_s3_bucket_public_access_block.cf_logs","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"cf_logs","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.cf_logs[0].id","aws_s3_bucket.cf_logs[0]","aws_s3_bucket.cf_logs"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["var.enable_cloudfront_logs"]}},{"address":"aws_s3_bucket_public_access_block.site","mode":"managed","type":"aws_s3_bucket_public_access_block","name":"site","provider_config_key":"aws","expressions":{"block_public_acls":{"constant_value":true},"block_public_policy":{"constant_value":true},"bucket":{"references":["aws_s3_bucket.site.id","aws_s3_bucket.site"]},"ignore_public_acls":{"constant_value":true},"restrict_public_buckets":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.cf_logs","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"cf_logs","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.cf_logs[0].id","aws_s3_bucket.cf_logs[0]","aws_s3_bucket.cf_logs"]},"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]},"schema_version":0,"count_expression":{"references":["var.enable_cloudfront_logs"]}},{"address":"aws_s3_bucket_server_side_encryption_configuration.site","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"site","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.site.id","aws_s3_bucket.site"]},"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":{"constant_value":"AES256"}}]}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.site","mode":"managed","type":"aws_s3_bucket_versioning","name":"site","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.site.id","aws_s3_bucket.site"]},"versioning_configuration":[{"status":{"references":["var.enable_versioning"]}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.github_assume_role","mode":"data","type":"aws_iam_policy_document","name":"github_assume_role","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRoleWithWebIdentity"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"constant_value":["sts.amazonaws.com"]},"variable":{"constant_value":"token.actions.githubusercontent.com:aud"}},{"test":{"constant_value":"StringLike"},"values":{"references":["local.github_sub"]},"variable":{"constant_value":"token.actions.githubusercontent.com:sub"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"references":["aws_iam_openid_connect_provider.github.arn","aws_iam_openid_connect_provider.github"]},"type":{"constant_value":"Federated"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.github_deploy","mode":"data","type":"aws_iam_policy_document","name":"github_deploy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:ListBucket","s3:GetBucketLocation"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_s3_bucket.site.arn","aws_s3_bucket.site"]},"sid":{"constant_value":"S3List"}},{"actions":{"constant_value":["s3:PutObject","s3:DeleteObject","s3:GetObject","s3:AbortMultipartUpload","s3:ListBucketMultipartUploads","s3:ListMultipartUploadParts"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_s3_bucket.site.arn","aws_s3_bucket.site"]},"sid":{"constant_value":"S3ObjectRW"}},{"actions":{"constant_value":["cloudfront:CreateInvalidation"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_cloudfront_distribution.this.arn","aws_cloudfront_distribution.this"]},"sid":{"constant_value":"CloudFrontInvalidation"}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.site_bucket_policy","mode":"data","type":"aws_iam_policy_document","name":"site_bucket_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["s3:GetObject"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"references":["aws_cloudfront_distribution.this.arn","aws_cloudfront_distribution.this"]},"variable":{"constant_value":"AWS:SourceArn"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["cloudfront.amazonaws.com"]},"type":{"constant_value":"Service"}}],"resources":{"references":["aws_s3_bucket.site.arn","aws_s3_bucket.site"]},"sid":{"constant_value":"AllowCloudFrontServicePrincipalReadOnly"}}]},"schema_version":0}],"variables":{"acm_certificate_arn":{"default":null,"description":"Optional ACM certificate ARN in us-east-1 for CloudFront. If null and custom_domain_name is set, a DNS-validated cert will be created."},"aws_region":{"default":"eu-central-1","description":"AWS region for primary resources (S3, IAM). CloudFront is global."},"bucket_name":{"default":null,"description":"Optional explicit S3 bucket name. If null, a unique name is generated."},"cloudfront_log_bucket_name":{"default":null,"description":"Optional explicit name for the CloudFront logs bucket (only used if enable_cloudfront_logs=true)."},"custom_domain_name":{"default":null,"description":"Optional custom domain (e.g., 'www.example.com') for CloudFront. If null, CloudFront default domain is used."},"enable_cloudfront_logs":{"default":false,"description":"Enable CloudFront access logs to a dedicated S3 bucket."},"enable_versioning":{"default":true,"description":"Enable S3 versioning on the site bucket."},"environment":{"default":"prod","description":"Environment name (e.g., dev, staging, prod)."},"error_document":{"default":"index.html","description":"Error document (used only if you enable S3 website hosting; not used with OAC)."},"github_environment":{"default":null,"description":"Optional GitHub Actions environment name to restrict OIDC (sub claim). If null, not enforced."},"github_org":{"description":"GitHub organization or user that owns the repository."},"github_ref":{"default":"refs/heads/main","description":"GitHub ref condition for OIDC trust, e.g. 'refs/heads/main' or 'refs/tags/*'."},"github_repo":{"description":"GitHub repository name (without org)."},"index_document":{"default":"index.html","description":"Default root object served by CloudFront."},"project_name":{"description":"Project/name prefix used for resource naming."},"route53_zone_id":{"default":null,"description":"Optional Route53 hosted zone id for creating alias records. Required if custom_domain_name is set."},"spa_fallback":{"default":true,"description":"If true, map 403/404 to index.html to support SPA routing."},"tags":{"default":{},"description":"Additional tags to apply to all resources."}}}},"relevant_attributes":[{"resource":"aws_s3_bucket.cf_logs[0]","attribute":["bucket_domain_name"]},{"resource":"data.aws_iam_policy_document.github_deploy","attribute":["json"]},{"resource":"aws_s3_bucket.site","attribute":["arn"]},{"resource":"aws_cloudfront_distribution.this","attribute":["id"]},{"resource":"data.aws_iam_policy_document.site_bucket_policy","attribute":["json"]},{"resource":"aws_cloudfront_response_headers_policy.security","attribute":["id"]},{"resource":"aws_s3_bucket.site","attribute":["bucket"]},{"resource":"aws_iam_role.github_deploy","attribute":["name"]},{"resource":"aws_acm_certificate.this[0]","attribute":["arn"]},{"resource":"aws_acm_certificate_validation.this[0]","attribute":["certificate_arn"]},{"resource":"aws_cloudfront_cache_policy.caching_optimized","attribute":["id"]},{"resource":"aws_s3_bucket.site","attribute":["bucket_regional_domain_name"]},{"resource":"aws_cloudfront_origin_access_control.oac","attribute":["id"]},{"resource":"aws_iam_openid_connect_provider.github","attribute":["arn"]},{"resource":"aws_cloudfront_distribution.this","attribute":["arn"]},{"resource":"aws_cloudfront_origin_request_policy.cors_s3","attribute":["id"]},{"resource":"aws_iam_policy.github_deploy","attribute":["arn"]},{"resource":"data.aws_iam_policy_document.github_assume_role","attribute":["json"]},{"resource":"aws_cloudfront_distribution.this","attribute":["domain_name"]},{"resource":"aws_iam_role.github_deploy","attribute":["arn"]},{"resource":"aws_s3_bucket.site","attribute":["id"]}],"timestamp":"2026-01-27T06:50:06Z","applyable":true,"complete":true,"errored":false}
