{
  "aws_architecture_description": "### Target architecture (lean, secure, scalable) — Dash/Flask on Elastic Beanstalk\n\n#### 1) Networking & edge\n- Deploy into a dedicated **VPC** spanning **2 Availability Zones** for high availability.\n- Create **public subnets** (for the load balancer) and **private subnets** (for EC2 instances).\n- The Elastic Beanstalk (EB) environment is configured as a **load-balanced, auto-scaling web environment**.\n- Use an **Application Load Balancer (ALB)** as the public entry point:\n  - **HTTPS (443)** termination at the ALB using an **ACM** certificate.\n  - Redirect **HTTP (80) → HTTPS (443)**.\n  - Forward traffic from ALB target group to the EB EC2 instances over HTTP.\n\n#### 2) Application runtime (Elastic Beanstalk)\n- Use **Elastic Beanstalk Python platform** to run the WSGI app exposed as `application = app.server` in `application.py`.\n- EB provisions and manages:\n  - An **Auto Scaling Group** of EC2 instances across private subnets.\n  - A **Launch Template/Configuration** (EB-managed) with the correct AMI/platform.\n  - Health checks and rolling deployments.\n- Configure EB environment variables for configuration (API endpoints, feature flags, etc.).\n- If the app needs to call AWS APIs at runtime (hinted by `botocore`), attach a **least-privilege instance profile** to the EB instances.\n\n#### 3) Outbound internet access\n- Because instances are in **private subnets**, provide outbound access via:\n  - **NAT Gateway** in each AZ (or one NAT for cost-saving with reduced AZ resilience).\n- This supports `requests` calls to external APIs and any AWS public endpoints.\n\n#### 4) Observability & operations\n- Send application and platform logs to **CloudWatch Logs** (EB can stream logs).\n- Use **CloudWatch metrics/alarms** for:\n  - ALB 5XX, target response time, unhealthy hosts.\n  - EC2 CPU/memory (memory via CloudWatch Agent if needed), disk.\n- Enable **AWS X-Ray** only if you need request tracing (optional; keep lean by default).\n\n#### 5) Security baseline\n- **Security Groups**:\n  - ALB SG: allow inbound 443 (and optionally 80 for redirect) from the internet; egress to instance SG.\n  - Instance SG: allow inbound only from ALB SG on the app port; egress to NAT/VPC endpoints.\n- **IAM**:\n  - EB service role for environment management.\n  - EC2 instance role (instance profile) for CloudWatch Logs and any required AWS API access.\n- **Secrets**:\n  - Store sensitive config in **SSM Parameter Store (SecureString)** or **Secrets Manager**; inject via EB environment configuration.\n\n#### 6) Deployment workflow (Terraform + EB)\n- Use **Terraform** to provision the foundational infrastructure (VPC, subnets, NAT, security groups, ACM, DNS, S3 buckets, IAM roles).\n- Deploy application versions to EB via:\n  - EB CLI / CI pipeline uploading an application bundle to an **S3 artifact bucket**, then creating a new EB application version and updating the environment.\n\n#### 7) DNS\n- Use **Route 53** to map a friendly domain (e.g., `dash.example.com`) to the ALB via an Alias record.\n\nNotes / assumptions:\n- No database, cache, or persistent storage is evident from the snapshot; the architecture keeps state out of the instances.\n- If the app later needs persistence (uploads, datasets, caching), add S3/EFS/ElastiCache/RDS as required.\n",
  "aws_resources": [
    "VPC",
    "Internet Gateway (IGW)",
    "Public Subnets (2, across AZs)",
    "Private Subnets (2, across AZs)",
    "Route Tables (public and private)",
    "NAT Gateway (1–2)",
    "Elastic IPs for NAT Gateway(s)",
    "Security Groups (ALB SG, EC2/EB instances SG)",
    "Network ACLs (optional; default acceptable for lean setup)",
    "VPC Endpoints (optional; e.g., S3 Gateway Endpoint, CloudWatch Logs/SSM Interface Endpoints if you want to reduce NAT usage)",
    "Elastic Beanstalk Application",
    "Elastic Beanstalk Environment (Load-balanced, Auto Scaling)",
    "Application Load Balancer (ALB) (EB-managed)",
    "ALB Target Group (EB-managed)",
    "ALB Listeners (443 HTTPS, optional 80 redirect)",
    "Auto Scaling Group (EB-managed)",
    "EC2 Instances (EB-managed)",
    "EC2 Instance Profile (IAM) for EB instances",
    "IAM Role for EB instances (least privilege)",
    "IAM Service Role for Elastic Beanstalk",
    "S3 Bucket for Elastic Beanstalk application versions/artifacts",
    "S3 Bucket for EB logs (optional; if you enable log rotation to S3)",
    "AWS Certificate Manager (ACM) Certificate",
    "Route 53 Hosted Zone (if not existing)",
    "Route 53 Record (ALIAS to ALB)",
    "CloudWatch Log Groups (application/platform logs)",
    "CloudWatch Alarms (ALB/EC2/ASG health and error rates)",
    "AWS Systems Manager Parameter Store or AWS Secrets Manager (for secrets/config)",
    "AWS CloudTrail (account-level; recommended for audit)"
  ]
}