{"format_version":"1.2","terraform_version":"1.13.5","variables":{"app_name":{"value":"natanaelvich-api"},"aws_region":{"value":"us-east-2"},"container_port":{"value":3000},"cpu":{"value":1},"ecr_repository_name":{"value":"natanaelvich-ci"},"image_tag":{"value":"latest"},"memory":{"value":2}},"planned_values":{"outputs":{"apprunner_ecr_access_role_arn":{"sensitive":false},"apprunner_service_url":{"sensitive":false},"ecr_repository_url":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_apprunner_service.app","mode":"managed","type":"aws_apprunner_service","name":"app","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[],"health_check_configuration":[{"healthy_threshold":1,"interval":10,"path":"/","protocol":"TCP","timeout":5,"unhealthy_threshold":5}],"instance_configuration":[{"cpu":"1 vCPU","instance_role_arn":null,"memory":"2 GB"}],"observability_configuration":[],"region":"us-east-2","service_name":"natanaelvich-api","source_configuration":[{"authentication_configuration":[{"connection_arn":null}],"auto_deployments_enabled":true,"code_repository":[],"image_repository":[{"image_configuration":[{"port":"3000","runtime_environment_secrets":null,"runtime_environment_variables":null,"start_command":null}],"image_repository_type":"ECR"}]}],"tags":null,"tags_all":{"ManagedBy":"terraform","Project":"natanaelvich-api"}},"sensitive_values":{"encryption_configuration":[],"health_check_configuration":[{}],"instance_configuration":[{}],"network_configuration":[],"observability_configuration":[],"source_configuration":[{"authentication_configuration":[{}],"code_repository":[],"image_repository":[{"image_configuration":[{}]}]}],"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_ecr_repository.app","mode":"managed","type":"aws_ecr_repository","name":"app","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"encryption_configuration":[],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","image_tag_mutability_exclusion_filter":[],"name":"natanaelvich-ci","region":"us-east-2","tags":null,"tags_all":{"ManagedBy":"terraform","Project":"natanaelvich-api"},"timeouts":null},"sensitive_values":{"encryption_configuration":[],"image_scanning_configuration":[{}],"image_tag_mutability_exclusion_filter":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null,"region":null}},{"address":"aws_iam_role.apprunner_ecr_access","mode":"managed","type":"aws_iam_role","name":"apprunner_ecr_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"build.apprunner.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"natanaelvich-api-apprunner-ecr-access","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"ManagedBy":"terraform","Project":"natanaelvich-api"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null}},{"address":"aws_iam_role_policy_attachment.apprunner_ecr_access","mode":"managed","type":"aws_iam_role_policy_attachment","name":"apprunner_ecr_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSAppRunnerServicePolicyForECRAccess","role":"natanaelvich-api-apprunner-ecr-access"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}}]}},"resource_changes":[{"address":"aws_apprunner_service.app","mode":"managed","type":"aws_apprunner_service","name":"app","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[],"health_check_configuration":[{"healthy_threshold":1,"interval":10,"path":"/","protocol":"TCP","timeout":5,"unhealthy_threshold":5}],"instance_configuration":[{"cpu":"1 vCPU","instance_role_arn":null,"memory":"2 GB"}],"observability_configuration":[],"region":"us-east-2","service_name":"natanaelvich-api","source_configuration":[{"authentication_configuration":[{"connection_arn":null}],"auto_deployments_enabled":true,"code_repository":[],"image_repository":[{"image_configuration":[{"port":"3000","runtime_environment_secrets":null,"runtime_environment_variables":null,"start_command":null}],"image_repository_type":"ECR"}]}],"tags":null,"tags_all":{"ManagedBy":"terraform","Project":"natanaelvich-api"}},"after_unknown":{"arn":true,"auto_scaling_configuration_arn":true,"encryption_configuration":[],"health_check_configuration":[{}],"id":true,"instance_configuration":[{}],"network_configuration":true,"observability_configuration":[],"service_id":true,"service_url":true,"source_configuration":[{"authentication_configuration":[{"access_role_arn":true}],"code_repository":[],"image_repository":[{"image_configuration":[{}],"image_identifier":true}]}],"status":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"health_check_configuration":[{}],"instance_configuration":[{}],"network_configuration":[],"observability_configuration":[],"source_configuration":[{"authentication_configuration":[{}],"code_repository":[],"image_repository":[{"image_configuration":[{}]}]}],"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_ecr_repository.app","mode":"managed","type":"aws_ecr_repository","name":"app","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_configuration":[],"force_delete":null,"image_scanning_configuration":[{"scan_on_push":true}],"image_tag_mutability":"MUTABLE","image_tag_mutability_exclusion_filter":[],"name":"natanaelvich-ci","region":"us-east-2","tags":null,"tags_all":{"ManagedBy":"terraform","Project":"natanaelvich-api"},"timeouts":null},"after_unknown":{"arn":true,"encryption_configuration":[],"id":true,"image_scanning_configuration":[{}],"image_tag_mutability_exclusion_filter":[],"registry_id":true,"repository_url":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"image_scanning_configuration":[{}],"image_tag_mutability_exclusion_filter":[],"tags_all":{}},"after_identity":{"account_id":null,"name":null,"region":null}}},{"address":"aws_iam_role.apprunner_ecr_access","mode":"managed","type":"aws_iam_role","name":"apprunner_ecr_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"build.apprunner.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"natanaelvich-api-apprunner-ecr-access","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"ManagedBy":"terraform","Project":"natanaelvich-api"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"after_identity":{"account_id":null,"name":null}}},{"address":"aws_iam_role_policy_attachment.apprunner_ecr_access","mode":"managed","type":"aws_iam_role_policy_attachment","name":"apprunner_ecr_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSAppRunnerServicePolicyForECRAccess","role":"natanaelvich-api-apprunner-ecr-access"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}}],"output_changes":{"apprunner_ecr_access_role_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"apprunner_service_url":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ecr_repository_url":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.5","values":{"root_module":{"resources":[{"address":"data.aws_iam_policy_document.apprunner_ecr_assume","mode":"data","type":"aws_iam_policy_document","name":"apprunner_ecr_assume","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3710474894","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"build.apprunner.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"build.apprunner.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["build.apprunner.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 5.0.0","expressions":{"default_tags":[{"tags":{"references":["var.app_name"]}}],"region":{"references":["var.aws_region"]}}}},"root_module":{"outputs":{"apprunner_ecr_access_role_arn":{"expression":{"references":["aws_iam_role.apprunner_ecr_access.arn","aws_iam_role.apprunner_ecr_access"]},"description":"IAM role ARN used by App Runner to pull from ECR"},"apprunner_service_url":{"expression":{"references":["aws_apprunner_service.app.service_url","aws_apprunner_service.app"]},"description":"Public URL of the App Runner service"},"ecr_repository_url":{"expression":{"references":["aws_ecr_repository.app.repository_url","aws_ecr_repository.app"]},"description":"ECR repository URL to push the application image"}},"resources":[{"address":"aws_apprunner_service.app","mode":"managed","type":"aws_apprunner_service","name":"app","provider_config_key":"aws","expressions":{"health_check_configuration":[{"healthy_threshold":{"constant_value":1},"interval":{"constant_value":10},"protocol":{"constant_value":"TCP"},"timeout":{"constant_value":5},"unhealthy_threshold":{"constant_value":5}}],"instance_configuration":[{"cpu":{"references":["var.cpu"]},"memory":{"references":["var.memory"]}}],"service_name":{"references":["var.app_name"]},"source_configuration":[{"authentication_configuration":[{"access_role_arn":{"references":["aws_iam_role.apprunner_ecr_access.arn","aws_iam_role.apprunner_ecr_access"]}}],"auto_deployments_enabled":{"constant_value":true},"image_repository":[{"image_configuration":[{"port":{"references":["var.container_port"]}}],"image_identifier":{"references":["aws_ecr_repository.app.repository_url","aws_ecr_repository.app","var.image_tag"]},"image_repository_type":{"constant_value":"ECR"}}]}]},"schema_version":0},{"address":"aws_ecr_repository.app","mode":"managed","type":"aws_ecr_repository","name":"app","provider_config_key":"aws","expressions":{"image_scanning_configuration":[{"scan_on_push":{"constant_value":true}}],"image_tag_mutability":{"constant_value":"MUTABLE"},"name":{"references":["var.ecr_repository_name"]}},"schema_version":0},{"address":"aws_iam_role.apprunner_ecr_access","mode":"managed","type":"aws_iam_role","name":"apprunner_ecr_access","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.apprunner_ecr_assume.json","data.aws_iam_policy_document.apprunner_ecr_assume"]},"name":{"references":["local.name_prefix"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.apprunner_ecr_access","mode":"managed","type":"aws_iam_role_policy_attachment","name":"apprunner_ecr_access","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AWSAppRunnerServicePolicyForECRAccess"},"role":{"references":["aws_iam_role.apprunner_ecr_access.name","aws_iam_role.apprunner_ecr_access"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.apprunner_ecr_assume","mode":"data","type":"aws_iam_policy_document","name":"apprunner_ecr_assume","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["build.apprunner.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0}],"variables":{"app_name":{"default":"natanaelvich-api","description":"Application name used for naming/tagging"},"aws_region":{"default":"us-east-2","description":"AWS region to deploy into"},"container_port":{"default":3000,"description":"Port exposed by the container"},"cpu":{"default":1,"description":"App Runner CPU in vCPU units (allowed: 0.25, 0.5, 1, 2, 4)"},"ecr_repository_name":{"default":"natanaelvich-ci","description":"ECR repository name for the application image"},"image_tag":{"default":"latest","description":"Container image tag to deploy (e.g., 'latest' or a git SHA)"},"memory":{"default":2,"description":"App Runner memory in GB (allowed: 0.5, 1, 2, 3, 4, 6, 8, 10, 12)"}}}},"relevant_attributes":[{"resource":"data.aws_iam_policy_document.apprunner_ecr_assume","attribute":["json"]},{"resource":"aws_apprunner_service.app","attribute":["service_url"]},{"resource":"aws_ecr_repository.app","attribute":["repository_url"]},{"resource":"aws_iam_role.apprunner_ecr_access","attribute":["arn"]},{"resource":"aws_iam_role.apprunner_ecr_access","attribute":["name"]}],"checks":[{"address":{"kind":"var","name":"cpu","to_display":"var.cpu"},"status":"pass","instances":[{"address":{"to_display":"var.cpu"},"status":"pass"}]},{"address":{"kind":"var","name":"memory","to_display":"var.memory"},"status":"pass","instances":[{"address":{"to_display":"var.memory"},"status":"pass"}]}],"timestamp":"2026-01-27T15:32:05Z","applyable":true,"complete":true,"errored":false}
