{
  "aws_architecture_description": "### Target AWS architecture (prod/stage) for the LocalStack serverless stack\n\nYour repo emulates a simple **API Gateway (REST API) → Lambda** pattern locally. The closest lean AWS deployment keeps that same shape, adds secure networking/identity, and adds observability + CI/CD.\n\n#### 1) Request path\n1. **Client (developer/tester or real consumer)** calls an HTTPS endpoint.\n2. **Amazon API Gateway (REST API)** exposes resources/methods (e.g., `/products`) and uses **Lambda proxy integration** to forward the request to the backend Lambda.\n3. **AWS Lambda (Java)** runs the function code (deployed as either a ZIP containing the JAR + deps, or a container image if you later choose that route) and returns a response to API Gateway.\n\n#### 2) Security and access control\n- **TLS**: Use a **custom domain name** on API Gateway with an **ACM certificate** (Regional or edge-optimized depending on your needs). API Gateway custom domains require DNS mapping (Route 53 alias/CNAME). ([docs.aws.amazon.com](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-custom-domain-names.html?utm_source=openai))  \n- **Least privilege invocation**: Allow API Gateway to invoke the Lambda via **Lambda resource-based permission** (typical for Lambda proxy integration) and/or an IAM role model where appropriate. ([docs.aws.amazon.com](https://docs.aws.amazon.com/apigateway/latest/developerguide/permissions.html?utm_source=openai))\n- **AuthN/Z (choose one, keep lean)**:\n  - For internal/dev: IAM auth (SigV4) or a simple API key + usage plan.\n  - For external users: a Cognito authorizer (optional; only add if you need user auth).\n\n#### 3) Networking (only if needed)\n- If the Lambda must reach private resources (RDS, internal services), place it in a **VPC** with **private subnets** and add **VPC endpoints** (S3, CloudWatch Logs, etc.) or NAT as required.\n- If not needed, keep Lambda **out of VPC** (simpler, often better performance/cost).\n\n#### 4) Observability\n- **Lambda logs** go to **CloudWatch Logs** by default.\n- Enable **API Gateway access logs + execution logs** to CloudWatch Logs; avoid “data tracing” in production to reduce risk of logging sensitive payloads. ([docs.aws.amazon.com](https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-logging.html?utm_source=openai))\n- Add **CloudWatch Alarms** (5XX, latency, Lambda errors/throttles) and optionally **X-Ray tracing**.\n\n#### 5) Deployment workflow\n- Replace `tflocal` with standard **Terraform AWS provider** (or AWS SAM/CDK if preferred).\n- CI/CD (lean option):\n  - Source in GitHub → build/package Lambda artifact → `terraform apply` via a pipeline role.\n  - Store build artifacts in an S3 “artifacts” bucket (or use container images in ECR if you later move to that).\n\n---\n\n## AWS resources to provision\n\n### Core serverless\n- **Amazon API Gateway**\n  - REST API\n  - Resources/Methods\n  - Stage (e.g., `dev`, `staging`, `prod`)\n  - Deployment\n  - (Optional) Usage Plan + API Key\n- **AWS Lambda**\n  - Lambda Function (Java runtime)\n  - Lambda Alias (e.g., `live`) and Versions (recommended for safe deploys)\n  - Lambda Permission allowing API Gateway invoke\n\n### Identity & access management\n- **IAM Role** for Lambda execution (basic execution + least-privilege extras)\n- **IAM Policies** attached to Lambda role (only what the function needs)\n- (Optional) **IAM Role/Policy** for CI/CD pipeline to deploy (Terraform apply)\n\n### Logging/monitoring\n- **Amazon CloudWatch Logs**\n  - Log Group for Lambda\n  - Log Group for API Gateway access logs\n- **Amazon CloudWatch**\n  - Alarms (Lambda Errors/Throttles/Duration; API Gateway 5XX/Latency)\n  - Dashboard (optional)\n- (Optional) **AWS X-Ray** tracing (API Gateway + Lambda)\n\n### DNS + TLS (recommended for real environments)\n- **AWS Certificate Manager (ACM)** certificate for `api.yourdomain.com` ([docs.aws.amazon.com](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-custom-domain-names.html?utm_source=openai))\n- **API Gateway Custom Domain Name** (Regional or edge-optimized)\n- **Route 53 Hosted Zone** (if using Route 53)\n- **Route 53 Record** (A/AAAA alias or CNAME) pointing the custom domain to API Gateway ([docs.aws.amazon.com](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-regional-api-custom-domain-create.html?utm_source=openai))\n\n### Networking (only if Lambda needs VPC access)\n- **VPC**\n- **Subnets** (at least 2 AZs; private subnets for Lambda)\n- **Security Groups** (Lambda SG; DB SG if applicable)\n- **Route Tables**\n- (Optional) **NAT Gateway** + Elastic IP (only if private subnets need outbound internet)\n- (Optional) **VPC Endpoints** (Interface/Gateway endpoints as needed)\n\n### Artifact storage / CI/CD (lean, optional but common)\n- **S3 bucket** for deployment artifacts (Terraform state and/or Lambda packages)\n- (Optional) **DynamoDB table** for Terraform state locking\n- (Optional) **KMS key** for encrypting S3 artifacts/state (if you require CMK control)\n\nIf you share (a) the Lambda handler signature / runtime expectations and (b) whether the function needs any AWS services (DynamoDB/S3/etc.), I can tighten the IAM policy set and decide whether a VPC is necessary.",
  "aws_resources": [
    "Amazon API Gateway (REST API)",
    "API Gateway Resources/Methods",
    "API Gateway Deployment",
    "API Gateway Stage",
    "API Gateway Custom Domain Name (optional)",
    "API Gateway Usage Plan + API Key (optional)",
    "AWS Lambda Function (Java)",
    "Lambda Version(s)",
    "Lambda Alias",
    "Lambda Resource-based Permission for API Gateway invoke",
    "IAM Role for Lambda execution",
    "IAM Policies for Lambda role",
    "CloudWatch Log Group (Lambda)",
    "CloudWatch Log Group (API Gateway access logs)",
    "CloudWatch Alarms (Lambda + API Gateway)",
    "CloudWatch Dashboard (optional)",
    "AWS X-Ray (optional)",
    "AWS Certificate Manager (ACM) Certificate (optional)",
    "Amazon Route 53 Hosted Zone (optional)",
    "Route 53 DNS Record (A/AAAA Alias or CNAME) (optional)",
    "VPC (optional)",
    "Private Subnets in 2+ AZs (optional)",
    "Security Groups (optional)",
    "Route Tables (optional)",
    "NAT Gateway + Elastic IP (optional)",
    "VPC Endpoints (optional)",
    "S3 Bucket for artifacts / Terraform state (optional)",
    "DynamoDB table for Terraform state locking (optional)",
    "KMS Key for encryption (optional)"
  ]
}