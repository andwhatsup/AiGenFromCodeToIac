{
  "plantuml_diagram": "@startuml\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v20.0/dist\n!include AWSPuml/AWSCommon.puml\n\nskinparam shadowing false\nskinparam componentStyle rectangle\nskinparam wrapWidth 220\nskinparam maxMessageSize 120\n\ntitle Static Website on Nginx Container - CI/CD to EC2\n\nactor \"End User\" as user\n\ncloud \"Internet\" as internet\n\nnode \"GitLab SaaS\" as gitlab {\n  artifact \"Source Repo\\n(Dockerfile, static content)\" as repo\n  component \"GitLab CI/CD Pipeline\\n(stages: build_and_push, deploy)\" as cicd\n  database \"GitLab Container Registry\\n(Docker image registry)\" as registry\n  component \"CI Variables / Secrets\\n(SSH_PRIVATE_KEY)\" as secrets\n}\n\nnode \"AWS Account\" as aws {\n  node \"VPC\" as vpc {\n    node \"EC2 Instance (Linux VM)\\nDocker Engine\" as ec2 {\n      node \"Docker Runtime\" as docker {\n        node \"Nginx Container\\nImage: nginx:latest\\nServes static site\" as nginx\n      }\n      component \"SSH Daemon\\n(22/tcp)\" as sshd\n    }\n\n    node \"Security Group\" as sg {\n      component \"Inbound: 80/443 from Internet\" as in_http\n      component \"Inbound: 22 from CI/CD IPs/Admin\" as in_ssh\n    }\n  }\n}\n\nuser --> internet\ninternet --> nginx : HTTP/HTTPS (80/443)\n\nrepo --> cicd : pipeline trigger\ncicd --> registry : build & push\\nDocker image\ncicd --> secrets : read SSH_PRIVATE_KEY\ncicd --> sshd : SSH deploy\\n(pull & run container)\nregistry --> ec2 : docker pull image\n\nsg .. ec2 : network policy\n\n@enduml",
  "svg_diagram": "<?plantuml 1.2026.2beta1?><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" contentStyleType=\"text/css\" data-diagram-type=\"DESCRIPTION\" height=\"984px\" preserveAspectRatio=\"none\" style=\"width:1344px;height:984px;background:#FFFFFF;\" version=\"1.1\" viewBox=\"0 0 1344 984\" width=\"1344px\" zoomAndPan=\"magnify\"><title>Static Website on Nginx Container - CI/CD to EC2</title><defs/><g><g class=\"title\" data-source-line=\"9\"><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"385.7588\" x=\"472.4721\" y=\"22.9951\">Static Website on Nginx Container - CI/CD to EC2</text></g><!--cluster gitlab--><g class=\"cluster\" data-qualified-name=\"gitlab\" data-source-line=\"15\" id=\"ent0004\"><polygon fill=\"#FFFFFF\" points=\"769.2362,53.2969,779.2362,43.2969,1206.2362,43.2969,1206.2362,581.7769,1196.2362,591.7769,769.2362,591.7769,769.2362,53.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1196.2362\" x2=\"1206.2362\" y1=\"53.2969\" y2=\"43.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"769.2362\" x2=\"1196.2362\" y1=\"53.2969\" y2=\"53.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1196.2362\" x2=\"1196.2362\" y1=\"53.2969\" y2=\"591.7769\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"95.3066\" x=\"936.0829\" y=\"69.292\">GitLab SaaS</text></g><!--cluster aws--><g class=\"cluster\" data-qualified-name=\"aws\" data-source-line=\"22\" id=\"ent0009\"><polygon fill=\"#FFFFFF\" points=\"112.2362,376.6869,122.2362,366.6869,745.2362,366.6869,745.2362,957.1669,735.2362,967.1669,112.2362,967.1669,112.2362,376.6869\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"735.2362\" x2=\"745.2362\" y1=\"376.6869\" y2=\"366.6869\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"112.2362\" x2=\"735.2362\" y1=\"376.6869\" y2=\"376.6869\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"735.2362\" x2=\"735.2362\" y1=\"376.6869\" y2=\"967.1669\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"104.9111\" x=\"372.2807\" y=\"392.682\">AWS Account</text></g><!--cluster vpc--><g class=\"cluster\" data-qualified-name=\"aws.vpc\" data-source-line=\"23\" id=\"ent0010\"><polygon fill=\"#FFFFFF\" points=\"136.2362,424.6869,146.2362,414.6869,721.2362,414.6869,721.2362,933.1669,711.2362,943.1669,136.2362,943.1669,136.2362,424.6869\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"711.2362\" x2=\"721.2362\" y1=\"424.6869\" y2=\"414.6869\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"136.2362\" x2=\"711.2362\" y1=\"424.6869\" y2=\"424.6869\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"711.2362\" x2=\"711.2362\" y1=\"424.6869\" y2=\"943.1669\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"31.3701\" x=\"409.0512\" y=\"440.682\">VPC</text></g><!--cluster ec2--><g class=\"cluster\" data-qualified-name=\"aws.vpc.ec2\" data-source-line=\"24\" id=\"ent0011\"><polygon fill=\"#FFFFFF\" points=\"243.2362,682.2769,253.2362,672.2769,657.2362,672.2769,657.2362,901.1669,647.2362,911.1669,243.2362,911.1669,243.2362,682.2769\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"647.2362\" x2=\"657.2362\" y1=\"682.2769\" y2=\"672.2769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"243.2362\" x2=\"647.2362\" y1=\"682.2769\" y2=\"682.2769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"647.2362\" x2=\"647.2362\" y1=\"682.2769\" y2=\"911.1669\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"191.8574\" x=\"350.3075\" y=\"698.272\">EC2 Instance (Linux VM)</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"113.9346\" x=\"389.2689\" y=\"714.5689\">Docker Engine</text></g><!--cluster docker--><g class=\"cluster\" data-qualified-name=\"aws.vpc.ec2.docker\" data-source-line=\"25\" id=\"ent0012\"><polygon fill=\"#FFFFFF\" points=\"275.2362,754.2769,285.2362,744.2769,483.2362,744.2769,483.2362,869.1669,473.2362,879.1669,275.2362,879.1669,275.2362,754.2769\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"473.2362\" x2=\"483.2362\" y1=\"754.2769\" y2=\"744.2769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"275.2362\" x2=\"473.2362\" y1=\"754.2769\" y2=\"754.2769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"473.2362\" x2=\"473.2362\" y1=\"754.2769\" y2=\"879.1669\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"126.4102\" x=\"312.0312\" y=\"770.272\">Docker Runtime</text></g><!--cluster sg--><g class=\"cluster\" data-qualified-name=\"aws.vpc.sg\" data-source-line=\"31\" id=\"ent0015\"><polygon fill=\"#FFFFFF\" points=\"168.2362,480.6869,178.2362,470.6869,689.2362,470.6869,689.2362,585.2769,679.2362,595.2769,168.2362,595.2769,168.2362,480.6869\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"679.2362\" x2=\"689.2362\" y1=\"480.6869\" y2=\"470.6869\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"168.2362\" x2=\"679.2362\" y1=\"480.6869\" y2=\"480.6869\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"679.2362\" x2=\"679.2362\" y1=\"480.6869\" y2=\"595.2769\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" font-weight=\"bold\" lengthAdjust=\"spacing\" textLength=\"118.2412\" x=\"365.6156\" y=\"496.682\">Security Group</text></g><!--entity repo--><g class=\"entity\" data-qualified-name=\"gitlab.repo\" data-source-line=\"16\" id=\"ent0005\"><rect fill=\"#FFFFFF\" height=\"55.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"217.1543\" x=\"970.6562\" y=\"83.2969\"/><polygon fill=\"#FFFFFF\" points=\"1170.8105,88.2969,1170.8105,102.2969,1182.8105,102.2969,1182.8105,94.2969,1176.8105,88.2969,1170.8105,88.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1176.8105\" x2=\"1176.8105\" y1=\"88.2969\" y2=\"94.2969\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"1182.8105\" x2=\"1176.8105\" y1=\"94.2969\" y2=\"94.2969\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"48.3916\" x=\"1029.916\" y=\"109.292\">Source</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1078.3076\" y=\"109.292\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"35.793\" x=\"1082.7578\" y=\"109.292\">Repo</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"80.7529\" x=\"980.6562\" y=\"125.5889\">(Dockerfile,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1061.4092\" y=\"125.5889\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"38.4385\" x=\"1065.8594\" y=\"125.5889\">static</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1104.2978\" y=\"125.5889\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"59.0625\" x=\"1108.748\" y=\"125.5889\">content)</text></g><!--entity cicd--><g class=\"entity\" data-qualified-name=\"gitlab.cicd\" data-source-line=\"17\" id=\"ent0006\"><rect fill=\"#FFFFFF\" height=\"68.8906\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"193.9268\" x=\"982.2662\" y=\"218.3369\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"45.4932\" x=\"1004.8956\" y=\"241.332\">GitLab</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1050.3888\" y=\"241.332\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"39.1768\" x=\"1054.839\" y=\"241.332\">CI/CD</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1094.0157\" y=\"241.332\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"55.0977\" x=\"1098.4659\" y=\"241.332\">Pipeline</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"56.335\" x=\"992.2662\" y=\"257.6289\">(stages:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1048.6012\" y=\"257.6289\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"113.1416\" x=\"1053.0514\" y=\"257.6289\">build_and_push,</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"52.5889\" x=\"1052.9352\" y=\"273.9257\">deploy)</text></g><!--entity registry--><g class=\"entity\" data-qualified-name=\"gitlab.registry\" data-source-line=\"18\" id=\"ent0007\"><path d=\"M784.8562,524.1869 C784.8562,514.1869 885.2307,514.1869 885.2307,514.1869 C885.2307,514.1869 985.6053,514.1869 985.6053,524.1869 L985.6053,565.7806 C985.6053,575.7806 885.2307,575.7806 885.2307,575.7806 C885.2307,575.7806 784.8562,575.7806 784.8562,565.7806 L784.8562,524.1869\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M784.8562,524.1869 C784.8562,534.1869 885.2307,534.1869 885.2307,534.1869 C885.2307,534.1869 985.6053,534.1869 985.6053,524.1869\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"45.4932\" x=\"794.8562\" y=\"551.182\">GitLab</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"840.3494\" y=\"551.182\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"68.4141\" x=\"844.7996\" y=\"551.182\">Container</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"913.2137\" y=\"551.182\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"57.9414\" x=\"917.6638\" y=\"551.182\">Registry</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"54.9814\" x=\"801.7708\" y=\"567.4789\">(Docker</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"856.7522\" y=\"567.4789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"43.6064\" x=\"861.2024\" y=\"567.4789\">image</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"904.8089\" y=\"567.4789\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"59.4316\" x=\"909.2591\" y=\"567.4789\">registry)</text></g><!--entity secrets--><g class=\"entity\" data-qualified-name=\"gitlab.secrets\" data-source-line=\"19\" id=\"ent0008\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"169.3857\" x=\"1020.5462\" y=\"518.6869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"13.9043\" x=\"1030.5462\" y=\"541.682\">CI</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1044.4505\" y=\"541.682\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"65.0645\" x=\"1048.9007\" y=\"541.682\">Variables</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1113.9652\" y=\"541.682\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.7168\" x=\"1118.4154\" y=\"541.682\">/</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"1123.1322\" y=\"541.682\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"52.3496\" x=\"1127.5824\" y=\"541.682\">Secrets</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"138.6533\" x=\"1035.9124\" y=\"557.9789\">(SSH_PRIVATE_KEY)</text></g><!--entity sshd--><g class=\"entity\" data-qualified-name=\"aws.vpc.ec2.sshd\" data-source-line=\"28\" id=\"ent0014\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"111.7998\" x=\"502.3362\" y=\"797.4269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"28.3008\" x=\"512.3362\" y=\"820.422\">SSH</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"540.637\" y=\"820.422\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"59.0488\" x=\"545.0872\" y=\"820.422\">Daemon</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"55.5283\" x=\"530.472\" y=\"836.7189\">(22/tcp)</text></g><!--entity nginx--><g class=\"entity\" data-qualified-name=\"aws.vpc.ec2.docker.nginx\" data-source-line=\"26\" id=\"ent0013\"><polygon fill=\"#FFFFFF\" points=\"291.2862,794.2769,301.2862,784.2769,467.1778,784.2769,467.1778,853.1675,457.1778,863.1675,291.2862,863.1675,291.2862,794.2769\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"457.1778\" x2=\"467.1778\" y1=\"794.2769\" y2=\"784.2769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"291.2862\" x2=\"457.1778\" y1=\"794.2769\" y2=\"794.2769\"/><line style=\"stroke:#7D8998;stroke-width:1.25;\" x1=\"457.1778\" x2=\"457.1778\" y1=\"794.2769\" y2=\"863.1675\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"40.4072\" x=\"317.5963\" y=\"817.272\">Nginx</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"358.0035\" y=\"817.272\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"68.4141\" x=\"362.4537\" y=\"817.272\">Container</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"48.5625\" x=\"306.2862\" y=\"833.5689\">Image:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"354.8487\" y=\"833.5689\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"82.8789\" x=\"359.2989\" y=\"833.5689\">nginx:latest</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"47.4482\" x=\"314.1954\" y=\"849.8657\">Serves</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"361.6437\" y=\"849.8657\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"38.4385\" x=\"366.0938\" y=\"849.8657\">static</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"404.5323\" y=\"849.8657\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"25.2861\" x=\"408.9825\" y=\"849.8657\">site</text></g><!--entity in_http--><g class=\"entity\" data-qualified-name=\"aws.vpc.sg.in_http\" data-source-line=\"32\" id=\"ent0016\"><rect fill=\"#FFFFFF\" height=\"36.2969\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"233.1309\" x=\"192.6662\" y=\"526.8269\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"61.8037\" x=\"202.6662\" y=\"549.822\">Inbound:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"264.4699\" y=\"549.822\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"49.2529\" x=\"268.9201\" y=\"549.822\">80/443</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"318.1731\" y=\"549.822\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"32.8877\" x=\"322.6233\" y=\"549.822\">from</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"355.511\" y=\"549.822\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"55.8359\" x=\"359.9612\" y=\"549.822\">Internet</text></g><!--entity in_ssh--><g class=\"entity\" data-qualified-name=\"aws.vpc.sg.in_ssh\" data-source-line=\"33\" id=\"ent0017\"><rect fill=\"#FFFFFF\" height=\"52.5938\" style=\"stroke:#7D8998;stroke-width:1.25;\" width=\"185.0332\" x=\"460.7162\" y=\"518.6869\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"61.8037\" x=\"470.7162\" y=\"541.682\">Inbound:</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"532.5199\" y=\"541.682\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"17.8145\" x=\"536.9701\" y=\"541.682\">22</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"554.7846\" y=\"541.682\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"32.8877\" x=\"559.2348\" y=\"541.682\">from</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"592.1225\" y=\"541.682\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"39.1768\" x=\"596.5727\" y=\"541.682\">CI/CD</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"69.4463\" x=\"518.5097\" y=\"557.9789\">IPs/Admin</text></g><!--entity user--><g class=\"entity\" data-qualified-name=\"user\" data-source-line=\"11\" id=\"ent0002\"><ellipse cx=\"53.2391\" cy=\"223.1369\" fill=\"#FFFFFF\" rx=\"8\" ry=\"8\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><path d=\"M53.2391,231.1369 L53.2391,258.1369 M40.2391,239.1369 L66.2391,239.1369 M53.2391,258.1369 L40.2391,273.1369 M53.2391,258.1369 L66.2391,273.1369\" fill=\"none\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"26.6055\" x=\"21.7562\" y=\"288.382\">End</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"4.4502\" x=\"48.3617\" y=\"288.382\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"31.9102\" x=\"52.8119\" y=\"288.382\">User</text></g><!--entity internet--><g class=\"entity\" data-qualified-name=\"internet\" data-source-line=\"13\" id=\"ent0003\"><path d=\"M20.088,530.7075 C23.1837,525.6734 27.1123,525.4083 30.9197,529.8981 C34.0278,523.7262 38.372,523.8269 42.6137,528.6976 C45.5297,523.375 49.7975,522.8976 53.3775,528.0129 C57.126,523.0885 60.9829,521.9878 64.9703,527.7539 C70.0134,522.4905 74.2445,522.6392 77.0869,529.8855 C81.1445,524.718 85.8023,524.9925 89.4887,530.324 C96.8266,533.1634 98.5639,540.5195 92.2491,545.7949 C98.0537,552.1965 97.8993,557.2802 89.9033,561.6384 C87.9491,567.799 82.4152,568.2071 78.6664,563.4927 C75.7266,571.766 71.2594,572.808 65.1354,566.4343 C64.2031,572.1505 59.5096,574.3334 54.6217,571.061 C50.0236,575.2592 44.7405,574.7193 42.7783,568.1592 C36.2585,572.9947 33.0334,570.3606 30.8261,563.6824 C26.6178,568.138 21.5506,567.6696 18.8789,561.8889 C9.2209,560.9162 6,553.6927 12.5961,546.2077 C6.4792,537.2254 9.572,531.6504 20.088,530.7075\" fill=\"#FFFFFF\" style=\"stroke:#7D8998;stroke-width:1.25;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"14\" lengthAdjust=\"spacing\" textLength=\"55.8359\" x=\"25.3162\" y=\"549.822\">Internet</text></g><!--link user to internet--><g class=\"link\" data-entity-1=\"ent0002\" data-entity-2=\"ent0003\" data-link-type=\"dependency\" data-source-line=\"38\" id=\"lnk18\"><path d=\"M53.2362,292.0169 C53.2362,353.4269 53.2362,466.1469 53.2362,515.5469\" fill=\"none\" id=\"user-to-internet\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"53.2362,521.5469,57.2362,512.5469,53.2362,516.5469,49.2362,512.5469,53.2362,521.5469\" style=\"stroke:#000000;stroke-width:2;\"/></g><!--link internet to nginx--><g class=\"link\" data-entity-1=\"ent0003\" data-entity-2=\"ent0013\" data-link-type=\"dependency\" data-source-line=\"39\" id=\"lnk19\"><path d=\"M79.9162,568.6269 C135.4962,615.8069 259.682,721.234 328.822,779.924\" fill=\"none\" id=\"internet-to-nginx\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"333.3962,783.8069,329.1235,774.9331,329.5844,780.5712,323.9463,781.0321,333.3962,783.8069\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"73.5\" x=\"168.2362\" y=\"631.4155\">HTTP/HTTPS</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"51.5801\" x=\"179.1962\" y=\"645.3843\">(80/443)</text></g><!--link repo to cicd--><g class=\"link\" data-entity-1=\"ent0005\" data-entity-2=\"ent0006\" data-link-type=\"dependency\" data-source-line=\"41\" id=\"lnk20\"><path d=\"M1079.2362,139.3569 C1079.2362,161.8269 1079.2362,187.8069 1079.2362,211.9169\" fill=\"none\" id=\"repo-to-cicd\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1079.2362,217.9169,1083.2362,208.9169,1079.2362,212.9169,1075.2362,208.9169,1079.2362,217.9169\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"47.6074\" x=\"1080.2362\" y=\"181.0255\">pipeline</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1127.8437\" y=\"181.0255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"40.5234\" x=\"1131.6581\" y=\"181.0255\">trigger</text></g><!--link cicd to registry--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0007\" data-link-type=\"dependency\" data-source-line=\"42\" id=\"lnk21\"><path d=\"M1027.8662,287.5769 C1015.1762,297.5369 1002.3362,309.1469 992.2362,321.6869 C943.4562,382.2069 911.9804,462.9638 896.6804,508.1538\" fill=\"none\" id=\"cicd-to-registry\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"894.7562,513.8369,901.4312,506.595,896.3597,509.101,893.8537,504.0295,894.7562,513.8369\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"29.5078\" x=\"997.2675\" y=\"333.8255\">build</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1026.7753\" y=\"333.8255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"9.3574\" x=\"1030.5897\" y=\"333.8255\">&amp;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1039.9472\" y=\"333.8255\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"29.0801\" x=\"1043.7616\" y=\"333.8255\">push</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"42.4453\" x=\"993.2362\" y=\"347.7943\">Docker</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1035.6815\" y=\"347.7943\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"37.377\" x=\"1039.496\" y=\"347.7943\">image</text></g><!--link cicd to secrets--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0008\" data-link-type=\"dependency\" data-source-line=\"43\" id=\"lnk22\"><path d=\"M1082.2662,287.6369 C1087.5362,346.3969 1097.7103,460.0109 1102.4103,512.4209\" fill=\"none\" id=\"cicd-to-secrets\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"1102.9462,518.3969,1106.1264,509.0756,1102.4996,513.4169,1098.1583,509.7901,1102.9462,518.3969\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"27.2871\" x=\"1129.3339\" y=\"333.8255\">read</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"109.4824\" x=\"1088.2362\" y=\"347.7943\">SSH_PRIVATE_KEY</text></g><!--link cicd to sshd--><g class=\"link\" data-entity-1=\"ent0006\" data-entity-2=\"ent0014\" data-link-type=\"dependency\" data-source-line=\"44\" id=\"lnk23\"><path d=\"M1171.5662,287.6869 C1185.2962,296.6769 1197.6962,307.8569 1206.2362,321.6869 C1226.9862,355.2769 1333.9762,465.9069 1207.2362,611.2769 C1167.5762,656.7569 998.3762,643.4069 938.2362,648.2769 C920.5062,649.7169 632.6562,645.8769 618.2362,656.2769 C572.8962,688.9769 562.1207,753.3219 559.4307,791.2519\" fill=\"none\" id=\"cicd-to-sshd\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"559.0062,797.2369,563.6329,788.5424,559.3599,792.2494,555.6529,787.9765,559.0062,797.2369\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"24.2578\" x=\"1268.2362\" y=\"535.6155\">SSH</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1292.494\" y=\"535.6155\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"40.3945\" x=\"1296.3085\" y=\"535.6155\">deploy</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"26.5723\" x=\"1270.6181\" y=\"549.5843\">(pull</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1297.1903\" y=\"549.5843\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"9.3574\" x=\"1301.0048\" y=\"549.5843\">&amp;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"1310.3622\" y=\"549.5843\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"20.1445\" x=\"1314.1767\" y=\"549.5843\">run</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"61.541\" x=\"1271.6991\" y=\"563.553\">container)</text></g><!--link registry to ec2--><g class=\"link\" data-entity-1=\"ent0007\" data-entity-2=\"ent0011\" data-link-type=\"dependency\" data-source-line=\"45\" id=\"lnk24\"><path d=\"M859.5262,576.1269 C829.4212,611.4269 778.0087,671.7169 733.5562,723.8456 C711.33,749.91 690.8437,773.9341 675.6309,791.7739 C671.8277,796.2339 668.3541,800.3073 665.2653,803.9295 C663.7209,805.7406 662.2727,807.4389 660.9276,809.0162 C660.255,809.8049 659.6082,810.5634 658.9881,811.2906 C658.678,811.6542 658.3746,812.01 658.078,812.3579 C657.9297,812.5318 661.6762,808.1383 661.5313,808.3083\" fill=\"none\" id=\"registry-to-ec2\" style=\"stroke:#000000;stroke-width:2;\"/><polygon fill=\"#000000\" points=\"657.6381,812.8737,666.5215,808.621,660.8824,809.0692,660.4343,803.4301,657.6381,812.8737\" style=\"stroke:#000000;stroke-width:2;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"40.8223\" x=\"822.2362\" y=\"638.4155\">docker</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"863.0585\" y=\"638.4155\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"21.8906\" x=\"866.8729\" y=\"638.4155\">pull</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"888.7636\" y=\"638.4155\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"37.377\" x=\"892.578\" y=\"638.4155\">image</text></g><!--link sg to ec2--><g class=\"link\" data-entity-1=\"ent0015\" data-entity-2=\"ent0011\" data-link-type=\"association\" data-source-line=\"47\" id=\"lnk25\"><path d=\"M675.5196,595.3806 C675.3259,597.056 675.1287,598.7615 674.9282,600.4952 C674.5273,603.9626 674.1134,607.5429 673.6882,611.2197 C672.838,618.5735 671.943,626.3139 671.0183,634.3121 C669.1687,650.3085 667.2,667.3359 665.2312,684.3631 C663.2625,701.3903 661.2937,718.4173 659.4442,734.4127 C658.9818,738.4116 658.5269,742.346 658.0813,746.1998 C657.8585,748.1267 657.638,750.0334 657.4201,751.918 C657.3656,752.3892 657.3113,752.859 657.2571,753.3273\" fill=\"none\" id=\"sg-ec2\" style=\"stroke:#000000;stroke-width:2;stroke-dasharray:7,7;\"/><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"48.7324\" x=\"673.2362\" y=\"638.4155\">network</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"3.8145\" x=\"721.9687\" y=\"638.4155\">&#160;</text><text fill=\"#000000\" font-family=\"sans-serif\" font-size=\"12\" lengthAdjust=\"spacing\" textLength=\"35.3262\" x=\"725.7831\" y=\"638.4155\">policy</text></g><?plantuml-src VLHHRzem47xthxZoC1Mf49RrOU9X4gAeHMidH3ggIKZ8iKsmwjYHxHJOrF--Yvq0wyDU2BdxxlFTTvzpnSLMQW6JbsnHbmfstbTkd2IMxeU5zBiwhvsmp6Wlj1yoKoPqxnJDNVCSI4oumTROGQMezaYGlAMZuIZXqdbo9JLJDJ-H9_YSch8qUbZXAo7kLUgAMbg2sr5kzb8NiANAYOiC7baPZOTd_gW4MC4yrOMwXEmjhLuazpj8qz55lAI79-4SBKGcVmluZ4dYfKUMp5Cl6Ro8t4alm6ZuKKXzW2dEIL4E2mEOpfFf7NW3isbA26NUMEZDD8UVA4WFg8D66KAOCZM7tXmLibhua97j2o7QuFozU-aVQGuPfLd8exAe8VmX0DHwkKLsw6Mcjap0KbHchQ_l37iLTYkLk04Nssstq0yK5c5OVfBdT4ZiUo4heN0IPCBgGhWnvBLKV4CrtrIrszq05vKonyZ69EF8ngcdENNdZi-2B4M1ExN7KsiWI-J5FcAywog-_TlPT0uhQYNDbN2GG2QO5TuXKvOzR1RB-MhoFDjyd_sA72wcoNkd7je69eoPMaTrqNb1kfXTBQOX-bQn4EtYk3QOQnnUewZNZrBN1rWzzTUwRN-cSUKYb0gMjgLTSOjPuf6oZ20UGnskGtumpbhF6rd6qB0VnefwuVnQPyA-uUpj8XlJ1Su0QWdVs-U5RYWFt5615mQrIjF4iwgLoEquYKKN4wEkjPN-2FVMr5K45gU6BtZdEaSn-HY-ZfBRso-mjQQ43mRUD5-2_vIcQIoBTfilN3BXfTHTDNP8kgdUcrKsbmK6Ws_dkz7z2T6W18pXuVbvaJG_6Lp7xlg4D5uFgCQc2AfQSuEtiYZm4ePu0-Zy1wtTuHCqPZyjFNZs36-jXcWhA8SFThp0eTu8QlOHRmtkewgLGdfRwt0nm_RxvDH0KzRuQjmP9-3Z-GJNCXosQLHWR-mhL4P9TlmB?></g></svg>",
  "architecture_description": "## High-level architecture\n\n### Runtime (production)\n- **End Users** access the site over the **Internet**.\n- The application is a **static website** served by an **Nginx container** (base image `nginx:latest`).\n- The container runs on an **AWS EC2 Linux VM** with **Docker Engine**.\n- **Networking exposure**:\n  - **HTTP/HTTPS** traffic is served on **ports 80/443** (as exposed/published by the container runtime).\n  - **SSH (22/tcp)** is enabled on the EC2 instance for remote deployment.\n- **Security Group** controls inbound access:\n  - Allows **80/443** from the Internet.\n  - Allows **22** from trusted sources (CI/CD runner IPs and/or admins).\n\n### Delivery (CI/CD)\n- **GitLab CI/CD** orchestrates the pipeline with stages **`build_and_push`** and **`deploy`**.\n- The pipeline:\n  1. Builds the Docker image from the repository (Dockerfile + static content).\n  2. Pushes the image to the **GitLab Container Registry**.\n  3. Uses an **SSH private key** stored as a GitLab **CI variable/secret** (`SSH_PRIVATE_KEY`) to connect to the EC2 host.\n  4. On the EC2 host, deployment pulls the image from the registry and runs/updates the Nginx container.\n\n### Key relationships\n- Users → Nginx container: **HTTP/HTTPS** requests.\n- GitLab CI/CD → Container Registry: **build & push** image.\n- GitLab CI/CD → EC2 (SSHD): **SSH-based deployment**.\n- EC2 → Container Registry: **docker pull** to retrieve the built image."
}