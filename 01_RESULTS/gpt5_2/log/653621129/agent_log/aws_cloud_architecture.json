{
  "aws_architecture_description": "### Proposed high-level AWS architecture (lean, secure, scalable)\n\n#### 1) Networking foundation\n- Deploy into a dedicated **VPC** spanning **2+ Availability Zones** for high availability.\n- Create **public subnets** for internet-facing components (ALB, NAT Gateways) and **private subnets** for compute (ECS tasks).\n- Use an **Internet Gateway** for inbound/outbound internet access from public subnets.\n- Use **NAT Gateways** (one per AZ, or a single NAT for lower cost) so ECS tasks in private subnets can pull images from ECR and send logs/metrics without being publicly reachable.\n\n#### 2) Traffic ingress and TLS\n- Provision an **Application Load Balancer (ALB)** in public subnets.\n- Terminate **HTTPS (443)** at the ALB using an **ACM certificate**.\n- Configure an ALB **target group** (IP targets) and forward traffic to the ECS service on **HTTP port 80**.\n- Configure ALB health checks to hit the container’s health endpoint (your Dockerfile indicates `/` is used as a healthcheck).\n- Optionally add **AWS WAF** on the ALB for basic L7 protection (rate limiting, managed rules) if this will be internet-exposed.\n\n#### 3) Compute: ECS on Fargate\n- Run the Rust/Actix container on **Amazon ECS with Fargate**.\n- Create an **ECS cluster** and an **ECS service** with desired count >= 2 (one task per AZ) for HA.\n- Use **awsvpc** networking mode (standard for Fargate) and place tasks in **private subnets**.\n- Configure the task definition to:\n  - Expose **container port 80**.\n  - Send logs to **CloudWatch Logs** via the awslogs log driver.\n  - Use an **ECS task execution role** to pull from ECR and write logs.\n- Configure **ECS Service Auto Scaling** based on CPU and/or request count (via ALB target group metrics).\n\n#### 4) Container image registry\n- Store the built Docker image in **Amazon ECR**.\n- Enable ECR image scanning (basic) and lifecycle policies to expire old images.\n\n#### 5) CI/CD (minimal but practical)\n- Use **CodePipeline + CodeBuild** (or GitHub Actions if you prefer) to:\n  1) Build the multi-stage Docker image.\n  2) Push to ECR.\n  3) Deploy to ECS (rolling update).\n- Store build artifacts/logs in S3/CloudWatch as needed.\n\n#### 6) Observability and operations\n- **CloudWatch Logs** for application logs (stdout from env_logger).\n- **CloudWatch metrics/alarms** for ALB (5XX, target response time), ECS (CPU/memory), and deployment alarms.\n- **AWS X-Ray** is optional; not required unless you add tracing.\n\n#### 7) DNS\n- Use **Route 53** to point a domain (A/AAAA alias) to the ALB.\n\n---\n\n### Notes specific to this codebase\n- The app binds to **0.0.0.0:80**, which matches ALB -> target group forwarding on port 80.\n- Static assets are served from within the container image via actix-files; no separate S3/CloudFront is required for this “hello world” deployment.\n\n---\n\n### Deployment strategy\n- **Rolling deployments** via ECS service (minimum healthy percent / maximum percent) to avoid downtime.\n- Use **two tasks across two AZs** as the baseline; scale out with autoscaling.\n- Keep tasks private; only the ALB is public.\n",
  "aws_resources": [
    "Amazon VPC",
    "VPC CIDR block",
    "Public subnets (2+ AZs)",
    "Private subnets (2+ AZs)",
    "Internet Gateway (IGW)",
    "NAT Gateway(s)",
    "Elastic IP(s) for NAT Gateway(s)",
    "Route tables (public and private)",
    "Route table associations",
    "VPC endpoints (recommended): ECR (api), ECR (dkr), S3 gateway endpoint, CloudWatch Logs endpoint (optional)",
    "Security Groups (ALB SG, ECS tasks SG)",
    "Network ACLs (optional; default acceptable for lean setup)",
    "Application Load Balancer (ALB)",
    "ALB listeners (HTTPS :443, optional HTTP :80 redirect)",
    "ALB target group (IP target type)",
    "ALB listener rules (forward to target group)",
    "AWS Certificate Manager (ACM) certificate for TLS",
    "Amazon ECS Cluster",
    "ECS Task Definition (Fargate)",
    "ECS Service (Fargate)",
    "ECS Service Auto Scaling (target tracking policies)",
    "IAM role: ECS task execution role",
    "IAM role: ECS task role (app role; minimal permissions)",
    "Amazon ECR repository",
    "ECR lifecycle policy",
    "ECR image scanning configuration",
    "Amazon CloudWatch Log Group(s) for ECS task logs",
    "CloudWatch Alarms (ALB 5XX, target health, latency; ECS CPU/memory)",
    "AWS CloudTrail (account-level, recommended)",
    "AWS KMS key(s) (optional; for encrypting logs/artifacts if required)",
    "Amazon Route 53 hosted zone (if using a custom domain)",
    "Route 53 record (ALIAS to ALB)",
    "CI/CD (one option): AWS CodePipeline",
    "CI/CD (one option): AWS CodeBuild project",
    "CI/CD IAM roles/policies",
    "S3 bucket for pipeline artifacts (if using CodePipeline)",
    "AWS WAFv2 Web ACL (optional, attach to ALB)"
  ]
}