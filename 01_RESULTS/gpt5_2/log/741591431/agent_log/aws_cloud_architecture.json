{
  "aws_architecture_description": "## Proposed high-level AWS architecture (React SPA container on Amazon EKS)\n\n### 1) Networking & edge\n- **VPC (multi-AZ)** with **public subnets** (for load balancers) and **private subnets** (for EKS worker nodes/pods).\n- **Internet Gateway** attached to the VPC.\n- **NAT Gateways (per AZ)** so private subnets can pull container images and reach external services (Docker Hub, SonarQube, Slack) without being publicly reachable.\n- **Route tables** to ensure:\n  - Public subnets route 0.0.0.0/0 to the Internet Gateway.\n  - Private subnets route 0.0.0.0/0 to NAT.\n\n### 2) EKS runtime (production)\n- **Amazon EKS cluster** deployed into the VPC.\n- **Managed Node Group(s)** (EC2-based) in private subnets to run the React SPA pods.\n- Kubernetes objects (applied by GitHub Actions):\n  - **Namespace** for the app.\n  - **Deployment** with multiple replicas for HA.\n  - **Service type LoadBalancer**.\n- **AWS Load Balancer Controller** installed in the cluster so Kubernetes Services/Ingress can provision and manage AWS load balancers.\n  - Recommended: move from `Service type: LoadBalancer` directly to an **Ingress** backed by an **ALB** for better L7 routing, TLS, and WAF integration.\n\n### 3) TLS, DNS, and optional WAF\n- **ACM certificate** for your domain.\n- **Route 53 hosted zone/records** pointing your domain to the ALB.\n- Optional but common for internet-facing apps:\n  - **AWS WAF** attached to the ALB (basic managed rules).\n\n### 4) Container image access\n- Your current pipeline pushes images to **Docker Hub**. EKS nodes in private subnets will pull images via NAT.\n- Recommended hardening (optional): migrate to **Amazon ECR** to keep images in AWS, simplify IAM auth, and reduce external dependency.\n\n### 5) IAM & security\n- **EKS cluster IAM role** and **node group IAM role**.\n- **IRSA (IAM Roles for Service Accounts)** for in-cluster controllers (e.g., AWS Load Balancer Controller) so pods can call AWS APIs without node-wide permissions.\n- **Security Groups**:\n  - ALB SG: allow inbound 443 from the internet; egress to node SG.\n  - Node SG: allow inbound from ALB SG to the app port; egress to NAT/VPC endpoints.\n- **Secrets management**:\n  - Store sensitive values (if any) in **AWS Secrets Manager** (or SSM Parameter Store) and sync to Kubernetes secrets (via External Secrets Operator, if you choose).\n\n### 6) Observability & logging\n- **CloudWatch Container Insights** (or ADOT) for cluster/node/pod metrics.\n- **CloudWatch Logs** for control plane logs and application logs (via Fluent Bit/CloudWatch agent).\n- **CloudTrail** for AWS API auditing.\n\n### 7) CI/CD connectivity to EKS\n- GitHub Actions (self-hosted runner) needs network access to the EKS API endpoint.\n  - If the runner is outside AWS: keep EKS endpoint public but locked down (CIDR allowlist) OR use a VPN/Direct Connect.\n  - If you host the runner on AWS (recommended): run it on an EC2 instance in private subnets and access the EKS endpoint privately.\n\n---\n\n## Lean deployment path (recommended)\n- Keep EKS + managed node groups.\n- Install AWS Load Balancer Controller.\n- Use ALB Ingress + ACM + Route53.\n- Add CloudWatch logging/metrics.\n- Optionally migrate Docker Hub â†’ ECR.\n",
  "aws_resources": [
    "Amazon VPC",
    "VPC public subnets (2+ AZs)",
    "VPC private subnets (2+ AZs)",
    "Internet Gateway (IGW)",
    "NAT Gateway(s) (ideally one per AZ)",
    "Elastic IPs for NAT Gateways",
    "Route tables (public/private) + routes",
    "Security Groups (ALB SG, EKS node SG, additional as needed)",
    "Network ACLs (optional; default NACLs acceptable for lean setup)",
    "Amazon EKS Cluster",
    "EKS Managed Node Group(s) (EC2)",
    "IAM Role for EKS Cluster",
    "IAM Role for EKS Node Group",
    "OIDC provider for EKS (for IRSA)",
    "IAM Roles for Kubernetes Service Accounts (IRSA) (e.g., AWS Load Balancer Controller role)",
    "AWS Load Balancer Controller (installed in cluster)",
    "Application Load Balancer (provisioned via Ingress/Controller) OR NLB/CLB (if sticking with Service type LoadBalancer)",
    "AWS Certificate Manager (ACM) certificate",
    "Amazon Route 53 Hosted Zone (if not existing)",
    "Route 53 DNS record(s) (A/AAAA alias to ALB)",
    "AWS WAF Web ACL (optional)",
    "Amazon CloudWatch Log Groups (EKS control plane logs, app logs)",
    "CloudWatch Container Insights / ADOT resources (optional but recommended)",
    "AWS CloudTrail",
    "AWS KMS key(s) (optional; for Secrets Manager/EKS secret encryption/log encryption)",
    "AWS Secrets Manager (optional; for app/runtime secrets)",
    "Amazon ECR repository (optional; if migrating off Docker Hub)",
    "VPC Endpoints (optional; e.g., ECR API/DKR, S3, CloudWatch Logs, STS to reduce NAT usage)",
    "EC2 instance(s) for self-hosted GitHub Actions runner (optional if you move runner onto AWS)",
    "IAM role/instance profile for GitHub Actions runner EC2 (optional)"
  ]
}