{
  "version": 4,
  "terraform_version": "1.13.5",
  "serial": 1,
  "lineage": "9c71ddca-fbd0-dc27-d52a-cfd8041fab4b",
  "outputs": {
    "docker_unit": {
      "value": "{\"contents\":\"[Unit]\\nDescription=ssh-key-agent\\nAfter=docker.service\\nRequires=docker.service\\n[Service]\\nRestart=on-failure\\nRestartSec=10\\nExecStartPre=-/usr/bin/mkdir -p /home/core/.ssh\\nExecStartPre=-/usr/bin/touch /home/core/.ssh/authorized_keys\\nExecStartPre=-/usr/bin/chown -R \\\"core\\\":\\\"core\\\" /home/core/.ssh\\nExecStartPre=-/usr/bin/chmod 700 /home/core/.ssh\\nExecStartPre=-/usr/bin/chmod 644 /home/core/.ssh/authorized_keys\\nExecStart=/bin/sh -c 'docker run --name=%p_$(uuidgen) --rm \\\\\\n -v /home/core/.ssh/authorized_keys:/authorized_keys \\\\\\n -e SKA_KEY_URI=terraform \\\\\\n -e SKA_GROUPS= \\\\\\n -e SKA_AKF_LOC=/authorized_keys \\\\\\n -e SKA_INTERVAL=60 \\\\\\n quay.io/utilitywarehouse/ssh-key-agent:v1.0.16'\\nExecStop=/bin/sh -c 'docker stop -t 3 \\\"$(docker ps -q --filter=name=%p_)\\\"'\\n[Install]\\nWantedBy=multi-user.target\\n\",\"enabled\":true,\"name\":\"ssh-key-agent.service\"}",
      "type": "string"
    },
    "download_unit": {
      "value": "{\"contents\":\"[Unit]\\nDescription=ssh-key-agent-download\\nWants=network-online.target\\nAfter=network-online.target\\nBefore=ssh-key-agent.service\\n\\n[Service]\\nType=oneshot\\nRestart=on-failure\\nRestartSec=10\\nExecStart=-/usr/bin/wget -N -q -O \\\"/opt/bin/ssh-key-agent\\\" \\\"https://github.com/utilitywarehouse/ssh-key-agent/releases/download/v1.0.16/ssh-key-agent_1.0.16_linux_amd64\\\"\\nExecStart=-/usr/bin/chmod 755 /opt/bin/ssh-key-agent\\nExecStartPost=/bin/systemctl disable ssh-key-agent-download.service\\n\\n[Install]\\nWantedBy=multi-user.target\\n\",\"enabled\":true,\"name\":\"ssh-key-agent-download.service\"}",
      "type": "string"
    },
    "file": {
      "value": "{\"group\":{},\"overwrite\":false,\"path\":\"/opt/bin/ssh-key-agent\",\"user\":{},\"contents\":{\"source\":\"https://github.com/utilitywarehouse/ssh-key-agent/releases/download/v1.0.16/ssh-key-agent_1.0.16_linux_amd64\",\"verification\":{}},\"mode\":493}",
      "type": "string"
    },
    "unit": {
      "value": "{\"contents\":\"[Unit]\\nDescription=ssh-key-agent\\nAfter=network-online.target\\nWants=network-online.target\\n[Service]\\nRestart=on-failure\\nRestartSec=10\\nExecStartPre=-/usr/bin/mkdir -p /home/core/.ssh\\nExecStartPre=-/usr/bin/touch /home/core/.ssh/authorized_keys\\nExecStartPre=-/usr/bin/chown -R \\\"core\\\":\\\"core\\\" /home/core/.ssh\\nExecStartPre=-/usr/bin/chmod 700 /home/core/.ssh\\nExecStartPre=-/usr/bin/chmod 644 /home/core/.ssh/authorized_keys\\nEnvironment=\\\"SKA_KEY_URI=terraform\\\"\\nEnvironment=\\\"SKA_GROUPS=\\\"\\nEnvironment=\\\"SKA_AKF_LOC=/home/core/.ssh/authorized_keys\\\"\\nEnvironment=\\\"SKA_INTERVAL=60\\\"\\nExecStart=/opt/bin/ssh-key-agent\\n[Install]\\nWantedBy=multi-user.target\\n\",\"enabled\":true,\"name\":\"ssh-key-agent.service\"}",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "ignition_file",
      "name": "ssh_key_agent",
      "provider": "provider[\"registry.terraform.io/community-terraform-providers/ignition\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": null,
            "contents": null,
            "gid": null,
            "group": null,
            "id": "6a2dfaef1ca3aa6669db499ab95431e0e576cfccb0f8d452052dcf41bd255d88",
            "mode": 493,
            "overwrite": false,
            "path": "/opt/bin/ssh-key-agent",
            "rendered": "{\"group\":{},\"overwrite\":false,\"path\":\"/opt/bin/ssh-key-agent\",\"user\":{},\"contents\":{\"source\":\"https://github.com/utilitywarehouse/ssh-key-agent/releases/download/v1.0.16/ssh-key-agent_1.0.16_linux_amd64\",\"verification\":{}},\"mode\":493}",
            "source": [
              {
                "compression": "",
                "http_headers": [],
                "source": "https://github.com/utilitywarehouse/ssh-key-agent/releases/download/v1.0.16/ssh-key-agent_1.0.16_linux_amd64",
                "verification": ""
              }
            ],
            "uid": null,
            "user": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "ignition_systemd_unit",
      "name": "ssh_key_agent",
      "provider": "provider[\"registry.terraform.io/community-terraform-providers/ignition\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "[Unit]\nDescription=ssh-key-agent\nAfter=network-online.target\nWants=network-online.target\n[Service]\nRestart=on-failure\nRestartSec=10\nExecStartPre=-/usr/bin/mkdir -p /home/core/.ssh\nExecStartPre=-/usr/bin/touch /home/core/.ssh/authorized_keys\nExecStartPre=-/usr/bin/chown -R \"core\":\"core\" /home/core/.ssh\nExecStartPre=-/usr/bin/chmod 700 /home/core/.ssh\nExecStartPre=-/usr/bin/chmod 644 /home/core/.ssh/authorized_keys\nEnvironment=\"SKA_KEY_URI=terraform\"\nEnvironment=\"SKA_GROUPS=\"\nEnvironment=\"SKA_AKF_LOC=/home/core/.ssh/authorized_keys\"\nEnvironment=\"SKA_INTERVAL=60\"\nExecStart=/opt/bin/ssh-key-agent\n[Install]\nWantedBy=multi-user.target\n",
            "dropin": null,
            "enabled": true,
            "id": "f38ca4527f8fdc71dc237c29fdc8678d75adddae941980502afe56bf3d354e8f",
            "mask": null,
            "name": "ssh-key-agent.service",
            "rendered": "{\"contents\":\"[Unit]\\nDescription=ssh-key-agent\\nAfter=network-online.target\\nWants=network-online.target\\n[Service]\\nRestart=on-failure\\nRestartSec=10\\nExecStartPre=-/usr/bin/mkdir -p /home/core/.ssh\\nExecStartPre=-/usr/bin/touch /home/core/.ssh/authorized_keys\\nExecStartPre=-/usr/bin/chown -R \\\"core\\\":\\\"core\\\" /home/core/.ssh\\nExecStartPre=-/usr/bin/chmod 700 /home/core/.ssh\\nExecStartPre=-/usr/bin/chmod 644 /home/core/.ssh/authorized_keys\\nEnvironment=\\\"SKA_KEY_URI=terraform\\\"\\nEnvironment=\\\"SKA_GROUPS=\\\"\\nEnvironment=\\\"SKA_AKF_LOC=/home/core/.ssh/authorized_keys\\\"\\nEnvironment=\\\"SKA_INTERVAL=60\\\"\\nExecStart=/opt/bin/ssh-key-agent\\n[Install]\\nWantedBy=multi-user.target\\n\",\"enabled\":true,\"name\":\"ssh-key-agent.service\"}"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "ignition_systemd_unit",
      "name": "ssh_key_agent_docker",
      "provider": "provider[\"registry.terraform.io/community-terraform-providers/ignition\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "[Unit]\nDescription=ssh-key-agent\nAfter=docker.service\nRequires=docker.service\n[Service]\nRestart=on-failure\nRestartSec=10\nExecStartPre=-/usr/bin/mkdir -p /home/core/.ssh\nExecStartPre=-/usr/bin/touch /home/core/.ssh/authorized_keys\nExecStartPre=-/usr/bin/chown -R \"core\":\"core\" /home/core/.ssh\nExecStartPre=-/usr/bin/chmod 700 /home/core/.ssh\nExecStartPre=-/usr/bin/chmod 644 /home/core/.ssh/authorized_keys\nExecStart=/bin/sh -c 'docker run --name=%p_$(uuidgen) --rm \\\n -v /home/core/.ssh/authorized_keys:/authorized_keys \\\n -e SKA_KEY_URI=terraform \\\n -e SKA_GROUPS= \\\n -e SKA_AKF_LOC=/authorized_keys \\\n -e SKA_INTERVAL=60 \\\n quay.io/utilitywarehouse/ssh-key-agent:v1.0.16'\nExecStop=/bin/sh -c 'docker stop -t 3 \"$(docker ps -q --filter=name=%p_)\"'\n[Install]\nWantedBy=multi-user.target\n",
            "dropin": null,
            "enabled": true,
            "id": "e8abb050189d2cc168fbf19f37e13e36bc0e864e56ee516f6f9fdfc1c51cf8dd",
            "mask": null,
            "name": "ssh-key-agent.service",
            "rendered": "{\"contents\":\"[Unit]\\nDescription=ssh-key-agent\\nAfter=docker.service\\nRequires=docker.service\\n[Service]\\nRestart=on-failure\\nRestartSec=10\\nExecStartPre=-/usr/bin/mkdir -p /home/core/.ssh\\nExecStartPre=-/usr/bin/touch /home/core/.ssh/authorized_keys\\nExecStartPre=-/usr/bin/chown -R \\\"core\\\":\\\"core\\\" /home/core/.ssh\\nExecStartPre=-/usr/bin/chmod 700 /home/core/.ssh\\nExecStartPre=-/usr/bin/chmod 644 /home/core/.ssh/authorized_keys\\nExecStart=/bin/sh -c 'docker run --name=%p_$(uuidgen) --rm \\\\\\n -v /home/core/.ssh/authorized_keys:/authorized_keys \\\\\\n -e SKA_KEY_URI=terraform \\\\\\n -e SKA_GROUPS= \\\\\\n -e SKA_AKF_LOC=/authorized_keys \\\\\\n -e SKA_INTERVAL=60 \\\\\\n quay.io/utilitywarehouse/ssh-key-agent:v1.0.16'\\nExecStop=/bin/sh -c 'docker stop -t 3 \\\"$(docker ps -q --filter=name=%p_)\\\"'\\n[Install]\\nWantedBy=multi-user.target\\n\",\"enabled\":true,\"name\":\"ssh-key-agent.service\"}"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "ignition_systemd_unit",
      "name": "ssh_key_agent_download",
      "provider": "provider[\"registry.terraform.io/community-terraform-providers/ignition\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "[Unit]\nDescription=ssh-key-agent-download\nWants=network-online.target\nAfter=network-online.target\nBefore=ssh-key-agent.service\n\n[Service]\nType=oneshot\nRestart=on-failure\nRestartSec=10\nExecStart=-/usr/bin/wget -N -q -O \"/opt/bin/ssh-key-agent\" \"https://github.com/utilitywarehouse/ssh-key-agent/releases/download/v1.0.16/ssh-key-agent_1.0.16_linux_amd64\"\nExecStart=-/usr/bin/chmod 755 /opt/bin/ssh-key-agent\nExecStartPost=/bin/systemctl disable ssh-key-agent-download.service\n\n[Install]\nWantedBy=multi-user.target\n",
            "dropin": null,
            "enabled": true,
            "id": "7b33cbcb9e1b2e42833cdb6b54ce62847d5cfca8319d3dcf9f0af913cc077040",
            "mask": null,
            "name": "ssh-key-agent-download.service",
            "rendered": "{\"contents\":\"[Unit]\\nDescription=ssh-key-agent-download\\nWants=network-online.target\\nAfter=network-online.target\\nBefore=ssh-key-agent.service\\n\\n[Service]\\nType=oneshot\\nRestart=on-failure\\nRestartSec=10\\nExecStart=-/usr/bin/wget -N -q -O \\\"/opt/bin/ssh-key-agent\\\" \\\"https://github.com/utilitywarehouse/ssh-key-agent/releases/download/v1.0.16/ssh-key-agent_1.0.16_linux_amd64\\\"\\nExecStart=-/usr/bin/chmod 755 /opt/bin/ssh-key-agent\\nExecStartPost=/bin/systemctl disable ssh-key-agent-download.service\\n\\n[Install]\\nWantedBy=multi-user.target\\n\",\"enabled\":true,\"name\":\"ssh-key-agent-download.service\"}"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    }
  ],
  "check_results": [
    {
      "object_kind": "var",
      "config_addr": "var.arch",
      "status": "pass",
      "objects": [
        {
          "object_addr": "var.arch",
          "status": "pass"
        }
      ]
    }
  ]
}
