{"format_version":"1.2","terraform_version":"1.13.5","variables":{"desired_count":{"value":1},"desired_ec2_count":{"value":1},"image_name":{"value":"obbiearms/hello-world:latest"},"max_count":{"value":5},"max_ec2_count":{"value":3},"min_count":{"value":1},"min_ec2_count":{"value":1},"name":{"value":"franklin"},"tags":{"value":{}},"vpc":{"value":"compute"},"vpc_private_subnets":{"value":[]},"vpc_public_subnets":{"value":[]}},"planned_values":{"outputs":{"alb_dns":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_appautoscaling_policy.ecs_target_cpu","mode":"managed","type":"aws_appautoscaling_policy","name":"ecs_target_cpu","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"franklin-scaling-policy-cpu","policy_type":"TargetTrackingScaling","predictive_scaling_policy_configuration":[],"region":"us-east-1","resource_id":"service/franklin-ecs-cluster/franklin-ecs-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":null}],"scale_in_cooldown":null,"scale_out_cooldown":null,"target_value":80}]},"sensitive_values":{"alarm_arns":[],"predictive_scaling_policy_configuration":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}},{"address":"aws_appautoscaling_policy.ecs_target_memory","mode":"managed","type":"aws_appautoscaling_policy","name":"ecs_target_memory","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"application-scaling-policy-memory","policy_type":"TargetTrackingScaling","predictive_scaling_policy_configuration":[],"region":"us-east-1","resource_id":"service/franklin-ecs-cluster/franklin-ecs-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageMemoryUtilization","resource_label":null}],"scale_in_cooldown":null,"scale_out_cooldown":null,"target_value":80}]},"sensitive_values":{"alarm_arns":[],"predictive_scaling_policy_configuration":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}},{"address":"aws_appautoscaling_target.ecs_target","mode":"managed","type":"aws_appautoscaling_target","name":"ecs_target","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"max_capacity":5,"min_capacity":1,"region":"us-east-1","resource_id":"service/franklin-ecs-cluster/franklin-ecs-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","tags":null},"sensitive_values":{"suspended_state":[],"tags_all":{}}},{"address":"aws_autoscaling_group.asg","mode":"managed","type":"aws_autoscaling_group","name":"asg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"capacity_rebalance":null,"context":null,"default_instance_warmup":null,"desired_capacity":1,"desired_capacity_type":null,"enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_configuration":null,"launch_template":[{"version":"$Latest"}],"max_instance_lifetime":null,"max_size":3,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"placement_group":null,"protect_from_scale_in":false,"region":"us-east-1","suspended_processes":null,"tag":[],"termination_policies":null,"timeouts":null,"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"sensitive_values":{"availability_zone_distribution":[],"availability_zones":[],"capacity_reservation_specification":[],"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"tag":[],"target_group_arns":[],"traffic_source":[],"vpc_zone_identifier":[],"warm_pool":[]}},{"address":"aws_ecs_capacity_provider.ecs_ec2_capacity_provider","mode":"managed","type":"aws_ecs_capacity_provider","name":"ecs_ec2_capacity_provider","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_scaling_group_provider":[{"managed_scaling":[{"maximum_scaling_step_size":1,"minimum_scaling_step_size":1,"status":"ENABLED","target_capacity":100}]}],"cluster":null,"managed_instances_provider":[],"name":"franklin-ec2-capacity-provider","region":"us-east-1","tags":null},"sensitive_values":{"auto_scaling_group_provider":[{"managed_scaling":[{}]}],"managed_instances_provider":[],"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_ecs_cluster.ecs","mode":"managed","type":"aws_ecs_cluster","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"configuration":[],"name":"franklin-ecs-cluster","region":"us-east-1","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":null},"sensitive_values":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags_all":{}}},{"address":"aws_ecs_cluster_capacity_providers.ecs_capacity","mode":"managed","type":"aws_ecs_cluster_capacity_providers","name":"ecs_capacity","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"capacity_providers":["franklin-ec2-capacity-provider"],"cluster_name":"franklin-ecs-cluster","default_capacity_provider_strategy":[{"base":1,"capacity_provider":"franklin-ec2-capacity-provider","weight":100}],"region":"us-east-1"},"sensitive_values":{"capacity_providers":[false],"default_capacity_provider_strategy":[{}]}},{"address":"aws_ecs_service.hello_world_service","mode":"managed","type":"aws_ecs_service","name":"hello_world_service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"load_balancer":[{"advanced_configuration":[],"container_name":"hello-world","container_port":80,"elb_name":""}],"name":"franklin-ecs-service","network_configuration":[],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"region":"us-east-1","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"sigint_rollback":null,"tags":null,"timeouts":null,"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_configuration":[],"deployment_controller":[],"load_balancer":[{"advanced_configuration":[]}],"network_configuration":[],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}},{"address":"aws_ecs_task_definition.hello_world","mode":"managed","type":"aws_ecs_task_definition","name":"hello_world","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"container_definitions":"[{\"cpu\":16,\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost/ || exit 1\"],\"interval\":30},\"image\":\"obbiearms/hello-world:latest\",\"memory\":128,\"name\":\"hello-world\",\"portMappings\":[{\"containerPort\":80,\"hostPort\":0}]}]","cpu":null,"ephemeral_storage":[],"family":"franklin-hello-world","ipc_mode":null,"memory":null,"pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"region":"us-east-1","requires_compatibilities":null,"runtime_platform":[],"skip_destroy":false,"tags":null,"task_role_arn":null,"track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"placement_constraints":[],"proxy_configuration":[],"runtime_platform":[],"tags_all":{},"volume":[]}},{"address":"aws_iam_instance_profile.asg_iam_instance_profile","mode":"managed","type":"aws_iam_instance_profile","name":"asg_iam_instance_profile","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"franklin-asg-instance-profile","path":"/","role":"franklin-asg-role","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_iam_policy_attachment.ecs_ec2_attachment","mode":"managed","type":"aws_iam_policy_attachment","name":"ecs_ec2_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"groups":null,"name":"franklin-asg-ec2-ecs-attachment","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceforEC2Role","roles":["franklin-asg-role"],"users":null},"sensitive_values":{"roles":[false]}},{"address":"aws_iam_role.asg_iam_role","mode":"managed","type":"aws_iam_role","name":"asg_iam_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"franklin-asg-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null}},{"address":"aws_iam_role.ecs_autoscaling","mode":"managed","type":"aws_iam_role","name":"ecs_autoscaling","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"application-autoscaling.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"franklin-ecs-autoscaling-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null}},{"address":"aws_iam_role.ecs_tasks_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_tasks_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"franklin-ecs-task-execution-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"name":null}},{"address":"aws_iam_role_policy_attachment.ecs_autoscaling","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_autoscaling","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceAutoscaleRole"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_iam_role_policy_attachment.ecs_tasks_execution_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_tasks_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"franklin-ecs-task-execution-role"},"sensitive_values":{},"identity_schema_version":0,"identity":{"account_id":null,"policy_arn":null,"role":null}},{"address":"aws_launch_template.asg_launch_template","mode":"managed","type":"aws_launch_template","name":"asg_launch_template","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"description":null,"disable_api_stop":null,"disable_api_termination":null,"ebs_optimized":null,"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":null,"name":"franklin-asg-instance-profile"}],"image_id":"ami-0a5e7c9183d1cea27","instance_initiated_shutdown_behavior":null,"instance_market_options":[],"instance_requirements":[],"instance_type":"t3a.micro","kernel_id":null,"key_name":null,"license_specification":[],"maintenance_options":[],"metadata_options":[{"http_tokens":"required"}],"monitoring":[],"name_prefix":"franklin","network_interfaces":[{"associate_carrier_ip_address":null,"associate_public_ip_address":"false","connection_tracking_specification":[],"delete_on_termination":null,"description":null,"device_index":null,"ena_srd_specification":[],"interface_type":null,"ipv4_address_count":null,"ipv4_addresses":null,"ipv4_prefix_count":null,"ipv4_prefixes":null,"ipv6_address_count":null,"ipv6_addresses":null,"ipv6_prefix_count":null,"ipv6_prefixes":null,"network_card_index":null,"network_interface_id":null,"primary_ipv6":null,"private_ip_address":null,"subnet_id":null}],"placement":[],"private_dns_name_options":[],"ram_disk_id":null,"region":"us-east-1","security_group_names":null,"tag_specifications":[],"tags":null,"update_default_version":null,"user_data":"IyEvYmluL3NoCmVjaG8gRUNTX0NMVVNURVI9ZnJhbmtsaW4tZWNzLWNsdXN0ZXIgPj4gL2V0Yy9lY3MvZWNzLmNvbmZpZw==","vpc_security_group_ids":null},"sensitive_values":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[{}],"monitoring":[],"network_interfaces":[{"connection_tracking_specification":[],"ena_srd_specification":[],"security_groups":[]}],"placement":[],"private_dns_name_options":[],"tag_specifications":[],"tags_all":{}}},{"address":"aws_lb.hello_alb","mode":"managed","type":"aws_lb","name":"hello_alb","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":true,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"health_check_logs":[],"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"franklin-alb","preserve_host_header":false,"region":"us-east-1","tags":null,"timeouts":null,"xff_header_processing_mode":"append"},"sensitive_values":{"access_logs":[],"connection_logs":[],"health_check_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_lb_listener.hello_listener","mode":"managed","type":"aws_lb_listener","name":"hello_listener","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"jwt_validation":[],"redirect":[],"type":"forward"}],"port":80,"protocol":"HTTP","region":"us-east-1","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"jwt_validation":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_lb_target_group.hello_alb_tg","mode":"managed","type":"aws_lb_target_group","name":"hello_alb_tg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"franklin-alb-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"region":"us-east-1","slow_start":0,"tags":null,"target_control_port":null,"target_type":"instance","vpc_id":"compute"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]},"identity_schema_version":0,"identity":{"arn":null}},{"address":"aws_security_group.alb_sg","mode":"managed","type":"aws_security_group","name":"alb_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Control access to the public facing ALB","name":"franklin-alb-sg","region":"us-east-1","revoke_rules_on_delete":false,"tags":null,"timeouts":null,"vpc_id":"compute"},"sensitive_values":{"egress":[],"ingress":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_security_group.ec2_sg","mode":"managed","type":"aws_security_group","name":"ec2_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Control access for EC2s in ECS cluster","name":"franklin-ecs-sg","region":"us-east-1","revoke_rules_on_delete":false,"tags":null,"timeouts":null,"vpc_id":"compute"},"sensitive_values":{"egress":[],"ingress":[],"tags_all":{}},"identity_schema_version":0,"identity":{"account_id":null,"id":null,"region":null}},{"address":"aws_vpc_security_group_egress_rule.all_egress","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"all_egress","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_egress_rule.ec2_all_egress","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"ec2_all_egress","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":"Allow all egress","from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_ingress_rule.alb_ingress_to_ec2","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"alb_ingress_to_ec2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":null,"cidr_ipv6":null,"description":"Allow all ingress traffic from ALB Security Group","from_port":1,"ip_protocol":"tcp","prefix_list_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":65535},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_ingress_rule.http_ingress","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"http_ingress","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":"Allow HTTP traffic ingress","from_port":80,"ip_protocol":"tcp","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":80},"sensitive_values":{"tags_all":{}}},{"address":"aws_vpc_security_group_ingress_rule.https_ingress","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"https_ingress","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":"Allow HTTPS traffic ingress","from_port":443,"ip_protocol":"tcp","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":443},"sensitive_values":{"tags_all":{}}}]}},"resource_changes":[{"address":"aws_appautoscaling_policy.ecs_target_cpu","mode":"managed","type":"aws_appautoscaling_policy","name":"ecs_target_cpu","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"franklin-scaling-policy-cpu","policy_type":"TargetTrackingScaling","predictive_scaling_policy_configuration":[],"region":"us-east-1","resource_id":"service/franklin-ecs-cluster/franklin-ecs-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageCPUUtilization","resource_label":null}],"scale_in_cooldown":null,"scale_out_cooldown":null,"target_value":80}]},"after_unknown":{"alarm_arns":true,"arn":true,"id":true,"predictive_scaling_policy_configuration":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"before_sensitive":false,"after_sensitive":{"alarm_arns":[],"predictive_scaling_policy_configuration":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}}},{"address":"aws_appautoscaling_policy.ecs_target_memory","mode":"managed","type":"aws_appautoscaling_policy","name":"ecs_target_memory","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"application-scaling-policy-memory","policy_type":"TargetTrackingScaling","predictive_scaling_policy_configuration":[],"region":"us-east-1","resource_id":"service/franklin-ecs-cluster/franklin-ecs-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"disable_scale_in":false,"predefined_metric_specification":[{"predefined_metric_type":"ECSServiceAverageMemoryUtilization","resource_label":null}],"scale_in_cooldown":null,"scale_out_cooldown":null,"target_value":80}]},"after_unknown":{"alarm_arns":true,"arn":true,"id":true,"predictive_scaling_policy_configuration":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]},"before_sensitive":false,"after_sensitive":{"alarm_arns":[],"predictive_scaling_policy_configuration":[],"step_scaling_policy_configuration":[],"target_tracking_scaling_policy_configuration":[{"customized_metric_specification":[],"predefined_metric_specification":[{}]}]}}},{"address":"aws_appautoscaling_target.ecs_target","mode":"managed","type":"aws_appautoscaling_target","name":"ecs_target","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"max_capacity":5,"min_capacity":1,"region":"us-east-1","resource_id":"service/franklin-ecs-cluster/franklin-ecs-service","scalable_dimension":"ecs:service:DesiredCount","service_namespace":"ecs","tags":null},"after_unknown":{"arn":true,"id":true,"role_arn":true,"suspended_state":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"suspended_state":[],"tags_all":{}}}},{"address":"aws_autoscaling_group.asg","mode":"managed","type":"aws_autoscaling_group","name":"asg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"capacity_rebalance":null,"context":null,"default_instance_warmup":null,"desired_capacity":1,"desired_capacity_type":null,"enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_configuration":null,"launch_template":[{"version":"$Latest"}],"max_instance_lifetime":null,"max_size":3,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"placement_group":null,"protect_from_scale_in":false,"region":"us-east-1","suspended_processes":null,"tag":[],"termination_policies":null,"timeouts":null,"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"after_unknown":{"arn":true,"availability_zone_distribution":true,"availability_zones":true,"capacity_reservation_specification":true,"default_cooldown":true,"health_check_type":true,"id":true,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[{"id":true,"name":true}],"load_balancers":true,"mixed_instances_policy":true,"name":true,"name_prefix":true,"predicted_capacity":true,"service_linked_role_arn":true,"tag":[],"target_group_arns":true,"traffic_source":true,"vpc_zone_identifier":true,"warm_pool":[],"warm_pool_size":true},"before_sensitive":false,"after_sensitive":{"availability_zone_distribution":[],"availability_zones":[],"capacity_reservation_specification":[],"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"tag":[],"target_group_arns":[],"traffic_source":[],"vpc_zone_identifier":[],"warm_pool":[]}}},{"address":"aws_ecs_capacity_provider.ecs_ec2_capacity_provider","mode":"managed","type":"aws_ecs_capacity_provider","name":"ecs_ec2_capacity_provider","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_scaling_group_provider":[{"managed_scaling":[{"maximum_scaling_step_size":1,"minimum_scaling_step_size":1,"status":"ENABLED","target_capacity":100}]}],"cluster":null,"managed_instances_provider":[],"name":"franklin-ec2-capacity-provider","region":"us-east-1","tags":null},"after_unknown":{"arn":true,"auto_scaling_group_provider":[{"auto_scaling_group_arn":true,"managed_draining":true,"managed_scaling":[{"instance_warmup_period":true}],"managed_termination_protection":true}],"id":true,"managed_instances_provider":[],"tags_all":true},"before_sensitive":false,"after_sensitive":{"auto_scaling_group_provider":[{"managed_scaling":[{}]}],"managed_instances_provider":[],"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_ecs_cluster.ecs","mode":"managed","type":"aws_ecs_cluster","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"configuration":[],"name":"franklin-ecs-cluster","region":"us-east-1","service_connect_defaults":[],"setting":[{"name":"containerInsights","value":"enabled"}],"tags":null},"after_unknown":{"arn":true,"configuration":[],"id":true,"service_connect_defaults":[],"setting":[{}],"tags_all":true},"before_sensitive":false,"after_sensitive":{"configuration":[],"service_connect_defaults":[],"setting":[{}],"tags_all":{}}}},{"address":"aws_ecs_cluster_capacity_providers.ecs_capacity","mode":"managed","type":"aws_ecs_cluster_capacity_providers","name":"ecs_capacity","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"capacity_providers":["franklin-ec2-capacity-provider"],"cluster_name":"franklin-ecs-cluster","default_capacity_provider_strategy":[{"base":1,"capacity_provider":"franklin-ec2-capacity-provider","weight":100}],"region":"us-east-1"},"after_unknown":{"capacity_providers":[false],"default_capacity_provider_strategy":[{}],"id":true},"before_sensitive":false,"after_sensitive":{"capacity_providers":[false],"default_capacity_provider_strategy":[{}]}}},{"address":"aws_ecs_service.hello_world_service","mode":"managed","type":"aws_ecs_service","name":"hello_world_service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"load_balancer":[{"advanced_configuration":[],"container_name":"hello-world","container_port":80,"elb_name":""}],"name":"franklin-ecs-service","network_configuration":[],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"region":"us-east-1","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"sigint_rollback":null,"tags":null,"timeouts":null,"volume_configuration":[],"vpc_lattice_configurations":[],"wait_for_steady_state":false},"after_unknown":{"alarms":[],"arn":true,"availability_zone_rebalancing":true,"capacity_provider_strategy":[],"cluster":true,"deployment_circuit_breaker":[],"deployment_configuration":true,"deployment_controller":[],"iam_role":true,"id":true,"launch_type":true,"load_balancer":[{"advanced_configuration":[],"target_group_arn":true}],"network_configuration":[],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":true,"service_connect_configuration":[],"service_registries":[],"tags_all":true,"task_definition":true,"triggers":true,"volume_configuration":[],"vpc_lattice_configurations":[]},"before_sensitive":false,"after_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_configuration":[],"deployment_controller":[],"load_balancer":[{"advanced_configuration":[]}],"network_configuration":[],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags_all":{},"triggers":{},"volume_configuration":[],"vpc_lattice_configurations":[]}}},{"address":"aws_ecs_task_definition.hello_world","mode":"managed","type":"aws_ecs_task_definition","name":"hello_world","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"container_definitions":"[{\"cpu\":16,\"essential\":true,\"healthCheck\":{\"command\":[\"CMD-SHELL\",\"curl -f http://localhost/ || exit 1\"],\"interval\":30},\"image\":\"obbiearms/hello-world:latest\",\"memory\":128,\"name\":\"hello-world\",\"portMappings\":[{\"containerPort\":80,\"hostPort\":0}]}]","cpu":null,"ephemeral_storage":[],"family":"franklin-hello-world","ipc_mode":null,"memory":null,"pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"region":"us-east-1","requires_compatibilities":null,"runtime_platform":[],"skip_destroy":false,"tags":null,"task_role_arn":null,"track_latest":false,"volume":[]},"after_unknown":{"arn":true,"arn_without_revision":true,"enable_fault_injection":true,"ephemeral_storage":[],"execution_role_arn":true,"id":true,"network_mode":true,"placement_constraints":[],"proxy_configuration":[],"revision":true,"runtime_platform":[],"tags_all":true,"volume":[]},"before_sensitive":false,"after_sensitive":{"ephemeral_storage":[],"placement_constraints":[],"proxy_configuration":[],"runtime_platform":[],"tags_all":{},"volume":[]}}},{"address":"aws_iam_instance_profile.asg_iam_instance_profile","mode":"managed","type":"aws_iam_instance_profile","name":"asg_iam_instance_profile","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"franklin-asg-instance-profile","path":"/","role":"franklin-asg-role","tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_iam_policy_attachment.ecs_ec2_attachment","mode":"managed","type":"aws_iam_policy_attachment","name":"ecs_ec2_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"groups":null,"name":"franklin-asg-ec2-ecs-attachment","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceforEC2Role","roles":["franklin-asg-role"],"users":null},"after_unknown":{"id":true,"roles":[false]},"before_sensitive":false,"after_sensitive":{"roles":[false]}}},{"address":"aws_iam_role.asg_iam_role","mode":"managed","type":"aws_iam_role","name":"asg_iam_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"franklin-asg-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"after_identity":{"account_id":null,"name":null}}},{"address":"aws_iam_role.ecs_autoscaling","mode":"managed","type":"aws_iam_role","name":"ecs_autoscaling","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"application-autoscaling.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"franklin-ecs-autoscaling-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"after_identity":{"account_id":null,"name":null}}},{"address":"aws_iam_role.ecs_tasks_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_tasks_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"franklin-ecs-task-execution-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}},"after_identity":{"account_id":null,"name":null}}},{"address":"aws_iam_role_policy_attachment.ecs_autoscaling","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_autoscaling","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceAutoscaleRole"},"after_unknown":{"id":true,"role":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_iam_role_policy_attachment.ecs_tasks_execution_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_tasks_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy","role":"franklin-ecs-task-execution-role"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{},"after_identity":{"account_id":null,"policy_arn":null,"role":null}}},{"address":"aws_launch_template.asg_launch_template","mode":"managed","type":"aws_launch_template","name":"asg_launch_template","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"description":null,"disable_api_stop":null,"disable_api_termination":null,"ebs_optimized":null,"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":null,"name":"franklin-asg-instance-profile"}],"image_id":"ami-0a5e7c9183d1cea27","instance_initiated_shutdown_behavior":null,"instance_market_options":[],"instance_requirements":[],"instance_type":"t3a.micro","kernel_id":null,"key_name":null,"license_specification":[],"maintenance_options":[],"metadata_options":[{"http_tokens":"required"}],"monitoring":[],"name_prefix":"franklin","network_interfaces":[{"associate_carrier_ip_address":null,"associate_public_ip_address":"false","connection_tracking_specification":[],"delete_on_termination":null,"description":null,"device_index":null,"ena_srd_specification":[],"interface_type":null,"ipv4_address_count":null,"ipv4_addresses":null,"ipv4_prefix_count":null,"ipv4_prefixes":null,"ipv6_address_count":null,"ipv6_addresses":null,"ipv6_prefix_count":null,"ipv6_prefixes":null,"network_card_index":null,"network_interface_id":null,"primary_ipv6":null,"private_ip_address":null,"subnet_id":null}],"placement":[],"private_dns_name_options":[],"ram_disk_id":null,"region":"us-east-1","security_group_names":null,"tag_specifications":[],"tags":null,"update_default_version":null,"user_data":"IyEvYmluL3NoCmVjaG8gRUNTX0NMVVNURVI9ZnJhbmtsaW4tZWNzLWNsdXN0ZXIgPj4gL2V0Yy9lY3MvZWNzLmNvbmZpZw==","vpc_security_group_ids":null},"after_unknown":{"arn":true,"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":true,"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"id":true,"instance_market_options":[],"instance_requirements":[],"latest_version":true,"license_specification":[],"maintenance_options":[],"metadata_options":[{"http_endpoint":true,"http_protocol_ipv6":true,"http_put_response_hop_limit":true,"instance_metadata_tags":true}],"monitoring":[],"name":true,"network_interfaces":[{"connection_tracking_specification":[],"ena_srd_specification":[],"security_groups":true}],"placement":[],"private_dns_name_options":[],"tag_specifications":[],"tags_all":true},"before_sensitive":false,"after_sensitive":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[{}],"monitoring":[],"network_interfaces":[{"connection_tracking_specification":[],"ena_srd_specification":[],"security_groups":[]}],"placement":[],"private_dns_name_options":[],"tag_specifications":[],"tags_all":{}}}},{"address":"aws_lb.hello_alb","mode":"managed","type":"aws_lb","name":"hello_alb","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":true,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"enable_zonal_shift":false,"health_check_logs":[],"idle_timeout":60,"internal":false,"ipam_pools":[],"load_balancer_type":"application","minimum_load_balancer_capacity":[],"name":"franklin-alb","preserve_host_header":false,"region":"us-east-1","tags":null,"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"connection_logs":[],"dns_name":true,"enforce_security_group_inbound_rules_on_private_link_traffic":true,"health_check_logs":[],"id":true,"ip_address_type":true,"ipam_pools":[],"minimum_load_balancer_capacity":[],"name_prefix":true,"secondary_ips_auto_assigned_per_subnet":true,"security_groups":true,"subnet_mapping":true,"subnets":true,"tags_all":true,"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"connection_logs":[],"health_check_logs":[],"ipam_pools":[],"minimum_load_balancer_capacity":[],"security_groups":[],"subnet_mapping":[],"subnets":[],"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_lb_listener.hello_listener","mode":"managed","type":"aws_lb_listener","name":"hello_listener","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"jwt_validation":[],"redirect":[],"type":"forward"}],"port":80,"protocol":"HTTP","region":"us-east-1","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"jwt_validation":[],"order":true,"redirect":[],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"routing_http_request_x_amzn_mtls_clientcert_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_issuer_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_leaf_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_serial_number_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_subject_header_name":true,"routing_http_request_x_amzn_mtls_clientcert_validity_header_name":true,"routing_http_request_x_amzn_tls_cipher_suite_header_name":true,"routing_http_request_x_amzn_tls_version_header_name":true,"routing_http_response_access_control_allow_credentials_header_value":true,"routing_http_response_access_control_allow_headers_header_value":true,"routing_http_response_access_control_allow_methods_header_value":true,"routing_http_response_access_control_allow_origin_header_value":true,"routing_http_response_access_control_expose_headers_header_value":true,"routing_http_response_access_control_max_age_header_value":true,"routing_http_response_content_security_policy_header_value":true,"routing_http_response_server_enabled":true,"routing_http_response_strict_transport_security_header_value":true,"routing_http_response_x_content_type_options_header_value":true,"routing_http_response_x_frame_options_header_value":true,"ssl_policy":true,"tags_all":true,"tcp_idle_timeout_seconds":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"jwt_validation":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}},"after_identity":{"arn":null}}},{"address":"aws_lb_target_group.hello_alb_tg","mode":"managed","type":"aws_lb_target_group","name":"hello_alb_tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":3,"interval":30,"matcher":"200","path":"/","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"franklin-alb-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"region":"us-east-1","slow_start":0,"tags":null,"target_control_port":null,"target_type":"instance","vpc_id":"compute"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags_all":true,"target_failover":true,"target_group_health":true,"target_health_state":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]},"after_identity":{"arn":null}}},{"address":"aws_security_group.alb_sg","mode":"managed","type":"aws_security_group","name":"alb_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Control access to the public facing ALB","name":"franklin-alb-sg","region":"us-east-1","revoke_rules_on_delete":false,"tags":null,"timeouts":null,"vpc_id":"compute"},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_security_group.ec2_sg","mode":"managed","type":"aws_security_group","name":"ec2_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Control access for EC2s in ECS cluster","name":"franklin-ecs-sg","region":"us-east-1","revoke_rules_on_delete":false,"tags":null,"timeouts":null,"vpc_id":"compute"},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags_all":{}},"after_identity":{"account_id":null,"id":null,"region":null}}},{"address":"aws_vpc_security_group_egress_rule.all_egress","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"all_egress","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":null,"from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_egress_rule.ec2_all_egress","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"ec2_all_egress","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":"Allow all egress","from_port":null,"ip_protocol":"-1","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":null},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_ingress_rule.alb_ingress_to_ec2","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"alb_ingress_to_ec2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":null,"cidr_ipv6":null,"description":"Allow all ingress traffic from ALB Security Group","from_port":1,"ip_protocol":"tcp","prefix_list_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":65535},"after_unknown":{"arn":true,"id":true,"referenced_security_group_id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_ingress_rule.http_ingress","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"http_ingress","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":"Allow HTTP traffic ingress","from_port":80,"ip_protocol":"tcp","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":80},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_vpc_security_group_ingress_rule.https_ingress","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"https_ingress","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_ipv4":"0.0.0.0/0","cidr_ipv6":null,"description":"Allow HTTPS traffic ingress","from_port":443,"ip_protocol":"tcp","prefix_list_id":null,"referenced_security_group_id":null,"region":"us-east-1","tags":null,"tags_all":{},"to_port":443},"after_unknown":{"arn":true,"id":true,"security_group_id":true,"security_group_rule_id":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}}],"output_changes":{"alb_dns":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.13.5","values":{"root_module":{"resources":[{"address":"data.aws_ami.asg_ami","mode":"data","type":"aws_ami","name":"asg_ami","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allow_unsafe_filter":null,"architecture":"x86_64","arn":"arn:aws:ec2:us-east-1::image/ami-0a5e7c9183d1cea27","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"false","encrypted":"false","iops":"0","snapshot_id":"snap-b9e9157f09ebfeefc","throughput":"0","volume_initialization_rate":"0","volume_size":"15","volume_type":"standard"},"no_device":"","virtual_name":""}],"boot_mode":"uefi","creation_date":"2026-01-25T14:55:28.000Z","deprecation_time":"","description":"Amazon Linux AMI 2.0.20220209 x86_64 ECS HVM GP2","ena_support":false,"executable_users":null,"filter":null,"hypervisor":"xen","id":"ami-0a5e7c9183d1cea27","image_id":"ami-0a5e7c9183d1cea27","image_location":"","image_owner_alias":"amazon","image_type":"machine","imds_support":"","include_deprecated":false,"kernel_id":"","last_launched_time":"","most_recent":true,"name":"amzn2-ami-ecs-hvm-2.0.20220209-x86_64-ebs","name_regex":"amzn2-ami-ecs-hvm.+x86_64.+","owner_id":"591542846629","owners":["591542846629"],"platform":"","platform_details":"","product_codes":[],"public":true,"ramdisk_id":"","region":"us-east-1","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-b9e9157f09ebfeefc","sriov_net_support":"","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"timeouts":null,"tpm_support":"","uefi_data":null,"usage_operation":"","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}},{"address":"data.aws_iam_policy_document.ecs_autoscaling_policy","mode":"data","type":"aws_iam_policy_document","name":"ecs_autoscaling_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3716440655","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"application-autoscaling.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"application-autoscaling.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["application-autoscaling.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_iam_policy_document.ecs_tasks_execution_role","mode":"data","type":"aws_iam_policy_document","name":"ecs_tasks_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1077804475","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ecs-tasks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_iam_policy_document.instance_assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"instance_assume_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2851119427","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","minified_json":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}]}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"\u003e= 5.0.0","expressions":{"access_key":{"constant_value":"mock"},"endpoints":[{"apigateway":{"constant_value":"http://localhost:4566"},"apigatewayv2":{"constant_value":"http://localhost:4566"},"cloudwatch":{"constant_value":"http://localhost:4566"},"cloudwatchevents":{"constant_value":"http://localhost:4566"},"dynamodb":{"constant_value":"http://localhost:4566"},"ec2":{"constant_value":"http://localhost:4566"},"ecr":{"constant_value":"http://localhost:4566"},"ecrpublic":{"constant_value":"http://localhost:4566"},"ecs":{"constant_value":"http://localhost:4566"},"efs":{"constant_value":"http://localhost:4566"},"iam":{"constant_value":"http://localhost:4566"},"kinesis":{"constant_value":"http://localhost:4566"},"kms":{"constant_value":"http://localhost:4566"},"lambda":{"constant_value":"http://localhost:4566"},"logs":{"constant_value":"http://localhost:4566"},"route53":{"constant_value":"http://localhost:4566"},"s3":{"constant_value":"http://localhost:4566"},"s3control":{"constant_value":"http://localhost:4566"},"secretsmanager":{"constant_value":"http://localhost:4566"},"sns":{"constant_value":"http://localhost:4566"},"sqs":{"constant_value":"http://localhost:4566"},"ssm":{"constant_value":"http://localhost:4566"},"sts":{"constant_value":"http://localhost:4566"}}],"region":{"constant_value":"us-east-1"},"s3_use_path_style":{"constant_value":true},"secret_key":{"constant_value":"mock"},"skip_credentials_validation":{"constant_value":true},"skip_metadata_api_check":{"constant_value":true},"skip_region_validation":{"constant_value":true},"skip_requesting_account_id":{"constant_value":true}}}},"root_module":{"outputs":{"alb_dns":{"expression":{"references":["aws_lb.hello_alb.dns_name","aws_lb.hello_alb"]},"description":"DNS name for the ALB that will serve the hello world service externally"}},"resources":[{"address":"aws_appautoscaling_policy.ecs_target_cpu","mode":"managed","type":"aws_appautoscaling_policy","name":"ecs_target_cpu","provider_config_key":"aws","expressions":{"name":{"references":["var.name"]},"policy_type":{"constant_value":"TargetTrackingScaling"},"resource_id":{"references":["aws_appautoscaling_target.ecs_target.resource_id","aws_appautoscaling_target.ecs_target"]},"scalable_dimension":{"references":["aws_appautoscaling_target.ecs_target.scalable_dimension","aws_appautoscaling_target.ecs_target"]},"service_namespace":{"references":["aws_appautoscaling_target.ecs_target.service_namespace","aws_appautoscaling_target.ecs_target"]},"target_tracking_scaling_policy_configuration":[{"predefined_metric_specification":[{"predefined_metric_type":{"constant_value":"ECSServiceAverageCPUUtilization"}}],"target_value":{"constant_value":80}}]},"schema_version":0,"depends_on":["aws_appautoscaling_target.ecs_target"]},{"address":"aws_appautoscaling_policy.ecs_target_memory","mode":"managed","type":"aws_appautoscaling_policy","name":"ecs_target_memory","provider_config_key":"aws","expressions":{"name":{"constant_value":"application-scaling-policy-memory"},"policy_type":{"constant_value":"TargetTrackingScaling"},"resource_id":{"references":["aws_appautoscaling_target.ecs_target.resource_id","aws_appautoscaling_target.ecs_target"]},"scalable_dimension":{"references":["aws_appautoscaling_target.ecs_target.scalable_dimension","aws_appautoscaling_target.ecs_target"]},"service_namespace":{"references":["aws_appautoscaling_target.ecs_target.service_namespace","aws_appautoscaling_target.ecs_target"]},"target_tracking_scaling_policy_configuration":[{"predefined_metric_specification":[{"predefined_metric_type":{"constant_value":"ECSServiceAverageMemoryUtilization"}}],"target_value":{"constant_value":80}}]},"schema_version":0,"depends_on":["aws_appautoscaling_target.ecs_target"]},{"address":"aws_appautoscaling_target.ecs_target","mode":"managed","type":"aws_appautoscaling_target","name":"ecs_target","provider_config_key":"aws","expressions":{"max_capacity":{"references":["var.max_count"]},"min_capacity":{"references":["var.min_count"]},"resource_id":{"references":["aws_ecs_cluster.ecs.name","aws_ecs_cluster.ecs","aws_ecs_service.hello_world_service.name","aws_ecs_service.hello_world_service"]},"role_arn":{"references":["aws_iam_role.ecs_autoscaling.arn","aws_iam_role.ecs_autoscaling"]},"scalable_dimension":{"constant_value":"ecs:service:DesiredCount"},"service_namespace":{"constant_value":"ecs"}},"schema_version":0},{"address":"aws_autoscaling_group.asg","mode":"managed","type":"aws_autoscaling_group","name":"asg","provider_config_key":"aws","expressions":{"desired_capacity":{"references":["var.desired_ec2_count"]},"launch_template":[{"id":{"references":["aws_launch_template.asg_launch_template.id","aws_launch_template.asg_launch_template"]},"version":{"constant_value":"$Latest"}}],"max_size":{"references":["var.max_ec2_count"]},"min_size":{"references":["var.min_ec2_count"]},"vpc_zone_identifier":{"references":["var.vpc_private_subnets"]}},"schema_version":1},{"address":"aws_ecs_capacity_provider.ecs_ec2_capacity_provider","mode":"managed","type":"aws_ecs_capacity_provider","name":"ecs_ec2_capacity_provider","provider_config_key":"aws","expressions":{"auto_scaling_group_provider":[{"auto_scaling_group_arn":{"references":["aws_autoscaling_group.asg.arn","aws_autoscaling_group.asg"]},"managed_scaling":[{"maximum_scaling_step_size":{"constant_value":1},"minimum_scaling_step_size":{"constant_value":1},"status":{"constant_value":"ENABLED"},"target_capacity":{"constant_value":100}}]}],"name":{"references":["var.name"]}},"schema_version":0},{"address":"aws_ecs_cluster.ecs","mode":"managed","type":"aws_ecs_cluster","name":"ecs","provider_config_key":"aws","expressions":{"name":{"references":["var.name"]},"setting":[{"name":{"constant_value":"containerInsights"},"value":{"constant_value":"enabled"}}],"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_ecs_cluster_capacity_providers.ecs_capacity","mode":"managed","type":"aws_ecs_cluster_capacity_providers","name":"ecs_capacity","provider_config_key":"aws","expressions":{"capacity_providers":{"references":["aws_ecs_capacity_provider.ecs_ec2_capacity_provider.name","aws_ecs_capacity_provider.ecs_ec2_capacity_provider"]},"cluster_name":{"references":["aws_ecs_cluster.ecs.name","aws_ecs_cluster.ecs"]},"default_capacity_provider_strategy":[{"base":{"constant_value":1},"capacity_provider":{"references":["aws_ecs_capacity_provider.ecs_ec2_capacity_provider.name","aws_ecs_capacity_provider.ecs_ec2_capacity_provider"]},"weight":{"constant_value":100}}]},"schema_version":0},{"address":"aws_ecs_service.hello_world_service","mode":"managed","type":"aws_ecs_service","name":"hello_world_service","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.ecs.id","aws_ecs_cluster.ecs"]},"desired_count":{"references":["var.desired_count"]},"load_balancer":[{"container_name":{"constant_value":"hello-world"},"container_port":{"constant_value":80},"target_group_arn":{"references":["aws_lb_target_group.hello_alb_tg.arn","aws_lb_target_group.hello_alb_tg"]}}],"name":{"references":["var.name"]},"tags":{"references":["var.tags"]},"task_definition":{"references":["aws_ecs_task_definition.hello_world.arn","aws_ecs_task_definition.hello_world"]}},"schema_version":1},{"address":"aws_ecs_task_definition.hello_world","mode":"managed","type":"aws_ecs_task_definition","name":"hello_world","provider_config_key":"aws","expressions":{"container_definitions":{"references":["var.image_name"]},"execution_role_arn":{"references":["aws_iam_role.ecs_tasks_execution_role.arn","aws_iam_role.ecs_tasks_execution_role"]},"family":{"references":["var.name"]},"tags":{"references":["var.tags"]}},"schema_version":1},{"address":"aws_iam_instance_profile.asg_iam_instance_profile","mode":"managed","type":"aws_iam_instance_profile","name":"asg_iam_instance_profile","provider_config_key":"aws","expressions":{"name":{"references":["var.name"]},"role":{"references":["aws_iam_role.asg_iam_role.name","aws_iam_role.asg_iam_role"]}},"schema_version":0},{"address":"aws_iam_policy_attachment.ecs_ec2_attachment","mode":"managed","type":"aws_iam_policy_attachment","name":"ecs_ec2_attachment","provider_config_key":"aws","expressions":{"name":{"references":["var.name"]},"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceforEC2Role"},"roles":{"references":["aws_iam_role.asg_iam_role.name","aws_iam_role.asg_iam_role"]}},"schema_version":0},{"address":"aws_iam_role.asg_iam_role","mode":"managed","type":"aws_iam_role","name":"asg_iam_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.instance_assume_role_policy.json","data.aws_iam_policy_document.instance_assume_role_policy"]},"name":{"references":["var.name"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_role.ecs_autoscaling","mode":"managed","type":"aws_iam_role","name":"ecs_autoscaling","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.ecs_autoscaling_policy.json","data.aws_iam_policy_document.ecs_autoscaling_policy"]},"name":{"references":["var.name"]}},"schema_version":0},{"address":"aws_iam_role.ecs_tasks_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_tasks_execution_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.ecs_tasks_execution_role.json","data.aws_iam_policy_document.ecs_tasks_execution_role"]},"name":{"references":["var.name"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ecs_autoscaling","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_autoscaling","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonEC2ContainerServiceAutoscaleRole"},"role":{"references":["aws_iam_role.ecs_autoscaling.id","aws_iam_role.ecs_autoscaling"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ecs_tasks_execution_role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_tasks_execution_role","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"},"role":{"references":["aws_iam_role.ecs_tasks_execution_role.name","aws_iam_role.ecs_tasks_execution_role"]}},"schema_version":0},{"address":"aws_launch_template.asg_launch_template","mode":"managed","type":"aws_launch_template","name":"asg_launch_template","provider_config_key":"aws","expressions":{"iam_instance_profile":[{"name":{"references":["aws_iam_instance_profile.asg_iam_instance_profile.name","aws_iam_instance_profile.asg_iam_instance_profile"]}}],"image_id":{"references":["data.aws_ami.asg_ami.id","data.aws_ami.asg_ami"]},"instance_type":{"constant_value":"t3a.micro"},"metadata_options":[{"http_tokens":{"constant_value":"required"}}],"name_prefix":{"references":["var.name"]},"network_interfaces":[{"associate_public_ip_address":{"constant_value":false},"security_groups":{"references":["aws_security_group.ec2_sg.id","aws_security_group.ec2_sg"]}}],"tags":{"references":["var.tags"]},"user_data":{"references":["aws_ecs_cluster.ecs.name","aws_ecs_cluster.ecs"]}},"schema_version":1},{"address":"aws_lb.hello_alb","mode":"managed","type":"aws_lb","name":"hello_alb","provider_config_key":"aws","expressions":{"drop_invalid_header_fields":{"constant_value":true},"internal":{"constant_value":false},"load_balancer_type":{"constant_value":"application"},"name":{"references":["var.name"]},"security_groups":{"references":["aws_security_group.alb_sg.id","aws_security_group.alb_sg"]},"subnets":{"references":["var.vpc_public_subnets"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_lb_listener.hello_listener","mode":"managed","type":"aws_lb_listener","name":"hello_listener","provider_config_key":"aws","expressions":{"default_action":[{"target_group_arn":{"references":["aws_lb_target_group.hello_alb_tg.arn","aws_lb_target_group.hello_alb_tg"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_lb.hello_alb.arn","aws_lb.hello_alb"]},"port":{"constant_value":"80"},"protocol":{"constant_value":"HTTP"},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_lb_target_group.hello_alb_tg","mode":"managed","type":"aws_lb_target_group","name":"hello_alb_tg","provider_config_key":"aws","expressions":{"health_check":[{"healthy_threshold":{"constant_value":"3"},"interval":{"constant_value":"30"},"matcher":{"constant_value":"200"},"path":{"constant_value":"/"},"protocol":{"constant_value":"HTTP"},"timeout":{"constant_value":"5"},"unhealthy_threshold":{"constant_value":"2"}}],"name":{"references":["var.name"]},"port":{"constant_value":80},"protocol":{"constant_value":"HTTP"},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":0},{"address":"aws_security_group.alb_sg","mode":"managed","type":"aws_security_group","name":"alb_sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"Control access to the public facing ALB"},"name":{"references":["var.name"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":1},{"address":"aws_security_group.ec2_sg","mode":"managed","type":"aws_security_group","name":"ec2_sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"Control access for EC2s in ECS cluster"},"name":{"references":["var.name"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc"]}},"schema_version":1},{"address":"aws_vpc_security_group_egress_rule.all_egress","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"all_egress","provider_config_key":"aws","expressions":{"cidr_ipv4":{"references":["local.public_cidr"]},"ip_protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.alb_sg.id","aws_security_group.alb_sg"]}},"schema_version":0},{"address":"aws_vpc_security_group_egress_rule.ec2_all_egress","mode":"managed","type":"aws_vpc_security_group_egress_rule","name":"ec2_all_egress","provider_config_key":"aws","expressions":{"cidr_ipv4":{"references":["local.public_cidr"]},"description":{"constant_value":"Allow all egress"},"ip_protocol":{"constant_value":"-1"},"security_group_id":{"references":["aws_security_group.ec2_sg.id","aws_security_group.ec2_sg"]}},"schema_version":0},{"address":"aws_vpc_security_group_ingress_rule.alb_ingress_to_ec2","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"alb_ingress_to_ec2","provider_config_key":"aws","expressions":{"description":{"constant_value":"Allow all ingress traffic from ALB Security Group"},"from_port":{"constant_value":1},"ip_protocol":{"constant_value":"tcp"},"referenced_security_group_id":{"references":["aws_security_group.alb_sg.id","aws_security_group.alb_sg"]},"security_group_id":{"references":["aws_security_group.ec2_sg.id","aws_security_group.ec2_sg"]},"to_port":{"constant_value":65535}},"schema_version":0},{"address":"aws_vpc_security_group_ingress_rule.http_ingress","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"http_ingress","provider_config_key":"aws","expressions":{"cidr_ipv4":{"references":["local.public_cidr"]},"description":{"constant_value":"Allow HTTP traffic ingress"},"from_port":{"constant_value":80},"ip_protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.alb_sg.id","aws_security_group.alb_sg"]},"to_port":{"constant_value":80}},"schema_version":0},{"address":"aws_vpc_security_group_ingress_rule.https_ingress","mode":"managed","type":"aws_vpc_security_group_ingress_rule","name":"https_ingress","provider_config_key":"aws","expressions":{"cidr_ipv4":{"references":["local.public_cidr"]},"description":{"constant_value":"Allow HTTPS traffic ingress"},"from_port":{"constant_value":443},"ip_protocol":{"constant_value":"tcp"},"security_group_id":{"references":["aws_security_group.alb_sg.id","aws_security_group.alb_sg"]},"to_port":{"constant_value":443}},"schema_version":0},{"address":"data.aws_ami.asg_ami","mode":"data","type":"aws_ami","name":"asg_ami","provider_config_key":"aws","expressions":{"most_recent":{"constant_value":true},"name_regex":{"constant_value":"amzn2-ami-ecs-hvm.+x86_64.+"},"owners":{"constant_value":["591542846629"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.ecs_autoscaling_policy","mode":"data","type":"aws_iam_policy_document","name":"ecs_autoscaling_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["application-autoscaling.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.ecs_tasks_execution_role","mode":"data","type":"aws_iam_policy_document","name":"ecs_tasks_execution_role","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ecs-tasks.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.instance_assume_role_policy","mode":"data","type":"aws_iam_policy_document","name":"instance_assume_role_policy","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0}],"variables":{"desired_count":{"default":1,"description":"Desired container count for hello world service"},"desired_ec2_count":{"default":1,"description":"Desired EC2 count for hello world ASG"},"image_name":{"default":"obbiearms/hello-world:latest","description":"Docker respository + tag used as task"},"max_count":{"default":5,"description":"Max container count for hello world service"},"max_ec2_count":{"default":3,"description":"Max EC2 count for hello world ASG"},"min_count":{"default":1,"description":"Minimum container count for hello world service"},"min_ec2_count":{"default":1,"description":"Minimum EC2 count for hello world ASG"},"name":{"default":"franklin","description":"Name to apply to resources"},"tags":{"default":{},"description":"Tags to apply to created resources."},"vpc":{"description":"VPC ID for the VPC this compute is running in"},"vpc_private_subnets":{"description":"Private subnets for the VPC the compute is running in"},"vpc_public_subnets":{"description":"Public subnets for the VPC the compute is running in"}}}},"relevant_attributes":[{"resource":"aws_appautoscaling_target.ecs_target","attribute":["scalable_dimension"]},{"resource":"data.aws_iam_policy_document.instance_assume_role_policy","attribute":["json"]},{"resource":"aws_iam_instance_profile.asg_iam_instance_profile","attribute":["name"]},{"resource":"aws_ecs_cluster.ecs","attribute":["name"]},{"resource":"aws_ecs_service.hello_world_service","attribute":["name"]},{"resource":"aws_iam_role.ecs_autoscaling","attribute":["arn"]},{"resource":"aws_ecs_capacity_provider.ecs_ec2_capacity_provider","attribute":["name"]},{"resource":"aws_launch_template.asg_launch_template","attribute":["id"]},{"resource":"aws_lb.hello_alb","attribute":["dns_name"]},{"resource":"data.aws_iam_policy_document.ecs_autoscaling_policy","attribute":["json"]},{"resource":"data.aws_iam_policy_document.ecs_tasks_execution_role","attribute":["json"]},{"resource":"aws_iam_role.ecs_tasks_execution_role","attribute":["name"]},{"resource":"aws_appautoscaling_target.ecs_target","attribute":["resource_id"]},{"resource":"aws_ecs_task_definition.hello_world","attribute":["arn"]},{"resource":"aws_iam_role.ecs_tasks_execution_role","attribute":["arn"]},{"resource":"aws_security_group.alb_sg","attribute":["id"]},{"resource":"data.aws_ami.asg_ami","attribute":["id"]},{"resource":"aws_appautoscaling_target.ecs_target","attribute":["service_namespace"]},{"resource":"aws_iam_role.asg_iam_role","attribute":["name"]},{"resource":"aws_security_group.ec2_sg","attribute":["id"]},{"resource":"aws_iam_role.ecs_autoscaling","attribute":["id"]},{"resource":"aws_autoscaling_group.asg","attribute":["arn"]},{"resource":"aws_lb.hello_alb","attribute":["arn"]},{"resource":"aws_ecs_cluster.ecs","attribute":["id"]},{"resource":"aws_lb_target_group.hello_alb_tg","attribute":["arn"]}],"timestamp":"2026-01-25T14:55:24Z","applyable":true,"complete":true,"errored":false}
